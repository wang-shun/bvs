rwt={define:function(a,b){for(var c=a.split("."),d=window,e=c[0],f=0,g=c.length-1;f<g;f++,e=c[f])d=d[e]?d[e]:d[e]={};e in d||(d[e]=b||{});return e}};var namespace=rwt.define;Error.prototype.toString&&"[object Error]"!=Error.prototype.toString()||(Error.prototype.toString=function(){return this.message});Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){null==b?b=0:0>b&&(b=Math.max(0,this.length+b));for(var c=b;c<this.length;c++)if(this[c]===a)return c;return-1});/iPad|iPhone|iPod/.test(navigator.userAgent)&&/Version\/6/.test(navigator.userAgent)&&function(a){function b(b,c,d){var e,f=d[0],h=b===g;d[0]=function(){f&&(f.apply(a,arguments),h||(delete c[e],f=null))};e=b.apply(a,d);c[e]={args:d,created:Date.now(),cb:f,id:e};return e}function c(b,c,d,e){var f=d[e];if(f){var h=b===g;c(f.id);if(!h){c=f.args[1];var k=Date.now()-f.created;0>k&&(k=0);c-=k;0>c&&(c=0);f.args[1]=c}f.args[0]=function(){f.cb&&(f.cb.apply(a,arguments),h||(delete d[e],f.cb=null))};f.created=Date.now();f.id=b.apply(a,f.args)}}var d={},e={},f=a.setTimeout,g=a.setInterval,h=a.clearTimeout,k=a.clearInterval;a.setTimeout=function(){return b(f,d,arguments)};a.setInterval=function(){return b(g,e,arguments)};a.clearTimeout=function(a){var b=d[a];b&&(delete d[a],h(b.id))};a.clearInterval=function(a){var b=e[a];b&&(delete e[a],k(b.id))};a.addEventListener("scroll",function(){for(var a in d)c(f,h,d,a);for(a in e)c(g,k,e,a)})}(window);namespace("rwt.util");rwt.util.Arrays={fromArguments:function(a){return Array.prototype.slice.call(a,0)},fromShortHand:function(a){var b=a.length;if(0===b||4<b)throw Error("Invalid number of arguments!");a=rwt.util.Arrays.copy(a);1===b?a[1]=a[2]=a[3]=a[0]:2===b?(a[2]=a[0],a[3]=a[1]):3===b&&(a[3]=a[1]);return a},contains:function(a,b){return-1!=a.indexOf(b)},copy:function(a){return a.concat()},getFirst:function(a){return a[0]},getLast:function(a){return a[a.length-1]},insertAt:function(a,b,c){a.splice(c,0,b);return a},removeAt:function(a,b){return a.splice(b,1)[0]},remove:function(a,b){var c=a.indexOf(b);if(-1!=c)return a.splice(c,1),b}};namespace("rwt.util");(function(){var a=!{toString:null}.propertyIsEnumerable("toString"),b="isPrototypeOf hasOwnProperty toLocaleString toString valueOf constructor".split(" ");rwt.util.Objects={copy:function(a){var b={},c;for(c in a)b[c]=a[c];return b},fromArray:function(a){for(var b={},c=0,f=a.length;c<f;c++)b[a[c].toString()]=!0;return b},isEmpty:function(a){for(var b in a)return!1;return!0},getKeys:function(c){var d=[],e;for(e in c)d.push(e);if(a){e=0;for(var f=b.length;e<f;e++)c.hasOwnProperty(b[e])&&d.push(b[e])}return d},getValues:function(a){var b=[],c;for(c in a)b.push(a[c]);return b},mergeWith:function(a,b,e){void 0===e&&(e=!0);for(var c in b)if(e||void 0===a[c])a[c]=b[c];return a}}})();namespace("rwt.util");rwt.util.Strings={contains:function(a,b){return-1!==a.indexOf(b)},toFirstUp:function(a){return a.charAt(0).toUpperCase()+a.substr(1)}};namespace("rwt.util");rwt.util.Numbers={isNumber:function(a){return"number"===typeof a&&!isNaN(a)},isBetween:function(a,b,c){return a>b&&a<c},limit:function(a,b,c){return"number"===typeof c&&a>c?c:"number"===typeof b&&a<b?b:a}};rwt.define("rwt.util.Functions",{returnTrue:function(){return!0},returnFalse:function(){return!1},returnNull:function(){return null},returnZero:function(){return 0},bind:function(a,b){return function(){return a.apply(b,arguments)}}});namespace("rwt.util");(function(){function a(a){a=a.toString(16).toLowerCase();return 1==a.length?"0"+a:a}var b={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:[-1,-1,-1]},c=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,d=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,e=/^rgb\(\s*([0-9]{1,3}\.{0,1}[0-9]*)\s*,\s*([0-9]{1,3}\.{0,1}[0-9]*)\s*,\s*([0-9]{1,3}\.{0,1}[0-9]*)\s*\)$/;rwt.util.Colors={isValid:function(a){return void 0!==b[a]||c.test(a)||d.test(a)||e.test(a)},stringToRgb:function(a){if(void 0!==b[a])return b[a];if(e.test(a)){a=parseInt(RegExp.$1,10);var f=parseInt(RegExp.$2,10),h=parseInt(RegExp.$3,10);return[a,f,h]}if(c.test(a))return a=17*parseInt(RegExp.$1,16),f=17*parseInt(RegExp.$2,16),h=17*parseInt(RegExp.$3,16),[a,f,h];if(d.test(a))return a=16*parseInt(RegExp.$1,16)+parseInt(RegExp.$2,16),f=16*parseInt(RegExp.$3,16)+parseInt(RegExp.$4,16),h=16*parseInt(RegExp.$5,16)+parseInt(RegExp.$6,16),[a,f,h];throw Error("Could not parse color: "+a);},rgbToRgbString:function(a){return"rgb("+a[0]+","+a[1]+","+a[2]+")"},rgbToHexString:function(b){return a(b[0])+a(b[1])+a(b[2])}}})();rwt.util.Variant={__variants:{},__init:function(){if(window.qxvariants){for(var a in qxvariants)this.__variants[a]=qxvariants[a];window.qxvariants=void 0;try{delete window.qxvariants}catch(b){}}},define:function(a,b){if(a in this.__variants)throw Error("Variant already defined: '"+a+"'");this.__variants[a]=b},get:function(a){var b=this.__variants[a];if(void 0===b)throw Error('Undefined variant "'+a+'"');return b},select:function(a,b){if("undefined"===typeof this.__variants[a])throw Error("Variant not defined: '"+a+"'");for(var c in b)if(this.isSet(a,c))return b[c];if(void 0!==b["default"])return b["default"];throw Error("No match for variant: '"+a+"'");},isSet:function(a,b){var c=this.get(a);if(0>b.indexOf("|"))return c===b;for(var d=b.split("|"),e=0,f=d.length;e<f;e++)if(c===d[e])return!0;return!1}};rwt.util.Variant.define("qx.debug","off");rwt.util.Variant.__init();namespace("rwt.client");rwt.client.Client={__init:function(){this._browserName=this._engineName="unknown";this._engineVersionBuild=this._engineVersionRevision=this._engineVersionMinor=this._engineVersionMajor=this._engineVersion=0;this._browserPlatform="other";this._defaultLocale="en";this._initKonqueror();this._initTrident();this._initBlink();this._initWebkit();this._initGecko();this._initBoxSizing();this._initLocale();this._initPlatform()},getEngine:function(){return this._engineName},getBrowser:function(){return this._browserName},getVersion:function(){return this._engineVersion},getMajor:function(){return this._engineVersionMajor},getMinor:function(){return this._engineVersionMinor},getRevision:function(){return this._engineVersionRevision},getBuild:function(){return this._engineVersionBuild},isTrident:function(){return"trident"===this._engineName},isGecko:function(){return"gecko"===this._engineName},isBlink:function(){return"blink"===this._engineName},isWebkit:function(){return"webkit"===this._engineName},getTimezoneOffset:function(){return(new Date).getTimezoneOffset()},getLocale:function(){return this._browserLocale},getLanguage:function(){var a=this.getLocale(),b=a.indexOf("_");return-1==b?a:a.substring(0,b)},getTerritory:function(){return this.getLocale().split("_")[1]||""},getDefaultLocale:function(){return this._defaultLocale},usesDefaultLocale:function(){return this._browserLocale===this._defaultLocale},getEngineBoxSizingAttributes:function(){return this._engineBoxSizingAttributes},getPlatform:function(){return this._browserPlatform},isMobileSafari:function(){return"ios"===this.getPlatform()&&"safari"===this.getBrowser()},isMobileChrome:function(){return"android"===this.getPlatform()&&"chrome"===this.getBrowser()},isAndroidBrowser:function(){return"android"===this.getPlatform()&&"android"===this.getBrowser()},isMobileFirefox:function(){return"android"===this.getPlatform()&&"firefox"===this.getBrowser()},supportsFileDrop:function(){return!!window.FormData},supportsTouch:function(){return this.isMobileSafari()||this.isAndroidBrowser()||this.isMobileChrome()||this.isMobileFirefox()},supportsCss3:function(){var a=rwt.client.Client.getEngine(),b=rwt.client.Client.getVersion();return"blink"===a||"webkit"===a&&522<=b||"gecko"===a&&2<=b||"trident"===a&&9<=b},isZoomed:function(){var a=!1;if("trident"===this._engineName)if(8<=this._engineVersionMajor)a=1!==screen.deviceXDPI/screen.logicalXDPI;else try{var b=document.body.getBoundingClientRect(),a=1!==(b.right-b.left)/document.body.offsetWidth}catch(c){a=!1}return a},getBasePath:function(){this._basePath||(this._basePath=this._computeBasePath(document.location.href));return this._basePath},_computeBasePath:function(a){-1!==a.indexOf("?")&&(a=a.slice(0,a.indexOf("?")));-1!==a.indexOf("#")&&(a=a.slice(0,a.indexOf("#")));return a.slice(0,a.lastIndexOf("/")+1)},_initKonqueror:function(){if(!this._isBrowserDetected()){var a=navigator.vendor;"string"===typeof a&&"KDE"===a&&/KHTML\/([0-9\-\.]*)/.test(navigator.userAgent)&&(this._engineName="webkit",this._browserName="konqueror",this._parseVersion("420"))}},_initBlink:function(){if(!this._isBrowserDetected()){var a=navigator.userAgent;if(window.chrome||window.Intl&&window.Intl.v8BreakIterator)this._engineName="blink",-1!==a.indexOf("OPR")?(this._browserName="opera",/OPR\/([^ ]+)/.test(a),this._parseVersion(RegExp.$1)):-1!==a.indexOf("Chrome")?(this._browserName="chrome",/Chrome\/([^ ]+)/.test(a),this._parseVersion(RegExp.$1)):this._browserName="other blink"}},_initWebkit:function(){if(!this._isBrowserDetected()){var a=navigator.userAgent;if(-1!=a.indexOf("AppleWebKit")&&/AppleWebKit\/([^ ]+)/.test(a)){this._engineName="webkit";var b=RegExp.$1,c=/[^\.0-9]/.exec(b);c&&(b=b.slice(0,c.index));this._parseVersion(b);-1!=a.indexOf("Safari")?-1!=a.indexOf("Android")?this._browserName="android":this._browserName="safari":-1!=a.indexOf("OmniWeb")?this._browserName="omniweb":-1!=a.indexOf("Shiira")?this._browserName="shiira":-1!=a.indexOf("NetNewsWire")?this._browserName="netnewswire":-1!=a.indexOf("RealPlayer")?this._browserName="realplayer":-1!=a.indexOf("Mobile")?this._browserName="safari":this._browserName="other webkit"}}},_initGecko:function(){if(!this._isBrowserDetected()){var a=navigator.userAgent;-1===a.indexOf("like Gecko")&&-1!==a.indexOf("Gecko/")&&/rv\:([^\);]+)(\)|;)/.test(a)&&(this._engineName="gecko",this._parseVersion(RegExp.$1),-1!=a.indexOf("Firefox")?this._browserName="firefox":-1!=a.indexOf("Camino")?this._browserName="camino":-1!=a.indexOf("Galeon")?this._browserName="galeon":this._browserName="other gecko")}},_initTrident:function(){if(!this._isBrowserDetected()){var a=navigator.userAgent;/MSIE\s+([^\);]+)(\)|;)/.test(a)?(this._parseVersion(RegExp.$1),this._engineName="trident",this._browserName="explorer"):-1!=a.indexOf("Trident")&&/rv\:([^\);]+)(\)|;)/.test(a)?(this._parseVersion(RegExp.$1),this._engineName="trident",this._browserName="explorer"):/Edge\/([^ ]+)/.test(a)&&(this._parseVersion(RegExp.$1),this._engineName="trident",this._browserName="edge")}},_isBrowserDetected:function(){return"unknown"!==this._engineName},_parseVersion:function(a){if("string"===typeof a){var b=a.split(".");this._engineVersion=parseFloat(a);this._engineVersionMajor=parseInt(b[0]||0,10);this._engineVersionMinor=parseFloat(b[1]||0);this._engineVersionRevision=parseFloat(b[2]||0);this._engineVersionBuild=parseInt(b[3]||0,10)}},_initBoxSizing:function(){var a=[];switch(this._engineName){case "gecko":a.push("-moz-box-sizing");break;case "webkit":case "blink":a.push("-khtml-box-sizing");a.push("-webkit-box-sizing");break;default:a.push("box-sizing")}this._engineBoxSizingAttributes=a},_initLocale:function(){var a=(navigator.userLanguage||navigator.language).toLowerCase(),b=a.indexOf("-");-1!=b&&(a=a.substr(0,b));this._browserLocale=a},_initPlatform:function(){var a=navigator.platform;-1!=a.indexOf("Windows")||-1!=a.indexOf("Win32")||-1!=a.indexOf("Win64")?this._browserPlatform="win":-1!=a.indexOf("Macintosh")||-1!=a.indexOf("MacPPC")||-1!=a.indexOf("MacIntel")?this._browserPlatform="mac":-1!=a.indexOf("X11")||-1!=a.indexOf("Linux")||-1!=a.indexOf("BSD")?-1!=navigator.userAgent.indexOf("Android")?this._browserPlatform="android":this._browserPlatform="unix":-1!=a.indexOf("iPhone")||-1!=a.indexOf("iPod")||-1!=a.indexOf("iPad")?this._browserPlatform="ios":this._browserPlatform="other"}};rwt.client.Client.__init();rwt.util.Variant.define("qx.client",rwt.client.Client.getEngine());namespace("rwt.qx");rwt.qx.Class={_normalizeConfig:function(a){a||(a={});!a.include||a.include instanceof Array||(a.include=[a.include]);return a},define:function(a,b){if(this._stopLoading)throw Error("Stop loading "+a);try{b=this._normalizeConfig(b);var c;if(b.extend){if(b.construct||(b.construct=this.__createDefaultConstructor()),c=this.__wrapConstructor(b.construct,a),b.statics)for(var d,e=0,f=rwt.util.Objects.getKeys(b.statics),g=f.length;e<g;e++)d=f[e],c[d]=b.statics[d]}else c=b.statics||{};var h=rwt.define(a,c,!1);c.name=c.classname=a;c.basename=h;this.__registry[a]=c;c.hasOwnProperty("toString")||(c.toString=this.genericToString);if(b.extend){d=function(){};d.prototype=b.extend.prototype;var k=new d;c.prototype=k;k.name=k.classname=a;k.basename=h;b.construct.base=c.superclass=b.extend;b.construct.self=k.constructor=c;b.destruct&&(c.$$destructor=b.destruct);var l=this;c.$$initializer=function(){b.properties&&l.__addProperties(c,b.properties,!0);b.members&&l.__addMembers(c,b.members,!0,!0,!1);b.events&&l.__addEvents(c,b.events,!0);if(b.include)for(var a=0,d=b.include.length;a<d;a++)l.__addMixin(c,b.include[a],!1)}}b.defer&&(this.__initializeClass(c),b.defer.self=c,b.defer(c,c.prototype,{add:function(a,b){var d={};d[a]=b;rwt.qx.Class.__addProperties(c,d,!0)}}))}catch(m){throw alert("Error loading class "+a+": "+(m.message?m.message:m)),this._stopLoading=!0,m;}},isDefined:function(a){return void 0!==this.__registry[a]},include:function(a,b){rwt.qx.Class.__addMixin(a,b,!1)},patch:function(a,b){rwt.qx.Class.__addMixin(a,b,!0)},genericToString:function(){return"[Class "+this.classname+"]"},__registry:{},__addEvents:function(a,b){if(a.$$events)for(var c in b)a.$$events[c]=b[c];else a.$$events=b},__addProperties:function(a,b,c){var d;void 0===c&&(c=!1);var e=!!a.$$propertiesAttached,f;for(f in b){d=b[f];d.name=f;d.refine||(void 0===a.$$properties&&(a.$$properties={}),a.$$properties[f]=d);void 0!==d.init&&(a.prototype["__init$"+f]=d.init);if(void 0!==d.event){var g={};g[d.event]="rwt.event.ChangeEvent";this.__addEvents(a,g,c)}d.inheritable&&(rwt.qx.Property.$$inheritable[f]=!0);e&&rwt.qx.Property.attachMethods(a,f,d);d._fast?rwt.qx.LegacyProperty.addFastProperty(d,a.prototype):d._cached&&rwt.qx.LegacyProperty.addCachedProperty(d,a.prototype)}},__addMembers:function(a,b,c,d,e){c=a.prototype;for(var f,g,h=0,k=rwt.util.Objects.getKeys(b),l=k.length;h<l;h++)f=k[h],g=b[f],!1!==d&&g instanceof Function&&(!0===e?g=this.__mixinMemberWrapper(g,c[f]):(c[f]&&(g.base=c[f]),g.self=a)),c[f]=g},__mixinMemberWrapper:function(a,b){return b?function(){var c=a.base;a.base=b;var d=a.apply(this,arguments);a.base=c;return d}:a},__addMixin:function(a,b,c){b.$$properties&&this.__addProperties(a,b.$$properties,c);b.$$members&&this.__addMembers(a,b.$$members,c,c,c);a.$$includes?a.$$includes.push(b):a.$$includes=[b]},__createDefaultConstructor:function(){return function(){arguments.callee.base.apply(this,arguments)}},__initializeClass:function(a){if(a.$$initializer){for(var b=[];a.$$initializer;)b.push(a),a=a.superclass;for(;0<b.length;)a=b.pop(),a.$$initializer(),delete a.$$initializer}},__wrapConstructor:function(a){return function(){var b=arguments.callee;rwt.qx.Class.__initializeClass(b);b.$$propertiesAttached||rwt.qx.Property.attach(b);a.apply(this,arguments);if(b.$$includes)for(var c=0,d=b.$$includes.length;c<d;c++)b.$$includes[c].$$constructor&&b.$$includes[c].$$constructor.apply(this,arguments)}}};rwt.qx.Class.define("rwt.qx.Mixin",{statics:{define:function(a,b){var c=b.statics?b.statics:{};c.$$constructor=b.construct;c.$$properties=b.properties;c.$$members=b.members;c.$$destructor=b.destruct;c.$$type="Mixin";c.name=a;c.toString=this.genericToString;rwt.define(a,c)},genericToString:function(){return"[Mixin "+this.name+"]"}}});rwt.qx.Class.define("rwt.qx.LegacyProperty",{statics:{addFastProperty:function(a,b){var c=rwt.util.Strings.toFirstUp(a.name),d="_value"+c,e="get"+c,f="set"+c,g="_compute"+c;b[d]="undefined"!==typeof a.defaultValue?a.defaultValue:null;b[e]=a.noCompute?function(){return this[d]}:function(){return null==this[d]?this[d]=this[g]():this[d]};b[e].self=b.constructor;b[f]=a.setOnlyOnce?function(a){this[d]=a;this[f]=null;return a}:function(a){return this[d]=a};b[f].self=b.constructor;a.noCompute||(b[g]=function(){return null},b[g].self=b.constructor)},addCachedProperty:function(a,b){var c=rwt.util.Strings.toFirstUp(a.name),d="_cached"+c,e="_compute"+c,f="_change"+c;"undefined"!==typeof a.defaultValue&&(b[d]=a.defaultValue);b["get"+c]=function(){null==this[d]&&(this[d]=this[e]());return this[d]};b["_invalidate"+c]=function(){null!=this[d]&&(this[d]=null,a.addToQueueRuntime&&this.addToQueueRuntime(a.name))};b["_recompute"+c]=function(){var a=this[d],b=this[e]();return b!=a?(this[d]=b,this[f](b,a),!0):!1};b[f]=function(){};b[e]=function(){return null};b["get"+c].self=b.constructor;b["_invalidate"+c].self=b.constructor;b["_recompute"+c].self=b.constructor}}});rwt.qx.Class.define("rwt.qx.Property",{statics:{__checks:{Boolean:'typeof value \x3d\x3d\x3d "boolean"',String:'typeof value \x3d\x3d\x3d "string"',NonEmptyString:'typeof value \x3d\x3d\x3d "string" \x26\x26 value.length \x3e 0',Number:'typeof value \x3d\x3d\x3d "number" \x26\x26 isFinite(value)',Integer:'typeof value \x3d\x3d\x3d "number" \x26\x26 isFinite(value) \x26\x26 value%1 \x3d\x3d\x3d 0',Float:'typeof value \x3d\x3d\x3d "number" \x26\x26 isFinite(value)',Double:'typeof value \x3d\x3d\x3d "number" \x26\x26 isFinite(value)',Error:"value instanceof Error",RegExp:"value instanceof RegExp",Object:'value !\x3d\x3d null \x26\x26 typeof value \x3d\x3d\x3d "object"',Array:"value instanceof Array",Map:'value !\x3d\x3d null \x26\x26 typeof value \x3d\x3d\x3d "object" \x26\x26 !(value instanceof Array) \x26\x26 !(value instanceof rwt.qx.Object)',Function:"value instanceof Function",Date:"value instanceof Date",Node:"value !\x3d\x3d null \x26\x26 value.nodeType !\x3d\x3d undefined",Element:"value !\x3d\x3d null \x26\x26 value.nodeType \x3d\x3d\x3d 1 \x26\x26 value.attributes",Document:"value !\x3d\x3d null \x26\x26 value.nodeType \x3d\x3d\x3d 9 \x26\x26 value.documentElement",Window:"value !\x3d\x3d null \x26\x26 window.document",Event:"value !\x3d\x3d null \x26\x26 value.type !\x3d\x3d undefined",Class:'value !\x3d\x3d null \x26\x26 value.$$type \x3d\x3d\x3d "Class"',Mixin:'value !\x3d\x3d null \x26\x26 value.$$type \x3d\x3d\x3d "Mixin"',Interface:'value !\x3d\x3d null \x26\x26 value.$$type \x3d\x3d\x3d "Interface"',Theme:'value !\x3d\x3d null \x26\x26 value.$$type \x3d\x3d\x3d "Theme"',Color:'typeof value \x3d\x3d\x3d "string" \x26\x26 rwt.util.Colors.isValid(value)',Border:"value !\x3d\x3d null",Font:"value !\x3d\x3d null",Label:'value !\x3d\x3d null \x26\x26 typeof value \x3d\x3d\x3d "string"'},__dispose:{Object:!0,Array:!0,Map:!0,Function:!0,Date:!0,Node:!0,Element:!0,Document:!0,Window:!0,Event:!0,Class:!0,Mixin:!0,Interface:!0,Theme:!0,Border:!0,Font:!0},$$inherit:"inherit",$$idcounter:0,$$store:{user:{},theme:{},inherit:{},init:{},useinit:{}},$$method:{get:{},set:{},reset:{},init:{},refresh:{},style:{},unstyle:{}},$$allowedKeys:{name:"string",dispose:"boolean",inheritable:"boolean",nullable:"boolean",themeable:"boolean",refine:"boolean",init:null,apply:"string",event:"string",check:null,transform:"string",deferredInit:"boolean"},$$allowedGroupKeys:{name:"string",group:"object",mode:"string",themeable:"boolean"},$$inheritable:{},refresh:function(a){var b=a.getParent();if(b)for(var c=a.constructor,d=this.$$store.inherit,e=this.$$method.refresh,f;c;){if(f=c.$$properties)for(var g in this.$$inheritable)if(f[g]&&a[e[g]])a[e[g]](b[d[g]]);c=c.superclass}},attach:function(a){var b=a.$$properties;if(b)for(var c in b)this.attachMethods(a,c,b[c]);a.$$propertiesAttached=!0},attachMethods:function(a,b,c){if(!c._fast&&!c._cached){var d;"_"===b.charAt(0)?"_"===b.charAt(1)?(d="__",b=rwt.util.Strings.toFirstUp(b.substring(2))):(d="_",b=rwt.util.Strings.toFirstUp(b.substring(1))):(d="",b=rwt.util.Strings.toFirstUp(b));c.group?this.__attachGroupMethods(a,c,d,b):this.__attachPropertyMethods(a,c,d,b)}},__attachGroupMethods:function(a,b,c,d){a=a.prototype;var e=b.name,f=!0===b.themeable,g=[],h=[];if(f)var k=[],l=[];g.push("var a\x3darguments[0] instanceof Array?arguments[0]:arguments;");f&&k.push("var a\x3darguments[0] instanceof Array?arguments[0]:arguments;");"shorthand"==b.mode&&(g.push("a\x3drwt.util.Arrays.fromShortHand(rwt.util.Arrays.fromArguments(a));"),f&&k.push("a\x3drwt.util.Arrays.fromShortHand(rwt.util.Arrays.fromArguments(a));"));var m=0;b=b.group;for(var n=b.length;m<n;m++){if(rwt.util.Variant.isSet("qx.debug","on")&&(!this.$$method.set[b[m]]||!this.$$method.reset[b[m]]))throw Error("Cannot create property group '"+e+"' including non-existing property '"+b[m]+"'!");g.push("this.",this.$$method.set[b[m]],"(a[",m,"]);");h.push("this.",this.$$method.reset[b[m]],"();");if(f){if(rwt.util.Variant.isSet("qx.debug","on")&&!this.$$method.style[b[m]])throw Error("Cannot add the non themable property '"+b[m]+"' to the themable property group '"+e+"'");k.push("this.",this.$$method.style[b[m]],"(a[",m,"]);");l.push("this.",this.$$method.unstyle[b[m]],"();")}}this.$$method.set[e]=c+"set"+d;a[this.$$method.set[e]]=new Function(g.join(""));this.$$method.reset[e]=c+"reset"+d;a[this.$$method.reset[e]]=new Function(h.join(""));f&&(this.$$method.style[e]=c+"style"+d,a[this.$$method.style[e]]=new Function(k.join("")),this.$$method.unstyle[e]=c+"unstyle"+d,a[this.$$method.unstyle[e]]=new Function(l.join("")))},__attachPropertyMethods:function(a,b,c,d){var e=a.prototype,f=b.name;void 0===b.dispose&&"string"===typeof b.check&&(b.dispose=this.__dispose[b.check]||rwt.qx.Class.isDefined(b.check));var g=this.$$method,h=this.$$store;h.user[f]="__user$"+f;h.theme[f]="__theme$"+f;h.init[f]="__init$"+f;h.inherit[f]="__inherit$"+f;h.useinit[f]="__useinit$"+f;g.get[f]=c+"get"+d;e[g.get[f]]=function(){return rwt.qx.Property.executeOptimizedGetter(this,a,f,"get")};g.set[f]=c+"set"+d;e[g.set[f]]=function(){return rwt.qx.Property.executeOptimizedSetter(this,a,f,"set",arguments)};g.reset[f]=c+"reset"+d;e[g.reset[f]]=function(){return rwt.qx.Property.executeOptimizedSetter(this,a,f,"reset")};if(b.inheritable||b.apply||b.event||b.deferredInit)g.init[f]=c+"init"+d,e[g.init[f]]=function(){return rwt.qx.Property.executeOptimizedSetter(this,a,f,"init",arguments)};b.inheritable&&(g.refresh[f]=c+"refresh"+d,e[g.refresh[f]]=function(){return rwt.qx.Property.executeOptimizedSetter(this,a,f,"refresh",arguments)});b.themeable&&(g.style[f]=c+"style"+d,e[g.style[f]]=function(){return rwt.qx.Property.executeOptimizedSetter(this,a,f,"style",arguments)},g.unstyle[f]=c+"unstyle"+d,e[g.unstyle[f]]=function(){return rwt.qx.Property.executeOptimizedSetter(this,a,f,"unstyle")});"Boolean"===b.check&&(e[c+"toggle"+d]=new Function("return this."+g.set[f]+"(!this."+g.get[f]+"())"),e[c+"is"+d]=new Function("return this."+g.get[f]+"()"))},__errors:{0:"Could not change or apply init value after constructing phase!",1:"Requires exactly one argument!",2:"Undefined value is not allowed!",3:"Does not allow any arguments!",4:"Null value is not allowed!",5:"Is invalid!"},error:function(a,b,c,d,e){throw Error("Error in property "+c+" of class "+a.constructor.classname+" in method "+this.$$method[d][c]+" with incoming value '"+e+"': "+(this.__errors[b]||"Unknown reason: "+b));},__unwrapFunctionFromCode:function(a,b,c,d,e,f){var g=this.$$method[d][c];if(rwt.util.Variant.isSet("qx.debug","on"))try{b[g]=new Function("value",e.join(""))}catch(h){throw Error("Malformed generated code to unwrap method: "+this.$$method[d][c]+"\n"+e.join(""));}else b[g]=new Function("value",e.join(""));return void 0===f?a[g]():rwt.util.Variant.isSet("qx.debug","on")?a[g].apply(a,f):a[g](f[0])},executeOptimizedGetter:function(a,b,c,d){var e=b.$$properties[c],f=b.prototype,g=[];e.inheritable&&(g.push("if(this.",this.$$store.inherit[c],"!\x3d\x3dundefined)"),g.push("return this.",this.$$store.inherit[c],";"),g.push("else "));g.push("if(this.",this.$$store.user[c],"!\x3d\x3dundefined)");g.push("return this.",this.$$store.user[c],";");e.themeable&&(g.push("else if(this.",this.$$store.theme[c],"!\x3d\x3dundefined)"),g.push("return this.",this.$$store.theme[c],";"));e.deferredInit&&void 0===e.init&&(g.push("else if(this.",this.$$store.init[c],"!\x3d\x3dundefined)"),g.push("return this.",this.$$store.init[c],";"));g.push("else ");void 0!==e.init?g.push("return this.",this.$$store.init[c],";"):e.inheritable||e.nullable?g.push("return null;"):g.push('throw new Error("Property ',c," of an instance of ",b.classname,' is not (yet) ready!");');return this.__unwrapFunctionFromCode(a,f,c,d,g)},executeOptimizedSetter:function(a,b,c,d,e){var f=b.$$properties[c],g=b.prototype,h=[],k="set"===d||"style"===d||"init"===d&&void 0===f.init,l="reset"===d||"unstyle"===d,m=f.apply||f.event||f.inheritable,n="style"===d||"unstyle"===d?this.$$store.theme[c]:"init"===d?this.$$store.init[c]:this.$$store.user[c];(!f.nullable||f.check||f.inheritable)&&h.push("var prop\x3drwt.qx.Property;");rwt.util.Variant.isSet("qx.debug","on")&&"set"===d&&h.push('if(value\x3d\x3d\x3dundefined)prop.error(this,2,"'+c+'","'+d+'",value);');k&&f.transform&&h.push("value\x3dthis.",f.transform,"(value);");m&&(k?h.push("if(this.",n,"\x3d\x3d\x3dvalue)return value;"):l&&h.push("if(this.",n,"\x3d\x3d\x3dundefined)return;"));f.inheritable&&h.push("var inherit\x3dprop.$$inherit;");if(k&&rwt.util.Variant.isSet("qx.debug","on")&&(f.nullable||h.push('if(value\x3d\x3d\x3dnull)prop.error(this,4,"'+c+'","'+d+'",value);'),void 0!==f.check)){f.nullable&&h.push("if(value!\x3d\x3dnull)");f.inheritable&&h.push("if(value!\x3d\x3dinherit)");h.push("if(");if(void 0!==this.__checks[f.check])h.push("!(",this.__checks[f.check],")");else if(rwt.qx.Class.isDefined(f.check))h.push("!(value instanceof ",f.check,")");else if("function"===typeof f.check)h.push("!",b.classname,".$$properties.",c),h.push(".check.call(this, value)");else if("string"===typeof f.check)h.push("!(",f.check,")");else if(f.check instanceof Array)f.checkMap=rwt.util.Objects.fromArray(f.check),h.push(b.classname,".$$properties.",c),h.push(".checkMap[value]\x3d\x3d\x3dundefined");else throw Error("Could not add check to property "+c+" of class "+b.classname);h.push(')prop.error(this,5,"'+c+'","'+d+'",value);')}if(m){f.inheritable?h.push("var computed, old\x3dthis.",this.$$store.inherit[c],";"):h.push("var computed, old;");h.push("if(this.",this.$$store.user[c],"!\x3d\x3dundefined){");"set"===d?(f.inheritable||h.push("old\x3dthis.",this.$$store.user[c],";"),h.push("computed\x3dthis.",this.$$store.user[c],"\x3dvalue;")):"reset"===d?(f.inheritable||h.push("old\x3dthis.",this.$$store.user[c],";"),h.push("delete this.",this.$$store.user[c],";"),h.push("if(this.",this.$$store.theme[c],"!\x3d\x3dundefined)"),h.push("computed\x3dthis.",this.$$store.theme[c],";"),h.push("else if(this.",this.$$store.init[c],"!\x3d\x3dundefined){"),h.push("computed\x3dthis.",this.$$store.init[c],";"),h.push("this.",this.$$store.useinit[c],"\x3dtrue;"),h.push("}")):(f.inheritable?h.push("computed\x3dthis.",this.$$store.user[c],";"):h.push("old\x3dcomputed\x3dthis.",this.$$store.user[c],";"),"style"===d?h.push("this.",this.$$store.theme[c],"\x3dvalue;"):"unstyle"===d?h.push("delete this.",this.$$store.theme[c],";"):"init"===d&&k&&h.push("this.",this.$$store.init[c],"\x3dvalue;"));h.push("}");f.themeable&&(h.push("else if(this.",this.$$store.theme[c],"!\x3d\x3dundefined){"),f.inheritable||h.push("old\x3dthis.",this.$$store.theme[c],";"),"set"===d?h.push("computed\x3dthis.",this.$$store.user[c],"\x3dvalue;"):"style"===d?h.push("computed\x3dthis.",this.$$store.theme[c],"\x3dvalue;"):"unstyle"===d?(h.push("delete this.",this.$$store.theme[c],";"),h.push("if(this.",this.$$store.init[c],"!\x3d\x3dundefined){"),h.push("computed\x3dthis.",this.$$store.init[c],";"),h.push("this.",this.$$store.useinit[c],"\x3dtrue;"),h.push("}")):"init"===d?(k&&h.push("this.",this.$$store.init[c],"\x3dvalue;"),h.push("computed\x3dthis.",this.$$store.theme[c],";")):"refresh"===d&&h.push("computed\x3dthis.",this.$$store.theme[c],";"),h.push("}"));h.push("else if(this.",this.$$store.useinit[c],"){");f.inheritable||h.push("old\x3dthis.",this.$$store.init[c],";");if("init"===d)k?h.push("computed\x3dthis.",this.$$store.init[c],"\x3dvalue;"):h.push("computed\x3dthis.",this.$$store.init[c],";");else if("set"===d||"style"===d||"refresh"===d)h.push("delete this.",this.$$store.useinit[c],";"),"set"===d?h.push("computed\x3dthis.",this.$$store.user[c],"\x3dvalue;"):"style"===d?h.push("computed\x3dthis.",this.$$store.theme[c],"\x3dvalue;"):"refresh"===d&&h.push("computed\x3dthis.",this.$$store.init[c],";");h.push("}");if("set"===d||"style"===d||"init"===d)h.push("else{"),"set"===d?h.push("computed\x3dthis.",this.$$store.user[c],"\x3dvalue;"):"style"===d?h.push("computed\x3dthis.",this.$$store.theme[c],"\x3dvalue;"):"init"===d&&(k?h.push("computed\x3dthis.",this.$$store.init[c],"\x3dvalue;"):h.push("computed\x3dthis.",this.$$store.init[c],";"),h.push("this.",this.$$store.useinit[c],"\x3dtrue;")),h.push("}")}else"set"===d?h.push("this.",this.$$store.user[c],"\x3dvalue;"):"reset"===d?(h.push("if(this.",this.$$store.user[c],"!\x3d\x3dundefined)"),h.push("delete this.",this.$$store.user[c],";")):"style"===d?h.push("this.",this.$$store.theme[c],"\x3dvalue;"):"unstyle"===d?(h.push("if(this.",this.$$store.theme[c],"!\x3d\x3dundefined)"),h.push("delete this.",this.$$store.theme[c],";")):"init"===d&&k&&h.push("this.",this.$$store.init[c],"\x3dvalue;");f.inheritable?(h.push("if(computed\x3d\x3d\x3dundefined||computed\x3d\x3d\x3dinherit){"),"refresh"===d?h.push("computed\x3dvalue;"):h.push("var pa\x3dthis.getParent();if(pa)computed\x3dpa.",this.$$store.inherit[c],";"),h.push("if((computed\x3d\x3d\x3dundefined||computed\x3d\x3d\x3dinherit)\x26\x26"),h.push("this.",this.$$store.init[c],"!\x3d\x3dundefined\x26\x26"),h.push("this.",this.$$store.init[c],"!\x3d\x3dinherit){"),h.push("computed\x3dthis.",this.$$store.init[c],";"),h.push("this.",this.$$store.useinit[c],"\x3dtrue;"),h.push("}else{"),h.push("delete this.",this.$$store.useinit[c],";}"),h.push("}"),h.push("if(old\x3d\x3d\x3dcomputed)return value;"),h.push("if(computed\x3d\x3d\x3dinherit){"),h.push("computed\x3dundefined;delete this.",this.$$store.inherit[c],";"),h.push("}"),h.push("else if(computed\x3d\x3d\x3dundefined)"),h.push("delete this.",this.$$store.inherit[c],";"),h.push("else this.",this.$$store.inherit[c],"\x3dcomputed;"),h.push("var backup\x3dcomputed;"),h.push("if(computed\x3d\x3d\x3dundefined)computed\x3dnull;"),h.push("if(old\x3d\x3d\x3dundefined)old\x3dnull;")):m&&("set"!==d&&"style"!==d&&h.push("if(computed\x3d\x3d\x3dundefined)computed\x3dnull;"),h.push("if(old\x3d\x3d\x3dcomputed)return value;"),h.push("if(old\x3d\x3d\x3dundefined)old\x3dnull;"));m&&(f.apply&&h.push("this.",f.apply,"(computed, old);"),f.event&&h.push('this.createDispatchChangeEvent("',f.event,'", computed, old);'),f.inheritable&&g.getChildren&&(h.push("var a\x3dthis.getChildren();if(a)for(var i\x3d0,l\x3da.length;i\x3cl;i++){"),h.push("if(a[i].",this.$$method.refresh[c],")a[i].",this.$$method.refresh[c],"(backup);"),h.push("}")));k&&h.push("return value;");return this.__unwrapFunctionFromCode(a,g,c,d,h,e)}}});rwt.qx.Class.define("rwt.qx.Object",{extend:Object,construct:function(){this._hashCode=rwt.qx.Object.__availableHashCode++;this._autoDispose&&((this.__dbKey=rwt.qx.Object.__freeAvailableDbKeys.pop())?rwt.qx.Object.__db[this.__dbKey]=this:(this.__dbKey=rwt.qx.Object.__db.length,rwt.qx.Object.__db.push(this)))},statics:{__availableHashCode:0,__freeAvailableDbKeys:[],__db:[],__disposeAll:!1,$$type:"Object",toHashCode:function(a){return null!=a._hashCode?a._hashCode:a._hashCode=this.__availableHashCode++},getDb:function(){return this.__db},dispose:function(a){if(!this.__disposed){this.__disposed=!0;this.__unload=a||!1;for(var b=this.__db,c=b.length-1;0<=c;c--)(a=b[c])&&!1===a.__disposed&&a.dispose()}},inGlobalDispose:function(){return this.__disposed||!1},isPageUnload:function(){return this.__unload||!1}},members:{_autoDispose:!0,setUserData:function(a,b){this.__userData||(this.__userData={});this.__userData[a]=b},getUserData:function(a){if(!this.__userData)return null;a=this.__userData[a];return void 0===a?null:a},toHashCode:function(){return this._hashCode},toString:function(){return this.classname?"[object "+this.classname+"]":"[object Object]"},base:function(a){return 1===arguments.length?a.callee.base.call(this):a.callee.base.apply(this,Array.prototype.slice.call(arguments,1))},self:function(a){return a.callee.self},getDbKey:function(){return this.__dbKey},set:function(a,b){var c=rwt.qx.Property.$$method.set;if("string"===typeof a)return this[c[a]](b);for(var d in a)this[c[d]](a[d]);return this},get:function(a){return this[rwt.qx.Property.$$method.get[a]]()},reset:function(a){this[rwt.qx.Property.$$method.reset[a]]()},__disposed:!1,getDisposed:function(){return this.__disposed},isDisposed:function(){return this.__disposed},dispose:function(){if(!this.__disposed){this.__disposed=!0;for(var a=this.constructor,b;a.superclass;){a.$$destructor&&a.$$destructor.call(this);if(a.$$includes){b=a.$$includes;for(var c=0,d=b.length;c<d;c++)b[c].$$destructor&&b[c].$$destructor.call(this)}a=a.superclass}}},debug:rwt.util.Variant.select("qx.debug",{on:function(a){window.console&&"function"===typeof console.log&&console.log(a)},"default":function(){}}),info:function(a){this.debug("INFO: "+a)},warn:function(a){this.debug("WARN: "+a)},error:function(a){this.debug("ERROR: "+a)},printStackTrace:rwt.util.Variant.select("qx.debug",{on:function(){console&&"function"===typeof console.trace&&(this.debug("Current stack trace:"),console.trace())},"default":function(){}}),_disposeFields:function(){for(var a,b=0,c=arguments.length;b<c;b++)a=arguments[b],null!=this[a]&&this.hasOwnProperty(a)&&(this[a]=null)},_disposeObjects:function(){for(var a,b=0,c=arguments.length;b<c;b++)if(a=arguments[b],null!=this[a]&&this.hasOwnProperty(a)){if(!this[a].dispose)throw Error(this.classname+"."+a+" is not a qooxdoo object. Use _disposeFields instead of _disposeObjects.");this[a].dispose();this[a]=null}},_disposeObjectDeep:function(a,b){null!=this[a]&&this.hasOwnProperty(a)&&(this.__disposeObjectsDeepRecurser(this[a],b||0),this[a]=null)},__disposeObjectsDeepRecurser:function(a,b){if(a instanceof rwt.qx.Object)a.dispose();else if(a instanceof Array)for(var c=0,d=a.length;c<d;c++){var e=a[c];null!=e&&("object"==typeof e?(0<b&&this.__disposeObjectsDeepRecurser(e,b-1),a[c]=null):"function"==typeof e&&(a[c]=null))}else if(a instanceof Object)for(c in a)null!=a[c]&&a.hasOwnProperty(c)&&(e=a[c],"object"==typeof e?(0<b&&this.__disposeObjectsDeepRecurser(e,b-1),a[c]=null):"function"==typeof e&&(a[c]=null))}},destruct:function(){var a=this.constructor,b;b=rwt.qx.Property.$$store;for(var c=b.user,d=b.theme,e=b.inherit,f=b.useinit,g=b.init;a;){if(b=a.$$properties)for(var h in b)b[h].dispose&&(this[c[h]]=void 0,this[d[h]]=void 0,this[e[h]]=void 0,this[f[h]]=void 0,this[g[h]]=void 0);a=a.superclass}this._disposeFields("__userData");null!=this.__dbKey&&(rwt.qx.Object.__disposeAll?rwt.qx.Object.__db[this.__dbKey]=null:delete rwt.qx.Object.__db[this.__dbKey],rwt.qx.Object.__freeAvailableDbKeys.push(this.__dbKey))}});rwt.qx.Class.define("rwt.html.Viewport",{statics:{getWidth:rwt.util.Variant.select("qx.client",{"webkit|blink":function(a){return(a||window).innerWidth},"default":function(a){a=(a||window).document;return"CSS1Compat"===a.compatMode?a.documentElement.clientWidth:a.body.clientWidth}}),getHeight:rwt.util.Variant.select("qx.client",{"webkit|blink":function(a){return(a||window).innerHeight},"default":function(a){a=(a||window).document;return"CSS1Compat"===a.compatMode?a.documentElement.clientHeight:a.body.clientHeight}}),getScrollLeft:function(a){var b=(a||window).document;return(a||window).pageXOffset||b.body.scrollLeft},getScrollTop:function(a){var b=(a||window).document;return(a||window).pageYOffset||b.body.scrollTop}}});rwt.qx.Class.define("rwt.qx.Target",{extend:rwt.qx.Object,construct:function(){this.base(arguments)},members:{addEventListener:function(a,b,c){if(!this.getDisposed()){void 0===this.__listeners&&(this.__listeners={});void 0===this.__listeners[a]&&(this.__listeners[a]={});var d="event"+rwt.qx.Object.toHashCode(b)+(c?"$"+rwt.qx.Object.toHashCode(c):"");this.__listeners[a][d]={handler:b,object:c}}},removeEventListener:function(a,b,c){if(!this.getDisposed()){var d=this.__listeners;if(d&&void 0!==d[a]){if("function"!==typeof b)throw Error("rwt.qx.Target: removeEventListener("+a+"): '"+b+"' is not a function!");b="event"+rwt.qx.Object.toHashCode(b)+(c?"$"+rwt.qx.Object.toHashCode(c):"");delete this.__listeners[a][b]}}},hasEventListeners:function(a){return this.__listeners&&void 0!==this.__listeners[a]&&!rwt.util.Objects.isEmpty(this.__listeners[a])},createDispatchEvent:function(a){this.hasEventListeners(a)&&this.dispatchEvent(new rwt.event.Event(a),!0)},createDispatchDataEvent:function(a,b){this.hasEventListeners(a)&&this.dispatchEvent(new rwt.event.DataEvent(a,b),!0)},createDispatchChangeEvent:function(a,b,c){this.hasEventListeners(a)&&this.dispatchEvent(new rwt.event.ChangeEvent(a,b,c),!0)},dispatchEvent:function(a,b){if(!this.getDisposed()){null==a.getTarget()&&a.setTarget(this);null==a.getCurrentTarget()&&a.setCurrentTarget(this);this._dispatchEvent(a,b);var c=a.getDefaultPrevented();b&&a.dispose();return!c}},dispatchSimpleEvent:function(a,b,c){var d=this.__listeners,e=!0===c,f=!0;if(d&&(d=d[a])){var g,h,k;for(k in d)g=d[k].handler,h=d[k].object||this,f=g.call(h,b)&&!1!==f,!1===f&&(e=!1)}e&&"function"===typeof this.getParent&&(e=this.getParent())&&!e.getDisposed()&&e.getEnabled()&&e.dispatchSimpleEvent(a,b,c);return!1!==f},_dispatchEvent:function(a){var b=this.__listeners;if(b&&this._allowDispatch(a)&&(a.setCurrentTarget(this),b=b[a.getType()])){var c,d,e;for(e in b)c=b[e].handler,d=b[e].object||this,c.call(d,a)}a.getBubbles()&&!a.getPropagationStopped()&&"function"==typeof this.getParent&&(e=this.getParent())&&!e.getDisposed()&&e._dispatchEvent(a)},_allowDispatch:function(a){var b=!0;this.getEnabled&&a instanceof rwt.event.DomEvent&&(b=this.getEnabled());return b}},destruct:function(){this._disposeObjectDeep("__listeners",2)}});rwt.qx.Class.define("rwt.event.Event",{extend:rwt.qx.Object,construct:function(a){this.base(arguments);this.setType(a)},properties:{type:{_fast:!0,setOnlyOnce:!0},originalTarget:{_fast:!0,setOnlyOnce:!0},target:{_fast:!0,setOnlyOnce:!0},relatedTarget:{_fast:!0,setOnlyOnce:!0},currentTarget:{_fast:!0},bubbles:{_fast:!0,defaultValue:!1,noCompute:!0},propagationStopped:{_fast:!0,defaultValue:!0,noCompute:!0},defaultPrevented:{_fast:!0,defaultValue:!1,noCompute:!0}},members:{_autoDispose:!1,preventDefault:function(){this.setDefaultPrevented(!0)},stopPropagation:function(){this.setPropagationStopped(!0)}},destruct:function(){this._disposeFields("_valueOriginalTarget","_valueTarget","_valueRelatedTarget","_valueCurrentTarget")}});rwt.qx.Class.define("rwt.event.DataEvent",{extend:rwt.event.Event,construct:function(a,b){this.base(arguments,a);this.setData(b)},properties:{propagationStopped:{_fast:!0,defaultValue:!1},data:{_fast:!0}},destruct:function(){this._disposeFields("_valueData")}});rwt.qx.Class.define("rwt.event.ChangeEvent",{extend:rwt.event.Event,construct:function(a,b,c){this.base(arguments,a);this.setValue(b);this.setOldValue(c)},properties:{value:{_fast:!0},oldValue:{_fast:!0}},members:{getData:function(){return this.getValue()}},destruct:function(){this._disposeFields("_valueValue","_valueOldValue")}});rwt.qx.Class.define("rwt.client.Timer",{extend:rwt.qx.Target,construct:function(a){this.base(arguments);this.setEnabled(!1);null!=a&&this.setInterval(a);this.__oninterval=rwt.util.Functions.bind(this._oninterval,this);this.__event=new rwt.event.Event("interval")},statics:{once:function(a,b,c){var d=new rwt.client.Timer(c);d.addEventListener("interval",function(c){d.dispose();a.call(b,c);b=null},b);d.start()}},properties:{enabled:{init:!0,check:"Boolean",apply:"_applyEnabled"},interval:{check:"Integer",init:1E3,apply:"_applyInterval"}},members:{__intervalHandler:null,_applyInterval:function(){this.getEnabled()&&this.restart()},_applyEnabled:function(a,b){b?(window.clearInterval(this.__intervalHandler),this.__intervalHandler=null):a&&(this.__intervalHandler=window.setInterval(this.__oninterval,this.getInterval()))},start:function(){this.setEnabled(!0)},startWith:function(a){this.setInterval(a);this.start()},stop:function(){this.setEnabled(!1)},restart:function(){this.stop();this.start()},restartWith:function(a){this.stop();this.startWith(a)},_oninterval:function(){try{this.getEnabled()&&this.hasEventListeners("interval")&&this.dispatchEvent(this.__event,!1)}catch(a){rwt.runtime.ErrorHandler.processJavaScriptError(a)}}},destruct:function(){this.__intervalHandler&&window.clearInterval(this.__intervalHandler);this._disposeFields("__intervalHandler","__oninterval","__event")}});rwt.qx.Class.define("rwt.html.Entity",{statics:{TO_CHARCODE:{quot:34,amp:38,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,fnof:402,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,bull:8226,hellip:8230,prime:8242,Prime:8243,oline:8254,frasl:8260,weierp:8472,image:8465,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,circ:710,tilde:732,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,permil:8240,lsaquo:8249,rsaquo:8250,euro:8364}}});namespace("rwt.runtime");rwt.runtime.Singletons={_holder:{},_sequence:0,get:function(a){var b=this._getId(a);this._holder[b]||(this._holder[b]=new a);return this._holder[b]},clear:function(a){if(a)this._clearId(this._getId(a));else{for(var b in this._holder)this._dispose(this._holder[b]);this._holder={}}},_clearExcept:function(a){for(var b in this._holder)this._isException(this._holder[b],a)||this._clearId(b)},_isException:function(a,b){for(var c=0;c<b.length;c++)if(a instanceof b[c])return!0;return!1},_clearId:function(a){this._holder[a]&&this._dispose(this._holder[a]);delete this._holder[a]},_getId:function(a){"undefined"===typeof a.__singleton&&(a.__singleton="s"+this._sequence++);return a.__singleton},_dispose:function(a){"function"===typeof a.destroy?a.destroy():"function"===typeof a.dispose&&a.dispose()}};namespace("rwt.event");rwt.event.EventHandlerUtil={_lastUpDownType:{},_lastKeyCode:null,cleanUp:function(){delete this.__onKeyEvent;delete this._lastUpDownType;delete this._lastKeyCode},applyBrowserFixes:rwt.util.Variant.select("qx.client",{gecko:function(){rwt.widgets.base.ClientDocument.getInstance().getElement().setAttribute("ondrop","event.preventDefault();");var a=document.documentElement;this._ffMouseFixListener=function(a){var b=null;try{b=a.originalTarget.tagName}catch(d){}0===a.button&&null!=b&&"INPUT"!=b&&"SELECT"!=b&&a.preventDefault()};a.addEventListener("mousedown",this._ffMouseFixListener,!1)},"default":function(){}}),getDomTarget:rwt.util.Variant.select("qx.client",{"webkit|blink":function(a){(a=a.target||a.srcElement)&&a.nodeType==rwt.html.Nodes.TEXT&&(a=a.parentNode);return a},"default":function(a){return a.target}}),stopDomEvent:function(a){a._prevented=!0;a.preventDefault&&a.preventDefault();try{a.keyCode=0}catch(b){}a.returnValue=!1},wasStopped:function(a){return a._prevented?!0:!1},blockUserDomEvents:function(a,b){if(b)for(var c=0;c<this._userEventTypes.length;c++)a.addEventListener(this._userEventTypes[c],this._domEventBlocker,!1);else for(c=0;c<this._userEventTypes.length;c++)a.removeEventListener(this._userEventTypes[c],this._domEventBlocker,!1)},_userEventTypes:["mouseover","mousemove","mouseout","mousedown","mouseup","click","dblclick","contextmenu","onwheel"in document?"wheel":"mousewheel","keydown","keypress","keyup"],_domEventBlocker:function(a){rwt.event.EventHandlerUtil.stopDomEvent(a);a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation()},getOriginalTargetObject:function(a){a==document.documentElement&&(a=document.body);try{for(;null!=a&&null==a.rwtWidget;)a=a.parentNode}catch(b){a=null}return a?a.rwtWidget:null},getOriginalTargetObjectFromEvent:function(a,b){var c=this.getDomTarget(a);if(b){var d=b.document;if(c==b||c==d||c==d.documentElement||c==d.body)return d.body.rwtWidget}return this.getOriginalTargetObject(c)},getRelatedTargetObjectFromEvent:function(a){var b=rwt.event.EventHandlerUtil,c=a.relatedTarget;c||(c="mouseover"==a.type?a.fromElement:a.toElement);return b.getTargetObject(c)},getTargetObject:function(a,b,c){if(!b&&(b=this.getOriginalTargetObject(a),!b))return null;for(;b;){if(!c&&!b.getEnabled())return null;if(!b.getAnonymous())break;b=b.getParent()}return b},handleFocusedChild:function(a){if(a.getEnabled()&&!(a instanceof rwt.widgets.base.ClientDocument)){rwt.widgets.util.FocusHandler.mouseFocus=!0;var b=a.getFocusRoot();if(b){for(var c=a;!c.isFocusable()&&c!=b;){if(c instanceof rwt.widgets.MenuBar)return;c=c.getParent()}rwt.event.EventHandler.setFocusRoot(b);b.setFocusedChild(c);b.setActiveChild(a)}}},getKeyCode:rwt.util.Variant.select("qx.client",{gecko:function(a){return a.keyCode},"default":function(a){return"keypress"!==a.type||13===a.keyCode||27===a.keyCode?a.keyCode:0}}),getCharCode:rwt.util.Variant.select("qx.client",{"default":function(a){return"keypress"===a.type&&13!==a.keyCode&&27!==a.keyCode?a.charCode:0},trident:function(a){return"keypress"===a.type&&13!==a.keyCode&&27!==a.keyCode?a.keyCode:0}}),isFirstKeyDown:function(a){return"keydown"!==this._lastUpDownType[a]},getEventPseudoTypes:function(a,b){var c;"keydown"===a.type?(c=rwt.client.Client.isGecko()?!this.isModifier(b):!this.isNonPrintableKeyCode(b),c=this.isFirstKeyDown(b)?c?["keydown"]:["keydown","keypress"]:c?[]:["keypress"]):c=[a.type];return c},mustRestoreKeyup:function(a,b){var c=[];"keydown"===b[0]&&(this.isFirstKeyDown(93)||93===a||c.push(93));return c},mustRestoreKeypress:function(a,b){return rwt.client.Client.isGecko()&&25>rwt.client.Client.getMajor()?!1:this.wasStopped(a)?1===b.length&&"keydown"===b[0]||0===b.length:!1},saveData:function(a,b){"keypress"!==a.type&&(this._lastUpDownType[b]=a.type,this._lastKeyCode=b)},clearStuckKey:function(a){this._lastUpDownType[a]="keyup"},keyCodeToIdentifier:function(a){var b="Unidentified";void 0!==this._numpadToCharCode[a]?b=String.fromCharCode(this._numpadToCharCode[a]):void 0!==this._keyCodeToIdentifierMap[a]?b=this._keyCodeToIdentifierMap[a]:void 0!==this._specialCharCodeMap[a]?b=this._specialCharCodeMap[a]:this.isAlphaNumericKeyCode(a)&&(b=String.fromCharCode(a));return b},charCodeToIdentifier:function(a){return void 0!==this._specialCharCodeMap[a]?this._specialCharCodeMap[a]:String.fromCharCode(a).toUpperCase()},isNonPrintableKeyCode:rwt.util.Variant.select("qx.client",{"default":function(a){return this._keyCodeToIdentifierMap[a]?!0:!1},"webkit|blink":function(a){return this._keyCodeToIdentifierMap[a]||27===a?!0:!1}}),isSpecialKeyCode:function(a){return this._specialCharCodeMap[a]?!0:!1},isModifier:function(a){return 16<=a&&20>=a&&19!==a},isAlphaNumericKeyCode:function(a){var b=!1;if(a>=this._charCodeA&&a<=this._charCodeZ||a>=this._charCode0&&a<=this._charCode9)b=!0;return b},shouldBlock:function(a,b,c,d){a=!0;b=isNaN(b)||0===b?this.charCodeToIdentifier(c):this.keyCodeToIdentifier(b);this._nonBlockableKeysMap[b]||d.altKey?a=!1:d.ctrlKey&&(a=!0===this._blockableCtrlKeysMap[b]);return a},getElementAt:function(a,b){return document.elementFromPoint(a,b)},_specialCharCodeMap:{13:"Enter",27:"Escape",32:"Space"},_nonBlockableKeysMap:{Control:!0,Alt:!0,Shift:!0,Meta:!0,Win:!0,F1:!0,F2:!0,F3:!0,F4:!0,F5:!0,F6:!0,F7:!0,F8:!0,F9:!0,F10:!0,F11:!0,F12:!0},_blockableCtrlKeysMap:{F:!0,A:!0,C:!0,V:!0,X:!0,Z:!0,Y:!0},_keyCodeToIdentifierMap:{8:"Backspace",9:"Tab",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",224:"Meta",37:"Left",38:"Up",39:"Right",40:"Down",33:"PageUp",34:"PageDown",35:"End",36:"Home",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",44:"PrintScreen",145:"Scroll",19:"Pause",91:"Win",93:"Apps"},_numpadToCharCode:{96:48,97:49,98:50,99:51,100:52,101:53,102:54,103:55,104:56,105:57,106:42,107:43,109:45,110:44,111:47},_charCodeA:65,_charCodeZ:90,_charCode0:48,_charCode9:57};namespace("rwt.remote");rwt.remote.HandlerRegistry={_registry:{},add:function(a,b){this._registry[a]=b},remove:function(a){delete this._registry[a]},getHandler:function(a){var b=this._registry[a];if(void 0===b)throw Error("No Handler for type "+a);return b},hasHandler:function(a){return null!=this._registry[a]}};namespace("rwt.remote");rwt.remote.ObjectRegistry={_map:{},_callbacks:{},add:function(a,b,c){this._map[a]={object:b,handler:c};b._rwtId=a;"function"===typeof b.applyObjectId&&b.applyObjectId(a);if(this._callbacks[a]){for(c=0;c<this._callbacks[a].length;c++)this._callbacks[a][c](b);delete this._callbacks[a]}},remove:function(a){null!=a&&null!=this._map[a]&&(delete this._map[a].object._rwtId,delete this._map[a])},getId:function(a){var b=null;null!=a&&null!=a._rwtId&&(b=a._rwtId);return b},getObject:function(a){return(a=this.getEntry(a))?a.object:null},containsObject:function(a){return a?null!=a._rwtId:!1},getEntry:function(a){var b=this._map[a];if(null==b&&rwt.remote.HandlerRegistry.hasHandler(a)){var c=rwt.remote.HandlerRegistry.getHandler(a);!0===c.service&&(this.add(a,c.factory(),c),b=this._map[a])}return b},addRegistrationCallback:function(a,b){this._callbacks[a]||(this._callbacks[a]=[]);this._callbacks[a].push(b)}};namespace("rwt.remote");rwt.remote.HandlerUtil={SERVER_DATA:"org.eclipse.swt.widgets.Widget#data",_controlDestructor:function(a){rwt.remote.HandlerUtil._widgetDestructor(a)},_childrenFinder:function(a){return rwt.remote.HandlerUtil.getDestroyableChildren(a)},_widgetDestructor:function(a){var b=a.getUserData("protocolParent");b&&rwt.remote.HandlerUtil.removeDestroyableChild(b,a);a.setToolTipText(null);a.destroy()},_controlProperties:"parent children tabIndex toolTipMarkupEnabled toolTip visibility enabled foreground background backgroundImage cursor customVariant bounds font menu activeKeys cancelKeys data direction".split(" "),_controlPropertyHandler:{parent:function(a,b){var c=a.getParent();(null==c?null:rwt.remote.ObjectRegistry.getId(c))!==b&&(a.setUserData("scrolledComposite",null),a.setUserData("tabFolder",null),null!=c&&rwt.remote.HandlerUtil.removeDestroyableChild(c,a),rwt.remote.HandlerUtil.setParent(a,b))},data:function(a,b){var c=rwt.remote.HandlerUtil.getServerData(a);rwt.util.Objects.mergeWith(c,b);a.dispatchSimpleEvent("dataChanged")},children:function(a,b){if(null!==b)for(var c=b.length,d=function(a){var d=b.indexOf(rwt.remote.ObjectRegistry.getId(a));a.setZIndex(c-d)},e=0;e<c;e++)rwt.remote.HandlerUtil.callWithTarget(b[e],d);a.setUserData("rwt_Children",b)},foreground:function(a,b){null===b?a.resetTextColor():a.setTextColor(rwt.util.Colors.rgbToRgbString(b))},background:function(a,b){if(null===b)a.resetBackgroundColor(),null==a.__user$backgroundGradient&&a.resetBackgroundGradient();else{null==a.__user$backgroundGradient&&a.setBackgroundGradient(null);var c=0===b[3]?"transparent":rwt.util.Colors.rgbToRgbString(b);a.setBackgroundColor(c)}},backgroundImage:function(a,b){null===b?(a.resetBackgroundImage(),a.setUserData("backgroundImageSize",null)):(a.setUserData("backgroundImageSize",b.slice(1)),a.setBackgroundImage(b[0]))},cursor:function(a,b){null===b?a.resetCursor():a.setCursor(b)},bounds:function(a,b){null!==a.getUserData("tabFolder")&&(b[0]=0,b[1]=0);null===a.getUserData("scrolledComposite")&&(a.setLeft(b[0]),a.setTop(b[1]));a.setWidth(b[2]);a.setHeight(b[3])},toolTipMarkupEnabled:function(a,b){a.setUserData("toolTipMarkupEnabled",b)},toolTip:function(a,b){rwt.widgets.base.WidgetToolTip.setToolTipText(a,b)},font:function(a,b){if(a.setFont)if(null===b)a.resetFont();else{var c=rwt.html.Font.fromArray(b);a.setFont(c)}},menu:function(a,b){rwt.remote.HandlerUtil.callWithTarget(b,function(b){a.setContextMenu(b);var c=rwt.widgets.Menu.menuDetectedByKey,e=rwt.widgets.Menu.menuDetectedByMouse;null==b?(a.removeEventListener("keydown",c),a.removeEventListener("mouseup",e)):(a.addEventListener("keydown",c),a.addEventListener("mouseup",e))})},activeKeys:function(a,b){var c=rwt.util.Objects.fromArray(b);a.setUserData("activeKeys",c)},cancelKeys:function(a,b){var c=rwt.util.Objects.fromArray(b);a.setUserData("cancelKeys",c)}},_controlListeners:"FocusIn FocusOut MouseDown MouseUp MouseDoubleClick KeyDown Traverse MenuDetect Help Activate Deactivate".split(" "),_controlListenerHandler:{KeyDown:function(a,b){a.setUserData("keyListener",b?!0:null)},Traverse:function(a,b){a.setUserData("traverseListener",b?!0:null)},FocusIn:function(a,b){var c=rwt.remote.EventUtil,d=rwt.remote.EventUtil.focusGained;b?a.addEventListener("focus",d,c):a.removeEventListener("focus",d,c)},FocusOut:function(a,b){var c=rwt.remote.EventUtil,d=rwt.remote.EventUtil.focusLost;b?a.addEventListener("blur",d,c):a.removeEventListener("blur",d,c)},MouseDown:function(a,b){var c=rwt.remote.EventUtil.mouseDown;b?a.addEventListener("mousedown",c,void 0):a.removeEventListener("mousedown",c,void 0)},MouseUp:function(a,b){var c=rwt.remote.EventUtil.mouseUp;b?a.addEventListener("mouseup",c,void 0):a.removeEventListener("mouseup",c,void 0)},MouseDoubleClick:function(a,b){var c=rwt.remote.EventUtil.mouseDoubleClick,d=rwt.remote.EventUtil.mouseUpCounter;b?(a.addEventListener("mousedown",c,void 0),a.addEventListener("mouseup",d,void 0)):(a.removeEventListener("mousedown",c,void 0),a.removeEventListener("mouseup",d,void 0))},MenuDetect:function(a,b){var c=rwt.remote.EventUtil.menuDetectedByKey,d=rwt.remote.EventUtil.menuDetectedByMouse;b?(a.addEventListener("keydown",c,void 0),a.addEventListener("mouseup",d,void 0)):(a.removeEventListener("keydown",c,void 0),a.removeEventListener("mouseup",d,void 0))},Help:function(a,b){var c=rwt.remote.EventUtil.helpRequested;b?a.addEventListener("keydown",c,void 0):a.removeEventListener("keydown",c,void 0)},Activate:function(a,b){a.setUserData("activateListener",b?!0:null)},Deactivate:function(a,b){a.setUserData("deactivateListener",b?!0:null)}},_specialHandler:{backgroundGradient:function(a,b){var c=null;if(b){for(var d=b[0],e=b[1],f=b[2],c=[],g=0;g<d.length;g++)c[g]=[e[g]/100,rwt.util.Colors.rgbToRgbString(d[g])];c.horizontal=!f}a.setBackgroundGradient(c)},roundedBorder:function(a,b){if(b){var c=b[0],d=rwt.util.Colors.rgbToRgbString(b[1]),e=b.slice(-4),c=new rwt.html.Border(c,"solid",d,e);a.setBorder(c)}else a.resetBorder()}},_listenerMethodHandler:{addListener:function(a,b){rwt.remote.HandlerUtil.callWithTarget(b.listenerId,function(c){rwt.scripting.EventBinding.addListener(a,b.eventType,c)})},removeListener:function(a,b){rwt.remote.HandlerUtil.callWithTarget(b.listenerId,function(c){rwt.scripting.EventBinding.removeListener(a,b.eventType,c)})}},_controlScriptingMethods:{forceFocus:function(){var a=!1;this.getEnabled()&&rwt.widgets.util.WidgetUtil.isVisible(this)&&(a=rwt.remote.ObjectRegistry.getId(this),rwt.widgets.Display.getCurrent().setFocusControl(a),a=!0);return a},getBackground:function(){return rwt.util.Colors.stringToRgb(this.getBackgroundColor())},getForeground:function(){return rwt.util.Colors.stringToRgb(this.getTextColor())},getToolTipText:function(){return this.getToolTipText()},getVisible:function(){return this.getVisibility()},getEnabled:function(){return this.getEnabled()},getCursor:function(){return this.__user$cursor||null}},_widgetScriptingMethods:{addListener:function(a,b){rwt.scripting.EventBinding.addListener(this,a,b)},removeListener:function(a,b){rwt.scripting.EventBinding.removeListener(this,a,b)},setData:function(a,b){if(2!==arguments.length)throw Error("Wrong number of arguments in setData: Expected 2, found "+arguments.length);rwt.remote.HandlerUtil.getServerData(this)[a]=b;this.dispatchSimpleEvent("dataChanged")},getData:function(a){if(1!==arguments.length)throw Error("Wrong number of arguments in getData: Expected 1, found "+arguments.length);var b=null,c=rwt.remote.HandlerUtil.getServerData(this);"undefined"!==typeof c[a]&&(b=c[a]);return b}},getWidgetDestructor:function(){return this._widgetDestructor},getControlDestructor:function(){return this._controlDestructor},getDestroyableChildrenFinder:function(){return this._childrenFinder},extendControlProperties:function(a){return a.concat(this._controlProperties)},extendControlPropertyHandler:function(a){return rwt.util.Objects.mergeWith(a,this._controlPropertyHandler,!1)},extendListenerMethodHandler:function(a){return rwt.util.Objects.mergeWith(a,this._listenerMethodHandler,!1)},extendControlListeners:function(a){return a.concat(this._controlListeners)},extendControlListenerHandler:function(a){return rwt.util.Objects.mergeWith(a,this._controlListenerHandler,!1)},extendControlScriptingMethods:function(a){return rwt.util.Objects.mergeWith(a,this._controlScriptingMethods,!1)},getBackgroundGradientHandler:function(){return this._specialHandler.backgroundGradient},getRoundedBorderHandler:function(){return this._specialHandler.roundedBorder},getControlPropertyHandler:function(a){return this._controlPropertyHandler[a]},getControlListenerHandler:function(a){return this._controlListenerHandler[a]},addStatesForStyles:function(a,b){if(b)for(var c=0;c<b.length;c++)a.addState("rwt_"+b[c]);a._renderAppearance();delete a._isInGlobalStateQueue},createStyleMap:function(a){var b={};if(a)for(var c=0;c<a.length;c++)b[a[c]]=!0;return b},setParent:function(a,b){var c=this._setParentImplementation;this.callWithTarget(b,function(b){c(a,b)})},_setParentImplementation:function(a,b){b instanceof rwt.widgets.ScrolledComposite?a.setUserData("scrolledComposite",b):b instanceof rwt.widgets.TabFolder?a.setUserData("tabFolder",b):b instanceof rwt.widgets.ExpandBar?b.addWidget(a):a.setParent(b);rwt.remote.HandlerUtil.addDestroyableChild(b,a);a.setUserData("protocolParent",b)},callWithTarget:function(a,b){if(null==a)b(null);else{var c=rwt.remote.ObjectRegistry.getObject(a);c?b(c):rwt.remote.ObjectRegistry.addRegistrationCallback(a,b)}},callWithTargets:function(a,b){for(var c=[],d=c.resolved=0;d<a.length;d++)this.callWithTarget(a[d],this._createPartCallback(c,a,d,b))},_createPartCallback:function(a,b,c,d){return function(e){a[c]=e;a.resolved++;a.resolved===b.length&&(delete a.resolved,d(a))}},filterUnregisteredObjects:function(a){for(var b=rwt.remote.ObjectRegistry,c=[],d=0;d<a.length;d++)b.getId(a[d])&&c.push(a[d]);return c},addDestroyableChild:function(a,b){var c=a.getUserData("destroyableChildren");null==c&&(c={},a.setUserData("destroyableChildren",c));c[rwt.qx.Object.toHashCode(b)]=b},removeDestroyableChild:function(a,b){var c=a.getUserData("destroyableChildren");null!=c&&delete c[rwt.qx.Object.toHashCode(b)]},getDestroyableChildren:function(a){a=a.getUserData("destroyableChildren");null==a&&(a={});var b=[],c;for(c in a)b.push(a[c]);return b},getServerData:function(a){var b=a.getUserData(rwt.remote.HandlerUtil.SERVER_DATA);null==b&&(b={},a.setUserData(rwt.remote.HandlerUtil.SERVER_DATA,b));return b}};namespace("rwt.util");rwt.util.Encoding={_escapeRegExp:/(&|<|>|\")/g,_escapeRegExpMnemonics:/(&&|&|<|>|")/g,_newlineRegExp:/(\r\n|\n|\r)/g,_outerWhitespaceRegExp:/(^ {1,1}| +$)/g,_outerWhitespaceRegExp2:/(^ {1,}| +$)/g,_whitespaceRegExp:/ {2,}/g,_escapeResolver:null,_escapeResolverMnemonics:null,_mnemonicFound:!1,_escapeMap:{"\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","\x26\x26":"\x26amp;","\x26":"\x26amp;"},escapeText:function(a,b){if(null===a)throw Error("escapeText with parameter null not allowed");var c;this._mnemonicFound=!1;c=!0===b?a.replace(this._escapeRegExpMnemonics,this._getEscapeResolverMnemonics()):"number"===typeof b?this._escapeWithMnemonic(a,b):a.replace(this._escapeRegExp,this._getEscapeResolver());return this.truncateAtZero(c)},truncateAtZero:function(a){var b=a.indexOf(String.fromCharCode(0));-1!==b&&(a=a.substring(0,b));return a},replaceNewLines:function(a,b){return a.replace(this._newlineRegExp,1<arguments.length?b:"\\n")},replaceWhiteSpaces:function(a){a=a.replace(this._outerWhitespaceRegExp,this._outerWhitespaceResolver);return a=a.replace(this._whitespaceRegExp,this._whitespaceResolver)},escapeLeadingTrailingSpaces:function(a){return a.replace(this._outerWhitespaceRegExp2,this._outerWhitespaceResolver)},escapeRegexpChars:function(a){return a.replace(/([\\\.\(\)\[\]\{\}\^\$\?\+\*])/g,"\\$1")},unescape:function(a){return this._unescapeEntities(a,rwt.html.Entity.TO_CHARCODE)},removeAmpersandControlCharacters:function(a){return a.replace(/(&&|&)/g,function(a){return"\x26\x26"===a?"\x26":""})},_escapeWithMnemonic:function(a,b){return[a.slice(0,b).replace(this._escapeRegExp,this._getEscapeResolver()),'\x3cspan style\x3d"text-decoration:underline"\x3e',a.charAt(b).replace(this._escapeRegExp,this._getEscapeResolver()),"\x3c/span\x3e",a.slice(b+1).replace(this._escapeRegExp,this._getEscapeResolver())].join("")},_getEscapeResolverMnemonics:function(){if(null===this._escapeResolverMnemonics){this._getEscapeResolver();var a=this;this._escapeResolverMnemonics=function(b){"\x26"!==b||a._mnemonicFound?b=a._escapeResolver(b):(b="",a._mnemonicFound=!0);return b}}return this._escapeResolverMnemonics},_getEscapeResolver:function(){if(null===this._escapeResolver){var a=this;this._escapeResolver=function(b){return a._escapeMap[b]}}return this._escapeResolver},_outerWhitespaceResolver:function(a){return a.replace(/ /g,"\x26nbsp;")},_whitespaceResolver:function(a){return a.slice(1).replace(/ /g,"\x26nbsp;")+" "},_unescapeEntities:function(a,b){return a.replace(/&[#\w]+;/gi,function(a){var c=a;a=a.substring(1,a.length-1);var e=b[a];e?c=String.fromCharCode(e):"#"===a.charAt(0)&&("X"===a.charAt(1).toUpperCase()?(e=a.substring(2),e.match(/^[0-9A-Fa-f]+$/gi)&&(c=String.fromCharCode(parseInt(e,16)))):(e=a.substring(1),e.match(/^\d+$/gi)&&(c=String.fromCharCode(parseInt(e,10)))));return c})}};namespace("rwt.widgets");rwt.widgets.Display=function(){this._document=rwt.widgets.base.ClientDocument.getInstance();this._server=rwt.remote.Connection.getInstance();this._exitConfirmation=null;this._initialized=this._hasResizeListener=!1;if(void 0!==rwt.widgets.Display._current)throw Error("Display can not be created twice");rwt.widgets.Display._current=this};rwt.widgets.Display.getCurrent=function(){return rwt.widgets.Display._current};rwt.widgets.Display._onAppearFocus=function(){this.focus();this.removeEventListener("appear",rwt.widgets.Display._onAppearFocus,this)};rwt.widgets.Display.prototype={applyObjectId:function(){this._initialized||this.init()},init:function(){this._appendWindowSize();this._appendSystemDPI();this._appendColorDepth();this._appendInitialHistoryEvent();this._appendTimezoneOffset();this._appendStartupParameters();this._attachListener();this._server.send();this._initialized=!0},allowEvent:function(){rwt.remote.KeyEventSupport.getInstance().allowEvent()},cancelEvent:function(){rwt.remote.KeyEventSupport.getInstance().cancelEvent()},beep:function(){},setOverflow:function(a){"scroll"!==a&&"scrollX"!==a&&"scrollY"!==a||this._document.setOverflow(a)},setExitConfirmation:function(a){this._exitConfirmation=a},setFocusControl:function(a){var b=rwt.remote.ObjectRegistry.getObject(a);b.isSeeable()?setTimeout(function(){b.focus()},0):b.addEventListener("appear",rwt.widgets.Display._onAppearFocus,b)},setMnemonicActivator:function(a){rwt.widgets.util.MnemonicHandler.getInstance().setActivator(a)},setEnableUiTests:function(a){rwt.widgets.base.Widget._renderHtmlIds=a},getDPI:function(){var a=[0,0];if("number"==typeof screen.systemXDPI)a[0]=parseInt(screen.systemXDPI,10),a[1]=parseInt(screen.systemYDPI,10);else{var b=document.createElement("div");b.style.width="1in";b.style.height="1in";b.style.padding=0;document.body.appendChild(b);a[0]=parseInt(b.offsetWidth,10);a[1]=parseInt(b.offsetHeight,10);document.body.removeChild(b)}return a},setHasResizeListener:function(a){this._hasResizeListener=a},_attachListener:function(){this._document.addEventListener("windowresize",this._onResize,this);this._document.addEventListener("keypress",this._onKeyPress,this);this._server.addEventListener("send",this._onSend,this);rwt.remote.KeyEventSupport.getInstance();rwt.runtime.System.getInstance().addEventListener("beforeunload",this._onBeforeUnload,this);rwt.runtime.System.getInstance().addEventListener("unload",this._onUnload,this)},_onResize:function(){this._appendWindowSize();this._hasResizeListener&&rwt.remote.Connection.getInstance().getRemoteObject(this).notify("Resize",null,500)},_onKeyPress:function(a){"Escape"==a.getKeyIdentifier()&&a.preventDefault()},_onSend:function(){var a=rwt.event.MouseEvent.getPageX(),b=rwt.event.MouseEvent.getPageY(),a=[Math.round(a),Math.round(b)];rwt.remote.Connection.getInstance().getRemoteObject(this).set("cursorLocation",a)},_onBeforeUnload:function(a){null!==this._exitConfirmation&&""!==this._exitConfirmation&&(a.getDomEvent().returnValue=this._exitConfirmation,a.setUserData("returnValue",this._exitConfirmation))},_onUnload:function(){this._document.removeEventListener("windowresize",this._onResize,this);this._document.removeEventListener("keypress",this._onKeyPress,this);this._server.removeEventListener("send",this._onSend,this);rwt.client.ServerPush.getInstance().setActive(!1);this._sendShutdown()},_sendShutdown:function(){var a=rwt.remote.Connection.getInstance();a.getMessageWriter().appendHead("shutdown",!0);a.sendImmediate(!1)},_appendWindowSize:function(){var a=[0,0,window.innerWidth,window.innerHeight];rwt.remote.Connection.getInstance().getRemoteObject(this).set("bounds",a)},_appendSystemDPI:function(){var a=this.getDPI();rwt.remote.Connection.getInstance().getRemoteObject(this).set("dpi",a)},_appendColorDepth:function(){var a=16;"number"==typeof screen.colorDepth&&(a=parseInt(screen.colorDepth,10));rwt.client.Client.isGecko()&&(a=24==a?32:a);rwt.remote.Connection.getInstance().getRemoteObject(this).set("colorDepth",a)},_appendInitialHistoryEvent:function(){var a=window.location.hash;if(""!==a){var b=rwt.client.BrowserNavigation.getInstance(),c=rwt.remote.HandlerRegistry.getHandler("rwt.client.BrowserNavigation");rwt.remote.ObjectRegistry.add("rwt.client.BrowserNavigation",b,c);rwt.remote.Connection.getInstance().getRemoteObject(b).notify("Navigation",{state:decodeURIComponent(a.substr(1))})}},_appendTimezoneOffset:function(){var a=rwt.client.Client.getTimezoneOffset();rwt.remote.Connection.getInstance().getMessageWriter().appendSet("rwt.client.ClientInfo","timezoneOffset",a)},_appendStartupParameters:function(){var a=rwt.runtime.System.getInstance().getStartupParameters();a&&rwt.remote.Connection.getInstance().getMessageWriter().appendSet("rwt.client.StartupParameters","parameters",a)}};rwt.remote.HandlerRegistry.add("rwt.widgets.Display",{factory:function(a){return new rwt.widgets.Display(a)},destructor:null,properties:"overflow exitConfirmation mnemonicActivator focusControl enableUiTests activeKeys cancelKeys".split(" "),methods:["allowEvent","cancelEvent","beep"],propertyHandler:{activeKeys:function(a,b){var c=rwt.util.Objects.fromArray(b);rwt.remote.KeyEventSupport.getInstance().setKeyBindings(c)},cancelKeys:function(a,b){var c=rwt.util.Objects.fromArray(b);rwt.remote.KeyEventSupport.getInstance().setCancelKeys(c)}},listeners:["KeyDown","Resize"]});rwt.qx.Mixin.define("rwt.widgets.util.OverStateMixin",{construct:function(){this.addEventListener("mouseover",this._onMouseOver,this);this.addEventListener("mouseout",this._onMouseOut,this)},members:{_onMouseOver:function(){this.addState("over")},_onMouseOut:function(){this.removeState("over")}}});rwt.qx.Mixin.define("rwt.widgets.util.HtmlAttributesMixin",{destruct:function(){delete this._htmlAttributes},members:{applyObjectId:function(a){rwt.widgets.base.Widget._renderHtmlIds&&this.setHtmlAttribute("id",a)},clearHtmlAttributes:function(){if(this._htmlAttributes){if(this._element)for(var a in this._htmlAttributes)this._element.removeAttribute(a);this._htmlAttributes={}}},setHtmlAttributes:function(a){for(var b in a)this.setHtmlAttribute(b,a[b])},setHtmlAttribute:function(a,b){if(this._htmlAttributes||b)this._htmlAttributes||(this._htmlAttributes={}),null===b?(delete this._htmlAttributes[a],this._element&&this._element.removeAttribute(a)):(this._htmlAttributes[a]=b,this._element&&this._element.setAttribute(a,b)),this._update&&this._update()},getHtmlAttribute:function(a){return this.getHtmlAttributes()[a]||""},getHtmlAttributes:function(){return this._htmlAttributes||{}}}});rwt.qx.Class.define("rwt.widgets.util.WidgetUtil",{statics:{getControl:function(a){for(var b=rwt.remote.WidgetManager.getInstance();null!=a&&!b.isControl(a);)a=a.getParent?a.getParent():null;return a},getShell:function(a){for(;null!=a&&"rwt.widgets.Shell"!==a.classname;)a=a.getParent();return a},getChildIds:function(a){return a.getUserData("rwt_Children")},isVisible:function(a){for(var b=!0;a&&b;)b=a.getVisibility(),a=a.getParent();return b},getGC:function(a){var b=a.getUserData("rwt.widgets.GC");null==b&&(b=new rwt.widgets.GC(a),a.setUserData("rwt.widgets.GC",b));return b},callWithElement:function(a,b){a.getElement()?b(a.getElement()):a.addEventListener("create",function d(){b(a.getElement());a.removeEventListener("create",d)})},isWidget:function(a){return 0===(a.classname||"").indexOf("rwt.widgets")||a instanceof rwt.widgets.base.Widget},_fakeMouseEvent:function(a,b){a instanceof rwt.widgets.base.Widget||(a=(a=rwt.event.EventHandlerUtil.getTargetObject(a))||rwt.widgets.base.ClientDocument.getInstance());if(a.getEnabled()){var c=a._getTargetNode(),d=rwt.event.EventHandlerUtil.getTargetObject(null,a,!0),c=new rwt.event.MouseEvent(b,{type:b,target:c,button:0,wheelData:0,detail:0,pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0,shiftKey:!1,ctrlKey:!1,altKey:!1,metaKey:!1,preventDefault:function(){}},c,d,a,null);d.dispatchEvent(c)}}}});(function(){var a=rwt.client.Client;rwt.qx.Class.define("rwt.html.Style",{statics:{VENDOR_PREFIX_VALUE:rwt.util.Variant.select("qx.client",{gecko:"-moz-","webkit|blink":"-webkit-",trident:"-ms-","default":""}),VENDOR_PREFIX_PROPERTY:rwt.util.Variant.select("qx.client",{gecko:"Moz","webkit|blink":"webkit",trident:"ms","default":""}),getStyleProperty:function(a,b){try{var c=rwt.html.Nodes.getDocument(a).defaultView.getComputedStyle(a,null),d=c?c[b]:null;return d?d:a.style[b]}catch(g){throw Error("Could not evaluate computed style: "+a+"["+b+"]: "+g);}},setStyleProperty:function(a,b,e){a.setStyleProperty?a.setStyleProperty(b,e):a.style[b]=e},removeStyleProperty:function(a,b){a instanceof rwt.widgets.base.Widget?a.removeStyleProperty(b):a.style[b]=""},getOwnProperty:function(a,b){if(a.getStyleProperty)a.getStyleProperty(b);else return a.style[b]},getStyleSize:function(a,b){return parseInt(rwt.html.Style.getStyleProperty(a,b),10)||0},getMarginLeft:function(a){return rwt.html.Style.getStyleSize(a,"marginLeft")},getMarginTop:function(a){return rwt.html.Style.getStyleSize(a,"marginTop")},getMarginRight:function(a){return rwt.html.Style.getStyleSize(a,"marginRight")},getMarginBottom:function(a){return rwt.html.Style.getStyleSize(a,"marginBottom")},getPaddingLeft:function(a){return rwt.html.Style.getStyleSize(a,"paddingLeft")},getPaddingTop:function(a){return rwt.html.Style.getStyleSize(a,"paddingTop")},getPaddingRight:function(a){return rwt.html.Style.getStyleSize(a,"paddingRight")},getPaddingBottom:function(a){return rwt.html.Style.getStyleSize(a,"paddingBottom")},getBorderLeft:function(a){return"none"==rwt.html.Style.getStyleProperty(a,"borderLeftStyle")?0:rwt.html.Style.getStyleSize(a,"borderLeftWidth")},getBorderTop:function(a){return"none"==rwt.html.Style.getStyleProperty(a,"borderTopStyle")?0:rwt.html.Style.getStyleSize(a,"borderTopWidth")},getBorderRight:function(a){return"none"==rwt.html.Style.getStyleProperty(a,"borderRightStyle")?0:rwt.html.Style.getStyleSize(a,"borderRightWidth")},getBorderBottom:function(a){return"none"==rwt.html.Style.getStyleProperty(a,"borderBottomStyle")?0:rwt.html.Style.getStyleSize(a,"borderBottomWidth")},setBackgroundGradient:function(a,b){a.___rwtStyle__backgroundGradient!==b&&(a.___rwtStyle__backgroundGradient=b,a.___rwtStyle__backgroundImage||this._updateBackground(a))},getBackgroundGradient:function(a){if(a=a.___rwtStyle__backgroundGradient){for(var b=[!0===a.horizontal?"to right":"to bottom"],c=0;c<a.length;c++)b.push(" "+a[c][1]+" "+(100*a[c][0]+"%"));return"linear-gradient( "+b.join()+" )"}},setBackgroundImage:function(a,b){a.___rwtStyle__backgroundImage!==b&&(a.___rwtStyle__backgroundImage=b,this._updateBackground(a))},getBackgroundImage:function(a){return(a=a.___rwtStyle__backgroundImage)?"url("+a+")":"none"},setBackgroundRepeat:function(a,b){a.___rwtStyle__backgroundRepeat!==b&&(a.___rwtStyle__backgroundRepeat=b,a.___rwtStyle__backgroundImage&&this._updateBackground(a))},getBackgroundRepeat:function(a){return a.___rwtStyle__backgroundRepeat},setBackgroundPosition:function(a,b){a.___rwtStyle__backgroundPosition!==b&&(a.___rwtStyle__backgroundPosition=b,a.___rwtStyle__backgroundImage&&this._updateBackground(a))},getBackgroundPosition:function(a){return a.___rwtStyle__backgroundPosition},setBackgroundSize:function(a,b){a.___rwtStyle__backgroundSize!==b&&(a.___rwtStyle__backgroundSize=b,a.___rwtStyle__backgroundImage&&this._updateBackground(a))},setBackgroundColor:function(a,b){var c="transparent"===b?null:b;a.___rwtStyle__backgroundColor!==c&&(a.___rwtStyle__backgroundColor=c,this._updateBackground(a))},getBackgroundColor:function(a){return a.___rwtStyle__backgroundColor||"transparent"},setBoxShadow:function(b,d){var c;c=!a.isWebkit()&&!a.isBlink()||a.isMobileChrome()?"boxShadow":this.VENDOR_PREFIX_VALUE+"box-shadow";if(d){var f=d[0]?"inset ":"",f=f+(d.slice(1,5).join("px ")+"px"),g=rwt.util.Colors.stringToRgb(d[5]);g.push(d[6]);f+=" rgba("+g.join()+")";this.setStyleProperty(b,c,f)}else this.removeStyleProperty(b,c)},setTextShadow:function(a,b){if(b){var c=b.slice(1,4).join("px ")+"px",d=rwt.util.Colors.stringToRgb(b[5]);d.push(b[6]);c+=" rgba("+d.join()+")";this.setStyleProperty(a,"textShadow",c)}else this.removeStyleProperty(a,"textShadow")},setPointerEvents:function(b,d){var c=a.getVersion(),f="gecko"===a.getEngine()&&1.9<=c,c="safari"===a.getBrowser()&&530<=c;f||c?(this.setStyleProperty(b,"pointerEvents",d),b.setAttribute("pointerEvents",d)):this._passEventsThrough(b,d)},setUserSelect:function(a,b){this.setStyleProperty(a,this._prefixProperty("userSelect"),b)},getUserSelect:function(a){return this.getOwnProperty(a,this._prefixProperty("userSelect"))},setTransition:function(a,b){if(!this._transitionProperty){this._transitionProperty="transition";var c=document.createElement("div");"transition"in c.style||("MozTransition"in c.style?this._transitionProperty="MozTransition":"webkitTransition"in c.style&&(this._transitionProperty="webkitTransition"))}this.setStyleProperty(a,this._transitionProperty,b)},_prefixProperty:function(a){return this.VENDOR_PREFIX_PROPERTY?this.VENDOR_PREFIX_PROPERTY+rwt.util.Strings.toFirstUp(a):a},_updateBackground:function(a){var b=[];this._pushBackgroundImage(a,b);this._pushBackgroundGradient(a,b);this._pushBackgroundColor(a,b);0<b.length?(this.setStyleProperty(a,"background",b.join(", ")),a.___rwtStyle__backgroundImage&&a.___rwtStyle__backgroundSize&&this.setStyleProperty(a,"backgroundSize",a.___rwtStyle__backgroundSize)):this._clearCssBackground(a)},_pushBackgroundImage:function(a,b){var c=a.___rwtStyle__backgroundImage;c&&b.push(this._getImageString(c,a.___rwtStyle__backgroundRepeat,a.___rwtStyle__backgroundPosition))},_pushBackgroundGradient:function(a,b){var c=a.___rwtStyle__backgroundGradient;c&&!a.___rwtStyle__backgroundImage&&b.push(this._getGradientString(c))},_pushBackgroundColor:function(b,d){var c=b.___rwtStyle__backgroundColor;c&&(!a.isWebkit()&&!a.isBlink()||b.___rwtStyle__backgroundGradient||d.push(this._getGradientString([[0,c],[1,c]])),d.push(c))},_getGradientString:rwt.util.Variant.select("qx.client",{"webkit|blink":function(a){var b=["linear","left top"];!0===a.horizontal?b.push("right top"):b.push("left bottom");for(var c=0;c<a.length;c++)b.push("color-stop("+a[c][0]+","+a[c][1]+")");return this.VENDOR_PREFIX_VALUE+"gradient( "+b.join()+")"},gecko:function(a){for(var b=[!0===a.horizontal?"0deg":"-90deg"],c=0;c<a.length;c++)b.push(a[c][1]+" "+(100*a[c][0]+"%"));return this.VENDOR_PREFIX_VALUE+"linear-gradient( "+b.join()+")"},trident:function(a){return 9===rwt.client.Client.getMajor()?this._getSvgGradientString(a):this._getDefaultGradientString(a)},"default":function(a){return this._getDefaultGradientString(a)}}),_getDefaultGradientString:function(a){for(var b=[!0===a.horizontal?"90deg":"180deg"],c=0;c<a.length;c++)b.push(a[c][1]+" "+(100*a[c][0]+"%"));return"linear-gradient( "+b.join()+")"},_getSvgGradientString:function(a){var c=[b.start];c.push(a.horizontal?b.horizontal:b.vertical);for(var e=0;e<a.length;e++)c.push(b.color(a[e]));c.push(b.end);return c.join("")},_getImageString:function(a,b,e){return"url("+this._resolveResource(a)+")"+(b?" "+b:"")+(e?" "+e:"")},_clearCssBackground:function(b){a.isTrident()?this.setStyleProperty(b,"background","rgba(0, 0, 0, 0)"):this.removeStyleProperty(b,"background")},_passEventsThrough:function(a,b){var c=rwt.event.EventHandler._mouseEventTypes,d=this._passEventThroughHandler;if("none"===b){this.setStyleProperty(a,"cursor","default");for(var g=0;g<c.length;g++)a.addEventListener(c[g],d,!1)}},_passEventThroughHandler:function(a){var b=rwt.event.EventHandlerUtil,c=b.getDomTarget(a),f=a.type;c.style.display="none";var g=document.elementFromPoint(a.clientX,a.clientY);a.cancelBubble=!0;b.stopDomEvent(a);g&&"mousemove"!==f&&"mouseover"!==f&&"mouseout"!==f&&("mousedown"===f&&rwt.html.Style._refireEvent(g,"mouseover",a),rwt.html.Style._refireEvent(g,f,a),"mouseup"===f&&rwt.html.Style._refireEvent(g,"mouseout",a));c.style.display=""},_refireEvent:function(a,b,e){var c=document.createEvent("MouseEvents");c.initMouseEvent(b,!0,!0,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget);a.dispatchEvent(c)},_resolveResource:function(a){return a}}});var b={start:'url("data:image/svg+xml;charset\x3dutf-8,'+encodeURIComponent("\x3csvg xmlns\x3d'http://www.w3.org/2000/svg'\x3e"),vertical:encodeURIComponent("\x3clinearGradient id\x3d'g' x2\x3d'0' y2\x3d'1'\x3e"),horizontal:encodeURIComponent("\x3clinearGradient id\x3d'g'\x3e"),color:function(a){return encodeURIComponent("\x3cstop offset\x3d'"+100*a[0]+"%' stop-color\x3d'"+a[1]+"'/\x3e")},end:encodeURIComponent("\x3c/linearGradient\x3e\x3crect fill\x3d'url(#g)' ")+encodeURIComponent("width\x3d'100%' height\x3d'100%'/\x3e\x3c/svg\x3e")+'")'}})();rwt.qx.Class.define("rwt.html.Scroll",{statics:{disableScrolling:function(a){this.enableScrolling(a);a.scrollLeft=0;a.scrollTop=0;a.addEventListener("scroll",this._onscroll,!1)},enableScrolling:function(a){a.removeEventListener("scroll",this._onscroll,!1)},_onscroll:function(a){var b=null;a.target?b=a.target==a.currentTarget?a.target:null:a.srcElement&&(b=a.srcElement);!b||0===a.scrollLeft&&0===a.scrollTop||(b.scrollLeft=0,b.scrollTop=0)}}});rwt.qx.Class.define("rwt.html.StyleSheet",{statics:{createElement:document.createStyleSheet?function(a){var b=document.createStyleSheet();a&&(b.cssText=a);return b}:function(a){var b=document.createElement("style");b.type="text/css";b.appendChild(document.createTextNode(a||"body {}"));document.getElementsByTagName("head")[0].appendChild(b);if(b.sheet)return b.sheet;a=document.styleSheets;for(var c=a.length-1;0<=c;c--)if(a[c].ownerNode==b)return a[c];throw"Error: Could not get a reference to the sheet object";},addRule:document.createStyleSheet?function(a,b,c){a.addRule(b,c)}:function(a,b,c){a.insertRule(b+"{"+c+"}",a.cssRules.length)},removeRule:document.createStyleSheet?function(a,b){for(var c=a.rules,d=c.length-1;0<=d;d--)c[d].selectorText==b&&a.removeRule(d)}:function(a,b){for(var c=a.cssRules,d=c.length-1;0<=d;d--)c[d].selectorText==b&&a.deleteRule(d)},removeAllRules:document.createStyleSheet?function(a){for(var b=a.rules.length-1;0<=b;b--)a.removeRule(b)}:function(a){for(var b=a.cssRules.length-1;0<=b;b--)a.deleteRule(b)}}});namespace("rwt.util");(function(){var a=rwt.html.Style,b=rwt.widgets.util.WidgetUtil;rwt.util.RWTQuery=function(a){return new rwt.util.RWTQuery.fn.init(a)};rwt.util._RWTQuery=function(a){return new rwt.util.RWTQuery.fn.init(a,!0)};var c=rwt.util.RWTQuery;rwt.util._RWTQuery.prototype=c.prototype={init:function(a,c){"string"===typeof a&&(a=A(a));this.__access=function(d,e,f){if(b.isWidget(a)){if("function"===typeof e)return e.apply(this,[a,d,c]);if("string"===typeof e)return e=v(a,e),f.apply(this,[e,d,c])}return f.apply(this,[a,d,c])}},attr:function(){return this.__access(arguments,f,g)},removeAttr:function(){return this.__access(arguments,h,k)},prop:function(){return this.__access(arguments,"getElement",l)},removeProp:function(){return this.__access(arguments,"getElement",m)},append:function(){return this.__access(arguments,"_getTargetNode",u)},prepend:function(){return this.__access(arguments,"_getTargetNode",y)},detach:function(){return this.__access(arguments,null,w)},appendTo:function(){return this.__access(arguments,null,I)},insertAfter:function(){return this.__access(arguments,null,J)},insertBefore:function(){return this.__access(arguments,null,B)},css:function(){return this.__access(arguments,n,p)},outerHeight:function(){return this.__access(arguments,"getElement",r)},outerWidth:function(){return this.__access(arguments,"getElement",q)},text:function(){return this.__access(arguments,"_getTargetNode",K)},html:function(){return this.__access(arguments,"_getTargetNode",t)},empty:function(){return this.__access(arguments,"_getTargetNode",C)},clone:function(){return this.__access(arguments,"getElement",L)},get:function(){return this.__access(arguments,"getElement",M)},is:function(){return this.__access(arguments,null,N)},offset:function(){return this.__access(arguments,null,D)}};c.fn=c.prototype;c.fn.init.prototype=c.prototype;c.cssHooks={backgroundColor:{set:function(a,b){rwt.html.Style.setBackgroundColor(a,b)},get:function(a){return rwt.html.Style.getBackgroundColor(a)}},userSelect:{set:function(a,b){rwt.html.Style.setUserSelect(a,b)},get:function(a){return rwt.html.Style.getUserSelect(a)}},backgroundImage:{set:function(a,b){rwt.html.Style.setBackgroundImage(a,z(b))},get:function(a){return rwt.html.Style.getBackgroundImage(a)}},backgroundRepeat:{set:function(a,b){rwt.html.Style.setBackgroundRepeat(a,b)},get:function(a){return rwt.html.Style.getBackgroundRepeat(a)}},backgroundPosition:{set:function(a,b){rwt.html.Style.setBackgroundPosition(a,b)},get:function(a){return rwt.html.Style.getBackgroundPosition(a)}},backgroundGradient:{set:function(a,b){rwt.html.Style.setBackgroundGradient(a,E(b))},get:function(a){return rwt.html.Style.getBackgroundGradient(a)}},textShadow:{set:function(a,b){b instanceof Array?rwt.html.Style.setTextShadow(a,b):a.style.textShadow=b}},boxShadow:{set:function(a,b){b instanceof Array?rwt.html.Style.setBoxShadow(a,b):a.style.boxShadow=b}},border:{set:function(a,b){b&&"object"===typeof b&&b.renderElement?b.renderElement(a):a.style.border=b}},font:{set:function(a,b){b&&"object"===typeof b&&b.renderElement?b.renderElement(a):a.style.font=b}}};c.widgetCssHooks={font:"font",border:"border",backgroundColor:"backgroundColor",textShadow:"textShadow",boxShadow:"shadow",color:"textColor",left:"left",top:"top",width:"width",height:"height",bottom:"bottom",right:"right",opacity:"opacity",overflow:"overflow",userSelect:"selectable",backgroundImage:{set:function(a,b){a.set("backgroundImage",z(b))}},backgroundGradient:{set:function(a,b){a.set("backgroundGradient",E(b))}}};c.cssNumber={columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,zIndex:!0,zoom:!0};var d=function(a){return function(b,c,d){if(1===c.length&&"object"===typeof c[0]){c=c[0];for(var e in c)a.apply(this,[b,[e,c[e]],d]);return this}return a.apply(this,[b,c,d])}},e=function(a){return function(b,c,d){c=c[0].trim().split(" ");for(var e=0;e<c.length;e++)(c[e]||0<c[e].length)&&a.apply(this,[b,c[e],d]);return this}},f=d(function(a,b,c){if(1===b.length)return a.getHtmlAttributes()[b[0]];!c&&x[b[0]]||a.setHtmlAttribute(b[0],b[1]);return this}),g=d(function(a,b,c){if(1===b.length)return a.getAttribute(b[0])||void 0;!c&&x[b[0]]||a.setAttribute(b[0],b[1]);return this}),h=e(function(a,b){a.setHtmlAttribute(b,null)}),k=e(function(a,b){a.removeAttribute(b)}),l=d(function(a,b){if(1===b.length)return a[b[0]];a[b[0]]=b[1];return this}),m=d(function(a,b){try{a[b[0]]="",delete a[b[0]]}catch(Q){}return this}),n=d(function(a,b){var d=c.widgetCssHooks[b[0]];if(1===b.length)return d&&("string"===typeof d||d.get)?"string"===typeof d?(d="get"+d.slice(0,1).toUpperCase()+d.slice(1),a[d]()):d.get(a):a.getStyleProperties()[b[0]];d&&("string"===typeof d||d.set)?"string"===typeof d?a.set(d,b[1]):d.set(a,b[1]):a.setStyleProperty(b[0],b[1]);return this}),p=d(function(b,d){var e=c.cssHooks[d[0]];if(1===d.length)return e&&e.get?e.get(b):a.getStyleProperty(b,d[0]);if(e&&e.set)e.set(b,d[1]);else{var e=b.style,f=d[0],g;g="number"!==typeof d[1]||c.cssNumber[d[0]]?d[1]:d[1]+"px";e[f]=g}return this}),r=function(a){return a.offsetHeight},q=function(a){return a.offsetWidth},u=function(a,b){a.appendChild(v(b[0]));return this},y=function(a,b){a.insertBefore(v(b[0]),a.firstChild);return this},J=function(a,b){var c=v(b[0]);c.parentNode.insertBefore(a,c.nextSibling);return this},B=function(a,b){var c=v(b[0]);c.parentNode.insertBefore(a,c);return this},I=function(a,b){v(b[0],"_getTargetNode").appendChild(a);return this},w=function(a){a.parentNode.removeChild(a);return this},M=function(a,b){var c=[a];return 0<b.length?c[b[0]]:c},N=function(a,b){return a===v(b[0])},D=function(a){a=rwt.html.Location.get(a);return{left:a.left,top:a.top}},K=function(a,b){if(0===b.length)return a.textContent;a.textContent=b[0];return this},t=function(a,b){if(0===b.length)return a.innerHTML;a.innerHTML=b[0];return this},C=function(a){for(;a.firstChild;)a.removeChild(a.firstChild);return this},L=function(a){for(var b=a.cloneNode(!0),d=0;d<O.length;d++){var e=O[d];a[e]&&(b[e]=a[e])}return c(b)},x={id:!0,style:!0},A=function(a){if(a=F.exec(a))return document.createElement(a[1]);throw Error("Invalid or unsupported HTML string");},z=function(a){return a&&0===a.trim().toLowerCase().indexOf("url(")?G("url",a)[0]:a},E=function(a){if(a&&"string"===typeof a){a=G("linear-gradient",a);var b="to right"===a[0];H(b||"to bottom"===a[0]);var c=[];c.horizontal=b;H(2<a.length);for(b=1;b<a.length;b++){var d=P(a[b].split(" ").reverse());d[0]=parseInt(d[0],10)/100;H(!isNaN(d[0]));c.push(d)}return c}return a},F=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,G=function(a,b){var c=b.trim().toLowerCase(),d=a+"(";if(0===c.indexOf(d)&&c.lastIndexOf(")")===c.length-1)return P(c.slice(d.length,-1).trim().split(","));H(!1)},P=function(a){return a.map(function(a){return a.trim()})},H=function(a){if(!a)throw Error("Invalid or unsupported css value");},v=function(a,d){return b.isWidget(a)?(a.getElement()||(rwt.widgets.base.Widget.removeFromGlobalElementQueue(a),a._createElementImpl()),a[d||"getElement"]()):a instanceof c?a.get(0):a},O=["___rwtStyle__backgroundPosition","___rwtStyle__backgroundGradient","___rwtStyle__backgroundImage","___rwtStyle__backgroundRepeat","___rwtStyle__backgroundColor"]})();rwt.qx.Class.define("rwt.widgets.base.Widget",{extend:rwt.qx.Target,include:rwt.widgets.util.HtmlAttributesMixin,construct:function(){this.base(arguments);this._layoutChanges={};this._outerFrame=[0,0]},statics:{_globalWidgetQueue:[],_globalElementQueue:[],_globalStateQueue:[],_globalJobQueue:[],_globalLayoutQueue:[],_fastGlobalDisplayQueue:[],_lazyGlobalDisplayQueues:{},_globalDisposeQueue:[],_autoFlushTimeout:null,_flushGlobalQueuesPhase:0,_renderHtmlIds:!1,_FLUSH_PHASE_IDLE:0,_FLUSH_PHASE_WIDGET:1,_FLUSH_PHASE_STATE:2,_FLUSH_PHASE_ELEMENT:3,_FLUSH_PHASE_JOB:4,_FLUSH_PHASE_LAYOUT:5,_FLUSH_PHASE_DISPLAY:6,_FLUSH_PHASE_DISPOSE:7,_initAutoFlush:function(a){null==rwt.widgets.base.Widget._autoFlushTimeout&&(!rwt.widgets.base.Widget._inFlushGlobalQueues||a<rwt.widgets.base.Widget._flushGlobalQueuesPhase)&&(rwt.widgets.base.Widget._autoFlushTimeout=window.setTimeout(rwt.widgets.base.Widget._autoFlushHelper,0))},_removeAutoFlush:function(){null!=rwt.widgets.base.Widget._autoFlushTimeout&&(window.clearTimeout(rwt.widgets.base.Widget._autoFlushTimeout),rwt.widgets.base.Widget._autoFlushTimeout=null)},_autoFlushHelper:function(){try{rwt.widgets.base.Widget._autoFlushTimeout=null,rwt.qx.Object.inGlobalDispose()||rwt.widgets.base.Widget.flushGlobalQueues()}catch(a){rwt.runtime.ErrorHandler.processJavaScriptError(a)}},flushGlobalQueues:function(){null!=rwt.widgets.base.Widget._autoFlushTimeout&&rwt.widgets.base.Widget._removeAutoFlush();!rwt.widgets.base.Widget._inFlushGlobalQueues&&rwt.runtime.System.getInstance().getUiReady()&&(rwt.widgets.base.Widget._inFlushGlobalQueues=!0,rwt.widgets.base.Widget.flushGlobalWidgetQueue(),rwt.widgets.base.Widget.flushGlobalStateQueue(),rwt.widgets.base.Widget.flushGlobalElementQueue(),rwt.widgets.base.Widget.flushGlobalJobQueue(),rwt.widgets.base.Widget.flushGlobalLayoutQueue(),rwt.widgets.base.Widget.flushGlobalDisplayQueue(),rwt.widgets.base.Widget.flushGlobalDisposeQueue(),rwt.widgets.base.Widget._flushGlobalQueuesPhase=rwt.widgets.base.Widget._FLUSH_PHASE_IDLE,delete rwt.widgets.base.Widget._inFlushGlobalQueues)},addToGlobalWidgetQueue:function(a){!a._isInGlobalWidgetQueue&&a._isDisplayable&&(null==rwt.widgets.base.Widget._autoFlushTimeout&&rwt.widgets.base.Widget._initAutoFlush(rwt.widgets.base.Widget._FLUSH_PHASE_WIDGET),rwt.widgets.base.Widget._globalWidgetQueue.push(a),a._isInGlobalWidgetQueue=!0)},removeFromGlobalWidgetQueue:function(a){a._isInGlobalWidgetQueue&&(rwt.util.Arrays.remove(rwt.widgets.base.Widget._globalWidgetQueue,a),delete a._isInGlobalWidgetQueue)},flushGlobalWidgetQueue:function(){rwt.widgets.base.Widget._flushGlobalQueuesPhase=rwt.widgets.base.Widget._FLUSH_PHASE_WIDGET;for(var a=rwt.widgets.base.Widget._globalWidgetQueue,b,c;0<(b=a.length);){for(var d=0;d<b;d++)c=a[d],c.flushWidgetQueue(),delete c._isInGlobalWidgetQueue;a.splice(0,b)}rwt.widgets.base.Widget._globalWidgetQueue=[]},addToGlobalElementQueue:function(a){!a._isInGlobalElementQueue&&a._isDisplayable&&(null==rwt.widgets.base.Widget._autoFlushTimeout&&rwt.widgets.base.Widget._initAutoFlush(rwt.widgets.base.Widget._FLUSH_PHASE_ELEMENT),rwt.widgets.base.Widget._globalElementQueue.push(a),a._isInGlobalElementQueue=!0)},removeFromGlobalElementQueue:function(a){a._isInGlobalElementQueue&&(rwt.util.Arrays.remove(rwt.widgets.base.Widget._globalElementQueue,a),delete a._isInGlobalElementQueue)},flushGlobalElementQueue:function(){rwt.widgets.base.Widget._flushGlobalQueuesPhase=rwt.widgets.base.Widget._FLUSH_PHASE_ELEMENT;for(var a=rwt.widgets.base.Widget._globalElementQueue,b,c;0<(b=a.length);){for(var d=0;d<b;d++)c=a[d],c._createElementImpl(),delete c._isInGlobalElementQueue;a.splice(0,b)}rwt.widgets.base.Widget._globalElementQueue=[]},addToGlobalStateQueue:function(a){!a._isInGlobalStateQueue&&a._isDisplayable&&(null==rwt.widgets.base.Widget._autoFlushTimeout&&rwt.widgets.base.Widget._initAutoFlush(rwt.widgets.base.Widget._FLUSH_PHASE_STATE),rwt.widgets.base.Widget._globalStateQueue.push(a),a._isInGlobalStateQueue=!0)},removeFromGlobalStateQueue:function(a){a._isInGlobalStateQueue&&(rwt.util.Arrays.remove(rwt.widgets.base.Widget._globalStateQueue,a),delete a._isInGlobalStateQueue)},flushGlobalStateQueue:function(){rwt.widgets.base.Widget._flushGlobalQueuesPhase=rwt.widgets.base.Widget._FLUSH_PHASE_STATE;for(var a=rwt.widgets.base.Widget;0<a._globalStateQueue.length;){var b=rwt.util.Arrays.copy(a._globalStateQueue);a._globalStateQueue=[];for(var c=0,d=b.length;c<d;c++){var e=b[c];e._isInGlobalStateQueue&&(e._renderAppearance(),delete e._isInGlobalStateQueue)}}},addToGlobalJobQueue:function(a){!a._isInGlobalJobQueue&&a._isDisplayable&&(null==rwt.widgets.base.Widget._autoFlushTimeout&&rwt.widgets.base.Widget._initAutoFlush(rwt.widgets.base.Widget._FLUSH_PHASE_JOB),rwt.widgets.base.Widget._globalJobQueue.push(a),a._isInGlobalJobQueue=!0)},removeFromGlobalJobQueue:function(a){a._isInGlobalJobQueue&&(rwt.util.Arrays.remove(rwt.widgets.base.Widget._globalJobQueue,a),delete a._isInGlobalJobQueue)},flushGlobalJobQueue:function(){rwt.widgets.base.Widget._flushGlobalQueuesPhase=rwt.widgets.base.Widget._FLUSH_PHASE_JOB;for(var a=rwt.widgets.base.Widget._globalJobQueue,b,c;0<(b=a.length);){for(var d=0;d<b;d++)c=a[d],c._flushJobQueue(c._jobQueue),delete c._isInGlobalJobQueue;a.splice(0,b)}rwt.widgets.base.Widget._globalJobQueue=[]},addToGlobalLayoutQueue:function(a){!a._isInGlobalLayoutQueue&&a._isDisplayable&&(null==rwt.widgets.base.Widget._autoFlushTimeout&&rwt.widgets.base.Widget._initAutoFlush(rwt.widgets.base.Widget._FLUSH_PHASE_LAYOUT),rwt.widgets.base.Widget._globalLayoutQueue.push(a),a._isInGlobalLayoutQueue=!0)},removeFromGlobalLayoutQueue:function(a){a._isInGlobalLayoutQueue&&(rwt.util.Arrays.remove(rwt.widgets.base.Widget._globalLayoutQueue,a),delete a._isInGlobalLayoutQueue)},flushGlobalLayoutQueue:function(){rwt.widgets.base.Widget._flushGlobalQueuesPhase=rwt.widgets.base.Widget._FLUSH_PHASE_LAYOUT;for(var a=rwt.widgets.base.Widget._globalLayoutQueue,b,c;0<(b=a.length);){for(var d=0;d<b;d++)c=a[d],c._flushChildrenQueue(),delete c._isInGlobalLayoutQueue;a.splice(0,b)}rwt.widgets.base.Widget._globalLayoutQueue=[]},addToGlobalDisplayQueue:function(a){if(!a._isInGlobalDisplayQueue&&a._isDisplayable){null==rwt.widgets.base.Widget._autoFlushTimeout&&rwt.widgets.base.Widget._initAutoFlush(rwt.widgets.base.Widget._FLUSH_PHASE_DISPLAY);var b=a.getParent();b.isSeeable()?(b=b.toHashCode(),rwt.widgets.base.Widget._lazyGlobalDisplayQueues[b]?rwt.widgets.base.Widget._lazyGlobalDisplayQueues[b].push(a):rwt.widgets.base.Widget._lazyGlobalDisplayQueues[b]=[a]):rwt.widgets.base.Widget._fastGlobalDisplayQueue.push(a);a._isInGlobalDisplayQueue=!0}},removeFromGlobalDisplayQueue:function(){},flushGlobalDisplayQueue:function(){rwt.widgets.base.Widget._flushGlobalQueuesPhase=rwt.widgets.base.Widget._FLUSH_PHASE_DISPLAY;for(var a,b,c,d,e=rwt.widgets.base.Widget._fastGlobalDisplayQueue,f=rwt.widgets.base.Widget._lazyGlobalDisplayQueues,g=0,h=e.length;g<h;g++)c=e[g],c.getParent()._getTargetNode().appendChild(c.getElement());for(a in f)if(b=f[a],document.createDocumentFragment&&3<=b.length){d=document.createDocumentFragment();g=0;for(h=b.length;g<h;g++)c=b[g],d.appendChild(c.getElement());b[0].getParent()._getTargetNode().appendChild(d);g=0;for(h=b.length;g<h;g++)c=b[g],c._afterInsertDom()}else for(g=0,h=b.length;g<h;g++)c=b[g],c.getParent()._getTargetNode().appendChild(c.getElement()),c._afterInsertDom();for(a in f){b=f[a];g=0;for(h=b.length;g<h;g++)c=b[g],c.getVisibility()&&c._afterAppear(),delete c._isInGlobalDisplayQueue;delete f[a]}rwt.util.Objects.isEmpty(f)&&(rwt.widgets.base.Widget._lazyGlobalDisplayQueues={});g=0;for(h=e.length;g<h;g++)delete e[g]._isInGlobalDisplayQueue;rwt.widgets.base.Widget._fastGlobalDisplayQueue=[]},addToGlobalDisposeQueue:function(a){a._isInGlobalDisposeQueue||a.isDisposed()||(null==rwt.widgets.base.Widget._autoFlushTimeout&&rwt.widgets.base.Widget._initAutoFlush(rwt.widgets.base.Widget._FLUSH_PHASE_DISPOSE),rwt.widgets.base.Widget._globalDisposeQueue.push(a),a._markInDispose())},flushGlobalDisposeQueue:function(){rwt.widgets.base.Widget._flushGlobalQueuesPhase=rwt.widgets.base.Widget._FLUSH_PHASE_DISPOSE;for(var a=rwt.widgets.base.Widget._globalDisposeQueue,b,c;0<(b=a.length);){for(var d=0;d<b;d++)c=a[d],c.dispose(),delete c._isInGlobalDisposeQueue;a.splice(0,b)}rwt.widgets.base.Widget._globalDisposeQueue=[]},getActiveSiblingHelperIgnore:function(a,b){for(var c=0;c<a.length;c++)if(b instanceof a[c])return!0;return!1},getActiveSiblingHelper:function(a,b,c,d,e){d||(d=[]);b=b.getChildren();a=null==e?b.indexOf(a)+c:"first"===e?0:b.length-1;for(e=b[a];e&&(!e.getEnabled()||rwt.widgets.base.Widget.getActiveSiblingHelperIgnore(d,e));)if(a+=c,e=b[a],!e)return null;return e},TYPE_NULL:0,TYPE_PIXEL:1,TYPE_PERCENT:2,TYPE_AUTO:3,TYPE_FLEX:4,__initApplyMethods:function(a){for(var b="left right top bottom width height minWidth maxWidth minHeight maxHeight".split(" "),c="Left Right Top Bottom Width Height MinWidth MaxWidth MinHeight MaxHeight".split(" "),d=0;4>d;d++)a["_renderRuntimeMargin"+c[d]]=new Function("v","this._style.margin"+c[d]+"\x3d((v\x3d\x3dnull)?0:v)+'px'"),a["_resetRuntimeMargin"+c[d]]=new Function("this._style.margin"+c[d]+"\x3d''");for(d=0;4>d;d++)a["_renderRuntimePadding"+c[d]]=new Function("v","this.setStyleProperty('padding"+c[d]+"', ((v\x3d\x3dnull)?0:v)+'px')"),a["_resetRuntimePadding"+c[d]]=new Function("this.removeStyleProperty('padding"+c[d]+"')");for(d=0;d<b.length;d++)a["_renderRuntime"+c[d]]=new Function("v","this._style."+b[d]+"\x3d((v\x3d\x3dnull)?0:v)+'px'"),a["_resetRuntime"+c[d]]=new Function("this._style."+b[d]+"\x3d''")},layoutPropertyTypes:{},__initLayoutProperties:function(a){for(var b="width height minWidth maxWidth minHeight maxHeight left right top bottom".split(" "),c=0,d=b.length,e,f,g;c<d;c++)e=b[c],f="_computed"+rwt.util.Strings.toFirstUp(e),g=f+"Type",a.layoutPropertyTypes[e]={dataType:g,dataParsed:f+"Parsed",dataValue:f+"Value",typePixel:g+"Pixel",typePercent:g+"Percent",typeAuto:g+"Auto",typeFlex:g+"Flex",typeNull:g+"Null"}},disableScrolling:function(a){var b=a._getTargetNode();b?rwt.html.Scroll.disableScrolling(b):a.addEventListener("appear",this._blockScrollingOnAppear,a)},enableScrolling:function(a){var b=a._getTargetNode();b?rwt.html.Scroll.enableScrolling(b):a.removeEventListener("appear",this._blockScrollingOnAppear,a)},_blockScrollingOnAppear:function(){this.removeEventListener("appear",rwt.widgets.base.Widget._blockScrollingOnAppear,this);rwt.widgets.base.Widget.disableScrolling(this)}},properties:{enabled:{init:"inherit",check:"Boolean",inheritable:!0,apply:"_applyEnabled",event:"changeEnabled"},parent:{check:"rwt.widgets.base.Parent",nullable:!0,event:"changeParent",apply:"_applyParent"},element:{check:"Element",nullable:!0,apply:"_applyElement",event:"changeElement"},visibility:{check:"Boolean",init:!0,apply:"_applyVisibility",event:"changeVisibility"},display:{check:"Boolean",init:!0,apply:"_applyDisplay",event:"changeDisplay"},anonymous:{check:"Boolean",init:!1,event:"changeAnonymous"},horizontalAlign:{check:["left","center","right"],themeable:!0,nullable:!0},verticalAlign:{check:["top","middle","bottom"],themeable:!0,nullable:!0},allowStretchX:{check:"Boolean",init:!0},allowStretchY:{check:"Boolean",init:!0},zIndex:{check:"Number",apply:"_applyZIndex",event:"changeZIndex",themeable:!0,nullable:!0,init:null},backgroundColor:{nullable:!0,init:null,check:"Color",apply:"_applyBackgroundColor",event:"changeBackgroundColor",themeable:!0},backgroundGradient:{check:"Array",nullable:!0,init:null,apply:"_applyBackgroundGradient",event:"changeBackgroundGradient",themeable:!0},shadow:{check:"Array",nullable:!0,init:null,apply:"_applyShadow",event:"changeShadow",themeable:!0},textShadow:{check:"Array",nullable:!0,init:null,apply:"_applyTextShadow",event:"changeTextShadow",themeable:!0},textColor:{nullable:!0,init:"inherit",check:"Color",apply:"_applyTextColor",event:"changeTextColor",themeable:!0,inheritable:!0},border:{nullable:!0,init:null,apply:"_applyBorder",event:"changeBorder",check:"Border",themeable:!0},font:{nullable:!0,init:"inherit",apply:"_applyFont",check:"Font",event:"changeFont",themeable:!0,inheritable:!0},opacity:{check:"Number",apply:"_applyOpacity",themeable:!0,nullable:!0,init:null},cursor:{check:"String",apply:"_applyCursor",event:"changeCursor",themeable:!0,nullable:!0,init:null},backgroundImage:{check:"String",nullable:!0,apply:"_applyBackgroundImage",themeable:!0},backgroundRepeat:{check:["repeat","repeat-x","repeat-y","no-repeat"],nullable:!0,apply:"_applyBackgroundRepeat",themeable:!0},backgroundPosition:{check:"left top;left center;left bottom;right top;right center;right bottom;center top;center center;center bottom".split(";"),nullable:!0,apply:"_applyBackgroundPosition",themeable:!0},overflow:{check:["hidden","auto","scroll","scrollX","scrollY"],nullable:!0,apply:"_applyOverflow",event:"changeOverflow",themeable:!0,init:null},containerOverflow:{check:"Boolean",nullable:!1,apply:"_applyContainerOverflow",themeable:!0,init:!0},clipLeft:{check:"Integer",apply:"_applyClip",themeable:!0,nullable:!0},clipTop:{check:"Integer",apply:"_applyClip",themeable:!0,nullable:!0},clipWidth:{check:"Integer",apply:"_applyClip",themeable:!0,nullable:!0},clipHeight:{check:"Integer",apply:"_applyClip",themeable:!0,nullable:!0},tabIndex:{check:"Integer",nullable:!0,init:null,apply:"_applyTabIndex",event:"changeTabIndex"},hideFocus:{check:"Boolean",init:!0,themeable:!0},enableElementFocus:{check:"Boolean",init:!0},focused:{check:"Boolean",init:!1,apply:"_applyFocused",event:"changeFocused"},selectable:{check:"Boolean",init:null,nullable:!0,apply:"_applySelectable"},toolTipText:{nullable:!0,event:"changeToolTipText"},contextMenu:{nullable:!0,event:"changeContextMenu"},capture:{check:"Boolean",init:!1,apply:"_applyCapture",event:"changeCapture"},dropDataTypes:{nullable:!0,dispose:!0},command:{check:"qx.client.Command",nullable:!0,apply:"_applyCommand"},appearance:{check:"String",init:"widget",apply:"_applyAppearance",event:"changeAppearance"},direction:{check:"String",init:"ltr",apply:"_applyDirection",event:"changeDirection"},supportsDropMethod:{check:"Function",nullable:!0,init:null},marginTop:{check:"Number",apply:"_applyMarginTop",nullable:!0,themeable:!0},marginRight:{check:"Number",apply:"_applyMarginRight",nullable:!0,themeable:!0},marginBottom:{check:"Number",apply:"_applyMarginBottom",nullable:!0,themeable:!0},marginLeft:{check:"Number",apply:"_applyMarginLeft",nullable:!0,themeable:!0},paddingTop:{check:"Number",apply:"_applyPaddingTop",nullable:!0,themeable:!0},paddingRight:{check:"Number",apply:"_applyPaddingRight",nullable:!0,themeable:!0},paddingBottom:{check:"Number",apply:"_applyPaddingBottom",nullable:!0,themeable:!0},paddingLeft:{check:"Number",apply:"_applyPaddingLeft",nullable:!0,themeable:!0},left:{apply:"_applyLeft",event:"changeLeft",nullable:!0,themeable:!0,init:null},right:{apply:"_applyRight",event:"changeRight",nullable:!0,themeable:!0,init:null},width:{apply:"_applyWidth",event:"changeWidth",nullable:!0,themeable:!0,init:null},minWidth:{apply:"_applyMinWidth",event:"changeMinWidth",nullable:!0,themeable:!0,init:null},maxWidth:{apply:"_applyMaxWidth",event:"changeMaxWidth",nullable:!0,themeable:!0,init:null},top:{apply:"_applyTop",event:"changeTop",nullable:!0,themeable:!0,init:null},bottom:{apply:"_applyBottom",event:"changeBottom",nullable:!0,themeable:!0,init:null},height:{apply:"_applyHeight",event:"changeHeight",nullable:!0,themeable:!0,init:null},minHeight:{apply:"_applyMinHeight",event:"changeMinHeight",nullable:!0,themeable:!0,init:null},maxHeight:{apply:"_applyMaxHeight",event:"changeMaxHeight",nullable:!0,themeable:!0,init:null},location:{group:["left","top"],themeable:!0},dimension:{group:["width","height"],themeable:!0},space:{group:["left","width","top","height"],themeable:!0},edge:{group:["top","right","bottom","left"],themeable:!0,mode:"shorthand"},padding:{group:["paddingTop","paddingRight","paddingBottom","paddingLeft"],mode:"shorthand",themeable:!0},margin:{group:["marginTop","marginRight","marginBottom","marginLeft"],mode:"shorthand",themeable:!0},heights:{group:["minHeight","height","maxHeight"],themeable:!0},widths:{group:["minWidth","width","maxWidth"],themeable:!0},align:{group:["horizontalAlign","verticalAlign"],themeable:!0},clipLocation:{group:["clipLeft","clipTop"]},clipDimension:{group:["clipWidth","clipHeight"]},clip:{group:["clipLeft","clipTop","clipWidth","clipHeight"]},innerWidth:{_cached:!0,defaultValue:null},innerHeight:{_cached:!0,defaultValue:null},boxWidth:{_cached:!0,defaultValue:null},boxHeight:{_cached:!0,defaultValue:null},outerWidth:{_cached:!0,defaultValue:null},outerHeight:{_cached:!0,defaultValue:null},frameWidth:{_cached:!0,defaultValue:null,addToQueueRuntime:!0},frameHeight:{_cached:!0,defaultValue:null,addToQueueRuntime:!0},preferredInnerWidth:{_cached:!0,defaultValue:null,addToQueueRuntime:!0},preferredInnerHeight:{_cached:!0,defaultValue:null,addToQueueRuntime:!0},preferredBoxWidth:{_cached:!0,defaultValue:null},preferredBoxHeight:{_cached:!0,defaultValue:null},hasPercentX:{_cached:!0,defaultValue:!1},hasPercentY:{_cached:!0,defaultValue:!1},hasAutoX:{_cached:!0,defaultValue:!1},hasAutoY:{_cached:!0,defaultValue:!1},hasFlexX:{_cached:!0,defaultValue:!1},hasFlexY:{_cached:!0,defaultValue:!1}},members:{_computedLeftValue:null,_computedLeftParsed:null,_computedLeftType:null,_computedLeftTypeNull:!0,_computedLeftTypePixel:!1,_computedLeftTypePercent:!1,_computedLeftTypeAuto:!1,_computedLeftTypeFlex:!1,_computedRightValue:null,_computedRightParsed:null,_computedRightType:null,_computedRightTypeNull:!0,_computedRightTypePixel:!1,_computedRightTypePercent:!1,_computedRightTypeAuto:!1,_computedRightTypeFlex:!1,_computedTopValue:null,_computedTopParsed:null,_computedTopType:null,_computedTopTypeNull:!0,_computedTopTypePixel:!1,_computedTopTypePercent:!1,_computedTopTypeAuto:!1,_computedTopTypeFlex:!1,_computedBottomValue:null,_computedBottomParsed:null,_computedBottomType:null,_computedBottomTypeNull:!0,_computedBottomTypePixel:!1,_computedBottomTypePercent:!1,_computedBottomTypeAuto:!1,_computedBottomTypeFlex:!1,_computedWidthValue:null,_computedWidthParsed:null,_computedWidthType:null,_computedWidthTypeNull:!0,_computedWidthTypePixel:!1,_computedWidthTypePercent:!1,_computedWidthTypeAuto:!1,_computedWidthTypeFlex:!1,_computedMinWidthValue:null,_computedMinWidthParsed:null,_computedMinWidthType:null,_computedMinWidthTypeNull:!0,_computedMinWidthTypePixel:!1,_computedMinWidthTypePercent:!1,_computedMinWidthTypeAuto:!1,_computedMinWidthTypeFlex:!1,_computedMaxWidthValue:null,_computedMaxWidthParsed:null,_computedMaxWidthType:null,_computedMaxWidthTypeNull:!0,_computedMaxWidthTypePixel:!1,_computedMaxWidthTypePercent:!1,_computedMaxWidthTypeAuto:!1,_computedMaxWidthTypeFlex:!1,_computedHeightValue:null,_computedHeightParsed:null,_computedHeightType:null,_computedHeightTypeNull:!0,_computedHeightTypePixel:!1,_computedHeightTypePercent:!1,_computedHeightTypeAuto:!1,_computedHeightTypeFlex:!1,_computedMinHeightValue:null,_computedMinHeightParsed:null,_computedMinHeightType:null,_computedMinHeightTypeNull:!0,_computedMinHeightTypePixel:!1,_computedMinHeightTypePercent:!1,_computedMinHeightTypeAuto:!1,_computedMinHeightTypeFlex:!1,_computedMaxHeightValue:null,_computedMaxHeightParsed:null,_computedMaxHeightType:null,_computedMaxHeightTypeNull:!0,_computedMaxHeightTypePixel:!1,_computedMaxHeightTypePercent:!1,_computedMaxHeightTypeAuto:!1,_computedMaxHeightTypeFlex:!1,_customVariant:null,_applyLeft:function(a){this._unitDetectionPixelPercent("left",a);this.addToQueue("left")},_applyRight:function(a){this._unitDetectionPixelPercent("right",a);this.addToQueue("right")},_applyTop:function(a){this._unitDetectionPixelPercent("top",a);this.addToQueue("top")},_applyBottom:function(a){this._unitDetectionPixelPercent("bottom",a);this.addToQueue("bottom")},_applyWidth:function(a){this._unitDetectionPixelPercentAutoFlex("width",a);this.addToQueue("width")},_applyMinWidth:function(a){this._unitDetectionPixelPercentAuto("minWidth",a);this.addToQueue("minWidth")},_applyMaxWidth:function(a){this._unitDetectionPixelPercentAuto("maxWidth",a);this.addToQueue("maxWidth")},_applyHeight:function(a){this._unitDetectionPixelPercentAutoFlex("height",a);this.addToQueue("height")},_applyMinHeight:function(a){this._unitDetectionPixelPercentAuto("minHeight",a);this.addToQueue("minHeight")},_applyMaxHeight:function(a){this._unitDetectionPixelPercentAuto("maxHeight",a);this.addToQueue("maxHeight")},getChildren:rwt.util.Functions.returnNull,getChildrenLength:rwt.util.Functions.returnZero,hasChildren:rwt.util.Functions.returnFalse,isEmpty:rwt.util.Functions.returnTrue,indexOf:function(){return-1},contains:rwt.util.Functions.returnFalse,getVisibleChildren:rwt.util.Functions.returnNull,getVisibleChildrenLength:rwt.util.Functions.returnZero,hasVisibleChildren:rwt.util.Functions.returnFalse,isVisibleEmpty:rwt.util.Functions.returnTrue,_hasParent:!1,_isDisplayable:!1,isDisplayable:function(){return this._isDisplayable},_checkParent:function(a){if(this.contains(a))throw Error("Could not insert myself into a child "+a+"!");return a},_applyParent:function(a,b){if(b){var c=b.getChildren().indexOf(this);this._cachedOuterHeight=this._cachedInnerHeight=this._cachedBoxHeight=this._cachedOuterWidth=this._cachedInnerWidth=this._cachedBoxWidth=this._computedBottomValue=this._computedTopValue=this._computedMaxHeightValue=this._computedMinHeightValue=this._computedHeightValue=this._computedRightValue=this._computedLeftValue=this._computedMaxWidthValue=this._computedMinWidthValue=this._computedWidthValue=null;rwt.util.Arrays.removeAt(b.getChildren(),c);b._invalidateVisibleChildren();b._removeChildFromChildrenQueue(this);b.getLayoutImpl().updateChildrenOnRemoveChild(this,c);b.addToJobQueue("removeChild");b._invalidatePreferredInnerDimensions();this._oldParent=b}a?(this._hasParent=!0,"number"==typeof this._insertIndex?(rwt.util.Arrays.insertAt(a.getChildren(),this,this._insertIndex),delete this._insertIndex):a.getChildren().push(this)):this._hasParent=!1;rwt.qx.Property.refresh(this);return this._handleDisplayable("parent")},_applyDisplay:function(){return this._handleDisplayable("display")},_handleDisplayable:function(a){var b=this._computeDisplayable();if(this._isDisplayable==b&&(!b||"parent"!=a))return!0;this._isDisplayable=b;var c=this.getParent();c&&(c._invalidateVisibleChildren(),c._invalidatePreferredInnerDimensions());if(a&&this._oldParent&&this._oldParent._initialLayoutDone){var d=this.getElement();if(d){this.getVisibility()&&this._beforeDisappear();try{this._oldParent._getTargetNode().removeChild(d)}catch(e){}this._afterRemoveDom();this.getVisibility()&&this._afterDisappear()}delete this._oldParent}if(b)c._initialLayoutDone&&(d=c.getChildren().indexOf(this),c.getLayoutImpl().updateChildrenOnAddChild(this,d),c.addToJobQueue("addChild")),this.addToLayoutChanges("initial"),this.addToCustomQueues(a),this.getVisibility()&&this._beforeAppear(),this._isCreated||rwt.widgets.base.Widget.addToGlobalElementQueue(this),rwt.widgets.base.Widget.addToGlobalStateQueue(this),rwt.util.Objects.isEmpty(this._jobQueue)||rwt.widgets.base.Widget.addToGlobalJobQueue(this),rwt.util.Objects.isEmpty(this._childrenQueue)||rwt.widgets.base.Widget.addToGlobalLayoutQueue(this);else if(rwt.widgets.base.Widget.removeFromGlobalElementQueue(this),rwt.widgets.base.Widget.removeFromGlobalStateQueue(this),rwt.widgets.base.Widget.removeFromGlobalJobQueue(this),rwt.widgets.base.Widget.removeFromGlobalLayoutQueue(this),this.removeFromCustomQueues(a),c&&a)this.getVisibility()&&this._beforeDisappear(),c._initialLayoutDone&&this._initialLayoutDone&&(d=c.getChildren().indexOf(this),c.getLayoutImpl().updateChildrenOnRemoveChild(this,d),c.addToJobQueue("removeChild"),d=this.getElement().parentNode)&&(d.removeChild(this.getElement()),this._afterRemoveDom()),c._removeChildFromChildrenQueue(this),this.getVisibility()&&this._afterDisappear();this._handleDisplayableCustom(b,c,a);return!0},addToCustomQueues:rwt.util.Functions.returnTrue,removeFromCustomQueues:rwt.util.Functions.returnTrue,_handleDisplayableCustom:rwt.util.Functions.returnTrue,_computeDisplayable:function(){return this.getDisplay()&&this.getParent()&&this.getParent()._isDisplayable?!0:!1},_beforeAppear:function(){this.dispatchSimpleEvent("beforeAppear")},_afterAppear:function(){this._isSeeable=!0;this.dispatchSimpleEvent("appear")},_beforeDisappear:function(){this.removeState("over");this.removeState("pressed");this.removeState("abandoned");this.dispatchSimpleEvent("beforeDisappear")},_afterDisappear:function(){this._isSeeable=!1;this.dispatchSimpleEvent("disappear")},_isSeeable:!1,_isInDom:!1,isSeeable:function(){return this._isSeeable},isInDom:function(){return this._isInDom},isAppearRelevant:function(){return this.getVisibility()&&this._isDisplayable},_afterInsertDom:function(){this._isInDom=!0;this.dispatchSimpleEvent("insertDom")},_afterRemoveDom:function(){this._isInDom=!1},_applyVisibility:function(a){a?(this._isDisplayable&&(this._isCreated||this._isInGlobalElementQueue)&&this._beforeAppear(),this.removeStyleProperty("display"),this._isDisplayable&&this._isCreated&&this._afterAppear()):(this._isDisplayable&&this._isCreated&&this._beforeDisappear(),this.setStyleProperty("display","none"),this._isDisplayable&&this._isCreated&&this._afterDisappear())},show:function(){this.setVisibility(!0);this.setDisplay(!0)},hide:function(){this.setVisibility(!1)},destroy:function(){null!==this.getParent()&&this.getParent()._isInGlobalDisposeQueue||!this.dispatchSimpleEvent("destroy")||(this._fireBeforeDispose(),this.setParent(null),rwt.widgets.base.Widget.addToGlobalDisposeQueue(this))},_markInDispose:function(){this._isInGlobalDisposeQueue=!0},_fireBeforeDispose:function(){this.dispatchSimpleEvent("beforeDispose")},_isCreated:!1,_element:null,_targetNode:null,_style:null,_innerStyle:null,_getTargetNode:function(){return this._targetNode||this._element},addToDocument:function(){rwt.widgets.base.ClientDocument.getInstance().add(this)},enableEnhancedBorder:function(){this._targetNodeEnabled=!0;this._element&&this.prepareEnhancedBorder()},isCreated:function(){return this._isCreated},_createElementImpl:function(){this.setElement(document.createElement("div"))},_applyElement:function(a,b){this._isCreated=null!=a;b&&(b.rwtWidget=null);a?(a.rwtWidget=this,a.style.position="absolute",this._element=a,this._style=a.style,this._targetNodeEnabled&&this.prepareEnhancedBorder(!0),this.initBackgroundColor(),this._applyStyleProperties(a),this._applyHtmlProperties(a),this._applyHtmlAttributes(a),this._applyElementData(a),this.dispatchSimpleEvent("create"),this.addToStateQueue()):this._element=this._style=null},addToJobQueue:function(a){this._hasParent&&rwt.widgets.base.Widget.addToGlobalJobQueue(this);this._jobQueue||(this._jobQueue={});return this._jobQueue[a]=!0},_flushJobQueue:function(){var a=this._jobQueue,b=this.getParent();if(b&&!rwt.util.Objects.isEmpty(a)){var c=this instanceof rwt.widgets.base.Parent?this.getLayoutImpl():null;c&&c.updateSelfOnJobQueueFlush(a);var d=!1,e=a.marginLeft||a.marginRight,f=a.marginTop||a.marginBottom,g=a.frameWidth,h=a.frameHeight,k=(a.frameWidth||a.preferredInnerWidth)&&this._recomputePreferredBoxWidth(),l=(a.frameHeight||a.preferredInnerHeight)&&this._recomputePreferredBoxHeight();if(k){var m=this.getPreferredBoxWidth();this._computedWidthTypeAuto&&(this._computedWidthValue=m,a.width=!0);this._computedMinWidthTypeAuto&&(this._computedMinWidthValue=m,a.minWidth=!0);this._computedMaxWidthTypeAuto&&(this._computedMaxWidthValue=m,a.maxWidth=!0)}l&&(m=this.getPreferredBoxHeight(),this._computedHeightTypeAuto&&(this._computedHeightValue=m,a.height=!0),this._computedMinHeightTypeAuto&&(this._computedMinHeightValue=m,a.minHeight=!0),this._computedMaxHeightTypeAuto&&(this._computedMaxHeightValue=m,a.maxHeight=!0));(a.width||a.minWidth||a.maxWidth||a.left||a.right)&&this._recomputeBoxWidth()&&(e=g=!0);(a.height||a.minHeight||a.maxHeight||a.top||a.bottom)&&this._recomputeBoxHeight()&&(f=h=!0);if(e&&this._recomputeOuterWidth()||k)b._invalidatePreferredInnerWidth(),b.getLayoutImpl().updateSelfOnChildOuterWidthChange(this),d=!0;if(f&&this._recomputeOuterHeight()||l)b._invalidatePreferredInnerHeight(),b.getLayoutImpl().updateSelfOnChildOuterHeightChange(this),d=!0;d&&b._flushJobQueue();b._addChildToChildrenQueue(this);for(var n in a)this._layoutChanges[n]=!0;if(this instanceof rwt.widgets.base.Parent&&(a.paddingLeft||a.paddingRight||a.paddingTop||a.paddingBottom)){b=this.getChildren();d=b.length;if(a.paddingLeft)for(n=0;n<d;n++)b[n].addToLayoutChanges("parentPaddingLeft");if(a.paddingRight)for(n=0;n<d;n++)b[n].addToLayoutChanges("parentPaddingRight");if(a.paddingTop)for(n=0;n<d;n++)b[n].addToLayoutChanges("parentPaddingTop");if(a.paddingBottom)for(n=0;n<d;n++)b[n].addToLayoutChanges("parentPaddingBottom")}g&&this._recomputeInnerWidth();h&&this._recomputeInnerHeight();this._initialLayoutDone&&c&&c.updateChildrenOnJobQueueFlush(a);delete this._jobQueue}},_isWidthEssential:rwt.util.Functions.returnTrue,_isHeightEssential:rwt.util.Functions.returnTrue,_computeBoxWidthFallback:function(){return 0},_computeBoxHeightFallback:function(){return 0},_computeBoxWidth:function(){var a=this.getParent().getLayoutImpl();return Math.max(0,rwt.util.Numbers.limit(a.computeChildBoxWidth(this),this.getMinWidthValue(),this.getMaxWidthValue()))},_computeBoxHeight:function(){var a=this.getParent().getLayoutImpl();return Math.max(0,rwt.util.Numbers.limit(a.computeChildBoxHeight(this),this.getMinHeightValue(),this.getMaxHeightValue()))},_computeOuterWidth:function(){return Math.max(0,this.getMarginLeft()+this.getBoxWidth()+this.getMarginRight())},_computeOuterHeight:function(){return Math.max(0,this.getMarginTop()+this.getBoxHeight()+this.getMarginBottom())},_computeInnerWidth:function(){return Math.max(0,this.getBoxWidth()-this.getFrameWidth())},_computeInnerHeight:function(){return Math.max(0,this.getBoxHeight()-this.getFrameHeight())},getNeededWidth:function(){var a=this.getParent().getLayoutImpl();return Math.max(0,a.computeChildNeededWidth(this))},getNeededHeight:function(){var a=this.getParent().getLayoutImpl();return Math.max(0,a.computeChildNeededHeight(this))},_recomputeFlexX:function(){if(!this.getHasFlexX())return!1;this._computedWidthTypeFlex&&(this._computedWidthValue=null,this.addToLayoutChanges("width"));return!0},_recomputeFlexY:function(){if(!this.getHasFlexY())return!1;this._computedHeightTypeFlex&&(this._computedHeightValue=null,this.addToLayoutChanges("height"));return!0},_recomputePercentX:function(){if(!this.getHasPercentX())return!1;this._computedWidthTypePercent&&(this._computedWidthValue=null,this.addToLayoutChanges("width"));this._computedMinWidthTypePercent&&(this._computedMinWidthValue=null,this.addToLayoutChanges("minWidth"));this._computedMaxWidthTypePercent&&(this._computedMaxWidthValue=null,this.addToLayoutChanges("maxWidth"));this._computedLeftTypePercent&&(this._computedLeftValue=null,this.addToLayoutChanges("left"));this._computedRightTypePercent&&(this._computedRightValue=null,this.addToLayoutChanges("right"));return!0},_recomputePercentY:function(){if(!this.getHasPercentY())return!1;this._computedHeightTypePercent&&(this._computedHeightValue=null,this.addToLayoutChanges("height"));this._computedMinHeightTypePercent&&(this._computedMinHeightValue=null,this.addToLayoutChanges("minHeight"));this._computedMaxHeightTypePercent&&(this._computedMaxHeightValue=null,this.addToLayoutChanges("maxHeight"));this._computedTopTypePercent&&(this._computedTopValue=null,this.addToLayoutChanges("top"));this._computedBottomTypePercent&&(this._computedBottomValue=null,this.addToLayoutChanges("bottom"));return!0},_recomputeRangeX:rwt.util.Variant.select("qx.client",{"trident|webkit|blink":function(){if(this._computedLeftTypeNull||this._computedRightTypeNull)return!1;this.addToLayoutChanges("width");return!0},"default":function(){return!(this._computedLeftTypeNull||this._computedRightTypeNull)}}),_recomputeRangeY:rwt.util.Variant.select("qx.client",{"trident|webkit|blink":function(){if(this._computedTopTypeNull||this._computedBottomTypeNull)return!1;this.addToLayoutChanges("height");return!0},"default":function(){return!(this._computedTopTypeNull||this._computedBottomTypeNull)}}),_recomputeStretchingX:rwt.util.Variant.select("qx.client",{"trident|webkit|blink":function(){return this.getAllowStretchX()&&this._computedWidthTypeNull?(this._computedWidthValue=null,this.addToLayoutChanges("width"),!0):!1},"default":function(){return this.getAllowStretchX()&&this._computedWidthTypeNull?!0:!1}}),_recomputeStretchingY:rwt.util.Variant.select("qx.client",{"trident|webkit|blink":function(){return this.getAllowStretchY()&&this._computedHeightTypeNull?(this._computedHeightValue=null,this.addToLayoutChanges("height"),!0):!1},"default":function(){return this.getAllowStretchY()&&this._computedHeightTypeNull?!0:!1}}),_computeValuePixel:function(a){return Math.round(a)},_computeValuePixelLimit:function(a){return Math.max(0,this._computeValuePixel(a))},_computeValuePercentX:function(a){return Math.round(this.getParent().getInnerWidthForChild(this)*a*.01)},_computeValuePercentXLimit:function(a){return Math.max(0,this._computeValuePercentX(a))},_computeValuePercentY:function(a){return Math.round(this.getParent().getInnerHeightForChild(this)*a*.01)},_computeValuePercentYLimit:function(a){return Math.max(0,this._computeValuePercentY(a))},getWidthValue:function(){if(null!=this._computedWidthValue)return this._computedWidthValue;switch(this._computedWidthType){case rwt.widgets.base.Widget.TYPE_PIXEL:return this._computedWidthValue=this._computeValuePixelLimit(this._computedWidthParsed);case rwt.widgets.base.Widget.TYPE_PERCENT:return this._computedWidthValue=this._computeValuePercentXLimit(this._computedWidthParsed);case rwt.widgets.base.Widget.TYPE_AUTO:return this._computedWidthValue=this.getPreferredBoxWidth();case rwt.widgets.base.Widget.TYPE_FLEX:if(void 0===this.getParent().getLayoutImpl().computeChildrenFlexWidth)throw Error("Widget "+this+": having horizontal flex size (width\x3d"+this.getWidth()+") but parent layout "+this.getParent()+" does not support it");this.getParent().getLayoutImpl().computeChildrenFlexWidth();return this._computedWidthValue=this._computedWidthFlexValue}return null},getMinWidthValue:function(){if(null!=this._computedMinWidthValue)return this._computedMinWidthValue;switch(this._computedMinWidthType){case rwt.widgets.base.Widget.TYPE_PIXEL:return this._computedWidthValue=this._computeValuePixelLimit(this._computedMinWidthParsed);case rwt.widgets.base.Widget.TYPE_PERCENT:return this._computedWidthValue=this._computeValuePercentXLimit(this._computedMinWidthParsed);case rwt.widgets.base.Widget.TYPE_AUTO:return this._computedMinWidthValue=this.getPreferredBoxWidth()}return null},getMaxWidthValue:function(){if(null!=this._computedMaxWidthValue)return this._computedMaxWidthValue;switch(this._computedMaxWidthType){case rwt.widgets.base.Widget.TYPE_PIXEL:return this._computedWidthValue=this._computeValuePixelLimit(this._computedMaxWidthParsed);case rwt.widgets.base.Widget.TYPE_PERCENT:return this._computedWidthValue=this._computeValuePercentXLimit(this._computedMaxWidthParsed);case rwt.widgets.base.Widget.TYPE_AUTO:return this._computedMaxWidthValue=this.getPreferredBoxWidth()}return null},getLeftValue:function(){if(null!=this._computedLeftValue)return this._computedLeftValue;switch(this._computedLeftType){case rwt.widgets.base.Widget.TYPE_PIXEL:return this._computedLeftValue=this._computeValuePixel(this._computedLeftParsed);case rwt.widgets.base.Widget.TYPE_PERCENT:return this._computedLeftValue=this._computeValuePercentX(this._computedLeftParsed)}return null},getRightValue:function(){if(null!=this._computedRightValue)return this._computedRightValue;switch(this._computedRightType){case rwt.widgets.base.Widget.TYPE_PIXEL:return this._computedRightValue=this._computeValuePixel(this._computedRightParsed);case rwt.widgets.base.Widget.TYPE_PERCENT:return this._computedRightValue=this._computeValuePercentX(this._computedRightParsed)}return null},getHeightValue:function(){if(null!=this._computedHeightValue)return this._computedHeightValue;switch(this._computedHeightType){case rwt.widgets.base.Widget.TYPE_PIXEL:return this._computedHeightValue=this._computeValuePixelLimit(this._computedHeightParsed);case rwt.widgets.base.Widget.TYPE_PERCENT:return this._computedHeightValue=this._computeValuePercentYLimit(this._computedHeightParsed);case rwt.widgets.base.Widget.TYPE_AUTO:return this._computedHeightValue=this.getPreferredBoxHeight();case rwt.widgets.base.Widget.TYPE_FLEX:if(void 0===this.getParent().getLayoutImpl().computeChildrenFlexHeight)throw Error("Widget "+this+": having vertical flex size (height\x3d"+this.getHeight()+") but parent layout "+this.getParent()+" does not support it");this.getParent().getLayoutImpl().computeChildrenFlexHeight();return this._computedHeightValue=this._computedHeightFlexValue}return null},getMinHeightValue:function(){if(null!=this._computedMinHeightValue)return this._computedMinHeightValue;switch(this._computedMinHeightType){case rwt.widgets.base.Widget.TYPE_PIXEL:return this._computedMinHeightValue=this._computeValuePixelLimit(this._computedMinHeightParsed);case rwt.widgets.base.Widget.TYPE_PERCENT:return this._computedMinHeightValue=this._computeValuePercentYLimit(this._computedMinHeightParsed);case rwt.widgets.base.Widget.TYPE_AUTO:return this._computedMinHeightValue=this.getPreferredBoxHeight()}return null},getMaxHeightValue:function(){if(null!=this._computedMaxHeightValue)return this._computedMaxHeightValue;switch(this._computedMaxHeightType){case rwt.widgets.base.Widget.TYPE_PIXEL:return this._computedMaxHeightValue=this._computeValuePixelLimit(this._computedMaxHeightParsed);case rwt.widgets.base.Widget.TYPE_PERCENT:return this._computedMaxHeightValue=this._computeValuePercentYLimit(this._computedMaxHeightParsed);case rwt.widgets.base.Widget.TYPE_AUTO:return this._computedMaxHeightValue=this.getPreferredBoxHeight()}return null},getTopValue:function(){if(null!=this._computedTopValue)return this._computedTopValue;switch(this._computedTopType){case rwt.widgets.base.Widget.TYPE_PIXEL:return this._computedTopValue=this._computeValuePixel(this._computedTopParsed);case rwt.widgets.base.Widget.TYPE_PERCENT:return this._computedTopValue=this._computeValuePercentY(this._computedTopParsed)}return null},getBottomValue:function(){if(null!=this._computedBottomValue)return this._computedBottomValue;switch(this._computedBottomType){case rwt.widgets.base.Widget.TYPE_PIXEL:return this._computedBottomValue=this._computeValuePixel(this._computedBottomParsed);case rwt.widgets.base.Widget.TYPE_PERCENT:return this._computedBottomValue=this._computeValuePercentY(this._computedBottomParsed)}return null},_computeFrameWidth:function(){return this._cachedBorderLeft+this.getPaddingLeft()+this.getPaddingRight()+this._cachedBorderRight},_computeFrameHeight:function(){return this._cachedBorderTop+this.getPaddingTop()+this.getPaddingBottom()+this._cachedBorderBottom},_invalidateFrameDimensions:function(){this._invalidateFrameWidth();this._invalidateFrameHeight()},_invalidatePreferredInnerDimensions:function(){this._invalidatePreferredInnerWidth();this._invalidatePreferredInnerHeight()},_computePreferredBoxWidth:function(){return Math.max(0,this.getPreferredInnerWidth()+this.getFrameWidth())},_computePreferredBoxHeight:function(){return Math.max(0,this.getPreferredInnerHeight()+this.getFrameHeight())},_initialLayoutDone:!1,addToLayoutChanges:function(a){this._isDisplayable&&this.getParent()._addChildToChildrenQueue(this);return this._layoutChanges[a]=!0},addToQueue:function(a){this._initialLayoutDone?this.addToJobQueue(a):this.addToLayoutChanges(a)},addToQueueRuntime:function(a){return!this._initialLayoutDone||this.addToJobQueue(a)},_computeHasPercentX:function(){return this._computedLeftTypePercent||this._computedWidthTypePercent||this._computedMinWidthTypePercent||this._computedMaxWidthTypePercent||this._computedRightTypePercent},_computeHasPercentY:function(){return this._computedTopTypePercent||this._computedHeightTypePercent||this._computedMinHeightTypePercent||this._computedMaxHeightTypePercent||this._computedBottomTypePercent},_computeHasAutoX:function(){return this._computedWidthTypeAuto||this._computedMinWidthTypeAuto||this._computedMaxWidthTypeAuto},_computeHasAutoY:function(){return this._computedHeightTypeAuto||this._computedMinHeightTypeAuto||this._computedMaxHeightTypeAuto},_computeHasFlexX:function(){return this._computedWidthTypeFlex},_computeHasFlexY:function(){return this._computedHeightTypeFlex},_evalUnitsPixelPercentAutoFlex:function(a){switch(a){case "auto":return rwt.widgets.base.Widget.TYPE_AUTO;case Infinity:case -Infinity:return rwt.widgets.base.Widget.TYPE_NULL}switch(typeof a){case "number":return isNaN(a)?rwt.widgets.base.Widget.TYPE_NULL:rwt.widgets.base.Widget.TYPE_PIXEL;case "string":return-1!=a.indexOf("%")?rwt.widgets.base.Widget.TYPE_PERCENT:-1!=a.indexOf("*")?rwt.widgets.base.Widget.TYPE_FLEX:rwt.widgets.base.Widget.TYPE_NULL}return rwt.widgets.base.Widget.TYPE_NULL},_evalUnitsPixelPercentAuto:function(a){switch(a){case "auto":return rwt.widgets.base.Widget.TYPE_AUTO;case Infinity:case -Infinity:return rwt.widgets.base.Widget.TYPE_NULL}switch(typeof a){case "number":return isNaN(a)?rwt.widgets.base.Widget.TYPE_NULL:rwt.widgets.base.Widget.TYPE_PIXEL;case "string":return-1!=a.indexOf("%")?rwt.widgets.base.Widget.TYPE_PERCENT:rwt.widgets.base.Widget.TYPE_NULL}return rwt.widgets.base.Widget.TYPE_NULL},_evalUnitsPixelPercent:function(a){switch(a){case Infinity:case -Infinity:return rwt.widgets.base.Widget.TYPE_NULL}switch(typeof a){case "number":return isNaN(a)?rwt.widgets.base.Widget.TYPE_NULL:rwt.widgets.base.Widget.TYPE_PIXEL;case "string":return-1!=a.indexOf("%")?rwt.widgets.base.Widget.TYPE_PERCENT:rwt.widgets.base.Widget.TYPE_NULL}return rwt.widgets.base.Widget.TYPE_NULL},_unitDetectionPixelPercentAutoFlex:function(a,b){var c=rwt.widgets.base.Widget.layoutPropertyTypes[a],d=c.dataType,e=c.dataParsed,f=c.dataValue,g=c.typePixel,h=c.typePercent,k=c.typeAuto,l=c.typeFlex,c=c.typeNull,m=this[h],n=this[k],p=this[l];this[d]=this._evalUnitsPixelPercentAutoFlex(b);switch(this[d]){case rwt.widgets.base.Widget.TYPE_PIXEL:this[g]=!0;this[h]=this[k]=this[l]=this[c]=!1;this[e]=this[f]=Math.round(b);break;case rwt.widgets.base.Widget.TYPE_PERCENT:this[h]=!0;this[g]=this[k]=this[l]=this[c]=!1;this[e]=parseFloat(b);this[f]=null;break;case rwt.widgets.base.Widget.TYPE_AUTO:this[k]=!0;this[g]=this[h]=this[l]=this[c]=!1;this[e]=this[f]=null;break;case rwt.widgets.base.Widget.TYPE_FLEX:this[l]=!0;this[g]=this[h]=this[k]=this[c]=!1;this[e]=parseFloat(b);this[f]=null;break;default:this[c]=!0,this[g]=this[h]=this[k]=this[l]=!1,this[e]=this[f]=null}if(m!=this[h])switch(a){case "minWidth":case "maxWidth":case "width":case "left":case "right":this._invalidateHasPercentX();break;case "maxHeight":case "minHeight":case "height":case "top":case "bottom":this._invalidateHasPercentY()}if(n!=this[k])switch(a){case "minWidth":case "maxWidth":case "width":this._invalidateHasAutoX();break;case "minHeight":case "maxHeight":case "height":this._invalidateHasAutoY()}if(p!=this[l])switch(a){case "width":this._invalidateHasFlexX();break;case "height":this._invalidateHasFlexY()}},_unitDetectionPixelPercentAuto:function(a,b){var c=rwt.widgets.base.Widget.layoutPropertyTypes[a],d=c.dataType,e=c.dataParsed,f=c.dataValue,g=c.typePixel,h=c.typePercent,k=c.typeAuto,c=c.typeNull,l=this[h],m=this[k];this[d]=this._evalUnitsPixelPercentAuto(b);switch(this[d]){case rwt.widgets.base.Widget.TYPE_PIXEL:this[g]=!0;this[h]=this[k]=this[c]=!1;this[e]=this[f]=Math.round(b);break;case rwt.widgets.base.Widget.TYPE_PERCENT:this[h]=!0;this[g]=this[k]=this[c]=!1;this[e]=parseFloat(b);this[f]=null;break;case rwt.widgets.base.Widget.TYPE_AUTO:this[k]=!0;this[g]=this[h]=this[c]=!1;this[e]=this[f]=null;break;default:this[c]=!0,this[g]=this[h]=this[k]=!1,this[e]=this[f]=null}if(l!=this[h])switch(a){case "minWidth":case "maxWidth":case "width":case "left":case "right":this._invalidateHasPercentX();break;case "minHeight":case "maxHeight":case "height":case "top":case "bottom":this._invalidateHasPercentY()}if(m!=this[k])switch(a){case "minWidth":case "maxWidth":case "width":this._invalidateHasAutoX();break;case "minHeight":case "maxHeight":case "height":this._invalidateHasAutoY()}},_unitDetectionPixelPercent:function(a,b){var c=rwt.widgets.base.Widget.layoutPropertyTypes[a],d=c.dataType,e=c.dataParsed,f=c.dataValue,g=c.typePixel,h=c.typePercent,c=c.typeNull,k=this[h];this[d]=this._evalUnitsPixelPercent(b);switch(this[d]){case rwt.widgets.base.Widget.TYPE_PIXEL:this[g]=!0;this[h]=this[c]=!1;this[e]=this[f]=Math.round(b);break;case rwt.widgets.base.Widget.TYPE_PERCENT:this[h]=!0;this[g]=this[c]=!1;this[e]=parseFloat(b);this[f]=null;break;default:this[c]=!0,this[g]=this[h]=!1,this[e]=this[f]=null}if(k!=this[h])switch(a){case "minWidth":case "maxWidth":case "width":case "left":case "right":this._invalidateHasPercentX();break;case "minHeight":case "maxHeight":case "height":case "top":case "bottom":this._invalidateHasPercentY()}},getTopLevelWidget:function(){return this._hasParent?this.getParent().getTopLevelWidget():null},moveSelfToBegin:function(){this.getParent().addAtBegin(this)},moveSelfToEnd:function(){this.getParent().addAtEnd(this)},getPreviousSibling:function(){var a=this.getParent();if(null==a)return null;a=a.getChildren();return a[a.indexOf(this)-1]},getNextSibling:function(){var a=this.getParent();if(null==a)return null;a=a.getChildren();return a[a.indexOf(this)+1]},getPreviousVisibleSibling:function(){if(!this._hasParent)return null;var a=this.getParent().getVisibleChildren();return a[a.indexOf(this)-1]},getPreviousActiveSibling:function(a){return(a=rwt.widgets.base.Widget.getActiveSiblingHelper(this,this.getParent(),-1,a,null))?a:this.getParent().getLastActiveChild()},getNextActiveSibling:function(a){return(a=rwt.widgets.base.Widget.getActiveSiblingHelper(this,this.getParent(),1,a,null))?a:this.getParent().getFirstActiveChild()},isFirstVisibleChild:function(){return this._hasParent&&this.getParent().getFirstVisibleChild()==this},isLastVisibleChild:function(){return this._hasParent&&this.getParent().getLastVisibleChild()==this},setCustomVariant:function(a){null!==this._customVariant&&this.removeState(this._customVariant);this._customVariant=a;null!==this._customVariant&&this.addState(this._customVariant);a=this._getSubWidgets?this._getSubWidgets():[];for(var b=0;b<a.length;b++)a[b].setCustomVariant(this._customVariant);this.dispatchSimpleEvent("changeCustomVariant")},hasState:function(a){return this.__states&&this.__states[a]?!0:!1},toggleState:function(a,b){b?this.addState(a):this.removeState(a)},addState:function(a){this.__states||(this.__states={});this.__states[a]||(this.__states[a]=!0,this._hasParent&&rwt.widgets.base.Widget.addToGlobalStateQueue(this))},removeState:function(a){this.__states&&this.__states[a]&&(delete this.__states[a],this._hasParent&&rwt.widgets.base.Widget.addToGlobalStateQueue(this))},_styleFromMap:function(a){var b=rwt.qx.Property.$$method.style,c=rwt.qx.Property.$$method.unstyle,d,e;for(e in a)if(d=a[e],"undefined"===d)this[c[e]]();else this[b[e]](d)},_unstyleFromArray:function(a){for(var b=rwt.qx.Property.$$method.unstyle,c=0,d=a.length;c<d;c++)this[b[a[c]]]()},_renderAppearance:function(){this.__states||(this.__states={});this._applyStateStyleFocus(this.__states);var a=this.getAppearance();a&&(a=rwt.theme.AppearanceManager.getInstance().styleFrom(a,this.__states))&&this._styleFromMap(a)},_resetAppearanceThemeWrapper:function(a,b){var c=this.getAppearance();if(c){var d=rwt.theme.AppearanceManager.getInstance(),e=d.styleFromTheme(b,c,this.__states),c=d.styleFromTheme(a,c,this.__states),d=[],f;for(f in e)void 0===c[f]&&d.push(f);this._unstyleFromArray(d);this._styleFromMap(c)}},_applyStateStyleFocus:function(a){a.focused?rwt.widgets.util.FocusHandler.mouseFocus||this.getHideFocus()||this.setStyleProperty("outline","1px dotted"):this.setStyleProperty("outline","none")},addToStateQueue:function(){rwt.widgets.base.Widget.addToGlobalStateQueue(this)},recursiveAddToStateQueue:function(){this.addToStateQueue()},_applyAppearance:function(a,b){this.__states||(this.__states={});var c=rwt.theme.AppearanceManager.getInstance();if(a)var d=c.styleFrom(a,this.__states)||{};if(b){var c=c.styleFrom(b,this.__states)||{},e=[],f;for(f in c)d&&f in d||e.push(f)}e&&this._unstyleFromArray(e);d&&this._styleFromMap(d)},_recursiveAppearanceThemeUpdate:function(a,b){this._resetAppearanceThemeWrapper(a,b)},_applyElementData:function(){},setHtmlProperty:function(a,b){this._htmlProperties||(this._htmlProperties={});this._htmlProperties[a]=b;this._isCreated&&this.getElement()[a]!=b&&(this.getElement()[a]=b);return!0},_applyHtmlProperties:function(a){var b=this._htmlProperties;if(b)for(var c in b)a[c]=b[c]},_applyHtmlAttributes:function(a){if(this._htmlAttributes)for(var b in this._htmlAttributes)a.setAttribute(b,this._htmlAttributes[b])},getStyleProperty:function(a){return this._styleProperties?this._styleProperties[a]||"":""},getStyleProperties:function(){return this._styleProperties||{}},__outerElementStyleProperties:{cursor:!0,zIndex:!0,filter:!0,display:!0,visibility:!0,outline:!0,boxShadow:!0,opacity:!0,MozOpacity:!0},setStyleProperty:function(a,b){this._styleProperties||(this._styleProperties={});this._styleProperties[a]=b;if(this._isCreated){var c=this.__outerElementStyleProperties[a]?this.getElement():this._getTargetNode();c&&(c.style[a]=null==b?"":b)}},removeStyleProperty:function(a){if(this._styleProperties&&(delete this._styleProperties[a],this._isCreated)){var b=this.__outerElementStyleProperties[a]?this.getElement():this._getTargetNode();b&&(b.style[a]="")}},_applyStyleProperties:function(a){var b=this._styleProperties;if(b){var c,d=a,e=this._getTargetNode(),f;for(c in b)a=this.__outerElementStyleProperties[c]?d:e,f=b[c],a.style[c]=null==f?"":f}},_applyEnabled:function(a){this.toggleState("disabled",!1===a);!1===a&&(this.removeState("over"),this.removeState("abandoned"),this.removeState("pressed"),this.getFocused()&&this.setFocused(!1))},isFocusable:function(){return this.getEnabled()&&this.isSeeable()&&null!=this.getTabIndex()},isFocusRoot:function(){return!1},getFocusRoot:function(){return this._hasParent?this.getParent().getFocusRoot():null},getActiveChild:function(){var a=this.getFocusRoot();return a?a.getActiveChild():null},_ontabfocus:rwt.util.Functions.returnTrue,_applyFocused:function(a){if(this.isCreated()){var b=this.getFocusRoot();b&&(a?(b.setFocusedChild(this),this._visualizeFocus(),this.getWidth()<rwt.html.Viewport.getWidth()&&this.scrollIntoViewX(),this.getHeight()<rwt.html.Viewport.getHeight()&&this.scrollIntoViewY()):(b.getFocusedChild()==this&&b.setFocusedChild(null),this._visualizeBlur()))}},_visualizeBlur:function(){if(this.getEnableElementFocus()&&(!this.getFocusRoot().getFocusedChild()||this.getFocusRoot().getFocusedChild()&&this.getFocusRoot().getFocusedChild().getEnableElementFocus()))try{this.getElement().blur()}catch(a){}this.removeState("focused")},_visualizeFocus:function(){var a=rwt.widgets.util.FocusHandler;if(!a.mouseFocus&&!a.blockFocus&&this.getEnableElementFocus())try{this.getElement().focus()}catch(b){}this.addState("focused")},focus:function(){delete rwt.widgets.util.FocusHandler.mouseFocus;this.setFocused(!0)},blur:function(){delete rwt.widgets.util.FocusHandler.mouseFocus;this.setFocused(!1)},_applyCapture:function(a,b){var c=rwt.event.EventHandler;b&&c.setCaptureWidget(null);a&&c.setCaptureWidget(this)},_applyZIndex:function(a){null==a?this.removeStyleProperty("zIndex"):this.setStyleProperty("zIndex",a)},_applyDirection:function(a){"rtl"===a?(this.addState("rwt_RIGHT_TO_LEFT"),this.setStyleProperty("direction","rtl")):(this.removeState("rwt_RIGHT_TO_LEFT"),this.setStyleProperty("direction","ltr"))},_applyTabIndex:function(a){this.setStyleProperty("userFocus",0>a?"ignore":"normal");this.setHtmlProperty("tabIndex",0>a?-1:a)},_applySelectable:function(a){rwt.html.Style.setUserSelect(this,a?"text":"none")},_applyOpacity:function(a){this.setStyleProperty("opacity",a)},__cursorMap:{"default":"default",wait:"wait",crosshair:"crosshair",help:"help",move:"move",text:"text",pointer:"pointer","e-resize":"e-resize","n-resize":"n-resize","w-resize":"w-resize","s-resize":"s-resize","ne-resize":"ne-resize","se-resize":"se-resize","nw-resize":"nw-resize","sw-resize":"sw-resize","col-resize":"col-resize","row-resize":"row-resize",progress:"progress","not-allowed":"not-allowed","no-drop":"no-drop"},_applyCursor:function(a){a?this.setStyleProperty("cursor",this.__cursorMap[a]||"url( "+a+" ), default"):this.removeStyleProperty("cursor")},_applyCommand:function(){},_applyBackgroundImage:function(a,b){var c=rwt.html.ImageManager.getInstance();b&&c.hide(b);a&&c.show(a);this._styleBackgroundImage(a)},_styleBackgroundImage:function(a){rwt.html.Style.setBackgroundImage(this,a)},_applyBackgroundRepeat:function(a){rwt.html.Style.setBackgroundRepeat(this,a)},_applyBackgroundPosition:function(a){rwt.html.Style.setBackgroundPosition(this,a)},_applyClip:function(){return this._compileClipString()},_compileClipString:function(){var a=this.getClipLeft(),b=this.getClipTop(),c=this.getClipWidth(),d=this.getClipHeight();null==a?(c=null==c?"auto":c+"px",a="auto"):(c=null==c?"auto":a+c+"px",a+="px");null==b?(d=null==d?"auto":d+"px",b="auto"):(d=null==d?"auto":b+d+"px",b+="px");return this.setStyleProperty("clip","rect("+b+","+c+","+d+","+a+")")},_applyOverflow:function(a){this.setStyleProperty("overflow",a||"");this._invalidateFrameWidth();this._invalidateFrameHeight();this.addToQueue("overflow")},_applyContainerOverflow:function(a){this._innerStyle&&(this._style.overflow=a?"":"hidden")},_applyBackgroundColor:function(a){this._styleBackgroundColor(a)},_applyBackgroundGradient:function(a){rwt.html.Style.setBackgroundGradient(this,a)},_applyShadow:function(a){rwt.html.Style.setBoxShadow(this,a)},_applyTextShadow:function(a){rwt.html.Style.setTextShadow(this,a)},_styleBackgroundColor:function(a){rwt.html.Style.setBackgroundColor(this,a)},_applyTextColor:function(){},_applyFont:function(){},_cachedBorderTop:0,_cachedBorderRight:0,_cachedBorderBottom:0,_cachedBorderLeft:0,_targetNodeEnabled:!1,_applyBorder:function(a){this._queueBorder(a)},_queueBorder:function(a){this.addToQueue("border");this.__reflowBorderX(a);this.__reflowBorderY(a);this.__borderObject=a},__reflowBorderX:function(a){var b=this._cachedBorderLeft,c=this._cachedBorderRight;this._cachedBorderLeft=a?a.getWidthLeft():0;this._cachedBorderRight=a?a.getWidthRight():0;b+c!=this._cachedBorderLeft+this._cachedBorderRight&&this._invalidateFrameWidth()},__reflowBorderY:function(a){var b=this._cachedBorderTop,c=this._cachedBorderBottom;this._cachedBorderTop=a?a.getWidthTop():0;this._cachedBorderBottom=a?a.getWidthBottom():0;b+c!=this._cachedBorderTop+this._cachedBorderBottom&&this._invalidateFrameHeight()},renderBorder:function(){var a=this.__borderObject;a?a.renderWidget(this):rwt.html.Border.resetWidget(this);this._outerFrame=this._computeOuterFrame()},_computeOuterFrame:function(){var a=[0,0];this._innerStyle&&this.__borderObject&&(a=this.__borderObject.getWidths(),a="complex"===this.__borderObject.getStyle()&&2===a[0]?[2,2]:[a[1]+a[3],a[0]+a[2]]);return a},prepareEnhancedBorder:function(a){if(!this._innerStyle){this._targetNode=document.createElement("div");this._innerStyle=this._targetNode.style;this._targetNodeEnabled=!0;this._innerStyle.width="100%";this._innerStyle.height="100%";this._innerStyle.position="absolute";if(!a)for(var b in this._styleProperties)switch(b){case "zIndex":case "filter":case "opacity":case "MozOpacity":case "display":case "cursor":case "boxShadow":break;default:this._innerStyle[b]=this._styleProperties[b],this._style[b]=""}this._style.outline="none";this._applyContainerOverflow(this.getContainerOverflow());if(!a)for(var c in this._htmlProperties)"unselectable"===c&&(this._targetNode.unselectable=this._htmlProperties[c]);for(;this._element.firstChild;)this._targetNode.appendChild(this._element.firstChild);this._element.appendChild(this._targetNode);this.isInDom()&&(this._afterRemoveDom(),this._afterInsertDom())}},_applyPaddingTop:function(){this.addToQueue("paddingTop");this._invalidateFrameHeight()},_applyPaddingRight:function(){this.addToQueue("paddingRight");this._invalidateFrameWidth()},_applyPaddingBottom:function(){this.addToQueue("paddingBottom");this._invalidateFrameHeight()},_applyPaddingLeft:function(){this.addToQueue("paddingLeft");this._invalidateFrameWidth()},renderPadding:function(){},_applyMarginLeft:function(){this.addToQueue("marginLeft")},_applyMarginRight:function(){this.addToQueue("marginRight")},_applyMarginTop:function(){this.addToQueue("marginTop")},_applyMarginBottom:function(){this.addToQueue("marginBottom")},execute:function(){var a=this.getCommand();a&&a.execute(this);this.createDispatchEvent("execute")},_visualPropertyCheck:function(){if(!this.isCreated())throw Error(this.classname+": Element must be created previously!");},setScrollLeft:function(a){this._visualPropertyCheck();this._getTargetNode().scrollLeft=a},setScrollTop:function(a){this._visualPropertyCheck();this._getTargetNode().scrollTop=a},getOffsetLeft:function(){this._visualPropertyCheck();return rwt.html.Offset.getLeft(this.getElement())},getOffsetTop:function(){this._visualPropertyCheck();return rwt.html.Offset.getTop(this.getElement())},getScrollLeft:function(){this._visualPropertyCheck();return Math.ceil(this._getTargetNode().scrollLeft)},getScrollTop:function(){this._visualPropertyCheck();return Math.ceil(this._getTargetNode().scrollTop)},getClientWidth:function(){this._visualPropertyCheck();return this._getTargetNode().clientWidth},getClientHeight:function(){this._visualPropertyCheck();return this._getTargetNode().clientHeight},getOffsetWidth:function(){this._visualPropertyCheck();return this.getElement().offsetWidth},getOffsetHeight:function(){this._visualPropertyCheck();return this.getElement().offsetHeight},getScrollWidth:function(){this._visualPropertyCheck();return this._getTargetNode().scrollWidth},getScrollHeight:function(){this._visualPropertyCheck();return this._getTargetNode().scrollHeight},scrollIntoView:function(a){this.scrollIntoViewX(a);this.scrollIntoViewY(a)},scrollIntoViewX:function(a){return this._isCreated&&this._isDisplayable?rwt.html.ScrollIntoView.scrollX(this.getElement(),a):!1},scrollIntoViewY:function(a){return this._isCreated&&this._isDisplayable?rwt.html.ScrollIntoView.scrollY(this.getElement(),a):!1},supportsDrop:function(a){var b=this.getSupportsDropMethod();return null!==b?b.call(this,a):this!=a.sourceWidget},getAdapter:function(a){void 0===this._adapters&&(this._adapters={});var b=a.classname,c=this._adapters[b];null==c&&(new a(this),c=this._adapters[b]);return c}},defer:function(a,b){a.__initApplyMethods(b);a.__initLayoutProperties(a)},destruct:function(){this.dispatchSimpleEvent("dispose",{target:this});var a=this.getElement();if(a){a.rwtWidget=null;try{a.parentNode&&a.parentNode.removeChild(a)}catch(b){}try{this._targetNode&&this._targetNode.parentNode&&this._targetNode.parentNode.removeChild(this._targetNode)}catch(b){}}this._disposeObjectDeep("_adapters",1);this._disposeFields("_isCreated","_inlineEvents","_element","_style","_targetNode","_innerStyle","_oldParent","_styleProperties","_htmlProperties","_htmlAttributes","__states","_jobQueue","_layoutChanges","__borderObject","_outerFrame")}});rwt.qx.Class.define("rwt.widgets.util.WidgetRenderAdapter",{extend:rwt.qx.Target,construct:function(a){this._autoDispose=!1;this.base(arguments);this._widget=a;var b=this.classname;if(null!=a._adapters[b])throw Error("Never create WidgetRenderAdapter directly!");a._adapters[b]=this},destruct:function(){this._widget=null},events:{visibility:"rwt.event.DataEvent",height:"rwt.event.DataEvent",top:"rwt.event.DataEvent",left:"rwt.event.DataEvent",opacity:"rwt.event.DataEvent",backgroundColor:"rwt.event.DataEvent",backgroundGradient:"rwt.event.DataEvent"},members:{addRenderListener:function(a,b,c){var d=this._renderFunctionNames[a];if(!this.hasEventListeners(a)){var e=this;this._widget[d]=function(){e.dispatchSimpleEvent(a,arguments,!1)&&this.constructor.prototype[d].apply(this,arguments)}}this.addEventListener(a,b,c)},removeRenderListener:function(a,b,c){this.removeEventListener(a,b,c);this.hasEventListeners(a)||delete this._widget[this._renderFunctionNames[a]]},forceRender:function(a,b){this.getOriginalRenderer(a).call(this._widget,b)},getOriginalRenderer:function(a){return this._widget.constructor.prototype[this._renderFunctionNames[a]]},_renderFunctionNames:{visibility:"_applyVisibility",height:"_renderRuntimeHeight",top:"_renderRuntimeTop",left:"_renderRuntimeLeft",opacity:"_applyOpacity",backgroundColor:"_styleBackgroundColor",backgroundGradient:"_applyBackgroundGradient"}}});(function(){var a=rwt.util.RWTQuery;rwt.define("rwt.widgets.util.Badges",{setBadge:function(b,c){if(c){var d=this._getBadgeElement(b),e=a(b).get(0);a(e).append(d);a(d).text(c);b.addEventListener("appear",this._renderBadgePosition,b);b.addEventListener("flush",this._renderBadgePosition,b);b.addEventListener("changeCustomVariant",this._renderBadgeStyle,b);this._renderBadgeStyle.apply(b);this._renderBadgePosition.apply(b)}else this._removeBadge(b);b.dispatchSimpleEvent("changeBadge")},getBadge:function(b){return(b=b.getUserData("rwt.widgets.util.Badges.BADGE_ELEMENT"))?a(b).text():null},_getBadgeElement:function(b){var c=b.getUserData("rwt.widgets.util.Badges.BADGE_ELEMENT");if(c)return c;b.enableEnhancedBorder();c=document.createElement("div");a(c).css({position:"absolute",textAlign:"center",lineHeight:1.1});b.setUserData("rwt.widgets.util.Badges.BADGE_ELEMENT",c);return c},_removeBadge:function(b){if(b=b.getUserData("rwt.widgets.util.Badges.BADGE_ELEMENT"))a(b).text(""),a(b).detach()},_renderBadgePosition:function(b){var c=b&&b.getData?b.getData().updateBadgePosition:!0;b=this.getUserData("rwt.widgets.util.Badges.BADGE_ELEMENT");c&&this.isSeeable()&&b&&b.parentNode&&this.computeBadgePosition&&(c=this.computeBadgePosition([b.offsetWidth,b.offsetHeight]),a(b).css({top:c[0],right:c[1],bottom:c[2],left:c[3]}))},_renderBadgeStyle:function(){var b=this.getUserData("rwt.widgets.util.Badges.BADGE_ELEMENT");if(b){var c={};null!==this._customVariant&&(c[this._customVariant]=!0);c=new rwt.theme.ThemeValues(c);a(b).css({color:c.getCssColor("Widget-Badge","color"),backgroundColor:c.getCssColor("Widget-Badge","background-color"),border:c.getCssBorder("Widget-Badge","border"),font:c.getCssFont("Widget-Badge","font")});c=1.1*parseInt(b.style.fontSize,10)+2;a(b).css({minWidth:c,paddingLeft:Math.floor(.3*c),paddingRight:Math.floor(.3*c),paddingTop:1,paddingBottom:1})}}})})();rwt.qx.Class.define("rwt.animation.AnimationRenderer",{extend:rwt.qx.Object,construct:function(a){this._autoDispose=!1;this.base(arguments);this._animation=a;this._animation._addRenderer(this);this._cloneFrom=this._setupFunction=this._lastValue=this._endValue=this._startValue=this._context=this._renderFunction=this._converterFunction=null;this._active=!0;this._activeOnce=!1;this._invisibilityGetter=rwt.util.Functions.returnZero;this._fullVisibilityValue=null;this._autoStartEnabled=!0;this._renderAdapter=this._renderType=null;this._animationType=0;this._autoCheck=!0},destruct:function(){this.clearAnimation();this._animation._removeRenderer(this);this._cloneFrom=this._context=this._renderFunction=this._converterFunction=this._setupFunction=this._lastValue=this._invisibilityGetter=this._endValue=this._startValue=this._animation=null},members:{setConverter:function(a){this._converterFunction="string"==typeof a?rwt.animation.AnimationRenderer.converter[a]:a},setRenderFunction:function(a,b){null==this._renderType&&(this._renderFunction=a,this._context=b)},renderValue:function(a){this._renderFunction.call(this._context,a);this._lastValue=a},setStartValue:function(a){this._startValue=a},setEndValue:function(a){this._endValue=a},setSetupFunction:function(a){this._setupFunction=a},setCloneFrom:function(a){this._cloneFrom=a},getAnimation:function(){return this._animation},getContext:function(){return this._context},getStartValue:function(){return this._startValue},getEndValue:function(){return this._endValue},getLastValue:function(){return this._lastValue},setActive:function(a){if(this._active!==a){if(this._animation.isRunning())throw'AnimationRenderer: Can not change "active" while running!';this._active=a;null!==this._renderType&&this._handleAnimationType()}},isActive:function(){return this._active},activateOnce:function(){this._activeOnce||(this.setActive(!0),this._activeOnce=!0)},cancelActivateOnce:function(){this._activeOnce&&(this._activeOnce=!1,this.setActive(!1))},_setup:function(a){if(this._active){if(this._context instanceof rwt.widgets.base.Widget&&!0!==this._context._isCreated)if(this._context._isInGlobalElementQueue)rwt.widgets.base.Widget.flushGlobalQueues();else throw Error("AnimationRenderer setup failed: Widget not ready.");null!=this._setupFunction&&this._setupFunction.call(this._context,a,this);this._startValue=this._prepareValue(this._startValue);this._endValue=this._prepareValue(this._endValue);if(null==this._renderFunction||null==this._converterFunction)throw Error("renderFunction or converterFunction missing");}},_render:function(a){if(this._active){a=null!=this._cloneFrom?this._cloneFrom.getLastValue():a;try{var b=this._converterFunction(a,this._startValue,this._endValue);this.renderValue(b)}catch(c){throw"AnimationRenderer failed: "+(c.message?c.message:c);}}},_finish:function(a){this._active&&"disappear"==a&&(this._updateWidgetVisibility(),this._forceWidgetRenderer());this.cancelActivateOnce()},_prepareValue:function(a){var b=a;switch(this._renderType){case "backgroundColor":"string"==typeof a&&(b="transparent"==a||""===a||"rgba"===a.slice(0,4)?null:rwt.util.Colors.stringToRgb(a));break;case "backgroundGradient":if(a)for(var b=[],c=0;c<a.length;c++)b[c]=[a[c][0],rwt.util.Colors.stringToRgb(a[c][1])];break;case "opacity":b=null==a||1<a||0>a?1:a;break;default:b=null!=a?a:0}return b},animate:function(a,b,c){if(this._context!=a||this._renderType!=b||this._animationType!=c)this.clearAnimation(),this._context=a,this._renderAdapter=a.getAdapter(rwt.widgets.util.WidgetRenderAdapter),this._renderType=b,this._animationType=c,this._renderFunction=this._renderAdapter.getOriginalRenderer(this._renderType),this.setConverter(rwt.animation.AnimationRenderer.converterByRenderType[this._renderType]),this._handleAnimationType()},clearAnimation:function(){null!==this._renderType&&(this._animationType=0,this._handleAnimationType(),this._renderType=null,this.setRenderFunction(null,null),this._renderAdapter=null)},isAnimated:function(a){var b=!1;if(0<this._animationType&&this._active){var c=a&this._animationType;if("undefined"===typeof a||0!==c)b=!0}return b},setInvisibilityGetter:function(a){this._invisibilityGetter=a},setAutoStart:function(a){this._autoStartEnabled=a},setAutoCheck:function(a){this._autoCheck=a},getValueFromWidget:function(){var a;switch(this._renderType){case "opacity":a=this._context.getOpacity();break;case "height":this._context.isCreated()&&this._context._style.height?a=parseInt(this._context._style.height,10):(a=this._context.getHeightValue(),this._context._computedHeightValue=null,this._context._invalidatePreferredInnerHeight(),this._context._invalidatePreferredBoxHeight());break;case "top":a=this._context.isCreated()&&this._context._style.top?parseInt(this._context._style.top,10):this._context.getTopValue();break;case "left":a=this._context.isCreated()&&this._context._style.left?parseInt(this._context._style.left,10):this._context.getLeftValue();break;case "backgroundColor":a=this._context;a=a.getGfxProperty&&a.getGfxProperty("backgroundColor")?a.getGfxProperty("backgroundColor"):rwt.html.Style.getBackgroundColor(a);break;case "backgroundGradient":a=this._context;a=a.getBackgroundGradient();break;default:throw"getValueFromWidget: "+this._renderType+" not supported!";}return a},checkValues:function(){var a;switch(this._renderType){case "backgroundGradient":case "backgroundColor":a=null!=this._startValue&&null!=this._endValue;break;default:a=!0}return a&&this._startValue!=this._endValue},_handleAnimationType:function(){if(this._animation.isRunning())throw"AnimationRenderer: Can not change animation while running!";this.isAnimated()?(this._attachToApplyVisibility(!0),this._attachToWidgetRenderer(!0)):(this._attachToApplyVisibility(!1),this._attachToWidgetRenderer(!1))},_attachToApplyVisibility:function(a){a?(this._renderAdapter.addRenderListener("visibility",this._onVisibilityChange,this),this._context.addEventListener("create",this._onCreate,this)):(this._renderAdapter.removeRenderListener("visibility",this._onVisibilityChange,this),this._context.removeEventListener("create",this._onCreate,this))},_attachToWidgetRenderer:function(a){a?this._renderAdapter.addRenderListener(this._renderType,this._onOriginalRenderer,this):this._renderAdapter.removeRenderListener(this._renderType,this._onOriginalRenderer,this)},_onVisibilityChange:function(a){a[0]?a=this._onBeforeAppear():(this._context.isCreated()||this._animation.cancel(),a=this._context.isSeeable()?this._onBeforeDisappear():!0);return a},_onCreate:function(){this._context.isDisplayable()&&this._onBeforeAppear()},_onBeforeAppear:function(){this._context.isCreated()?this._animation.skip():this._animation.cancel();var a=rwt.animation.AnimationRenderer.ANIMATION_APPEAR;this._context.isCreated()&&this.isAnimated(a)&&(this.setEndValue(this.getValueFromWidget()),null!=this._invisibilityGetter&&(this.setStartValue(this._invisibilityGetter(this._context)),this._render(0)),this._autoStart(a));return!0},_onBeforeDisappear:function(){this._animation.skip();var a=rwt.animation.AnimationRenderer.ANIMATION_DISAPPEAR,b=!this.isAnimated(a);b||(null!==this._invisibilityGetter&&this.setEndValue(this._invisibilityGetter(this._context)),this.setStartValue(this.getValueFromWidget()),this._autoStart(a));return b},_onOriginalRenderer:function(a){var b=a[0],c=a[1];a=!1;if(this._animation.isStarted()){var c=this._animation.getConfig(),d=this._endValue;"change"!=c&&"appear"!=c||this.setEndValue(b);d!=this._endValue&&(this._animation.isRunning()&&this.setStartValue(this.getLastValue()),this.checkValues()&&this._animation.restart()||(this._animation.cancel(),this.cancelActivateOnce(),a=!0))}else d=rwt.animation.AnimationRenderer.ANIMATION_CHANGE,this.isAnimated(d)&&this._context.isSeeable()?(this.setStartValue("undefined"!==typeof c?c:this.getValueFromWidget()),this.setEndValue(b),!this._autoStart(d)&&this._autoStartEnabled&&(a=!0)):a=!0;return a},_forceWidgetRenderer:function(){this._context[rwt.animation.AnimationRenderer.applyFunctionNames[this._renderType]](this._context.get(this._renderType))},_autoStart:function(a){var b=!1;this._autoStartEnabled&&this.isAnimated(a)&&(this._autoCheck?this.checkValues():1)?b=this._animation.start(this._typeToConfig(a)):this.cancelActivateOnce();return b},_typeToConfig:function(a){var b=null;switch(a){case rwt.animation.AnimationRenderer.ANIMATION_APPEAR:b="appear";break;case rwt.animation.AnimationRenderer.ANIMATION_DISAPPEAR:b="disappear";break;case rwt.animation.AnimationRenderer.ANIMATION_CHANGE:b="change"}return b},_updateWidgetVisibility:function(){var a=this._context.getVisibility();this._renderAdapter.forceRender("visibility",a)}},statics:{ANIMATION_APPEAR:1,ANIMATION_DISAPPEAR:2,ANIMATION_CHANGE:4,applyFunctionNames:{height:"_applyHeight",opacity:"_applyOpacity",backgroundColor:"_applyBackgroundColor",backgroundGradient:"_applyBackgroundGradient",top:"_applyTop",left:"_applyLeft"},converterByRenderType:{height:"numericPositiveRound",top:"numericRound",left:"numericRound",opacity:"factor",backgroundColor:"color",backgroundGradient:"gradient"},converter:{none:function(a){return a},round:Math.round,positive:function(a){return Math.max(0,a)},numeric:function(a,b,c){return b+(c-b)*a},numericRound:function(a,b,c){return Math.round(b+(c-b)*a)},numericPositive:function(a,b,c){return Math.max(0,b+(c-b)*a)},numericPositiveRound:function(a,b,c){return Math.round(Math.max(0,b+(c-b)*a))},factor:function(a,b,c){return Math.max(0,Math.min(b+(c-b)*a,1))},color:function(a,b,c){for(var d=[],e,f=0;3>f;f++)e=c[f]-b[f],e=Math.round(b[f]+e*a),d[f]=Math.max(0,Math.min(e,255));return rwt.util.Colors.rgbToRgbString(d)},gradient:function(a,b,c){for(var d=rwt.animation.AnimationRenderer.converter.color,e=rwt.animation.AnimationRenderer.converter.factor,f=[],g=Math.min(c.length,b.length),h=0;h<g;h++)f[h]=[e(a,b[h][0],c[h][0]),d(a,b[h][1],c[h][1])];return f}}}});rwt.qx.Class.define("rwt.animation.Animation",{extend:rwt.qx.Target,construct:function(){this.base(arguments);this._renderer=[];this._duration=1E3;this._transitionFunction=rwt.animation.Animation.transitions.linear;this._defaultRenderer=this._config=this._totalTime=this._finishOn=this._startOn=null;this._inQueue=this._isRunning=!1},destruct:function(){this.isRunning()?this.skip():this.cancel();try{for(var a=0;a<this._renderer.length;a++)this._renderer[a].dispose()}catch(b){throw"Could not Dispose AnimationRenderer: "+b;}this._renderer=null},events:{init:"rwt.event.DataEvent",finish:"rwt.event.DataEvent",cancel:"rwt.event.DataEvent"},members:{setDuration:function(a){this._duration=a},getDuration:function(){return this._duration},setTransition:function(a){this._transitionFunction=rwt.animation.Animation.transitions[a]},setProperties:function(a){this.setDuration(a[0]);this.setTransition(a[1])},getRenderer:function(a){return this._renderer[a]},getDefaultRenderer:function(a){if(null==this._defaultRenderer||this._defaultRenderer.isDisposed())this._defaultRenderer=new rwt.animation.AnimationRenderer(this);"undefined"!=typeof a&&this._defaultRenderer.setActive(a);return this._defaultRenderer},getRendererLength:function(){return this._renderer.length},getRendererIndex:function(a){return this._renderer.indexOf(a)},getConfig:function(){return this._config},start:function(a){this.isStarted()||(rwt.animation.Animation._addToQueue(this),this._inQueue=!0,this._config=a,this._init());return this.isStarted()},restart:function(){var a=!1;this.isStarted()&&(a=this._config,this.cancel(),a=this.start(a));return a},cancel:function(){this.isStarted()&&(this._isRunning=this._inQueue=!1,this.createDispatchDataEvent("cancel",this._config),this._config=null,rwt.animation.Animation._removeFromLoop(this))},skip:function(){this.isStarted()&&(this.isRunning()||this._render(0),this._finish())},setRendererActive:function(a){for(var b=0;b<this._renderer.length;b++)this._renderer[b].setActive(a)},activateRendererOnce:function(){for(var a=0;a<this._renderer.length;a++)this._renderer[a].activateOnce()},isStarted:function(){return this._inQueue},isRunning:function(){return this._isRunning},_addRenderer:function(a){this._renderer.push(a)},_removeRenderer:function(a){if(this.isStarted())throw"Cannot remove AnimationRenderer: Animation already started!";rwt.util.Arrays.remove(this._renderer,a)},_init:function(){this.createDispatchDataEvent("init",this._config);this._startOn=null;this._numberRenderer=this._renderer.length},_loop:function(a){null===this._startOn&&(this._startOn=(new Date).getTime(),this._finishOn=this._startOn+this._duration,this._totalTime=this._duration);a>=this._finishOn?this._finish():this._render((a-this._startOn)/this._totalTime)},_render:function(a){if(!this._isRunning){for(var b=0;b<this._numberRenderer;b++)this._renderer[b]._setup(this._config);this._isRunning=!0}a=this._transitionFunction(a);for(b=0;b<this._numberRenderer;b++)this._renderer[b]._render(a)},_finish:function(){this._render(1);var a=this._config;this.cancel();for(var b=0;b<this._numberRenderer;b++)this._renderer[b]._finish(a);this.createDispatchDataEvent("finish",a)}},statics:{FPS:60,_queue:[],_interval:null,_addToQueue:function(a){this._queue.push(a);null==this._interval&&this._startLoop()},_removeFromLoop:function(a){rwt.util.Arrays.remove(this._queue,a);0===this._queue.length&&this._stopLoop()},_startLoop:function(){this._interval=setInterval(this._mainLoop,Math.round(1E3/this.FPS))},_stopLoop:function(){window.clearInterval(this._interval);this._interval=null},_mainLoop:function(){try{if(!rwt.remote.EventUtil.getSuspended()){var a=(new Date).getTime(),b=rwt.animation.Animation;try{for(var c=0,d=b._queue.length;c<d;c++)b._queue[c]&&b._queue[c]._loop(a)}catch(e){throw rwt.animation.Animation._stopLoop(),"Animation aborted: "+e;}}}catch(e){rwt.runtime.ErrorHandler.processJavaScriptError(e)}},blockGlobalFlushs:function(a){(rwt.widgets.base.Widget._inFlushGlobalQueues=a)||rwt.widgets.base.Widget._initAutoFlush(0)},transitions:{linear:function(a){return a},ease:function(a){return-Math.cos((-Math.pow(a-1,2)+1)*Math.PI)/2+.5},easeIn:function(a){return Math.pow(a,2)},easeOut:function(a){return-Math.pow(a-1,2)+1},easeInOut:function(a){return-Math.cos(a*Math.PI)/2+.5}}}});(function(){var a=rwt.animation.AnimationRenderer,b=rwt.animation.Animation;rwt.animation.AnimationUtil={snapTo:function(a,b,e,f,g){b=this._createAnimation(a,b,"easeOut");var c=this._createRenderer(b,a,"left"),d=this._createRenderer(b,a,"top"),l=parseInt(a.getLeft(),10),m=parseInt(a.getTop(),10);c.setStartValue(isNaN(l)?0:l);d.setStartValue(isNaN(m)?0:m);c.setEndValue(e);d.setEndValue(f);b.addEventListener("finish",function(){a.setLeft(e);a.setTop(f);g&&a.setDisplay(!1)});b.start()},_createAnimation:function(a,d,e){var c=new b;c.setDuration(d);c.setTransition(e);var g=function(){c.cancel();c.dispose()};a.addEventListener("cancelAnimations",g);a.addEventListener("dispose",g);c.addEventListener("cancel",function(){a.removeEventListener("dispose",g);a.removeEventListener("cancelAnimations",g);rwt.client.Timer.once(c.dispose,c,0)});return c},_createRenderer:function(b,d,e){var c=a.converterByRenderType,g=d.getAdapter(rwt.widgets.util.WidgetRenderAdapter);b=new a(b);b.setRenderFunction(g.getOriginalRenderer(e),d);b.setConverter(c[e]);return b}}})();(function(){var a=rwt.animation.Animation,b=rwt.animation.AnimationRenderer,c=rwt.event.EventHandlerUtil;rwt.qx.Mixin.define("rwt.animation.VisibilityAnimationMixin",{properties:{animation:{check:"Object",nullable:!1,init:null,apply:"_applyAnimation",themeable:!0}},construct:function(){this.hide();this.addEventListener("changeVisibility",this._blockUserEvents,this);this.addEventListener("destroy",this._onDestroyAnim,this);this instanceof rwt.widgets.Composite&&this.show()},destruct:function(){null!=this._appearAnimation&&this._appearAnimation.dispose();this._appearAnimation=null;null!=this._disappearAnimation&&this._disappearAnimation.dispose();this._disappearAnimation=null},members:{_appearAnimation:null,_disappearAnimation:null,_animateDestroy:!1,_applyAnimation:function(a){this._configureAppearAnimation(a);this._configureDisappearAnimation(a)},_configureAppearAnimation:function(a){null!==this._appearAnimation&&this._appearAnimation.getDefaultRenderer().setActive(!1);for(var b in a)switch(b){case "fadeIn":this._configureFadeIn(a[b]);break;case "slideIn":this._configureSlideIn(a[b]);break;case "flyInTop":case "flyInLeft":case "flyInRight":case "flyInBottom":this._configureFlyIn(a[b],b)}},_configureFadeIn:function(a){var c=this._getAppearAnimation();c.setProperties(a);c.getDefaultRenderer().animate(this,"opacity",b.ANIMATION_APPEAR)},_configureSlideIn:function(a){var c=this._getAppearAnimation();c.setProperties(a);c.getDefaultRenderer().animate(this,"height",b.ANIMATION_APPEAR|b.ANIMATION_CHANGE);c.addEventListener("init",this._initSlideAnimation,this);c.addEventListener("cancel",this._finishSlideAnimation,this)},_configureFlyIn:function(a,c){var d=this._getAppearAnimation();d.setProperties(a);var d=d.getDefaultRenderer(),e=b.ANIMATION_APPEAR;switch(c){case "flyInTop":d.animate(this,"top",e);d.setInvisibilityGetter(rwt.animation.VisibilityAnimationMixin.hideTop);break;case "flyInBottom":d.animate(this,"top",e);d.setInvisibilityGetter(rwt.animation.VisibilityAnimationMixin.hideBottom);break;case "flyInLeft":d.animate(this,"left",e);d.setInvisibilityGetter(rwt.animation.VisibilityAnimationMixin.hideLeft);break;case "flyInRight":d.animate(this,"left",e),d.setInvisibilityGetter(rwt.animation.VisibilityAnimationMixin.hideRight)}},_getAppearAnimation:function(){null===this._appearAnimation&&(this._appearAnimation=new a);this._appearAnimation.getDefaultRenderer().setActive(!0);return this._appearAnimation},_onDestroyAnim:function(){var a=!0;this._animateDestroy&&(this._markInDispose(),this.hide(),this._disappearAnimation.isStarted()?(a=!1,this._disappearAnimation.addEventListener("cancel",this._finishDestroyAnimation,this)):(this._animateDestroy=!1,delete this._isInGlobalDisposeQueue));return a},_finishDestroyAnimation:function(){this._animateDestroy=!1;delete this._isInGlobalDisposeQueue;this.destroy()},_configureDisappearAnimation:function(a){null!==this._disappearAnimation&&(this._disappearAnimation.getDefaultRenderer().setActive(!1),this._animateDestroy=!1);for(var b in a)switch(b){case "fadeOut":this._configureFadeOut(a[b]);break;case "slideOut":this._configureSlideOut(a[b]);break;case "flyOutTop":case "flyOutLeft":case "flyOutRight":case "flyOutBottom":this._configureFlyOut(a[b],b)}},_configureFadeOut:function(a){var c=this._getDisappearAnimation();c.getDefaultRenderer().animate(this,"opacity",b.ANIMATION_DISAPPEAR);c.setProperties(a)},_configureSlideOut:function(a){var c=this._getDisappearAnimation();c.getDefaultRenderer().animate(this,"height",b.ANIMATION_DISAPPEAR);c.addEventListener("init",this._initSlideAnimation,this);c.addEventListener("cancel",this._finishSlideAnimation,this);c.setProperties(a)},_configureFlyOut:function(a,c){var d=this._getDisappearAnimation();d.setProperties(a);var d=d.getDefaultRenderer(),e=b.ANIMATION_DISAPPEAR;switch(c){case "flyOutTop":d.animate(this,"top",e);d.setInvisibilityGetter(rwt.animation.VisibilityAnimationMixin.hideTop);break;case "flyOutBottom":d.animate(this,"top",e);d.setInvisibilityGetter(rwt.animation.VisibilityAnimationMixin.hideBottom);break;case "flyOutLeft":d.animate(this,"left",e);d.setInvisibilityGetter(rwt.animation.VisibilityAnimationMixin.hideLeft);break;case "flyOutRight":d.animate(this,"left",e),d.setInvisibilityGetter(rwt.animation.VisibilityAnimationMixin.hideRight)}},_getDisappearAnimation:function(){null===this._disappearAnimation&&(this._disappearAnimation=new a,this instanceof rwt.widgets.Shell&&(this._disappearAnimation.addEventListener("init",this._lockActiveState,this),this._disappearAnimation.addEventListener("cancel",this._unlockActiveState,this)));this._disappearAnimation.getDefaultRenderer().setActive(!0);this._animateDestroy=!0;return this._disappearAnimation},_initSlideAnimation:function(){this.setContainerOverflow(!1)},_finishSlideAnimation:function(){this.setContainerOverflow(!0)},_blockUserEvents:function(a){var b=this.getElement();b&&c.blockUserDomEvents(b,!a.getValue())},_lockActiveState:function(){this.getWindowManager().blockActiveState=!0},_unlockActiveState:function(){var a=rwt.widgets.base.Window.getDefaultWindowManager();a.blockActiveState=!1;this.isDisposed()||this._isInGlobalDisposeQueue||this._setActiveState(this.getActive());(a=a.getActiveWindow())&&a!==this&&a._setActiveState(!0)}},statics:{hideTop:function(a){return-1*parseInt(a.getHeightValue(),10)},hideBottom:function(a){return a.getParent().getInnerHeight()},hideLeft:function(a){return-1*parseInt(a.getWidthValue(),10)},hideRight:function(a){return a.getParent().getInnerWidth()}}})})();rwt.qx.Class.define("rwt.widgets.base.Parent",{extend:rwt.widgets.base.Widget,construct:function(){this.base(arguments);this._children=[];this._layoutImpl=this._createLayoutImpl()},properties:{focusHandler:{check:"rwt.widgets.util.FocusHandler",apply:"_applyFocusHandler",nullable:!0},activeChild:{check:"rwt.widgets.base.Widget",event:"changeActiveChild",nullable:!0},focusedChild:{check:"rwt.widgets.base.Widget",apply:"_applyFocusedChild",event:"changeFocusedChild",nullable:!0},visibleChildren:{_cached:!0,defaultValue:null}},members:{isFocusRoot:function(){return null!=this.getFocusHandler()},getFocusRoot:function(){return this.isFocusRoot()?this:this._hasParent?this.getParent().getFocusRoot():null},activateFocusRoot:function(){this._focusHandler||(this._focusHandler=new rwt.widgets.util.FocusHandler(this),this.setFocusHandler(this._focusHandler))},_onfocuskeyevent:function(a){this.getFocusHandler()._onkeyevent(this,a)},_applyFocusHandler:function(a){a?(this.addEventListener("keypress",this._onfocuskeyevent),1>this.getTabIndex()&&this.setTabIndex(1),this.setHideFocus(!0),this.setActiveChild(this)):(this.removeEventListener("keydown",this._onfocuskeyevent),this.removeEventListener("keypress",this._onfocuskeyevent),this.setTabIndex(null),this.setHideFocus(!1))},_applyFocusedChild:function(a,b){var c=null!=a,d=null!=b;if(rwt.qx.Class.isDefined("rwt.widgets.util.PopupManager")&&c){var e=rwt.widgets.util.PopupManager.getInstance();e&&e.update(a)}if(d&&b.hasEventListeners("focusout")){var f=new rwt.event.FocusEvent("focusout",b);c&&f.setRelatedTarget(a);b.dispatchEvent(f);f.dispose()}c&&a.hasEventListeners("focusin")&&(f=new rwt.event.FocusEvent("focusin",a),d&&f.setRelatedTarget(b),a.dispatchEvent(f),f.dispose());d&&(this.getActiveChild()!=b||c||this.setActiveChild(null),b.setFocused(!1),f=new rwt.event.FocusEvent("blur",b),c&&f.setRelatedTarget(a),b.dispatchEvent(f),(e=rwt.widgets.util.ToolTipManager.getInstance())&&e.handleBlur(f),f.dispose());c&&(this.setActiveChild(a),a.setFocused(!0),rwt.event.EventHandler.setFocusRoot(this),f=new rwt.event.FocusEvent("focus",a),d&&f.setRelatedTarget(b),a.dispatchEvent(f),(e=rwt.widgets.util.ToolTipManager.getInstance())&&e.handleFocus(f),f.dispose())},_applyWidth:function(a,b){this.base(arguments,a,b);this._layoutX()},_applyHeight:function(a,b){this.base(arguments,a,b);this._layoutY()},_applyBorder:function(a,b){this.base(arguments,a,b);this._layoutX();this._layoutY()},_applyDirection:function(a){this.base(arguments,a);this._layoutX()},_layoutX:function(){},_layoutY:function(){},_layoutImpl:null,_createLayoutImpl:function(){return new rwt.widgets.util.CanvasLayoutImpl(this)},getLayoutImpl:function(){return this._layoutImpl},getChildren:function(){return this._children},getChildrenLength:function(){return this.getChildren().length},hasChildren:function(){return 0<this.getChildrenLength()},isEmpty:function(){return 0===this.getChildrenLength()},indexOf:function(a){return this.getChildren().indexOf(a)},contains:function(a){switch(a){case null:return!1;case this:return!0;default:return this.contains(a.getParent())}},_computeVisibleChildren:function(){var a=[],b=this.getChildren();if(!b)return 0;for(var c=b.length,d=0;d<c;d++){var e=b[d];e._isDisplayable&&a.push(e)}return a},getVisibleChildrenLength:function(){return this.getVisibleChildren().length},hasVisibleChildren:function(){return 0<this.getVisibleChildrenLength()},isVisibleEmpty:function(){return 0===this.getVisibleChildrenLength()},add:function(){for(var a,b=0,c=arguments.length;b<c;b++)a=arguments[b],a.setParent(this);return this},addAt:function(a,b){if(null==b||0>b)throw Error("Not a valid index for addAt(): "+b);if(a.getParent()==this){var c=this.getChildren(),d=c.indexOf(a);d!=b&&(-1!=d&&rwt.util.Arrays.removeAt(c,d),rwt.util.Arrays.insertAt(c,a,b),this._initialLayoutDone&&(this._invalidateVisibleChildren(),this.getLayoutImpl().updateChildrenOnMoveChild(a,b,d)))}else a._insertIndex=b,a.setParent(this)},addAtBegin:function(a){return this.addAt(a,0)},addAtEnd:function(a){var b=this.getChildrenLength();return this.addAt(a,a.getParent()==this?b-1:b)},addBefore:function(a,b){var c=this.getChildren(),d=c.indexOf(b);if(-1==d)throw Error("Child to add before: "+b+" is not inside this parent.");c=c.indexOf(a);(-1==c||c>d)&&d++;return this.addAt(a,Math.max(0,d-1))},addAfter:function(a,b){var c=this.getChildren(),d=c.indexOf(b);if(-1==d)throw Error("Child to add after: "+b+" is not inside this parent.");var e=c.indexOf(a);-1!=e&&e<d&&d--;return this.addAt(a,Math.min(c.length,d+1))},remove:function(){for(var a,b=0,c=arguments.length;b<c;b++)if(a=arguments[b],a instanceof rwt.widgets.base.Parent||a instanceof rwt.widgets.base.Terminator)a.getParent()==this&&a.setParent(null);else throw Error("Invalid Widget: "+a);},removeAt:function(a){if(a=this.getChildren()[a])delete a._insertIndex,a.setParent(null)},removeAll:function(){for(var a=this.getChildren(),b=a[0];b;)this.remove(b),b=a[0]},getFirstChild:function(){return rwt.util.Arrays.getFirst(this.getChildren())||null},getFirstVisibleChild:function(){return rwt.util.Arrays.getFirst(this.getVisibleChildren())||null},getFirstActiveChild:function(a){return rwt.widgets.base.Widget.getActiveSiblingHelper(null,this,1,a,"first")||null},getLastChild:function(){return rwt.util.Arrays.getLast(this.getChildren())||null},getLastVisibleChild:function(){return rwt.util.Arrays.getLast(this.getVisibleChildren())||null},getLastActiveChild:function(a){return rwt.widgets.base.Widget.getActiveSiblingHelper(null,this,-1,a,"last")||null},forEachChild:function(a){var b=this.getChildren(),c,d=-1;if(b)for(c=b[++d];c;)a.call(c,d),c=b[++d]},forEachVisibleChild:function(a){var b=this.getVisibleChildren(),c,d=-1;if(b)for(c=b[++d];c;)a.call(c,d),c=b[++d]},_markInDispose:function(){this._isInGlobalDisposeQueue=!0;this.forEachChild&&this.forEachChild(arguments.callee)},_fireBeforeDispose:function(){this.base(arguments);this.forEachChild&&this.forEachChild(arguments.callee)},_beforeAppear:function(){this.base(arguments);this.forEachVisibleChild(function(){this.isAppearRelevant()&&this._beforeAppear()})},_afterAppear:function(){this.base(arguments);this.forEachVisibleChild(function(){this.isAppearRelevant()&&this._afterAppear()})},_beforeDisappear:function(){this.base(arguments);this.forEachVisibleChild(function(){this.isAppearRelevant()&&this._beforeDisappear()})},_afterDisappear:function(){this.base(arguments);this.forEachVisibleChild(function(){this.isAppearRelevant()&&this._afterDisappear()})},_afterInsertDom:function(){this.base(arguments);this.forEachVisibleChild(function(){this.getElement()&&this.getElement().parentNode===this.getParent()._getTargetNode()&&this._afterInsertDom()})},_afterRemoveDom:function(){this.base(arguments);this.forEachVisibleChild(function(){this.isInDom()&&this._afterRemoveDom()})},_handleDisplayableCustom:function(){this.forEachChild(function(){this._handleDisplayable()})},_addChildrenToStateQueue:function(){this.forEachVisibleChild(function(){this.addToStateQueue()})},recursiveAddToStateQueue:function(){this.addToStateQueue();this.forEachVisibleChild(function(){this.recursiveAddToStateQueue()})},_recursiveAppearanceThemeUpdate:function(a,b){this.base(arguments,a,b);this.forEachVisibleChild(function(){this._recursiveAppearanceThemeUpdate(a,b)})},_addChildToChildrenQueue:function(a){!a._isInParentChildrenQueue&&a._isDisplayable&&(rwt.widgets.base.Widget.addToGlobalLayoutQueue(this),this._childrenQueue||(this._childrenQueue={}),this._childrenQueue[a.toHashCode()]=a)},_removeChildFromChildrenQueue:function(a){this._childrenQueue&&a._isInParentChildrenQueue&&(delete this._childrenQueue[a.toHashCode()],rwt.util.Objects.isEmpty(this._childrenQueue)&&(this._childrenQueue={},rwt.widgets.base.Widget.removeFromGlobalLayoutQueue(this)))},_flushChildrenQueue:function(){rwt.util.Objects.isEmpty(this._childrenQueue)||(this.getLayoutImpl().flushChildrenQueue(this._childrenQueue),delete this._childrenQueue)},_addChildrenToLayoutQueue:function(a){this.forEachChild(function(){this.addToLayoutChanges(a)})},_layoutChild:function(a){if(a._isDisplayable){var b=a._layoutChanges;a.renderBorder&&b.border&&a.renderBorder(b);a.renderPadding&&(b.paddingLeft||b.paddingRight||b.paddingTop||b.paddingBottom)&&a.renderPadding(b);this.getLayoutImpl().layoutChild(a,b);a._layoutPost(b);b.initial&&(a._initialLayoutDone=!0,rwt.widgets.base.Widget.addToGlobalDisplayQueue(a));a._layoutChanges={};delete a._isInParentLayoutQueue;delete this._childrenQueue[a.toHashCode()]}},_layoutPost:function(a){this.createDispatchDataEvent("flush",a)},_computePreferredInnerWidth:function(){return this.getLayoutImpl().computeChildrenNeededWidth()},_computePreferredInnerHeight:function(){return this.getLayoutImpl().computeChildrenNeededHeight()},_changeInnerWidth:function(){var a=this.getLayoutImpl();a.invalidateChildrenFlexWidth&&a.invalidateChildrenFlexWidth();this.forEachVisibleChild(function(){a.updateChildOnInnerWidthChange(this)&&this._recomputeBoxWidth()&&(this._recomputeOuterWidth(),this._recomputeInnerWidth())})},_changeInnerHeight:function(){var a=this.getLayoutImpl();a.invalidateChildrenFlexHeight&&a.invalidateChildrenFlexHeight();this.forEachVisibleChild(function(){a.updateChildOnInnerHeightChange(this)&&this._recomputeBoxHeight()&&(this._recomputeOuterHeight(),this._recomputeInnerHeight())})},getInnerWidthForChild:function(){return this.getInnerWidth()},getInnerHeightForChild:function(){return this.getInnerHeight()},_remappingChildTable:"add remove addAt addAtBegin addAtEnd removeAt addBefore addAfter removeAll".split(" "),_remapStart:"return this._remappingChildTarget.",_remapStop:".apply(this._remappingChildTarget, arguments)",remapChildrenHandlingTo:function(a){var b=this._remappingChildTable;this._remappingChildTarget=a;a=0;for(var c=b.length,d;a<c;a++)d=b[a],this[d]=new Function(rwt.widgets.base.Parent.prototype._remapStart+d+rwt.widgets.base.Parent.prototype._remapStop)}},destruct:function(){this._disposeObjectDeep("_children",1);this._disposeObjects("_layoutImpl","_focusHandler");this._disposeFields("_childrenQueue","_childrenQueue","_remappingChildTable","_remappingChildTarget","_cachedVisibleChildren")}});rwt.qx.Class.define("rwt.event.FocusEvent",{extend:rwt.event.Event,construct:function(a,b){this.base(arguments,a);this.setTarget(b);switch(a){case "focusin":case "focusout":this.setBubbles(!0),this.setPropagationStopped(!1)}}});namespace("rwt.event");rwt.event.EventHandler={_filter:{},_allowContextMenu:rwt.util.Functions.returnFalse,_captureWidget:null,_focusRoot:null,_focused:!1,_blockKeyEvents:!1,init:function(){var a=rwt.util.Functions;this.__onmouseevent=a.bind(this._onmouseevent,this);this.__ondragevent=a.bind(this._ondragevent,this);this.__onselectevent=a.bind(this._onselectevent,this);this.__onwindowblur=a.bind(this._onwindowblur,this);this.__onwindowfocus=a.bind(this._onwindowfocus,this);this.__onwindowresize=a.bind(this._onwindowresize,this);this.__onKeyEvent=rwt.util.Functions.bind(this._onKeyEvent,this);rwt.event.EventHandlerUtil.applyBrowserFixes()},cleanUp:function(){delete this.__onmouseevent;delete this.__ondragevent;delete this.__onselectevent;delete this.__onwindowblur;delete this.__onwindowfocus;delete this.__onwindowresize;delete this.__onKeyEvent;delete this._lastMouseDownDomTarget;delete this._lastMouseDownDispatchTarget;rwt.event.EventHandlerUtil.cleanUp()},attachEvents:function(){this.attachEventTypes(this._mouseEventTypes,this.__onmouseevent);this.attachEventTypes(this._dragEventTypes,this.__ondragevent);this.attachEventTypes(this._keyEventTypes,this.__onKeyEvent);window.addEventListener("blur",this.__onwindowblur,!1);window.addEventListener("focus",this.__onwindowfocus,!1);window.addEventListener("resize",this.__onwindowresize,!1);document.body.onselect=this.__onselectevent;document.onselectstart=this.__onselectevent;document.onselectionchange=this.__onselectevent},detachEvents:function(){this.detachEventTypes(this._mouseEventTypes,this.__onmouseevent);this.detachEventTypes(this._dragEventTypes,this.__ondragevent);this.detachEventTypes(this._keyEventTypes,this.__onKeyEvent);window.removeEventListener("blur",this.__onwindowblur,!1);window.removeEventListener("focus",this.__onwindowfocus,!1);window.removeEventListener("resize",this.__onwindowresize,!1);document.body.onselect=null;document.onselectstart=null;document.onselectionchange=null},setCaptureWidget:function(a){this._captureWidget!==a&&(null!==this._captureWidget&&this._captureWidget.setCapture(!1),this._captureWidget=a,null!=a&&a.setCapture(!0))},getCaptureWidget:function(){return this._captureWidget&&this._captureWidget.getEnabled()?this._captureWidget:null},setFocusRoot:function(a){a!==this._focusRoot&&(null!==this._focusRoot&&this._focusRoot.setFocusedChild(null),this._focusRoot=a,null!==a&&null===a.getFocusedChild()&&a.setFocusedChild(a))},getFocusRoot:function(){return this._focusRoot},setAllowContextMenu:function(a){this._allowContextMenu=a},setBlockKeyEvents:function(a){this._blockKeyEvents=a},getBlockKeyEvents:function(){return this._blockKeyEvents},getMenuManager:function(){return rwt.widgets.util.MenuManager.getInstance()},setMouseEventFilter:function(a,b){a?this._filter.mouseevent=[a,b]:delete this._filter.mouseevent},getMouseEventFilter:function(){return this._filter.mouseevent},setMouseDomEventFilter:function(a,b){this._filter.dommouseevent=[a,b]},setKeyEventFilter:function(a,b){this._filter.keyevent=[a,b]},setKeyDomEventFilter:function(a,b){this._filter.domkeyevent=[a,b]},_onKeyEvent:function(a){try{var b=rwt.event.EventHandlerUtil,c=b.getKeyCode(a),d=b.getCharCode(a);if(this._blockKeyEvents)b.shouldBlock(a.type,c,d,a)&&b.stopDomEvent(a);else{"undefined"!==typeof this._filter.domkeyevent&&this._filter.domkeyevent[0].call(this._filter.domkeyevent[1],a.type,c,d,a);for(var e=b.getEventPseudoTypes(a,c,d),f=b.mustRestoreKeyup(c,e),g=0;g<f.length;g++)this._onkeyevent_post(a,"keyup",f[g],0),b.clearStuckKey(f[g]);for(g=0;g<e.length;g++)this._onkeyevent_post(a,e[g],c,d);b.mustRestoreKeypress(a,e)&&this._onkeyevent_post(a,"keypress",c,d);b.saveData(a,c,d)}}catch(h){rwt.runtime.ErrorHandler.processJavaScriptError(h)}},_onkeyevent_post:function(a,b,c,d){var e=!0;"undefined"!==typeof this._filter.keyevent&&(e=this._filter.keyevent[0].call(this._filter.keyevent[1],b,c,d,a));e&&this._processKeyEvent(a,b,c,d)},_processKeyEvent:function(a,b,c,d){var e=rwt.event.EventHandlerUtil,f;f=isNaN(c)||0===c?e.charCodeToIdentifier(d):e.keyCodeToIdentifier(c);var g=e.getDomTarget(a),h=this._getKeyEventTarget();this.getCaptureWidget()&&e.stopDomEvent(a);c=new rwt.event.KeyEvent(b,a,g,h,null,c,d,f);if(null!=h&&h.getEnabled()){switch(f){case "Escape":case "Tab":this.getMenuManager().update(h,b)}if(a.ctrlKey&&"A"==f)switch(g.tagName.toLowerCase()){case "input":case "textarea":case "iframe":break;default:e.stopDomEvent(a)}h.dispatchEvent(c);rwt.qx.Class.isDefined("rwt.event.DragAndDropHandler")&&rwt.event.DragAndDropHandler.getInstance().handleKeyEvent(c);rwt.widgets.util.ToolTipManager.getInstance().handleKeyEvent(c)}c.dispose()},_onmouseevent:function(a){try{var b=!0;"undefined"!==typeof this._filter.dommouseevent&&(b=this._filter.dommouseevent[0].call(this._filter.dommouseevent[1],a));b&&this._processMouseEvent(a)}catch(c){rwt.runtime.ErrorHandler.processJavaScriptError(c)}},_processMouseEvent:function(a){var b=rwt.event.EventHandlerUtil.getDomTarget(a),c=a.type;switch(c){case "wheel":c="mousewheel";break;case "click":case "dblclick":if(1!==a.which)return}this._onmouseevent_post(a,c,b)},_onmouseevent_post:function(a,b,c){var d=!1,e=rwt.event.EventHandlerUtil,f=this.getCaptureWidget(),g=e.getOriginalTargetObject(c),h=e.getTargetObject(null,g,!0);if(h){var f=f?f:h,k=this._onmouseevent_click_fix(c,b,f);"contextmenu"==b&&(this._allowContextMenu(g,c)?d=!0:e.stopDomEvent(a));"mousedown"==b&&e.handleFocusedChild(f);if("mouseover"==b||"mouseout"==b){var l=e.getRelatedTargetObjectFromEvent(a);this._fireElementHoverEvents("mouseover"==b?"elementOver":"elementOut",a,c,h,g,l,f);if(l==h)return}c=new rwt.event.MouseEvent(b,a,c,h,g,l);"contextmenu"!==b&&rwt.event.MouseEvent.storeEventState(c);d||"mousewheel"===b&&!c.getWheelDelta()?"mouseover"==b&&rwt.widgets.util.ToolTipManager.getInstance().handleMouseEvent(c):(this._dispatchMouseEvent(f,c),f.getEnabled()&&this._onmouseevent_special_post(b,h,g,f,c,a));c.dispose();rwt.widgets.base.Widget.flushGlobalQueues();k&&(this._onmouseevent_post(a,"click",this._lastMouseDownDomTarget),this._lastMouseDownDispatchTarget=this._lastMouseDownDomTarget=null)}},_fireElementHoverEvents:function(a,b,c,d,e,f,g){g.getEnabled()&&(a=new rwt.event.MouseEvent(a,b,c,d,e,f),this._dispatchMouseEvent(g,a))},_dispatchMouseEvent:function(a,b){var c=!0;"undefined"!==typeof this._filter.mouseevent&&(c=this._filter.mouseevent[0].call(this._filter.mouseevent[1],b));c&&a.dispatchEvent(b)},_onmouseevent_special_post:function(a,b,c,d,e){switch(a){case "mousedown":rwt.widgets.util.PopupManager.getInstance().update(b);this.getMenuManager().update(b,a);rwt.widgets.util.IframeManager.getInstance().handleMouseDown(e);break;case "mouseup":this.getMenuManager().update(b,a),rwt.qx.Class.isDefined("rwt.widgets.util.IframeManager")&&rwt.widgets.util.IframeManager.getInstance().handleMouseUp(e)}rwt.widgets.util.ToolTipManager.getInstance().handleMouseEvent(e);this._ignoreWindowBlur="mousedown"===a;rwt.qx.Class.isDefined("rwt.event.DragAndDropHandler")&&b&&rwt.event.DragAndDropHandler.getInstance().handleMouseEvent(e)},_ondragevent:function(a){try{a||(a=window.event),"dragstart"!==a.type&&"dragover"!==a.type&&"drop"!==a.type||rwt.event.EventHandlerUtil.stopDomEvent(a),"dragover"!==a.type&&"dragenter"!==a.type||!a.dataTransfer||(a.dataTransfer.dropEffect="none")}catch(b){rwt.runtime.ErrorHandler.processJavaScriptError(b)}},_onselectevent:function(a){try{for(var b=rwt.event.EventHandlerUtil,c=b.getOriginalTargetObjectFromEvent(a);c;){if(null!=c.getSelectable()){c.getSelectable()||b.stopDomEvent(a);break}c=c.getParent()}}catch(d){rwt.runtime.ErrorHandler.processJavaScriptError(d)}},_onwindowblur:function(a){try{this._focused&&!this._ignoreWindowBlur&&a.originalTarget==window&&(this._focused=!1,this.setCaptureWidget(null),rwt.qx.Class.isDefined("rwt.widgets.util.PopupManager")&&rwt.widgets.util.PopupManager.getInstance().update(),this.getMenuManager().update(),rwt.qx.Class.isDefined("rwt.event.DragAndDropHandler")&&rwt.event.DragAndDropHandler.getInstance().globalCancelDrag(),rwt.widgets.base.ClientDocument.getInstance().createDispatchEvent("windowblur"))}catch(b){rwt.runtime.ErrorHandler.processJavaScriptError(b)}},_onwindowfocus:function(){try{this._focused||(this._focused=!0,rwt.widgets.base.ClientDocument.getInstance().createDispatchEvent("windowfocus"))}catch(a){rwt.runtime.ErrorHandler.processJavaScriptError(a)}},_onwindowresize:function(){try{var a=rwt.widgets.base.ClientDocument.getInstance(),b=a.getInnerWidth(),c=a.getInnerHeight(),d=a._computeInnerWidth(),e=a._computeInnerHeight();d===b&&e===c||rwt.widgets.base.ClientDocument.getInstance().createDispatchEvent("windowresize")}catch(f){rwt.runtime.ErrorHandler.processJavaScriptError(f)}},_mouseEventTypes:["mouseover","mousemove","mouseout","mousedown","mouseup","click","dblclick","contextmenu","onwheel"in document?"wheel":"mousewheel"],_keyEventTypes:["keydown","keypress","keyup"],_dragEventTypes:["dragstart","drop","dragover","dragleave","dragenter"],_getKeyEventTarget:function(){var a=this.getFocusRoot();return this.getCaptureWidget()||(null==a?null:a.getActiveChild())},attachEventTypes:function(a,b){try{for(var c=rwt.client.Client.isGecko()?window:document.body,d=0,e=a.length;d<e;d++)c.addEventListener(a[d],b,!1)}catch(f){throw Error("EventHandler: Failed to attach window event types: "+a+": "+f);}},detachEventTypes:function(a,b){try{for(var c=rwt.client.Client.isGecko()?window:document.body,d=0,e=a.length;d<e;d++)c.removeEventListener(a[d],b,!1)}catch(f){throw Error("EventHandler: Failed to detach window event types: "+a+": "+f);}},_onmouseevent_click_fix:rwt.util.Variant.select("qx.client",{gecko:function(a,b,c){var d=!1;switch(b){case "mousedown":this._lastMouseDownDomTarget=a;this._lastMouseDownDispatchTarget=c;break;case "mouseup":this._lastMouseDownDispatchTarget===c&&a!==this._lastMouseDownDomTarget?d=!0:this._lastMouseDownDispatchTarget=this._lastMouseDownDomTarget=null}return d},"default":function(){return!1}})};rwt.qx.Class.define("rwt.html.Nodes",{statics:{ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12,isDocument:function(a){return!(!a||a.nodeType!==rwt.html.Nodes.DOCUMENT)},getDocument:function(a){return this.isDocument(a)?a:a.ownerDocument||a.document||null},getWindow:function(a){return this.getDocument(a).defaultView}}});rwt.qx.Class.define("rwt.event.DomEvent",{extend:rwt.event.Event,construct:function(a,b,c,d,e){this.base(arguments,a);this.setDomEvent(b);this.setDomTarget(c);this.setTarget(d);this.setOriginalTarget(e)},statics:{SHIFT_MASK:1,CTRL_MASK:2,ALT_MASK:4,META_MASK:8},properties:{bubbles:{_fast:!0,defaultValue:!0,noCompute:!0},propagationStopped:{_fast:!0,defaultValue:!1,noCompute:!0},domEvent:{_fast:!0,setOnlyOnce:!0,noCompute:!0},domTarget:{_fast:!0,setOnlyOnce:!0,noCompute:!0},modifiers:{_cached:!0,defaultValue:null}},members:{setDomEvent:function(a){this.base(arguments,a);rwt.remote.EventUtil._shiftKey=a.shiftKey;rwt.remote.EventUtil._ctrlKey=a.ctrlKey;rwt.remote.EventUtil._altKey=a.altKey;rwt.remote.EventUtil._metaKey=a.metaKey;rwt.remote.EventUtil._button=rwt.event.MouseEvent.C_BUTTON_NONE},_computeModifiers:function(){var a=0,b=this.getDomEvent();b.shiftKey&&(a|=rwt.event.DomEvent.SHIFT_MASK);b.ctrlKey&&(a|=rwt.event.DomEvent.CTRL_MASK);b.altKey&&(a|=rwt.event.DomEvent.ALT_MASK);b.metaKey&&(a|=rwt.event.DomEvent.META_MASK);return a},isCtrlPressed:function(){return this.getDomEvent().ctrlKey},isShiftPressed:function(){return this.getDomEvent().shiftKey},isAltPressed:function(){return this.getDomEvent().altKey},isMetaPressed:function(){return this.getDomEvent().metaKey},setDefaultPrevented:function(a){if(!a)throw Error("It is not possible to set preventDefault to false if it was true before!");rwt.event.EventHandlerUtil.stopDomEvent(this.getDomEvent());this.base(arguments,a)}},destruct:function(){this._disposeFields("_valueDomEvent","_valueDomTarget")}});rwt.qx.Class.define("rwt.event.KeyEvent",{extend:rwt.event.DomEvent,construct:function(a,b,c,d,e,f,g,h){this.base(arguments,a,b,c,d,e);this._keyCode=f;this.setCharCode(g);this.setKeyIdentifier(h)},statics:{keys:{esc:27,enter:13,tab:9,space:32,up:38,down:40,left:37,right:39,shift:16,ctrl:17,alt:18,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,print:124,del:46,backspace:8,insert:45,home:36,end:35,pageup:33,pagedown:34,numlock:144,numpad_0:96,numpad_1:97,numpad_2:98,numpad_3:99,numpad_4:100,numpad_5:101,numpad_6:102,numpad_7:103,numpad_8:104,numpad_9:105,numpad_divide:111,numpad_multiply:106,numpad_minus:109,numpad_plus:107},codes:{}},properties:{charCode:{_fast:!0,setOnlyOnce:!0,noCompute:!0},keyIdentifier:{_fast:!0,setOnlyOnce:!0,noCompute:!0}},members:{getKeyCode:function(){return this._keyCode}},defer:function(a){for(var b in a.keys)a.codes[a.keys[b]]=b}});rwt.qx.Class.define("rwt.event.MouseEvent",{extend:rwt.event.DomEvent,construct:function(a,b,c,d,e,f){this.base(arguments,a,b,c,d,e);f&&this.setRelatedTarget(f);this._storeButton(a)},statics:{C_BUTTON_LEFT:"left",C_BUTTON_MIDDLE:"middle",C_BUTTON_RIGHT:"right",C_BUTTON_NONE:"none",_screenX:0,_screenY:0,_clientX:0,_clientY:0,_pageX:0,_pageY:0,_button:null,buttons:{left:0,right:2,middle:1},storeEventState:function(a){this._screenX=a.getScreenX();this._screenY=a.getScreenY();this._clientX=a.getClientX();this._clientY=a.getClientY();this._pageX=a.getPageX();this._pageY=a.getPageY();this._button=a.getButton()},getScreenX:function(){return this._screenX},getScreenY:function(){return this._screenY},getClientX:function(){return this._clientX},getClientY:function(){return this._clientY},getPageX:function(){return this._pageX},getPageY:function(){return this._pageY},getButton:function(){return this._button}},properties:{button:{_fast:!0,readOnly:!0},wheelDelta:{_fast:!0,readOnly:!0}},members:{getPageX:function(){return Math.round(this.getDomEvent().clientX+rwt.html.Viewport.getScrollLeft())},getPageY:function(){return Math.round(this.getDomEvent().clientY+rwt.html.Viewport.getScrollTop())},getClientX:function(){return this.getDomEvent().clientX},getClientY:function(){return this.getDomEvent().clientY},getScreenX:function(){return this.getDomEvent().screenX},getScreenY:function(){return this.getDomEvent().screenY},isLeftButtonPressed:function(){return this.getButton()===rwt.event.MouseEvent.C_BUTTON_LEFT},isMiddleButtonPressed:function(){return this.getButton()===rwt.event.MouseEvent.C_BUTTON_MIDDLE},isRightButtonPressed:function(){return this.getButton()===rwt.event.MouseEvent.C_BUTTON_RIGHT},__buttons:{0:"left",2:"right",1:"middle"},_computeButton:function(){switch(this.getDomEvent().type){case "click":case "dblclick":return"left";case "contextmenu":return"right";default:return this.__buttons[this.getDomEvent().button]||"none"}},_storeButton:function(a){switch(a){case "mousedown":case "mouseup":case "click":case "dblclick":case "contextmenu":rwt.remote.EventUtil._button=this.getButton();break;default:rwt.remote.EventUtil._button=rwt.event.MouseEvent.C_BUTTON_NONE}},_computeWheelDelta:function(){var a=this.getDomEvent();return"deltaY"in a?a.deltaY/-120:a.wheelDelta/120}}});rwt.qx.Class.define("rwt.util.ObjectManager",{extend:rwt.qx.Target,construct:function(){this.base(arguments);this._objects={}},members:{add:function(a){this.getDisposed()||(this._objects[a.toHashCode()]=a)},remove:function(a){if(this.getDisposed())return!1;delete this._objects[a.toHashCode()]},has:function(a){return null!=this._objects[a.toHashCode()]},get:function(a){return this._objects[a.toHashCode()]},getAll:function(){return this._objects}},destruct:function(){this._disposeObjectDeep("_objects")}});rwt.qx.Class.define("rwt.widgets.util.IframeManager",{extend:rwt.util.ObjectManager,statics:{getInstance:function(){return rwt.runtime.Singletons.get(rwt.widgets.util.IframeManager)}},construct:function(){this.base(arguments);this._blocked={}},members:{handleMouseDown:function(){var a=this._blockData=rwt.util.Objects.copy(this.getAll()),b;for(b in a)a[b].block()},handleMouseUp:function(){var a=this._blockData,b;for(b in a)a[b].release()}},destruct:function(){this._disposeFields("_blocked","_blockData")}});rwt.qx.Class.define("rwt.widgets.CoolBar",{extend:rwt.widgets.base.Parent,construct:function(){this.base(arguments);this._locked=!1},members:{_applyDirection:function(a){this.base(arguments,a);this.getLayoutImpl().setMirror("rtl"===a);this.forEachChild(function(){this.setDirection(a)})},setLocked:function(a){this._locked=a;for(var b=this.getChildren(),c=rwt.widgets.CoolItem,d=0;d<b.length;d++)b[d]instanceof c&&b[d].setLocked(a)},getLocked:function(){return this._locked}}});rwt.remote.HandlerRegistry.add("rwt.widgets.CoolBar",{factory:function(a){var b=new rwt.widgets.CoolBar;rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);b.setUserData("isControl",!0);rwt.remote.HandlerUtil.setParent(b,a.parent);b.setOverflow("hidden");b.setAppearance("coolbar");return b},destructor:rwt.remote.HandlerUtil.getControlDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:rwt.remote.HandlerUtil.extendControlProperties(["locked"]),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({}),listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({})});rwt.qx.Class.define("rwt.widgets.util.LayoutImpl",{extend:rwt.qx.Object,construct:function(a){this.base(arguments);this._widget=a},members:{getWidget:function(){return this._widget},computeChildBoxWidth:function(a){return a.getWidthValue()||a._computeBoxWidthFallback()},computeChildBoxHeight:function(a){return a.getHeightValue()||a._computeBoxHeightFallback()},computeChildNeededWidth:function(a){var b=a._computedMinWidthTypePercent?null:a.getMinWidthValue(),c=a._computedMaxWidthTypePercent?null:a.getMaxWidthValue(),d=(a._computedWidthTypePercent||a._computedWidthTypeFlex?null:a.getWidthValue())||a.getPreferredBoxWidth()||0;return rwt.util.Numbers.limit(d,b,c)+a.getMarginLeft()+a.getMarginRight()},computeChildNeededHeight:function(a){var b=a._computedMinHeightTypePercent?null:a.getMinHeightValue(),c=a._computedMaxHeightTypePercent?null:a.getMaxHeightValue(),d=(a._computedHeightTypePercent||a._computedHeightTypeFlex?null:a.getHeightValue())||a.getPreferredBoxHeight()||0;return rwt.util.Numbers.limit(d,b,c)+a.getMarginTop()+a.getMarginBottom()},computeChildrenNeededWidth_max:function(){for(var a=0,b=this.getWidget().getVisibleChildren(),c=b.length,d=0;a<c;a++)d=Math.max(d,b[a].getNeededWidth());return d},computeChildrenNeededHeight_max:function(){for(var a=0,b=this.getWidget().getVisibleChildren(),c=b.length,d=0;a<c;a++)d=Math.max(d,b[a].getNeededHeight());return d},computeChildrenNeededWidth_sum:function(){for(var a=0,b=this.getWidget().getVisibleChildren(),c=b.length,d=0;a<c;a++)d+=b[a].getNeededWidth();return d},computeChildrenNeededHeight_sum:function(){for(var a=0,b=this.getWidget().getVisibleChildren(),c=b.length,d=0;a<c;a++)d+=b[a].getNeededHeight();return d},computeChildrenNeededWidth:null,computeChildrenNeededHeight:null,updateSelfOnChildOuterWidthChange:function(){},updateSelfOnChildOuterHeightChange:function(){},updateChildOnInnerWidthChange:function(){},updateChildOnInnerHeightChange:function(){},updateSelfOnJobQueueFlush:function(){},updateChildrenOnJobQueueFlush:function(){},updateChildrenOnAddChild:function(){},updateChildrenOnRemoveChild:function(){},updateChildrenOnMoveChild:function(){},flushChildrenQueue:function(a){var b=this.getWidget(),c;for(c in a)b._layoutChild(a[c])},layoutChild:function(){},layoutChild_sizeLimitX:function(a,b){b.minWidth?a._computedMinWidthTypeNull?a._resetRuntimeMinWidth():a._renderRuntimeMinWidth(a.getMinWidthValue()):b.initial&&!a._computedMinWidthTypeNull&&a._renderRuntimeMinWidth(a.getMinWidthValue());b.maxWidth?a._computedMaxWidthTypeNull?a._resetRuntimeMaxWidth():a._renderRuntimeMaxWidth(a.getMaxWidthValue()):b.initial&&!a._computedMaxWidthTypeNull&&a._renderRuntimeMaxWidth(a.getMaxWidthValue())},layoutChild_sizeLimitY:function(a,b){b.minHeight?a._computedMinHeightTypeNull?a._resetRuntimeMinHeight():a._renderRuntimeMinHeight(a.getMinHeightValue()):b.initial&&!a._computedMinHeightTypeNull&&a._renderRuntimeMinHeight(a.getMinHeightValue());b.maxHeight?a._computedMaxHeightTypeNull?a._resetRuntimeMaxHeight():a._renderRuntimeMaxHeight(a.getMaxHeightValue()):b.initial&&!a._computedMaxHeightTypeNull&&a._renderRuntimeMaxHeight(a.getMaxHeightValue())},layoutChild_marginX:function(a,b){if(b.marginLeft||b.initial){var c=a.getMarginLeft();null!=c?a._renderRuntimeMarginLeft(c):a._resetRuntimeMarginLeft()}if(b.marginRight||b.initial)c=a.getMarginRight(),null!=c?a._renderRuntimeMarginRight(c):a._resetRuntimeMarginRight()},layoutChild_marginY:function(a,b){if(b.marginTop||b.initial){var c=a.getMarginTop();null!=c?a._renderRuntimeMarginTop(c):a._resetRuntimeMarginTop()}if(b.marginBottom||b.initial)c=a.getMarginBottom(),null!=c?a._renderRuntimeMarginBottom(c):a._resetRuntimeMarginBottom()},layoutChild_sizeX_essentialWrapper:function(a,b){return a._isWidthEssential()?this.layoutChild_sizeX(a,b):a._resetRuntimeWidth()},layoutChild_sizeY_essentialWrapper:function(a,b){return a._isHeightEssential()?this.layoutChild_sizeY(a,b):a._resetRuntimeHeight()}},defer:function(a,b){b.computeChildrenNeededWidth=b.computeChildrenNeededWidth_max;b.computeChildrenNeededHeight=b.computeChildrenNeededHeight_max},destruct:function(){this._disposeFields("_widget")}});rwt.qx.Class.define("rwt.widgets.util.CanvasLayoutImpl",{extend:rwt.widgets.util.LayoutImpl,construct:function(a){this.base(arguments,a);this._mirror=!1},members:{setMirror:function(a){this._mirror=a;this.getWidget()._addChildrenToLayoutQueue("left");this.getWidget()._addChildrenToLayoutQueue("right")},computeChildBoxWidth:function(a){var b=null;a._computedLeftTypeNull||a._computedRightTypeNull?b=a.getWidthValue():a._hasParent&&(b=this.getWidget().getInnerWidth()-a.getLeftValue()-a.getRightValue());return null!==b?b:a._computeBoxWidthFallback()},computeChildBoxHeight:function(a){var b=null;a._computedTopTypeNull||a._computedBottomTypeNull?b=a.getHeightValue():a._hasParent&&(b=this.getWidget().getInnerHeight()-a.getTopValue()-a.getBottomValue());return null!==b?b:a._computeBoxWidthFallback()},computeChildNeededWidth:function(a){var b=a._computedLeftTypePercent?null:a.getLeftValue(),c=a._computedRightTypePercent?null:a.getRightValue(),d=a._computedMinWidthTypePercent?null:a.getMinWidthValue(),e=a._computedMaxWidthTypePercent?null:a.getMaxWidthValue(),f=null!=b&&null!=c?a.getPreferredBoxWidth()||0:(a._computedWidthTypePercent?null:a.getWidthValue())||a.getPreferredBoxWidth()||0;return rwt.util.Numbers.limit(f,d,e)+b+c+a.getMarginLeft()+a.getMarginRight()},computeChildNeededHeight:function(a){var b=a._computedTopTypePercent?null:a.getTopValue(),c=a._computedBottomTypePercent?null:a.getBottomValue(),d=a._computedMinHeightTypePercent?null:a.getMinHeightValue(),e=a._computedMaxHeightTypePercent?null:a.getMaxHeightValue(),f=null!=b&&null!=c?a.getPreferredBoxHeight()||0:(a._computedHeightTypePercent?null:a.getHeightValue())||a.getPreferredBoxHeight()||0;return rwt.util.Numbers.limit(f,d,e)+b+c+a.getMarginTop()+a.getMarginBottom()},updateChildOnInnerWidthChange:function(a){var b=a._recomputePercentX();a=a._recomputeRangeX();return b||a},updateChildOnInnerHeightChange:function(a){var b=a._recomputePercentY();a=a._recomputeRangeY();return b||a},layoutChild:function(a,b){this.layoutChild_sizeX_essentialWrapper(a,b);this.layoutChild_sizeY_essentialWrapper(a,b);this.layoutChild_sizeLimitX(a,b);this.layoutChild_sizeLimitY(a,b);this.layoutChild_locationX(a,b);this.layoutChild_locationY(a,b);this.layoutChild_marginX(a,b);this.layoutChild_marginY(a,b)},layoutChild_sizeX:rwt.util.Variant.select("qx.client",{"trident|webkit|blink":function(a,b){if(b.initial||b.width||b.minWidth||b.maxWidth||b.left||b.right)a._computedMinWidthTypeNull&&a._computedWidthTypeNull&&a._computedMaxWidthTypeNull&&(a._computedLeftTypeNull||a._computedRightTypeNull)?a._resetRuntimeWidth():a._renderRuntimeWidth(a.getBoxWidth())},"default":function(a,b){if(b.initial||b.width)a._computedWidthTypeNull?a._resetRuntimeWidth():a._renderRuntimeWidth(a.getWidthValue())}}),layoutChild_sizeY:rwt.util.Variant.select("qx.client",{"trident|webkit|blink":function(a,b){if(b.initial||b.height||b.minHeight||b.maxHeight||b.top||b.bottom)a._computedMinHeightTypeNull&&a._computedHeightTypeNull&&a._computedMaxHeightTypeNull&&(a._computedTopTypeNull||a._computedBottomTypeNull)?a._resetRuntimeHeight():a._renderRuntimeHeight(a.getBoxHeight())},"default":function(a,b){if(b.initial||b.height)a._computedHeightTypeNull?a._resetRuntimeHeight():a._renderRuntimeHeight(a.getHeightValue())}}),layoutChild_locationX:function(a,b){this._mirror?this.layoutChild_locationX_mirror(a,b):this.layoutChild_locationX_nomirror(a,b)},layoutChild_locationX_nomirror:function(a,b){var c=this.getWidget();if(b.initial||b.left||b.parentPaddingLeft)a._computedLeftTypeNull?a._computedRightTypeNull&&0<c.getPaddingLeft()?a._renderRuntimeLeft(c.getPaddingLeft()):a._resetRuntimeLeft():a._renderRuntimeLeft(a.getLeftValue()+c.getPaddingLeft());if(b.initial||b.right||b.parentPaddingRight)a._computedRightTypeNull?a._computedLeftTypeNull&&0<c.getPaddingRight()?a._renderRuntimeRight(c.getPaddingRight()):a._resetRuntimeRight():a._renderRuntimeRight(a.getRightValue()+c.getPaddingRight())},layoutChild_locationX_mirror:function(a,b){var c=this.getWidget();if(b.initial||b.left||b.parentPaddingLeft)a._computedLeftTypeNull?a._computedRightTypeNull&&0<c.getPaddingLeft()?a._renderRuntimeRight(c.getPaddingLeft()):a._resetRuntimeRight():a._renderRuntimeRight(a.getLeftValue()+c.getPaddingLeft());if(b.initial||b.right||b.parentPaddingRight)a._computedRightTypeNull?a._computedLeftTypeNull&&0<c.getPaddingRight()?a._renderRuntimeLeft(c.getPaddingRight()):a._resetRuntimeLeft():a._renderRuntimeLeft(a.getRightValue()+c.getPaddingRight())},layoutChild_locationY:function(a,b){var c=this.getWidget();if(b.initial||b.top||b.parentPaddingTop)a._computedTopTypeNull?a._computedBottomTypeNull&&0<c.getPaddingTop()?a._renderRuntimeTop(c.getPaddingTop()):a._resetRuntimeTop():a._renderRuntimeTop(a.getTopValue()+c.getPaddingTop());if(b.initial||b.bottom||b.parentPaddingBottom)a._computedBottomTypeNull?a._computedTopTypeNull&&0<c.getPaddingBottom()?a._renderRuntimeBottom(c.getPaddingBottom()):a._resetRuntimeBottom():a._renderRuntimeBottom(a.getBottomValue()+c.getPaddingBottom())}}});rwt.qx.Class.define("rwt.widgets.base.ClientDocument",{extend:rwt.widgets.base.Parent,statics:{getInstance:function(){return rwt.runtime.Singletons.get(rwt.widgets.base.ClientDocument)}},construct:function(){this.base(arguments);this._window=window;this._document=window.document;this.setElement(this._document.body);this.getElement().setAttribute("spellcheck","false");this._document.body.style.position="";this._cachedInnerWidth=this._document.body.offsetWidth;this._cachedInnerHeight=this._document.body.offsetHeight;this.addEventListener("windowresize",this._onwindowresize);this._modalWidgets=[];this.activateFocusRoot();this.initSelectable();rwt.event.EventHandler.setFocusRoot(this);rwt.client.Client.isGecko()&&(this.getElement().style.position="absolute",this.setSelectable(!0));var a=rwt.util.Functions.bind(this._resetScrollPosition,this);this._document.documentElement.onscroll=a;this.getElement().onscroll=a},properties:{appearance:{refine:!0,init:"client-document"},enableElementFocus:{refine:!0,init:!1},enabled:{refine:!0,init:!0},selectable:{refine:!0,init:!1},hideFocus:{refine:!0,init:!0},globalCursor:{check:"String",nullable:!0,themeable:!0,apply:"_applyGlobalCursor",event:"changeGlobalCursor"}},members:{_applyParent:rwt.util.Functions.returnTrue,_applyOverflow:function(a){var b="overflow";"scrollX"===a?b="overflowX":"scrollY"===a&&(b="overflowY");this._document.documentElement.style[b]="hidden"===a?a:"auto";this.getElement().style[b]="hidden"===a?a:"auto"},getTopLevelWidget:function(){return this},getWindowElement:function(){return this._window},getDocumentElement:function(){return this._document},getParent:rwt.util.Functions.returnNull,getToolTip:rwt.util.Functions.returnNull,isSeeable:rwt.util.Functions.returnTrue,_isDisplayable:!0,_hasParent:!1,_initialLayoutDone:!0,_isInDom:!0,_getBlocker:function(){this._blocker||(this._blocker=new rwt.widgets.base.ClientDocumentBlocker,this._blocker.setStyleProperty("position","fixed"),this.add(this._blocker));return this._blocker},block:function(a){this._getBlocker().show();if(rwt.qx.Class.isDefined("rwt.widgets.base.Window")&&a instanceof rwt.widgets.base.Window){this._modalWidgets.push(a);var b=a.getZIndex();this._getBlocker().setZIndex(b);a.setZIndex(b+1)}},release:function(a){a&&rwt.util.Arrays.remove(this._modalWidgets,a);a=this._modalWidgets.length;if(0===a)this._getBlocker().hide();else{a=this._modalWidgets[a-1];var b=a.getZIndex();this._getBlocker().setZIndex(b);a.setZIndex(b+1)}},_resetScrollPosition:function(){var a=this.getOverflow();"scroll"!==a&&"scrollX"!==a&&(document.documentElement.scrollLeft=0,document.body.scrollLeft=0);"scroll"!==a&&"scrollY"!==a&&(document.documentElement.scrollTop=0,document.body.scrollTop=0)},createStyleElement:function(a){return rwt.html.StyleSheet.createElement(a)},addCssRule:function(a,b,c){return rwt.html.StyleSheet.addRule(a,b,c)},removeCssRule:function(a,b){return rwt.html.StyleSheet.removeRule(a,b)},removeAllCssRules:function(a){return rwt.html.StyleSheet.removeAllRules(a)},_applyGlobalCursor:function(a){this._globalCursorStyleSheet||(this._globalCursorStyleSheet=this.createStyleElement());this.removeCssRule(this._globalCursorStyleSheet,"*");a&&this.addCssRule(this._globalCursorStyleSheet,"*","cursor:"+a+" !important")},_onwindowresize:function(){rwt.widgets.util.PopupManager.getInstance().update();this._recomputeInnerWidth();this._recomputeInnerHeight();rwt.widgets.base.Widget.flushGlobalQueues()},_computeInnerWidth:function(){return this._document.body.offsetWidth},_computeInnerHeight:function(){return this._document.body.offsetHeight}},defer:function(){var a=rwt.client.Client.getEngineBoxSizingAttributes(),b=a.join(":border-box;")+":border-box;",a=a.join(":content-box;")+":content-box;";rwt.html.StyleSheet.createElement("html,body { margin:0;border:0;padding:0; } html { border:0 none; } *{"+b+"} img{"+a+"}");rwt.html.StyleSheet.createElement("html,body{width:100%;height:100%;overflow:hidden;}");rwt.widgets.base.ClientDocument.BOXSIZING="border-box"},destruct:function(){this._disposeObjects("_blocker");this._disposeFields("_window","_document","_modalWidgets","_globalCursorStyleSheet")}});rwt.qx.Class.define("rwt.widgets.base.Terminator",{extend:rwt.widgets.base.Widget,members:{_applyTextColor:function(){this._renderTextColor()},_renderAppearance:function(){this.base(arguments);this._renderTextColor()},_renderTextColor:function(){var a=this.getEnabled()?this.getTextColor():this._getDisabledColor();this.getStyleProperty("color")!==a&&(a?this.setStyleProperty("color",a):this.removeStyleProperty("color"))},_getDisabledColor:function(){for(var a=this.__theme$textColor,b=this.getParent();!a&&null!==b;)a=b.__theme$textColor,b=b.getParent();return a},renderPadding:function(a){a.paddingLeft&&this._renderRuntimePaddingLeft(this.getPaddingLeft());a.paddingRight&&this._renderRuntimePaddingRight(this.getPaddingRight());a.paddingTop&&this._renderRuntimePaddingTop(this.getPaddingTop());a.paddingBottom&&this._renderRuntimePaddingBottom(this.getPaddingBottom())},_renderContent:function(){this._computedWidthTypePixel?this._cachedPreferredInnerWidth=null:this._invalidatePreferredInnerWidth();this._computedHeightTypePixel?this._cachedPreferredInnerHeight=null:this._invalidatePreferredInnerHeight();this._initialLayoutDone&&this.addToJobQueue("load")},_layoutPost:function(a){(a.initial||a.load||a.width||a.height)&&this._postApply();this.createDispatchDataEvent("flush",a)},_postApply:rwt.util.Functions.returnTrue,_computeBoxWidthFallback:function(){return this.getPreferredBoxWidth()},_computeBoxHeightFallback:function(){return this.getPreferredBoxHeight()},_computePreferredInnerWidth:rwt.util.Functions.returnZero,_computePreferredInnerHeight:rwt.util.Functions.returnZero,_isWidthEssential:function(){return!this._computedLeftTypeNull&&!this._computedRightTypeNull||!this._computedWidthTypeNull&&!this._computedWidthTypeAuto||!this._computedMinWidthTypeNull&&!this._computedMinWidthTypeAuto||!this._computedMaxWidthTypeNull&&!this._computedMaxWidthTypeAuto||this._targetNode?!0:!1},_isHeightEssential:function(){return!this._computedTopTypeNull&&!this._computedBottomTypeNull||!this._computedHeightTypeNull&&!this._computedHeightTypeAuto||!this._computedMinHeightTypeNull&&!this._computedMinHeightTypeAuto||!this._computedMaxHeightTypeNull&&!this._computedMaxHeightTypeAuto||this._targetNode?!0:!1}}});rwt.qx.Class.define("rwt.widgets.base.ClientDocumentBlocker",{extend:rwt.widgets.base.Terminator,include:rwt.animation.VisibilityAnimationMixin,construct:function(){this.base(arguments);this.initTop();this.initLeft();this.initWidth();this.initHeight();this.initZIndex()},properties:{appearance:{refine:!0,init:"client-document-blocker"},zIndex:{refine:!0,init:1E8},top:{refine:!0,init:0},left:{refine:!0,init:0},width:{refine:!0,init:"100%"},height:{refine:!0,init:"100%"},display:{refine:!0,init:!1}},members:{getFocusRoot:function(){return null}}});rwt.qx.Class.define("rwt.theme.AppearanceManager",{extend:rwt.util.ObjectManager,statics:{getInstance:function(){return rwt.runtime.Singletons.get(rwt.theme.AppearanceManager)}},construct:function(){this.base(arguments);this.__cache={};this.__stateMap={};this.__stateMapLength=1},members:{setCurrentTheme:function(a){this._currentTheme=a;this.syncAppearanceTheme()},getCurrentTheme:function(){return this._currentTheme},syncAppearanceTheme:function(){this._currentTheme&&(this._currentTheme&&(this.__cache[this._currentTheme.name]={}),rwt.runtime.System.getInstance().getUiReady()&&rwt.widgets.base.ClientDocument.getInstance()._recursiveAppearanceThemeUpdate(this._currentTheme))},styleFrom:function(a,b){var c=this.getCurrentTheme();if(c)return this.styleFromTheme(c,a,b)},styleFromTheme:function(a,b,c){var d=a.appearances[b];if(!d){if(rwt.util.Variant.isSet("qx.debug","on"))throw Error("Missing appearance entry: "+b);return null}if(!d.style)return d.include?this.styleFromTheme(a,d.include,c):null;var e=this.__stateMap,f=[b],g;for(g in c)e[g]||(e[g]=this.__stateMapLength++),f[e[g]]=!0;e=f.join();if((f=this.__cache[a.name])&&void 0!==f[e])return f[e];if(d.include||d.base){g=d.style(c);var h;d.include&&(h=this.styleFromTheme(a,d.include,c));a={};if(d.base)if(b=this.styleFromTheme(d.base,b,c),d.include)for(var k in b)void 0===h[k]&&void 0===g[k]&&(a[k]=b[k]);else for(k in b)void 0===g[k]&&(a[k]=b[k]);if(d.include)for(k in h)void 0===g[k]&&(a[k]=h[k]);for(k in g)a[k]=g[k]}else a=d.style(c);f&&(f[e]=a||null);return a||null}},destruct:function(){this._disposeFields("__cache","__stateMap")}});rwt.qx.Class.define("rwt.html.Border",{extend:rwt.qx.Object,construct:function(a,b,c,d){this.base(arguments);this._styles=this._widths=this._colors=null;this._innerColors=[null,null,null,null];this._radii=[0,0,0,0];this._singleStyle=this._singleColor=null;this._setWidth(a);this._setStyle(b?b:"none");this._setColor(c?c:"");if("complex"===b){if(void 0===d)throw Error("Missing innerColors");this._setInnerColor(d)}else void 0!==d&&this._setRadii(d)},statics:{_EDGEWIDTH:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],_EDGECOLOR:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],_EDGESTYLE:["borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle"],_EDGEMOZCOLORS:["MozBorderTopColors","MozBorderRightColors","MozBorderBottomColors","MozBorderLeftColors"],_BORDERRADII:rwt.util.Variant.select("qx.client",{"webkit|blink":["-webkit-border-top-left-radius","-webkit-border-top-right-radius","-webkit-border-bottom-right-radius","-webkit-border-bottom-left-radius"],"gecko|trident":["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],"default":[]}),resetWidget:function(a){a._style.border="";a._innerStyle&&(a._innerStyle.border="");this._resetRadii(a);this._resetComplexBorder(a)},_resetRadii:function(a){try{for(var b=0;4>b;b++)a._style[this._BORDERRADII[b]]=""}catch(c){}},_resetComplexBorder:rwt.util.Variant.select("qx.client",{gecko:function(a){var b=rwt.html.Border;a=a._style;for(var c=0;4>c;c++)a[b._EDGEMOZCOLORS[c]]=""},"default":function(a){var b=rwt.html.Border;if(a=a._innerStyle)for(var c=0;4>c;c++)a[b._EDGEWIDTH[c]]="",a[b._EDGESTYLE[c]]="",a[b._EDGECOLOR[c]]=""}})},members:{_setColor:function(a){"string"===typeof a&&(this._singleColor=a);this._colors=this._normalizeValue(a)},_setWidth:function(a){this._widths=this._normalizeValue(a)},_setStyle:function(a){"string"===typeof a&&(this._singleStyle=a);this._styles=this._normalizeValue("complex"===a?"solid":a)},_setInnerColor:function(a){this._innerColors=this._normalizeValue(a)},_setRadii:function(a){this._radii=this._normalizeValue(a)},getRadii:function(){return this._radii.concat()},getColor:function(){return this._singleColor},getColors:function(){return this._colors.concat()},getColorTop:function(){return this._colors[0]},getColorRight:function(){return this._colors[1]},getColorBottom:function(){return this._colors[2]},getColorLeft:function(){return this._colors[3]},getInnerColors:function(){return this._innerColors.concat()},getColorInnerTop:function(){return this._innerColors[0]},getColorInnerRight:function(){return this._innerColors[1]},getColorInnerBottom:function(){return this._innerColors[2]},getColorInnerLeft:function(){return this._innerColors[3]},getStyle:function(){return this._singleStyle},getStyles:function(){return this._styles.concat()},getStyleTop:function(){return this._styles[0]},getStyleRight:function(){return this._styles[1]},getStyleBottom:function(){return this._styles[2]},getStyleLeft:function(){return this._styles[3]},getWidths:function(){return this._widths.concat()},getWidthTop:function(){return this._widths[0]},getWidthRight:function(){return this._widths[1]},getWidthBottom:function(){return this._widths[2]},getWidthLeft:function(){return this._widths[3]},_normalizeValue:function(a){return a instanceof Array?a:[a,a,a,a]},renderWidget:function(a){"complex"===this.getStyle()?this._renderComplexBorder(a):this._isRounded()?this._renderRoundedBorder(a):this._renderSimpleBorder(a)},renderElement:function(a){if("complex"===this.getStyle())throw Error("Rendering complex or rounded border on elements currently unsupported");this._renderSimpleBorderStyle(a.style);this._isRounded()&&this._renderRadii(a.style)},_renderSimpleBorder:function(a){rwt.html.Border._resetComplexBorder(a);rwt.html.Border._resetRadii(a);this._renderSimpleBorderStyle(a._style)},_renderSimpleBorderStyle:function(a){for(var b=rwt.html.Border,c=0;4>c;c++)a[b._EDGEWIDTH[c]]=(this._widths[c]||0)+"px",a[b._EDGESTYLE[c]]=this._styles[c]||"none",a[b._EDGECOLOR[c]]=this._colors[c]||""},_renderComplexBorder:rwt.util.Variant.select("qx.client",{gecko:function(a){var b=rwt.html.Border;b._resetRadii(a);a=a._style;for(var c=0;4>c;c++)a[b._EDGEWIDTH[c]]=(this._widths[c]||0)+"px",a[b._EDGECOLOR[c]]=this._colors[c]||"",2===this._widths[c]?(a[b._EDGESTYLE[c]]="solid",a[b._EDGEMOZCOLORS[c]]=this._colors[c]+" "+this._innerColors[c]):(a[b._EDGESTYLE[c]]=this._styles[c]||"none",a[b._EDGEMOZCOLORS[c]]="")},"default":function(a){var b=rwt.html.Border;b._resetRadii(a);for(var c=a._style,d=a._innerStyle,e=0;4>e;e++)2===this._widths[e]?(d||(a.prepareEnhancedBorder(),d=a._innerStyle),c[b._EDGEWIDTH[e]]="1px",c[b._EDGESTYLE[e]]="solid",c[b._EDGECOLOR[e]]=this._colors[e]||"",d[b._EDGEWIDTH[e]]="1px",d[b._EDGESTYLE[e]]="solid",d[b._EDGECOLOR[e]]=this._innerColors[e]):(c[b._EDGEWIDTH[e]]=(this._widths[e]||0)+"px",c[b._EDGESTYLE[e]]=this._styles[e]||"none",c[b._EDGECOLOR[e]]=this._colors[e]||"",d&&(d[b._EDGEWIDTH[e]]="",d[b._EDGESTYLE[e]]="",d[b._EDGECOLOR[e]]=""))}}),_renderRoundedBorder:function(a){this._renderSimpleBorder(a);this._renderRadii(a._style)},_renderRadii:function(a){for(var b=rwt.html.Border,c=0;4>c;c++)a[b._BORDERRADII[c]]=this._radii[c]+"px"},_isRounded:function(){return"0000"!==this._radii.join("")}}});rwt.qx.Class.define("rwt.html.Font",{extend:rwt.qx.Object,construct:function(a,b){this.base(arguments);void 0!==a&&this.setSize(a);void 0!==b&&this.setFamily(b)},statics:{_fontPool:{},fromString:function(a){var b=new rwt.html.Font;a=a.split(/\s+/);for(var c=[],d=0;d<a.length;d++){var e=a[d];switch(e){case "bold":b.setBold(!0);break;case "italic":b.setItalic(!0);break;case "underline":b.setDecoration("underline");break;default:var f=parseInt(e,10);f==e||rwt.util.Strings.contains(e,"px")?b.setSize(f):c.push(e)}}0<c.length&&b.setFamily(c);return b},fromArray:function(a){var b=a[0],c=a[1],d=a[2];a=a[3];var e=b+c+d+a,f=this._fontPool[e];f||(f=new rwt.html.Font(c,b),f.setBold(d),f.setItalic(a),this._fontPool[e]=f);return f},fromConfig:function(a){var b=new rwt.html.Font;b.set(a);return b},reset:function(a){a.removeStyleProperty("fontFamily");a.removeStyleProperty("fontSize");a.removeStyleProperty("fontWeight");a.removeStyleProperty("fontStyle");a.removeStyleProperty("textDecoration")},resetElement:function(a){a=a.style;a.fontFamily="";a.fontSize="";a.fontWeight="";a.fontStyle="";a.textDecoration=""},resetStyle:function(a){a.fontFamily="";a.fontSize="";a.fontWeight="";a.fontStyle="";a.textDecoration=""}},properties:{size:{check:"Integer",nullable:!0,apply:"_applySize"},family:{check:"Array",nullable:!0,apply:"_applyFamily"},bold:{check:"Boolean",nullable:!0,apply:"_applyBold"},italic:{check:"Boolean",nullable:!0,apply:"_applyItalic"},decoration:{check:["underline","line-through","overline"],nullable:!0,apply:"_applyDecoration"}},members:{__size:null,__family:null,__bold:null,__italic:null,__decoration:null,_applySize:function(a){this.__size=null===a?null:a+"px"},_applyFamily:function(a){for(var b="",c=0,d=a.length;c<d;c++)b=0<a[c].indexOf(" ")?b+('"'+a[c]+'"'):b+a[c],c!=d-1&&(b+=",");this.__family=b},_applyBold:function(a){this.__bold=null===a?null:a?"bold":"normal"},_applyItalic:function(a){this.__italic=null===a?null:a?"italic":"normal"},_applyDecoration:function(a){this.__decoration=null===a?null:a},render:function(a){a.setStyleProperty("fontFamily",this.__family);a.setStyleProperty("fontSize",this.__size);a.setStyleProperty("fontWeight",this.__bold);a.setStyleProperty("fontStyle",this.__italic);a.setStyleProperty("textDecoration",this.__decoration)},renderStyle:function(a){a.fontFamily=this.__family||"";a.fontSize=this.__size||"";a.fontWeight=this.__bold||"";a.fontStyle=this.__italic||"";a.textDecoration=this.__decoration||""},renderElement:function(a){a=a.style;a.fontFamily=this.__family||"";a.fontSize=this.__size||"";a.fontWeight=this.__bold||"";a.fontStyle=this.__italic||"";a.textDecoration=this.__decoration||""},toCss:function(){return(this.getItalic()?"italic ":"")+(this.getBold()?"bold ":"")+(this.__size?this.getSize()+"px ":"")+(this.__family?this.__family.replace(/\"/g,"'"):"")}}});rwt.qx.Class.define("rwt.widgets.util.FocusHandler",{extend:rwt.qx.Target,construct:function(a){this.base(arguments);null!=a&&(this._attachedWidget=a)},statics:{mouseFocus:!1,blockFocus:!1},members:{getAttachedWidget:function(){return this._attachedWidget},_onkeyevent:function(a,b){if("Tab"==b.getKeyIdentifier()){b.stopPropagation();b.preventDefault();rwt.widgets.util.FocusHandler.mouseFocus=!1;var c=this.getAttachedWidget().getFocusedChild();if(c=b.isShiftPressed()?c?this.getWidgetBefore(a,c):this.getLastWidget(a):c?this.getWidgetAfter(a,c):this.getFirstWidget(a))c.setFocused(!0),c._ontabfocus()}},compareTabOrder:function(a,b){if(a==b)return 0;var c=a.getTabIndex(),d=b.getTabIndex();if(c!=d)return c-d;c=rwt.html.Location.getTop(a.getElement());d=rwt.html.Location.getTop(b.getElement());if(c!=d)return c-d;c=rwt.html.Location.getLeft(a.getElement());d=rwt.html.Location.getLeft(b.getElement());if(c!=d)return c-d;c=a.getZIndex();d=b.getZIndex();return c!=d?c-d:0},getFirstWidget:function(a){return this._getFirst(a,null)},getLastWidget:function(a){return this._getLast(a,null)},getWidgetAfter:function(a,b){if(a==b)return this.getFirstWidget(a);b.getAnonymous()&&(b=b.getParent());if(null==b)return[];var c=[];this._getAllAfter(a,b,c);c.sort(this.compareTabOrder);return 0<c.length?c[0]:this.getFirstWidget(a)},getWidgetBefore:function(a,b){if(a==b)return this.getLastWidget(a);b.getAnonymous()&&(b=b.getParent());if(null==b)return[];var c=[];this._getAllBefore(a,b,c);c.sort(this.compareTabOrder);var d=c.length;return 0<d?c[d-1]:this.getLastWidget(a)},_getAllAfter:function(a,b,c){a=a.getChildren();for(var d,e=a.length||0,f=0;f<e;f++)d=a[f],!d.isDisposed()&&(d instanceof rwt.widgets.base.Parent||d instanceof rwt.widgets.base.Terminator)&&(d.isFocusable()&&0<d.getTabIndex()&&0>this.compareTabOrder(b,d)&&c.push(a[f]),!d.isFocusRoot()&&d instanceof rwt.widgets.base.Parent&&this._getAllAfter(d,b,c))},_getAllBefore:function(a,b,c){a=a.getChildren();for(var d,e=a.length,f=0;f<e;f++)if(d=a[f],d instanceof rwt.widgets.base.Parent||d instanceof rwt.widgets.base.Terminator)d.isFocusable()&&0<d.getTabIndex()&&0<this.compareTabOrder(b,d)&&c.push(d),!d.isFocusRoot()&&d instanceof rwt.widgets.base.Parent&&this._getAllBefore(d,b,c)},_getFirst:function(a,b){for(var c=a.getChildren(),d,e=c.length,f=0;f<e;f++)if(d=c[f],d instanceof rwt.widgets.base.Parent||d instanceof rwt.widgets.base.Terminator)d.isFocusable()&&0<d.getTabIndex()&&(null==b||0>this.compareTabOrder(d,b))&&(b=d),!d.isFocusRoot()&&d instanceof rwt.widgets.base.Parent&&(b=this._getFirst(d,b));return b},_getLast:function(a,b){for(var c=a.getChildren(),d,e=c.length,f=0;f<e;f++)if(d=c[f],d instanceof rwt.widgets.base.Parent||d instanceof rwt.widgets.base.Terminator)d.isFocusable()&&0<d.getTabIndex()&&(null==b||0<this.compareTabOrder(d,b))&&(b=d),!d.isFocusRoot()&&d instanceof rwt.widgets.base.Parent&&(b=this._getLast(d,b));return b}},destruct:function(){this._disposeFields("_attachedWidget")}});rwt.qx.Class.define("rwt.html.Location",{statics:{__style:function(a,b){return rwt.html.Style.getStyleProperty(a,b)},__num:function(a,b){var c=rwt.html.Style.getStyleProperty(a,b);return Math.round(parseFloat(c,10))||0},__computeScroll:function(a){var b=0,c=0;if(a.getBoundingClientRect)a=rwt.html.Nodes.getWindow(a),b-=rwt.html.Viewport.getScrollLeft(a),c-=rwt.html.Viewport.getScrollTop(a);else{var d=rwt.html.Nodes.getDocument(a).body;for(a=a.parentNode;a&&a!=d;)b+=a.scrollLeft,c+=a.scrollTop,a=a.parentNode}return{left:Math.ceil(b),top:Math.ceil(c)}},__computeBody:rwt.util.Variant.select("qx.client",{"webkit|blink":function(a){a=rwt.html.Nodes.getDocument(a);var b=a.body,c=b.offsetLeft,d=b.offsetTop,c=c+this.__num(b,"borderLeftWidth"),d=d+this.__num(b,"borderTopWidth");"CSS1Compat"===a.compatMode&&(c+=this.__num(b,"marginLeft"),d+=this.__num(b,"marginTop"));return{left:Math.ceil(c),top:Math.ceil(d)}},gecko:function(a){var b=rwt.html.Nodes.getDocument(a).body,c=b.offsetLeft,d=b.offsetTop;if("border-box"!==rwt.widgets.base.ClientDocument.BOXSIZING&&(c+=this.__num(b,"borderLeftWidth"),d+=this.__num(b,"borderTopWidth"),!a.getBoundingClientRect)){for(var e;a;){if("absolute"===this.__style(a,"position")||"fixed"===this.__style(a,"position")){e=!0;break}a=a.offsetParent}e||(c+=this.__num(b,"borderLeftWidth"),d+=this.__num(b,"borderTopWidth"))}return{left:Math.ceil(c),top:Math.ceil(d)}},"default":function(a){a=rwt.html.Nodes.getDocument(a).body;return{left:Math.ceil(a.offsetLeft),top:Math.ceil(a.offsetTop)}}}),__computeOffset:rwt.util.Variant.select("qx.client",{"trident|webkit|blink":function(a){var b=rwt.html.Nodes.getDocument(a);if(a.getBoundingClientRect){a=a.getBoundingClientRect();var c=a.left,d=a.top}else for(c=a.offsetLeft,d=a.offsetTop,a=a.offsetParent,b=b.body;a&&a!=b;)c+=a.offsetLeft,d+=a.offsetTop,c+=this.__num(a,"borderLeftWidth"),d+=this.__num(a,"borderTopWidth"),a=a.offsetParent;return{left:Math.ceil(c),top:Math.ceil(d)}},gecko:function(a){if(a.getBoundingClientRect){a=a.getBoundingClientRect();var b=Math.round(a.left),c=Math.round(a.top)}else{var c=b=0,d=rwt.html.Nodes.getDocument(a).body,e=rwt.widgets.base.ClientDocument.BOXSIZING;"border-box"!==e&&(b-=this.__num(a,"borderLeftWidth"),c-=this.__num(a,"borderTopWidth"));for(;a&&a!==d;)b+=a.offsetLeft,c+=a.offsetTop,"border-box"!==e&&(b+=this.__num(a,"borderLeftWidth"),c+=this.__num(a,"borderTopWidth")),a.parentNode&&"visible"!=this.__style(a.parentNode,"overflow")&&(b+=this.__num(a.parentNode,"borderLeftWidth"),c+=this.__num(a.parentNode,"borderTopWidth")),a=a.offsetParent}return{left:Math.ceil(b),top:Math.ceil(c)}},"default":function(a){for(var b=0,c=0,d=rwt.html.Nodes.getDocument(a).body;a&&a!==d;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;return{left:Math.ceil(b),top:Math.ceil(c)}}}),get:function(a,b){var c=this.__computeBody(a),d="BODY"==a.tagName;if(d)var e=c.left,c=c.top;else var f=this.__computeOffset(a),g=this.__computeScroll(a),e=f.left+c.left-g.left,c=f.top+c.top-g.top;f=e+a.offsetWidth;g=c+a.offsetHeight;if(b){if("padding"==b||"scroll"==b){var h=rwt.html.Overflow.getX(a);if("scroll"==h||"auto"==h)f+=a.scrollWidth-a.offsetWidth+this.__num(a,"borderLeftWidth")+this.__num(a,"borderRightWidth");h=rwt.html.Overflow.getY(a);if("scroll"==h||"auto"==h)g+=a.scrollHeight-a.offsetHeight+this.__num(a,"borderTopWidth")+this.__num(a,"borderBottomWidth")}"padding"===b&&(e+=this.__num(a,"paddingLeft"),c+=this.__num(a,"paddingTop"),f-=this.__num(a,"paddingRight"),g-=this.__num(a,"paddingBottom"));if("padding"===b||"scroll"===b)e-=d?rwt.html.Viewport.getScrollLeft():a.scrollLeft,c-=d?rwt.html.Viewport.getScrollTop():a.scrollTop,f-=d?rwt.html.Viewport.getScrollLeft():a.scrollLeft,g-=d?rwt.html.Viewport.getScrollTop():a.scrollTop;if("padding"===b||"scroll"===b||"border"===b)e+=this.__num(a,"borderLeftWidth"),c+=this.__num(a,"borderTopWidth"),f-=this.__num(a,"borderRightWidth"),g-=this.__num(a,"borderBottomWidth");"margin"===b&&(e-=this.__num(a,"marginLeft"),c-=this.__num(a,"marginTop"),f+=this.__num(a,"marginRight"),g+=this.__num(a,"marginBottom"))}return{left:e,top:c,right:f,bottom:g}},getLeft:function(a,b){return this.get(a,b).left},getTop:function(a,b){return this.get(a,b).top},getRight:function(a,b){return this.get(a,b).right},getBottom:function(a,b){return this.get(a,b).bottom},getRelative:function(a,b,c,d){a=this.get(a,c);b=this.get(b,d);return{left:a.left-b.left,top:a.top-b.top,right:a.right-b.right,bottom:a.bottom-b.bottom}}}});(function(){var a=rwt.client.Client;rwt.qx.Class.define("rwt.html.Style",{statics:{VENDOR_PREFIX_VALUE:rwt.util.Variant.select("qx.client",{gecko:"-moz-","webkit|blink":"-webkit-",trident:"-ms-","default":""}),VENDOR_PREFIX_PROPERTY:rwt.util.Variant.select("qx.client",{gecko:"Moz","webkit|blink":"webkit",trident:"ms","default":""}),getStyleProperty:function(a,b){try{var c=rwt.html.Nodes.getDocument(a).defaultView.getComputedStyle(a,null),d=c?c[b]:null;return d?d:a.style[b]}catch(g){throw Error("Could not evaluate computed style: "+a+"["+b+"]: "+g);}},setStyleProperty:function(a,b,e){a.setStyleProperty?a.setStyleProperty(b,e):a.style[b]=e},removeStyleProperty:function(a,b){a instanceof rwt.widgets.base.Widget?a.removeStyleProperty(b):a.style[b]=""},getOwnProperty:function(a,b){if(a.getStyleProperty)a.getStyleProperty(b);else return a.style[b]},getStyleSize:function(a,b){return parseInt(rwt.html.Style.getStyleProperty(a,b),10)||0},getMarginLeft:function(a){return rwt.html.Style.getStyleSize(a,"marginLeft")},getMarginTop:function(a){return rwt.html.Style.getStyleSize(a,"marginTop")},getMarginRight:function(a){return rwt.html.Style.getStyleSize(a,"marginRight")},getMarginBottom:function(a){return rwt.html.Style.getStyleSize(a,"marginBottom")},getPaddingLeft:function(a){return rwt.html.Style.getStyleSize(a,"paddingLeft")},getPaddingTop:function(a){return rwt.html.Style.getStyleSize(a,"paddingTop")},getPaddingRight:function(a){return rwt.html.Style.getStyleSize(a,"paddingRight")},getPaddingBottom:function(a){return rwt.html.Style.getStyleSize(a,"paddingBottom")},getBorderLeft:function(a){return"none"==rwt.html.Style.getStyleProperty(a,"borderLeftStyle")?0:rwt.html.Style.getStyleSize(a,"borderLeftWidth")},getBorderTop:function(a){return"none"==rwt.html.Style.getStyleProperty(a,"borderTopStyle")?0:rwt.html.Style.getStyleSize(a,"borderTopWidth")},getBorderRight:function(a){return"none"==rwt.html.Style.getStyleProperty(a,"borderRightStyle")?0:rwt.html.Style.getStyleSize(a,"borderRightWidth")},getBorderBottom:function(a){return"none"==rwt.html.Style.getStyleProperty(a,"borderBottomStyle")?0:rwt.html.Style.getStyleSize(a,"borderBottomWidth")},setBackgroundGradient:function(a,b){a.___rwtStyle__backgroundGradient!==b&&(a.___rwtStyle__backgroundGradient=b,a.___rwtStyle__backgroundImage||this._updateBackground(a))},getBackgroundGradient:function(a){if(a=a.___rwtStyle__backgroundGradient){for(var b=[!0===a.horizontal?"to right":"to bottom"],c=0;c<a.length;c++)b.push(" "+a[c][1]+" "+(100*a[c][0]+"%"));return"linear-gradient( "+b.join()+" )"}},setBackgroundImage:function(a,b){a.___rwtStyle__backgroundImage!==b&&(a.___rwtStyle__backgroundImage=b,this._updateBackground(a))},getBackgroundImage:function(a){return(a=a.___rwtStyle__backgroundImage)?"url("+a+")":"none"},setBackgroundRepeat:function(a,b){a.___rwtStyle__backgroundRepeat!==b&&(a.___rwtStyle__backgroundRepeat=b,a.___rwtStyle__backgroundImage&&this._updateBackground(a))},getBackgroundRepeat:function(a){return a.___rwtStyle__backgroundRepeat},setBackgroundPosition:function(a,b){a.___rwtStyle__backgroundPosition!==b&&(a.___rwtStyle__backgroundPosition=b,a.___rwtStyle__backgroundImage&&this._updateBackground(a))},getBackgroundPosition:function(a){return a.___rwtStyle__backgroundPosition},setBackgroundSize:function(a,b){a.___rwtStyle__backgroundSize!==b&&(a.___rwtStyle__backgroundSize=b,a.___rwtStyle__backgroundImage&&this._updateBackground(a))},setBackgroundColor:function(a,b){var c="transparent"===b?null:b;a.___rwtStyle__backgroundColor!==c&&(a.___rwtStyle__backgroundColor=c,this._updateBackground(a))},getBackgroundColor:function(a){return a.___rwtStyle__backgroundColor||"transparent"},setBoxShadow:function(b,d){var c;c=!a.isWebkit()&&!a.isBlink()||a.isMobileChrome()?"boxShadow":this.VENDOR_PREFIX_VALUE+"box-shadow";if(d){var f=d[0]?"inset ":"",f=f+(d.slice(1,5).join("px ")+"px"),g=rwt.util.Colors.stringToRgb(d[5]);g.push(d[6]);f+=" rgba("+g.join()+")";this.setStyleProperty(b,c,f)}else this.removeStyleProperty(b,c)},setTextShadow:function(a,b){if(b){var c=b.slice(1,4).join("px ")+"px",d=rwt.util.Colors.stringToRgb(b[5]);d.push(b[6]);c+=" rgba("+d.join()+")";this.setStyleProperty(a,"textShadow",c)}else this.removeStyleProperty(a,"textShadow")},setPointerEvents:function(b,d){var c=a.getVersion(),f="gecko"===a.getEngine()&&1.9<=c,c="safari"===a.getBrowser()&&530<=c;f||c?(this.setStyleProperty(b,"pointerEvents",d),b.setAttribute("pointerEvents",d)):this._passEventsThrough(b,d)},setUserSelect:function(a,b){this.setStyleProperty(a,this._prefixProperty("userSelect"),b)},getUserSelect:function(a){return this.getOwnProperty(a,this._prefixProperty("userSelect"))},setTransition:function(a,b){if(!this._transitionProperty){this._transitionProperty="transition";var c=document.createElement("div");"transition"in c.style||("MozTransition"in c.style?this._transitionProperty="MozTransition":"webkitTransition"in c.style&&(this._transitionProperty="webkitTransition"))}this.setStyleProperty(a,this._transitionProperty,b)},_prefixProperty:function(a){return this.VENDOR_PREFIX_PROPERTY?this.VENDOR_PREFIX_PROPERTY+rwt.util.Strings.toFirstUp(a):a},_updateBackground:function(a){var b=[];this._pushBackgroundImage(a,b);this._pushBackgroundGradient(a,b);this._pushBackgroundColor(a,b);0<b.length?(this.setStyleProperty(a,"background",b.join(", ")),a.___rwtStyle__backgroundImage&&a.___rwtStyle__backgroundSize&&this.setStyleProperty(a,"backgroundSize",a.___rwtStyle__backgroundSize)):this._clearCssBackground(a)},_pushBackgroundImage:function(a,b){var c=a.___rwtStyle__backgroundImage;c&&b.push(this._getImageString(c,a.___rwtStyle__backgroundRepeat,a.___rwtStyle__backgroundPosition))},_pushBackgroundGradient:function(a,b){var c=a.___rwtStyle__backgroundGradient;c&&!a.___rwtStyle__backgroundImage&&b.push(this._getGradientString(c))},_pushBackgroundColor:function(b,d){var c=b.___rwtStyle__backgroundColor;c&&(!a.isWebkit()&&!a.isBlink()||b.___rwtStyle__backgroundGradient||d.push(this._getGradientString([[0,c],[1,c]])),d.push(c))},_getGradientString:rwt.util.Variant.select("qx.client",{"webkit|blink":function(a){var b=["linear","left top"];!0===a.horizontal?b.push("right top"):b.push("left bottom");for(var c=0;c<a.length;c++)b.push("color-stop("+a[c][0]+","+a[c][1]+")");return this.VENDOR_PREFIX_VALUE+"gradient( "+b.join()+")"},gecko:function(a){for(var b=[!0===a.horizontal?"0deg":"-90deg"],c=0;c<a.length;c++)b.push(a[c][1]+" "+(100*a[c][0]+"%"));return this.VENDOR_PREFIX_VALUE+"linear-gradient( "+b.join()+")"},trident:function(a){return 9===rwt.client.Client.getMajor()?this._getSvgGradientString(a):this._getDefaultGradientString(a)},"default":function(a){return this._getDefaultGradientString(a)}}),_getDefaultGradientString:function(a){for(var b=[!0===a.horizontal?"90deg":"180deg"],c=0;c<a.length;c++)b.push(a[c][1]+" "+(100*a[c][0]+"%"));return"linear-gradient( "+b.join()+")"},_getSvgGradientString:function(a){var c=[b.start];c.push(a.horizontal?b.horizontal:b.vertical);for(var e=0;e<a.length;e++)c.push(b.color(a[e]));c.push(b.end);return c.join("")},_getImageString:function(a,b,e){return"url("+this._resolveResource(a)+")"+(b?" "+b:"")+(e?" "+e:"")},_clearCssBackground:function(b){a.isTrident()?this.setStyleProperty(b,"background","rgba(0, 0, 0, 0)"):this.removeStyleProperty(b,"background")},_passEventsThrough:function(a,b){var c=rwt.event.EventHandler._mouseEventTypes,d=this._passEventThroughHandler;if("none"===b){this.setStyleProperty(a,"cursor","default");for(var g=0;g<c.length;g++)a.addEventListener(c[g],d,!1)}},_passEventThroughHandler:function(a){var b=rwt.event.EventHandlerUtil,c=b.getDomTarget(a),f=a.type;c.style.display="none";var g=document.elementFromPoint(a.clientX,a.clientY);a.cancelBubble=!0;b.stopDomEvent(a);g&&"mousemove"!==f&&"mouseover"!==f&&"mouseout"!==f&&("mousedown"===f&&rwt.html.Style._refireEvent(g,"mouseover",a),rwt.html.Style._refireEvent(g,f,a),"mouseup"===f&&rwt.html.Style._refireEvent(g,"mouseout",a));c.style.display=""},_refireEvent:function(a,b,e){var c=document.createEvent("MouseEvents");c.initMouseEvent(b,!0,!0,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget);a.dispatchEvent(c)},_resolveResource:function(a){return a}}});var b={start:'url("data:image/svg+xml;charset\x3dutf-8,'+encodeURIComponent("\x3csvg xmlns\x3d'http://www.w3.org/2000/svg'\x3e"),vertical:encodeURIComponent("\x3clinearGradient id\x3d'g' x2\x3d'0' y2\x3d'1'\x3e"),horizontal:encodeURIComponent("\x3clinearGradient id\x3d'g'\x3e"),color:function(a){return encodeURIComponent("\x3cstop offset\x3d'"+100*a[0]+"%' stop-color\x3d'"+a[1]+"'/\x3e")},end:encodeURIComponent("\x3c/linearGradient\x3e\x3crect fill\x3d'url(#g)' ")+encodeURIComponent("width\x3d'100%' height\x3d'100%'/\x3e\x3c/svg\x3e")+'")'}})();rwt.qx.Class.define("rwt.html.Overflow",{statics:{getX:rwt.util.Variant.select("qx.client",{gecko:1.8>rwt.client.Client.getVersion()?function(a){a=rwt.html.Style.getStyleProperty(a,"overflow");"-moz-scrollbars-none"===a&&(a="hidden");return a}:function(a){return rwt.html.Style.getStyleProperty(a,"overflowX")},"default":function(a){return rwt.html.Style.getStyleProperty(a,"overflowX")}}),getY:rwt.util.Variant.select("qx.client",{gecko:1.8>rwt.client.Client.getVersion()?function(a,b){var c=rwt.html.Style.getStyleProperty(a,"overflow",b,!1);"-moz-scrollbars-none"===c&&(c="hidden");return c}:function(a){return rwt.html.Style.getStyleProperty(a,"overflowY")},"default":function(a){return rwt.html.Style.getStyleProperty(a,"overflowY")}})}});rwt.qx.Class.define("rwt.html.ImageManager",{extend:rwt.qx.Target,statics:{getInstance:function(){return rwt.runtime.Singletons.get(rwt.html.ImageManager)}},construct:function(){this.base(arguments);this.__visible={};this.__all={}},members:{add:function(a){var b=this.__all;void 0===b[a]?b[a]=1:b[a]++},remove:function(a){var b=this.__all;void 0!==b[a]&&b[a]--;0>=b[a]&&delete b[a]},show:function(a){var b=this.__visible;void 0===b[a]?b[a]=1:b[a]++},hide:function(a){var b=this.__visible;void 0!==b[a]&&b[a]--;0>=b[a]&&delete b[a]},getVisibleImages:function(){var a=this.__visible,b={},c;for(c in a)0<a[c]&&(b[c]=!0);return b},getHiddenImages:function(){var a=this.__visible,b=this.__all,c={},d;for(d in b)void 0===a[d]&&(c[d]=!0);return c}},destruct:function(){this._disposeFields("__all","__visible")}});rwt.qx.Class.define("rwt.html.Offset",{statics:{getLeft:rwt.util.Variant.select("qx.client",{gecko:function(a){var b=a.offsetLeft,c=a.parentNode;a=rwt.html.Style.getStyleProperty(a,"position");var d=rwt.html.Style.getStyleProperty(c,"position");"absolute"!=a&&"fixed"!=a&&(b-=rwt.html.Style.getBorderLeft(c));if("absolute"!=d&&"fixed"!=d)for(;c;){c=c.parentNode;if(!c||"string"!==typeof c.tagName)break;a=rwt.html.Style.getStyleProperty(c,"position");if("absolute"==a||"fixed"==a){b-=rwt.html.Style.getBorderLeft(c)+rwt.html.Style.getPaddingLeft(c);break}}return b},"default":function(a){return a.offsetLeft}}),getTop:rwt.util.Variant.select("qx.client",{gecko:function(a){var b=a.offsetTop,c=a.parentNode;a=rwt.html.Style.getStyleProperty(a,"position");var d=rwt.html.Style.getStyleProperty(c,"position");"absolute"!=a&&"fixed"!=a&&(b-=rwt.html.Style.getBorderTop(c));if("absolute"!=d&&"fixed"!=d)for(;c;){c=c.parentNode;if(!c||"string"!==typeof c.tagName)break;a=rwt.html.Style.getStyleProperty(c,"position");if("absolute"==a||"fixed"==a){b-=rwt.html.Style.getBorderTop(c)+rwt.html.Style.getPaddingTop(c);break}}return b},"default":function(a){return a.offsetTop}})}});namespace("rwt.html");rwt.html.ScrollIntoView={scrollX:function(a,b){for(var c,d=a.parentNode,e=a.offsetLeft,f=a.offsetWidth;d;){switch(rwt.html.Style.getStyleProperty(d,"overflow")){case "scroll":case "auto":case "-moz-scrollbars-horizontal":c=!0;break;default:switch(rwt.html.Style.getStyleProperty(d,"overflowX")){case "scroll":case "auto":c=!0;break;default:c=!1}}if(c){c=d.clientWidth;var g=d.scrollLeft,h=d.rwtScrollable,h=h?h.getVerticalBarWidth():0;b?d.scrollLeft=e:!1===b?d.scrollLeft=e+f-c+h:f>c||e<g?d.scrollLeft=e:e+f>=g+c&&(d.scrollLeft=e+f-c+h);e=d.offsetLeft;f=d.offsetWidth}else e+=d.offsetLeft;if("body"==d.tagName.toLowerCase())break;d=d.offsetParent}return!0},scrollY:function(a,b){for(var c,d=a.parentNode,e=a.offsetTop,f=a.offsetHeight;d;){switch(rwt.html.Style.getStyleProperty(d,"overflow")){case "scroll":case "auto":case "-moz-scrollbars-vertical":c=!0;break;default:switch(rwt.html.Style.getStyleProperty(d,"overflowY")){case "scroll":case "auto":c=!0;break;default:c=!1}}if(c){c=d.clientHeight;var g=d.scrollTop,h=d.rwtScrollable,h=h?h.getHorizontalBarHeight():0;b?d.scrollTop=e:!1===b?d.scrollTop=e+f-c+h:f>c||e<g?d.scrollTop=e:e+f>=g+c&&(d.scrollTop=e+f-c+h);e=d.offsetTop;f=d.offsetHeight}else e+=d.offsetTop;if("body"==d.tagName.toLowerCase())break;d=d.offsetParent}return!0}};rwt.qx.Class.define("rwt.widgets.base.BoxLayout",{extend:rwt.widgets.base.Parent,construct:function(a){this.base(arguments);null!=a?this.setOrientation(a):this.initOrientation()},statics:{STR_REVERSED:"-reversed"},properties:{orientation:{check:["horizontal","vertical"],init:"horizontal",apply:"_applyOrientation",event:"changeOrientation"},spacing:{check:"Integer",init:0,themeable:!0,apply:"_applySpacing",event:"changeSpacing"},horizontalChildrenAlign:{check:["left","center","right"],init:"left",themeable:!0,apply:"_applyHorizontalChildrenAlign"},verticalChildrenAlign:{check:["top","middle","bottom"],init:"top",themeable:!0,apply:"_applyVerticalChildrenAlign"},reverseChildrenOrder:{check:"Boolean",init:!1,apply:"_applyReverseChildrenOrder"},stretchChildrenOrthogonalAxis:{check:"Boolean",init:!0,apply:"_applyStretchChildrenOrthogonalAxis"},useAdvancedFlexAllocation:{check:"Boolean",init:!1,apply:"_applyUseAdvancedFlexAllocation"},accumulatedChildrenOuterWidth:{_cached:!0,defaultValue:null},accumulatedChildrenOuterHeight:{_cached:!0,defaultValue:null}},members:{_createLayoutImpl:function(){return"vertical"==this.getOrientation()?new rwt.widgets.util.VerticalBoxLayoutImpl(this):new rwt.widgets.util.HorizontalBoxLayoutImpl(this)},_layoutHorizontal:!1,_layoutVertical:!1,_layoutMode:"left",isHorizontal:function(){return this._layoutHorizontal},isVertical:function(){return this._layoutVertical},getLayoutMode:function(){null==this._layoutMode&&this._updateLayoutMode();return this._layoutMode},_updateLayoutMode:function(){this._layoutMode=this._layoutVertical?this.getVerticalChildrenAlign():this.getHorizontalChildrenAlign();this.getReverseChildrenOrder()&&(this._layoutMode+=rwt.widgets.base.BoxLayout.STR_REVERSED)},_invalidateLayoutMode:function(){this._layoutMode=null},_applyOrientation:function(a,b){this._layoutHorizontal="horizontal"==a;this._layoutVertical="vertical"==a;this._layoutImpl&&(this._layoutImpl.dispose(),this._layoutImpl=null);a&&(this._layoutImpl=this._createLayoutImpl());this._doLayoutOrder(a,b);this.addToQueueRuntime("orientation")},_applySpacing:function(){this._doLayout();this.addToQueueRuntime("spacing")},_applyHorizontalChildrenAlign:function(){this._doLayoutOrder();this.addToQueueRuntime("horizontalChildrenAlign")},_applyVerticalChildrenAlign:function(){this._doLayoutOrder();this.addToQueueRuntime("verticalChildrenAlign")},_applyReverseChildrenOrder:function(){this._doLayoutOrder();this.addToQueueRuntime("reverseChildrenOrder")},_applyStretchChildrenOrthogonalAxis:function(){this.addToQueueRuntime("stretchChildrenOrthogonalAxis")},_applyUseAdvancedFlexAllocation:function(){this.addToQueueRuntime("useAdvancedFlexAllocation")},_doLayoutOrder:function(){this._invalidateLayoutMode();this._doLayout()},_doLayout:function(){this._invalidatePreferredInnerDimensions();this._invalidateAccumulatedChildrenOuterWidth();this._invalidateAccumulatedChildrenOuterHeight()},_computeAccumulatedChildrenOuterWidth:function(){for(var a=this.getVisibleChildren(),b=this.getSpacing(),c=-b,d=0,e=a[d];null!=e;)c+=e.getOuterWidth()+b,d++,e=a[d];return c},_computeAccumulatedChildrenOuterHeight:function(){var a=this.getVisibleChildren(),b,c=-1,d=this.getSpacing(),e=-d;for(b=a[++c];b;)e+=b.getOuterHeight()+d,b=a[++c];return e},_recomputeChildrenStretchingX:function(){var a=this.getVisibleChildren(),b,c=-1;for(b=a[++c];b;)b._recomputeStretchingX()&&b._recomputeBoxWidth()&&b._recomputeOuterWidth(),b=a[++c]},_recomputeChildrenStretchingY:function(){var a=this.getVisibleChildren(),b,c=-1;for(b=a[++c];b;)b._recomputeStretchingY()&&b._recomputeBoxHeight()&&b._recomputeOuterHeight(),b=a[++c]}}});rwt.qx.Class.define("rwt.widgets.util.VerticalBoxLayoutImpl",{extend:rwt.widgets.util.LayoutImpl,properties:{enableFlexSupport:{check:"Boolean",init:!0}},members:{computeChildBoxWidth:function(a){return this.getWidget().getStretchChildrenOrthogonalAxis()&&a._computedWidthTypeNull&&a.getAllowStretchX()?this.getWidget().getInnerWidth():a.getWidthValue()||a._computeBoxWidthFallback()},computeChildBoxHeight:function(a){return a.getHeightValue()||a._computeBoxHeightFallback()},computeChildrenFlexHeight:function(){if(!this._childrenFlexHeightComputed&&this.getEnableFlexSupport()){this._childrenFlexHeightComputed=!0;var a=this.getWidget(),b=a.getVisibleChildren(),c=b.length,d,e=[],f=a.getInnerHeight(),g=a.getSpacing()*(c-1),h;for(h=0;h<c;h++)d=b[h],d._computedHeightTypeFlex?(e.push(d),a._computedHeightTypeAuto&&(g+=d.getPreferredBoxHeight())):g+=d.getOuterHeight();b=e.length;for(h=c=0;h<b;h++)c+=e[h]._computedHeightParsed;c=(f-g)/c;if(a.getUseAdvancedFlexAllocation()){var a=0,k,l;for(h=0;h<b;h++)d=e[h],k=d._computedHeightFlexValue=d._computedHeightParsed*c,a+=k-rwt.util.Numbers.limit(k,d.getMinHeightValue(),d.getMaxHeightValue());a=Math.round(a);if(0===a)for(h=0;h<b;h++)d=e[h],d._computedHeightFlexValue=Math.round(d._computedHeightFlexValue),g+=d._computedHeightFlexValue;else{k=0<a;for(h=b-1;0<=h;h--)d=e[h],k?(c=(d.getMaxHeightValue()||Infinity)-d._computedHeightFlexValue,0<c?d._allocationLoops=Math.floor(c/d._computedHeightParsed):(rwt.util.Arrays.removeAt(e,h),d._computedHeightFlexValue=Math.round(d._computedHeightFlexValue),g+=Math.round(d._computedHeightFlexValue+c))):(c=rwt.util.Numbers.isNumber(d.getMinHeightValue())?d._computedHeightFlexValue-d.getMinHeightValue():d._computedHeightFlexValue,0<c?d._allocationLoops=Math.floor(c/d._computedHeightParsed):(rwt.util.Arrays.removeAt(e,h),d._computedHeightFlexValue=Math.round(d._computedHeightFlexValue),g+=Math.round(d._computedHeightFlexValue-c)));for(;0!==a&&0<b;){b=e.length;c=Infinity;for(h=l=0;h<b;h++)c=Math.min(c,e[h]._allocationLoops),l+=e[h]._computedHeightParsed;k=Math.min(l*c,a);a-=k;for(h=b-1;0<=h;h--)d=e[h],d._computedHeightFlexValue+=k/l*d._computedHeightParsed,d._allocationLoops==c?(d._computedHeightFlexValue=Math.round(d._computedHeightFlexValue),g+=d._computedHeightFlexValue,delete d._allocationLoops,rwt.util.Arrays.removeAt(e,h)):0===a?(d._computedHeightFlexValue=Math.round(d._computedHeightFlexValue),g+=d._computedHeightFlexValue,delete d._allocationLoops):d._allocationLoops-=c}}}else for(h=0;h<b;h++)d=e[h],d._computedHeightFlexValue=Math.round(d._computedHeightParsed*c),g+=d._computedHeightFlexValue;d._computedHeightFlexValue+=f-g}},invalidateChildrenFlexHeight:function(){delete this._childrenFlexHeightComputed},computeChildrenNeededHeight:function(){var a=this.getWidget();return rwt.widgets.util.LayoutImpl.prototype.computeChildrenNeededHeight_sum.call(this)+(a.getVisibleChildrenLength()-1)*a.getSpacing()},updateSelfOnChildOuterHeightChange:function(){this.getWidget()._invalidateAccumulatedChildrenOuterHeight()},updateChildOnInnerWidthChange:function(a){var b=a._recomputePercentX(),c=a._recomputeStretchingX();"center"==(a.getHorizontalAlign()||this.getWidget().getHorizontalChildrenAlign())&&a.addToLayoutChanges("locationX");return b||c},updateChildOnInnerHeightChange:function(a){"middle"==this.getWidget().getVerticalChildrenAlign()&&a.addToLayoutChanges("locationY");var b=a._recomputePercentY();a=a._recomputeFlexY();return b||a},updateSelfOnJobQueueFlush:function(a){(a.addChild||a.removeChild)&&this.getWidget()._invalidateAccumulatedChildrenOuterHeight()},updateChildrenOnJobQueueFlush:function(a){var b=!1,c=!1,d=this.getWidget();a.orientation&&(b=c=!0);(a.spacing||a.orientation||a.reverseChildrenOrder||a.verticalChildrenAlign)&&d._addChildrenToLayoutQueue("locationY");a.horizontalChildrenAlign&&d._addChildrenToLayoutQueue("locationX");a.stretchChildrenOrthogonalAxis&&(b=!0);b&&(d._recomputeChildrenStretchingX(),d._addChildrenToLayoutQueue("width"));c&&(d._recomputeChildrenStretchingY(),d._addChildrenToLayoutQueue("height"));return!0},updateChildrenOnRemoveChild:function(a,b){var c=this.getWidget(),d=c.getVisibleChildren(),e=d.length,f,g=-1;if(this.getEnableFlexSupport()){for(g=0;g<e;g++)if(f=d[g],f.getHasFlexY()){b=Math.min(b,g);break}g=-1}switch(c.getLayoutMode()){case "bottom":case "top-reversed":for(;(f=d[++g])&&g<b;)f.addToLayoutChanges("locationY");break;case "middle":case "middle-reversed":for(f=d[++g];f;)f.addToLayoutChanges("locationY"),f=d[++g];break;default:for(g+=b,f=d[++g];f;)f.addToLayoutChanges("locationY"),f=d[++g]}},updateChildrenOnMoveChild:function(a,b,c){a=this.getWidget().getVisibleChildren();var d=Math.min(b,c);b=Math.max(b,c)+1;b=Math.min(a.length,b);for(c=d;c<b;c++)a[c].addToLayoutChanges("locationY")},flushChildrenQueue:function(a){var b=this.getWidget(),c=b.getVisibleChildren(),d=c.length,e,f;if(this.getEnableFlexSupport())for(this.invalidateChildrenFlexHeight(),f=0;f<d;f++)e=c[f],e.getHasFlexY()&&(e._computedHeightValue=null,e._recomputeBoxHeight()&&(e._recomputeOuterHeight(),e._recomputeInnerHeight()),a[e.toHashCode()]=e,e._layoutChanges.height=!0);switch(b.getLayoutMode()){case "bottom":case "top-reversed":for(f=d-1;0<=f&&!a[c[f].toHashCode()];f--);for(a=0;a<=f;a++)b._layoutChild(c[a]);break;case "middle":case "middle-reversed":f=-1;for(e=c[++f];e;)b._layoutChild(e),e=c[++f];break;default:for(f=-1,d=!1,e=c[++f];e;){if(d||a[e.toHashCode()])b._layoutChild(e),d=!0;e=c[++f]}}},layoutChild:function(a,b){this.layoutChild_sizeX(a,b);this.layoutChild_sizeY(a,b);this.layoutChild_sizeLimitX(a,b);this.layoutChild_sizeLimitY(a,b);this.layoutChild_locationX(a,b);this.layoutChild_locationY(a,b);this.layoutChild_marginX(a,b);this.layoutChild_marginY(a,b)},layoutChild_sizeX:rwt.util.Variant.select("qx.client",{"trident|webkit|blink":function(a,b){if(b.initial||b.width||b.minWidth||b.maxWidth)a._isWidthEssential()&&!(a._computedWidthTypeNull&&a._computedMinWidthTypeNull&&a._computedMaxWidthTypeNull)||a.getAllowStretchX()&&this.getWidget().getStretchChildrenOrthogonalAxis()?a._renderRuntimeWidth(a.getBoxWidth()):a._resetRuntimeWidth()},"default":function(a,b){if(b.initial||b.width)a._isWidthEssential()&&!a._computedWidthTypeNull?a._renderRuntimeWidth(a.getWidthValue()):a._resetRuntimeWidth()}}),layoutChild_sizeY:rwt.util.Variant.select("qx.client",{"trident|webkit|blink":function(a,b){if(b.initial||b.height||b.minHeight||b.maxHeight)!a._isHeightEssential()||a._computedHeightTypeNull&&a._computedMinHeightTypeNull&&a._computedMaxHeightTypeNull?a._resetRuntimeHeight():a._renderRuntimeHeight(a.getBoxHeight())},"default":function(a,b){if(b.initial||b.height)a._isHeightEssential()&&!a._computedHeightTypeNull?a._renderRuntimeHeight(a.getHeightValue()):a._resetRuntimeHeight()}}),layoutChild_locationY:function(a){var b=this.getWidget();if(b.getFirstVisibleChild()==a)switch(b.getLayoutMode()){case "bottom":case "top-reversed":b=b.getPaddingBottom()+b.getAccumulatedChildrenOuterHeight()-a.getOuterHeight();break;case "middle":case "middle-reversed":b=b.getPaddingTop()+Math.round((b.getInnerHeight()-b.getAccumulatedChildrenOuterHeight())/2);break;default:b=b.getPaddingTop()}else{var c=a.getPreviousVisibleSibling();switch(b.getLayoutMode()){case "bottom":case "top-reversed":b=c._cachedLocationVertical-a.getOuterHeight()-b.getSpacing();break;default:b=c._cachedLocationVertical+c.getOuterHeight()+b.getSpacing()}}a._cachedLocationVertical=b;switch(this.getWidget().getLayoutMode()){case "bottom":case "bottom-reversed":case "middle-reversed":b+=a._computedBottomTypeNull?a._computedTopTypeNull?0:-a.getTopValue():a.getBottomValue();a._resetRuntimeTop();a._renderRuntimeBottom(b);break;default:b+=a._computedTopTypeNull?a._computedBottomTypeNull?0:-a.getBottomValue():a.getTopValue(),a._resetRuntimeBottom(),a._renderRuntimeTop(b)}},layoutChild_locationX:function(a){var b=this.getWidget();if(rwt.client.Client.isGecko()&&a.getAllowStretchX()&&b.getStretchChildrenOrthogonalAxis()&&a._computedWidthTypeNull)a._renderRuntimeLeft(b.getPaddingLeft()||0),a._renderRuntimeRight(b.getPaddingRight()||0);else{var c=a.getHorizontalAlign()||b.getHorizontalChildrenAlign(),d="center"==c?Math.round((b.getInnerWidth()-a.getOuterWidth())/2):0;"right"==c?(d+=b.getPaddingRight(),a._computedRightTypeNull?a._computedLeftTypeNull||(d-=a.getLeftValue()):d+=a.getRightValue(),a._resetRuntimeLeft(),a._renderRuntimeRight(d)):(d+=b.getPaddingLeft(),a._computedLeftTypeNull?a._computedRightTypeNull||(d-=a.getRightValue()):d+=a.getLeftValue(),a._resetRuntimeRight(),a._renderRuntimeLeft(d))}}}});rwt.qx.Class.define("rwt.widgets.util.HorizontalBoxLayoutImpl",{extend:rwt.widgets.util.LayoutImpl,properties:{enableFlexSupport:{check:"Boolean",init:!0}},members:{computeChildBoxWidth:function(a){return a.getWidthValue()||a._computeBoxWidthFallback()},computeChildBoxHeight:function(a){return this.getWidget().getStretchChildrenOrthogonalAxis()&&a._computedHeightTypeNull&&a.getAllowStretchY()?this.getWidget().getInnerHeight():a.getHeightValue()||a._computeBoxHeightFallback()},computeChildrenFlexWidth:function(){if(!this._childrenFlexWidthComputed&&this.getEnableFlexSupport()){this._childrenFlexWidthComputed=!0;var a=this.getWidget(),b=a.getVisibleChildren(),c=b.length,d,e=[],f=a.getInnerWidth(),g=a.getSpacing()*(c-1),h;for(h=0;h<c;h++)d=b[h],d._computedWidthTypeFlex?(e.push(d),a._computedWidthTypeAuto&&(g+=d.getPreferredBoxWidth())):g+=d.getOuterWidth();b=e.length;for(h=c=0;h<b;h++)c+=e[h]._computedWidthParsed;c=(f-g)/c;if(a.getUseAdvancedFlexAllocation()){var a=0,k,l;for(h=0;h<b;h++)d=e[h],k=d._computedWidthFlexValue=d._computedWidthParsed*c,a+=k-rwt.util.Numbers.limit(k,d.getMinWidthValue(),d.getMaxWidthValue());a=Math.round(a);if(0===a)for(h=0;h<b;h++)d=e[h],d._computedWidthFlexValue=Math.round(d._computedWidthFlexValue),g+=d._computedWidthFlexValue;else{k=0<a;for(h=b-1;0<=h;h--)d=e[h],k?(c=(d.getMaxWidthValue()||Infinity)-d._computedWidthFlexValue,0<c?d._allocationLoops=Math.floor(c/d._computedWidthParsed):(rwt.util.Arrays.removeAt(e,h),d._computedWidthFlexValue=Math.round(d._computedWidthFlexValue),g+=Math.round(d._computedWidthFlexValue+c))):(c=rwt.util.Number.isNumber(d.getMinWidthValue())?d._computedWidthFlexValue-d.getMinWidthValue():d._computedWidthFlexValue,0<c?d._allocationLoops=Math.floor(c/d._computedWidthParsed):(rwt.util.Arrays.removeAt(e,h),d._computedWidthFlexValue=Math.round(d._computedWidthFlexValue),g+=Math.round(d._computedWidthFlexValue-c)));for(;0!==a&&0<b;){b=e.length;c=Infinity;for(h=l=0;h<b;h++)c=Math.min(c,e[h]._allocationLoops),l+=e[h]._computedWidthParsed;k=Math.min(l*c,a);a-=k;for(h=b-1;0<=h;h--)d=e[h],d._computedWidthFlexValue+=k/l*d._computedWidthParsed,d._allocationLoops==c?(d._computedWidthFlexValue=Math.round(d._computedWidthFlexValue),g+=d._computedWidthFlexValue,delete d._allocationLoops,rwt.util.Arrays.removeAt(e,h)):0===a?(d._computedWidthFlexValue=Math.round(d._computedWidthFlexValue),g+=d._computedWidthFlexValue,delete d._allocationLoops):d._allocationLoops-=c}}}else for(h=0;h<b;h++)d=e[h],d._computedWidthFlexValue=Math.round(d._computedWidthParsed*c),g+=d._computedWidthFlexValue;d._computedWidthFlexValue+=f-g}},invalidateChildrenFlexWidth:function(){delete this._childrenFlexWidthComputed},computeChildrenNeededWidth:function(){var a=this.getWidget();return rwt.widgets.util.LayoutImpl.prototype.computeChildrenNeededWidth_sum.call(this)+(a.getVisibleChildrenLength()-1)*a.getSpacing()},updateSelfOnChildOuterWidthChange:function(){this.getWidget()._invalidateAccumulatedChildrenOuterWidth()},updateChildOnInnerWidthChange:function(a){"center"==this.getWidget().getHorizontalChildrenAlign()&&a.addToLayoutChanges("locationX");var b=a._recomputePercentX();a=a._recomputeFlexX();return b||a},updateChildOnInnerHeightChange:function(a){var b=a._recomputePercentY(),c=a._recomputeStretchingY();"middle"==(a.getVerticalAlign()||this.getWidget().getVerticalChildrenAlign())&&a.addToLayoutChanges("locationY");return b||c},updateSelfOnJobQueueFlush:function(a){(a.addChild||a.removeChild)&&this.getWidget()._invalidateAccumulatedChildrenOuterWidth()},updateChildrenOnJobQueueFlush:function(a){var b=!1,c=!1,d=this.getWidget();a.orientation&&(b=c=!0);(a.spacing||a.orientation||a.reverseChildrenOrder||a.horizontalChildrenAlign)&&d._addChildrenToLayoutQueue("locationX");a.verticalChildrenAlign&&d._addChildrenToLayoutQueue("locationY");a.stretchChildrenOrthogonalAxis&&(c=!0);b&&(d._recomputeChildrenStretchingX(),d._addChildrenToLayoutQueue("width"));c&&(d._recomputeChildrenStretchingY(),d._addChildrenToLayoutQueue("height"));return!0},updateChildrenOnRemoveChild:function(a,b){var c=this.getWidget(),d=c.getVisibleChildren(),e=d.length,f,g=-1;if(this.getEnableFlexSupport()){for(g=0;g<e;g++)if(f=d[g],f.getHasFlexX()){b=Math.min(b,g);break}g=-1}switch(c.getLayoutMode()){case "right":case "left-reversed":for(;(f=d[++g])&&g<b;)f.addToLayoutChanges("locationX");break;case "center":case "center-reversed":for(f=d[++g];f;)f.addToLayoutChanges("locationX"),f=d[++g];break;default:for(g+=b,f=d[++g];f;)f.addToLayoutChanges("locationX"),f=d[++g]}},updateChildrenOnMoveChild:function(a,b,c){a=this.getWidget().getVisibleChildren();var d=Math.min(b,c);b=Math.max(b,c)+1;b=Math.min(a.length,b);for(c=d;c<b;c++)a[c].addToLayoutChanges("locationX")},flushChildrenQueue:function(a){var b=this.getWidget(),c=b.getVisibleChildren(),d=c.length,e,f;if(this.getEnableFlexSupport())for(this.invalidateChildrenFlexWidth(),f=0;f<d;f++)e=c[f],e.getHasFlexX()&&(e._computedWidthValue=null,e._recomputeBoxWidth()&&(e._recomputeOuterWidth(),e._recomputeInnerWidth()),a[e.toHashCode()]=e,e._layoutChanges.width=!0);switch(b.getLayoutMode()){case "right":case "left-reversed":for(f=d-1;0<=f&&!a[c[f].toHashCode()];f--);for(a=0;a<=f;a++)b._layoutChild(c[a]);break;case "center":case "center-reversed":f=-1;for(e=c[++f];e;)b._layoutChild(e),e=c[++f];break;default:for(f=-1,d=!1,e=c[++f];e;){if(d||a[e.toHashCode()])b._layoutChild(e),d=!0;e=c[++f]}}},layoutChild:function(a,b){this.layoutChild_sizeX(a,b);this.layoutChild_sizeY(a,b);this.layoutChild_sizeLimitX(a,b);this.layoutChild_sizeLimitY(a,b);this.layoutChild_locationX(a,b);this.layoutChild_locationY(a,b);this.layoutChild_marginX(a,b);this.layoutChild_marginY(a,b)},layoutChild_sizeX:rwt.util.Variant.select("qx.client",{"trident|webkit|blink":function(a,b){if(b.initial||b.width||b.minWidth||b.maxWidth)!a._isWidthEssential()||a._computedWidthTypeNull&&a._computedMinWidthTypeNull&&a._computedMaxWidthTypeNull?a._resetRuntimeWidth():a._renderRuntimeWidth(a.getBoxWidth())},"default":function(a,b){if(b.initial||b.width)a._isWidthEssential()&&!a._computedWidthTypeNull?a._renderRuntimeWidth(a.getWidthValue()):a._resetRuntimeWidth()}}),layoutChild_sizeY:rwt.util.Variant.select("qx.client",{"trident|webkit|blink":function(a,b){if(b.initial||b.height||b.minHeight||b.maxHeight)a._isHeightEssential()&&!(a._computedHeightTypeNull&&a._computedMinHeightTypeNull&&a._computedMaxHeightTypeNull)||a.getAllowStretchY()&&this.getWidget().getStretchChildrenOrthogonalAxis()?a._renderRuntimeHeight(a.getBoxHeight()):a._resetRuntimeHeight()},"default":function(a,b){if(b.initial||b.height)a._isHeightEssential()&&!a._computedHeightTypeNull?a._renderRuntimeHeight(a.getHeightValue()):a._resetRuntimeHeight()}}),layoutChild_locationX:function(a){var b=this.getWidget();if(b.getFirstVisibleChild()==a)switch(b.getLayoutMode()){case "right":case "left-reversed":var c=b.getPaddingRight()+b.getAccumulatedChildrenOuterWidth()-a.getOuterWidth();break;case "center":case "center-reversed":c=b.getPaddingLeft()+Math.round((b.getInnerWidth()-b.getAccumulatedChildrenOuterWidth())/2);break;default:c=b.getPaddingLeft()}else switch(c=a.getPreviousVisibleSibling(),b.getLayoutMode()){case "right":case "left-reversed":c=c._cachedLocationHorizontal-a.getOuterWidth()-b.getSpacing();break;default:c=c._cachedLocationHorizontal+c.getOuterWidth()+b.getSpacing()}a._cachedLocationHorizontal=c;switch(b.getLayoutMode()){case "right":case "right-reversed":case "center-reversed":c+=a._computedRightTypeNull?a._computedLeftTypeNull?0:-a.getLeftValue():a.getRightValue();a._resetRuntimeLeft();a._renderRuntimeRight(c);break;default:c+=a._computedLeftTypeNull?a._computedRightTypeNull?0:-a.getRightValue():a.getLeftValue(),a._resetRuntimeRight(),a._renderRuntimeLeft(c)}},layoutChild_locationY:function(a){var b=this.getWidget();if(rwt.client.Client.isGecko()&&a.getAllowStretchY()&&b.getStretchChildrenOrthogonalAxis()&&a._computedHeightTypeNull)a._renderRuntimeTop(b.getPaddingTop()||0),a._renderRuntimeBottom(b.getPaddingBottom()||0);else{var c=a.getVerticalAlign()||b.getVerticalChildrenAlign(),d="middle"==c?Math.round((b.getInnerHeight()-a.getOuterHeight())/2):0;"bottom"==c?(d+=b.getPaddingBottom(),a._computedBottomTypeNull?a._computedTopTypeNull||(d-=a.getTopValue()):d+=a.getBottomValue(),a._resetRuntimeTop(),a._renderRuntimeBottom(d)):(d+=b.getPaddingTop(),a._computedTopTypeNull?a._computedBottomTypeNull||(d-=a.getBottomValue()):d+=a.getTopValue(),a._resetRuntimeBottom(),a._renderRuntimeTop(d))}}}});rwt.remote.HandlerRegistry.add("rwt.widgets.Label",{factory:function(a){var b=rwt.remote.HandlerUtil.createStyleMap(a.style);b.MARKUP_ENABLED=a.markupEnabled;b=new rwt.widgets.Label(b);rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);b.setUserData("isControl",!0);rwt.remote.HandlerUtil.setParent(b,a.parent);return b},destructor:rwt.remote.HandlerUtil.getControlDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:rwt.remote.HandlerUtil.extendControlProperties("text mnemonicIndex image alignment appearance leftMargin topMargin rightMargin bottomMargin backgroundGradient".split(" ")),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({backgroundGradient:rwt.remote.HandlerUtil.getBackgroundGradientHandler()}),listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({}),methods:["addListener","removeListener"],methodHandler:rwt.remote.HandlerUtil.extendListenerMethodHandler({}),scriptingMethods:rwt.remote.HandlerUtil.extendControlScriptingMethods({getText:function(){return this.getCellContent(1)}})});rwt.qx.Class.define("rwt.widgets.base.Label",{extend:rwt.widgets.base.Terminator,construct:function(a){this.base(arguments);null!=a&&this.setText(a);this.initWidth();this.initHeight();this.initSelectable();this.initCursor();this.initWrap()},properties:{appearance:{refine:!0,init:"label"},width:{refine:!0,init:"auto"},height:{refine:!0,init:"auto"},allowStretchX:{refine:!0,init:!1},allowStretchY:{refine:!0,init:!1},selectable:{refine:!0,init:!1},text:{apply:"_applyText",init:"",dispose:!0,check:"Label"},wrap:{check:"Boolean",init:!1,nullable:!0,apply:"_applyWrap"},textAlign:{check:["left","center","right","justify"],nullable:!0,themeable:!0,apply:"_applyTextAlign"},textOverflow:{check:"Boolean",init:!0},mode:{check:["html","text","auto"],init:"auto"}},members:{_content:"",_applyTextAlign:function(a){null===a?this.removeStyleProperty("textAlign"):this.setStyleProperty("textAlign",a)},_applyFont:function(a){this._styleFont(a)},_styleFont:function(a){this._invalidatePreferredInnerDimensions();a?a.render(this):rwt.html.Font.reset(this)},_applyWrap:function(a){null==a?this.removeStyleProperty("whiteSpace"):this.setStyleProperty("whiteSpace",a?"normal":"nowrap")},_applyText:function(){this._syncText(this.getText())},_syncText:function(a){this._content=a;this._isCreated&&this._renderContent()},_computeObjectNeededDimensions:function(){var a=rwt.widgets.util.FontSizeCalculation.computeTextDimensions(this._content,this._styleProperties);this._cachedPreferredInnerWidth=a[0];this._cachedPreferredInnerHeight=a[1]},_computePreferredInnerWidth:function(){this._computeObjectNeededDimensions();return this._cachedPreferredInnerWidth},_computePreferredInnerHeight:function(){this._computeObjectNeededDimensions();return this._cachedPreferredInnerHeight},_postApply:function(){var a=this._content,b=this._getTargetNode();if(null==a)b.innerHTML="";else{var c=b.style;this.getWrap()||(this.getInnerWidth()<this.getPreferredInnerWidth()?c.overflow="hidden":c.overflow="");b.innerHTML=a}}}});rwt.qx.Class.define("rwt.widgets.base.Image",{extend:rwt.widgets.base.Terminator,construct:function(a,b,c){this.base(arguments);this._blank=rwt.remote.Connection.RESOURCE_PATH+"static/image/blank.gif";null!=a&&this.setSource(a);null!=b?this.setWidth(b):this.initWidth();null!=c?this.setHeight(c):this.initHeight();this.initSelectable()},properties:{allowStretchX:{refine:!0,init:!1},allowStretchY:{refine:!0,init:!1},selectable:{refine:!0,init:!1},width:{refine:!0,init:"auto"},height:{refine:!0,init:"auto"},appearance:{refine:!0,init:"image"},source:{check:"String",apply:"_applySource",event:"changeSource",nullable:!0,themeable:!0},preloader:{check:"rwt.html.ImagePreloader",apply:"_applyPreloader",nullable:!0},loaded:{check:"Boolean",init:!1,apply:"_applyLoaded",event:"changeLoaded"},resizeToInner:{check:"Boolean",init:!1}},members:{_onload:function(){this.setLoaded(!0)},_beforeAppear:function(){var a=this.getSource();a&&(rwt.html.ImageManager.getInstance().show(a),this._registeredAsVisible=!0);return this.base(arguments)},_beforeDisappear:function(){var a=this.getSource();a&&this._registeredAsVisible&&(rwt.html.ImageManager.getInstance().hide(a),delete this._registeredAsVisible);return this.base(arguments)},_applySource:function(a,b){var c=rwt.html.ImageManager.getInstance();b&&(c.remove(b),this._registeredAsVisible&&(c.hide(b),delete this._registeredAsVisible));a&&(c.add(a),this.isSeeable()&&(this._registeredAsVisible=!0,c.show(a)));this.isCreated()&&this._connect()},_connect:function(){this._syncSource(this.getSource())},_syncSource:function(a){null===a?this.setPreloader(null):(a=rwt.html.ImagePreloaderManager.getInstance().create(a),this.setPreloader(a))},_applyPreloader:function(a,b){b&&b.removeEventListener("load",this._onload,this);a?(this.setLoaded(!1),!a.isErroneous()&&a.isLoaded()?this.setLoaded(!0):a.addEventListener("load",this._onload,this)):this.setLoaded(!1)},_applyLoaded:function(a){a&&this.isCreated()?this._renderContent():a||(this._invalidatePreferredInnerWidth(),this._invalidatePreferredInnerHeight())},_applyElement:function(a,b){if(a){if(!this._image){try{this._createImageNode(),this._image.style.border="0 none",this._image.style.verticalAlign="top",this._image.alt="",this._image.title=""}catch(c){throw Error("Failed while creating image #1 "+c);}this._imageNodeCreated()}a.appendChild(this._image)}this.base(arguments,a,b);a&&this.getSource()&&this._connect()},_createImageNode:rwt.util.Variant.select("qx.client",{"webkit|blink":function(){this._image=document.createElement("img")},"default":function(){this._image=new Image}}),_imageNodeCreated:rwt.util.Variant.select("qx.client",{"gecko|webkit|blink":function(){this._styleEnabled()},"default":rwt.util.Functions.returnTrue}),_postApply:function(){this._postApplyDimensions();this._updateContent()},_applyEnabled:function(a,b){this._image&&this._styleEnabled();return this.base(arguments,a,b)},_updateContent:function(){var a=this.getPreloader();this._image.src=a&&a.isLoaded()?a.getSource():this._blank},_resetContent:function(){this._image.src=this._blank},_styleEnabled:function(){if(this._image){var a=!1===this.getEnabled()?.3:"",b=this._image.style;b.opacity=b.KhtmlOpacity=b.MozOpacity=a}},_computePreferredInnerWidth:function(){var a=this.getPreloader();return a?a.getWidth():0},_computePreferredInnerHeight:function(){var a=this.getPreloader();return a?a.getHeight():0},_postApplyDimensions:function(){try{var a=this._image;this.getResizeToInner()?(a.width=this.getInnerWidth(),a.height=this.getInnerHeight()):(a.width=this.getPreferredInnerWidth(),a.height=this.getPreferredInnerHeight())}catch(b){throw Error("postApplyDimensions failed "+b);}},_changeInnerWidth:function(a){this.getResizeToInner()&&(this._image.width=a)},_changeInnerHeight:function(a){this.getResizeToInner()&&(this._image.height=a)}},destruct:function(){this._image&&(this._image.style.filter="");this._disposeFields("_image")}});rwt.qx.Class.define("rwt.html.ImagePreloaderManager",{extend:rwt.qx.Object,statics:{getInstance:function(){return rwt.runtime.Singletons.get(rwt.html.ImagePreloaderManager)}},construct:function(){this.base(arguments);this._objects={}},members:{add:function(a){this._objects[a.getUri()]=a},remove:function(a){delete this._objects[a.getUri()]},has:function(a){return null!=this._objects[a]},get:function(a){return this._objects[a]},create:function(a){return this._objects[a]?this._objects[a]:new rwt.html.ImagePreloader(a)}},destruct:function(){this._disposeFields("_objects")}});rwt.qx.Class.define("rwt.html.ImagePreloader",{extend:rwt.qx.Target,construct:function(a){if(rwt.html.ImagePreloaderManager.getInstance().has(a))return rwt.html.ImagePreloaderManager.getInstance().get(a);this.base(arguments);this._element=new Image;this._element.onload=rwt.util.Functions.bind(this.__onload,this);this._element.onerror=rwt.util.Functions.bind(this.__onerror,this);this._source=a;this._element.src=a;rwt.html.ImagePreloaderManager.getInstance().add(this)},members:{_source:null,_isLoaded:!1,_isErroneous:!1,getUri:function(){return this._source},getSource:function(){return this._source},isLoaded:function(){return this._isLoaded},isErroneous:function(){return this._isErroneous},getWidth:rwt.util.Variant.select("qx.client",{gecko:function(){return this._element.naturalWidth},"default":function(){return this._element.width}}),getHeight:rwt.util.Variant.select("qx.client",{gecko:function(){return this._element.naturalHeight},"default":function(){return this._element.height}}),__onload:function(){try{this._isLoaded||this._isErroneous||(this._isLoaded=!0,this._isErroneous=!1,this.hasEventListeners("load")&&this.dispatchEvent(new rwt.event.Event("load"),!0))}catch(a){rwt.runtime.ErrorHandler.processJavaScriptError(a)}},__onerror:function(){try{this._isLoaded||this._isErroneous||(this._isLoaded=!1,this._isErroneous=!0,this.hasEventListeners("error")&&this.dispatchEvent(new rwt.event.Event("error"),!0))}catch(a){rwt.runtime.ErrorHandler.processJavaScriptError(a)}}},destruct:function(){this._element&&(this._element.onload=this._element.onerror=null);this._disposeFields("_element","_isLoaded","_isErroneous")}});rwt.qx.Class.define("rwt.widgets.util.Layout",{statics:{ORIENTATION_HORIZONTAL:"horizontal",ORIENTATION_VERTICAL:"vertical",ALIGN_LEFT:"left",ALIGN_LEFT_REVERSED:"left-reversed",ALIGN_CENTER:"center",ALIGN_CENTER_REVERSED:"center-reversed",ALIGN_RIGHT:"right",ALIGN_RIGHT_REVERSED:"right-reversed",ALIGN_TOP:"top",ALIGN_TOP_REVERSED:"top-reversed",ALIGN_MIDDLE:"middle",ALIGN_MIDDLE_REVERSED:"middle-reversed",ALIGN_BOTTOM:"bottom",ALIGN_BOTTOM_REVERSED:"bottom-reversed"}});rwt.qx.Class.define("rwt.widgets.base.HorizontalBoxLayout",{extend:rwt.widgets.base.BoxLayout});rwt.qx.Class.define("rwt.widgets.base.Spinner",{extend:rwt.widgets.base.HorizontalBoxLayout,construct:function(a,b,c){this.base(arguments);this._textfield=new rwt.widgets.base.BasicText;this._textfield.setBorder(null);this._textfield.setWidth("1*");this._textfield.setAllowStretchY(!0);this._textfield.setHeight(null);this._textfield.setVerticalAlign("middle");this._textfield.setAppearance("spinner-text-field");this.add(this._textfield);this._buttonlayout=new rwt.widgets.base.VerticalBoxLayout;this._buttonlayout.setWidth("auto");this.add(this._buttonlayout);this._upbutton=new rwt.widgets.base.BasicButton("push",!0);this._upbutton.setAppearance("spinner-button-up");this._upbutton.setTabIndex(null);this._upbutton.setHeight("1*");this._buttonlayout.add(this._upbutton);this._downbutton=new rwt.widgets.base.BasicButton("push",!0);this._downbutton.setAppearance("spinner-button-down");this._downbutton.setTabIndex(null);this._downbutton.setHeight("1*");this._buttonlayout.add(this._downbutton);this._timer=new rwt.client.Timer(this.getInterval());this.setManager(new rwt.util.Range);this.initWrap();this.addEventListener("keypress",this._onkeypress,this);this.addEventListener("keydown",this._onkeydown,this);this.addEventListener("keyup",this._onkeyup,this);this.addEventListener("mousewheel",this._onmousewheel,this);this._textfield.addEventListener("changeValue",this._ontextchange,this);this._textfield.addEventListener("input",this._oninput,this);this._textfield.addEventListener("blur",this._onblur,this);this._textfield.addEventListener("keypress",this._onkeypress,this);this._upbutton.addEventListener("mousedown",this._onmousedown,this);this._downbutton.addEventListener("mousedown",this._onmousedown,this);this._timer.addEventListener("interval",this._oninterval,this);null!=a&&this.setMin(a);null!=c&&this.setMax(c);null!=b&&this.setValue(b);this._checkValue=this.__checkValue;this.initWidth();this.initHeight();this._last_value=""},events:{change:"rwt.event.DataEvent"},properties:{appearance:{refine:!0,init:"spinner"},width:{refine:!0,init:60},height:{refine:!0,init:22},incrementAmount:{check:"Number",init:1,apply:"_applyIncrementAmount"},wheelIncrementAmount:{check:"Number",init:1},pageIncrementAmount:{check:"Number",init:10},interval:{check:"Integer",init:100},firstInterval:{check:"Integer",init:500},minTimer:{check:"Integer",init:20},timerDecrease:{check:"Integer",init:2},amountGrowth:{check:"Number",init:1.01},wrap:{check:"Boolean",init:!1,apply:"_applyWrap"},editable:{check:"Boolean",init:!0,apply:"_applyEditable"},manager:{check:"rwt.util.Range",apply:"_applyManager",dispose:!0},checkValueFunction:{apply:"_applyCheckValueFunction"},selectTextOnInteract:{check:"Boolean",init:!0}},members:{_applyIncrementAmount:function(a){this._computedIncrementAmount=a},_applyEditable:function(a){this._textfield&&this._textfield.setReadOnly(!a)},_applyWrap:function(a){this.getManager().setWrap(a);this._onchange()},_applyManager:function(a,b){b&&b.removeEventListener("change",this._onchange,this);a&&a.addEventListener("change",this._onchange,this);this._onchange()},_applyCheckValueFunction:function(a){this._checkValue=a},_computePreferredInnerWidth:function(){return 50},_computePreferredInnerHeight:function(){return 14},_onkeypress:function(a){var b=a.getKeyIdentifier();if("Enter"!=b||a.isAltPressed())switch(b){case "Up":case "Down":case "Left":case "Right":case "Shift":case "Control":case "Alt":case "Escape":case "Delete":case "Backspace":case "Insert":case "Home":case "End":case "PageUp":case "PageDown":case "NumLock":case "Tab":break;default:this._isMinus(b)||this._isNumber(b)||(b=a.getModifiers(),0!==b&&b!==rwt.event.DomEvent.SHIFT_MASK||a.preventDefault())}else this._checkValue(!0,!1),this.getSelectTextOnInteract()&&this._textfield.selectAll()},_isMinus:function(a){var b=this._textfield._getSelectionStart(),c=this._textfield.getValue();return"-"===a&&0===b&&!/-/.test(c)},_isNumber:function(a){return"0"<=a&&"9">=a},_onkeydown:function(a){a=a.getKeyIdentifier();if(null==this._intervalIncrease)switch(a){case "Up":case "Down":this._intervalIncrease="Up"==a;this._intervalMode="single";this._resetIncrements();this._checkValue(!0,!1);this._increment();this._timer.startWith(this.getFirstInterval());break;case "PageUp":case "PageDown":this._intervalIncrease="PageUp"==a,this._intervalMode="page",this._resetIncrements(),this._checkValue(!0,!1),this._pageIncrement(),this._timer.startWith(this.getFirstInterval())}},_onkeyup:function(a){if(null!=this._intervalIncrease)switch(a.getKeyIdentifier()){case "Up":case "Down":case "PageUp":case "PageDown":this._timer.stop(),this._intervalMode=this._intervalIncrease=null}},_onmousedown:function(a){a.isLeftButtonPressed()&&(this._checkValue(!0),a=a.getCurrentTarget(),a.addState("pressed"),a.addEventListener("mouseup",this._onmouseup,this),a.addEventListener("mouseout",this._onmouseup,this),this._intervalIncrease=a==this._upbutton,this._resetIncrements(),this._increment(),this.getSelectTextOnInteract()&&this._textfield.selectAll(),this._timer.setInterval(this.getFirstInterval()),this._timer.start())},_onmouseup:function(a){a=a.getCurrentTarget();a.removeState("pressed");a.removeEventListener("mouseup",this._onmouseup,this);a.removeEventListener("mouseout",this._onmouseup,this);this.getSelectTextOnInteract()&&this._textfield.selectAll();this._textfield.setFocused(!0);this._timer.stop();this._intervalIncrease=null},_onmousewheel:function(a){this._checkValue(!0);if(this.getManager().incrementValue)this.getManager().incrementValue(this.getWheelIncrementAmount()*a.getWheelDelta());else{var b=this.getManager().getValue()+this.getWheelIncrementAmount()*a.getWheelDelta(),b=this.getManager().limit(b);this.getManager().setValue(b)}this.getSelectTextOnInteract()&&this._textfield.selectAll();a.preventDefault();a.stopPropagation()},_ontextchange:function(a){this._last_value=a.getOldValue()},_oninput:function(){this._checkValue(!0,!0)},_onchange:function(){var a=this.getManager().getValue();this._textfield.setValue(String(a));a!=this.getMin()||this.getWrap()?this._downbutton.resetEnabled():(this._downbutton.removeState("pressed"),this._downbutton.setEnabled(!1),this._timer.stop());a!=this.getMax()||this.getWrap()?this._upbutton.resetEnabled():(this._upbutton.removeState("pressed"),this._upbutton.setEnabled(!1),this._timer.stop());this.createDispatchDataEvent("change",a)},_onblur:function(){this._checkValue(!1)},setValue:function(a){this.getManager().setValue(this.getManager().limit(a))},getValue:function(){this._checkValue(!0);return this.getManager().getValue()},resetValue:function(){this.getManager().resetValue()},setMax:function(a){return this.getManager().setMax(a)},getMax:function(){return this.getManager().getMax()},setMin:function(a){return this.getManager().setMin(a)},getMin:function(){return this.getManager().getMin()},_intervalIncrease:null,_oninterval:function(){this._timer.stop();this.setInterval(Math.max(this.getMinTimer(),this.getInterval()-this.getTimerDecrease()));"page"==this._intervalMode?this._pageIncrement():(this.getInterval()==this.getMinTimer()&&(this._computedIncrementAmount*=this.getAmountGrowth()),this._increment());var a=this.getManager().getWrap();switch(this._intervalIncrease){case !0:(this.getValue()!=this.getMax()||a)&&this._timer.restartWith(this.getInterval());break;case !1:(this.getValue()!=this.getMin()||a)&&this._timer.restartWith(this.getInterval())}},__checkValue:function(a,b){var c=this._textfield.getInputElement();if(c)if(""===c.value||"-"===c.value)a||this.resetValue();else{var c=c.value,d=parseFloat(c),e=this.getManager().limit(d),f=this.getManager().getValue(),g=e;if(isNaN(d)||e!=d||d!=c)b?this._textfield.setValue(this._last_value):g=isNaN(e)?f:e;b||(d=String(g),g===f&&c!==d&&this._textfield.setValue(d),this.getManager().setValue(g))}},_increment:function(){if(this.getManager().incrementValue)this.getManager().incrementValue((this._intervalIncrease?1:-1)*this._computedIncrementAmount);else{var a=this.getManager().getValue()+(this._intervalIncrease?1:-1)*this._computedIncrementAmount,a=this.getManager().limit(a);this.getManager().setValue(a)}},_pageIncrement:function(){if(this.getManager().pageIncrementValue)this.getManager().pageIncrementValue();else{var a=this.getManager().getValue()+(this._intervalIncrease?1:-1)*this.getPageIncrementAmount(),a=this.getManager().limit(a);this.getManager().setValue(a)}},_resetIncrements:function(){this._computedIncrementAmount=this.getIncrementAmount();this.resetInterval()}},destruct:function(){var a=this.getManager();a&&a.dispose();this._disposeObjects("_textfield","_buttonlayout","_upbutton","_downbutton","_timer")}});rwt.qx.Class.define("rwt.widgets.base.BasicText",{extend:rwt.widgets.base.Terminator,construct:function(a){this.base(arguments);null!=a&&this.setValue(a);this.initWidth();this.initHeight();this.initTabIndex();this._selectionLength=this._selectionStart=0;this.__oninput=rwt.util.Functions.bind(this._oninput,this);this.addEventListener("blur",this._onblur);this.addEventListener("keydown",this._onkeydown);this.addEventListener("keypress",this._onkeypress);this.addEventListener("keyup",this._onkeyup,this);this.addEventListener("mousedown",this._onMouseDownUp,this);this.addEventListener("mouseup",this._onMouseDownUp,this);this._typed=null;this._selectionNeedsUpdate=!1;this._applyBrowserFixes();this._inputOverflow="hidden"},destruct:function(){null!=this._inputElement&&this._inputElement.removeEventListener("input",this.__oninput,!1);this.__font=this._inputElement=null;this._checkTimer&&(this._checkTimer.dispose(),this._checkTimer=null)},events:{input:"rwt.event.DataEvent"},properties:{allowStretchX:{refine:!0,init:!0},allowStretchY:{refine:!0,init:!1},appearance:{refine:!0,init:"text-field"},tabIndex:{refine:!0,init:1},hideFocus:{refine:!0,init:!0},width:{refine:!0,init:"auto"},height:{refine:!0,init:"auto"},selectable:{refine:!0,init:!0},value:{init:"",nullable:!0,event:"changeValue",apply:"_applyValue",dispose:!0},textAlign:{check:["left","center","right","justify"],nullable:!0,themeable:!0,apply:"_applyTextAlign"},maxLength:{check:"Integer",apply:"_applyMaxLength",nullable:!0},readOnly:{check:"Boolean",apply:"_applyReadOnly",init:!1,event:"changeReadOnly"}},members:{_inputTag:"input",_inputType:"text",_inputElement:null,setSelection:function(a){this._selectionStart=a[0];this._selectionLength=a[1]-a[0];this._renderSelection()},getSelection:function(){return[this._selectionStart,this._selectionStart+this._selectionLength]},getComputedSelection:function(){var a=this._getSelectionStart(),b=this._getSelectionLength();return[a,a+b]},getComputedValue:function(){return this.isCreated()?this._inputElement.value:this.getValue()},getInputElement:function(){this._inputElement||this.isDisposed()||(this._inputElement=document.createElement(this._inputTag),this._inputType&&(this._inputElement.type=this._inputType),this._inputElement.style.position="absolute",this._inputElement.autoComplete="off",this._inputElement.setAttribute("autoComplete","off"));return this._inputElement||null},_renderSelection:function(){this.isCreated()&&(this.getFocused()||this.getParent().getFocused())&&(this._setSelectionStart(this._selectionStart),this._setSelectionLength(this._selectionLength),this._selectionNeedsUpdate=!1)},_detectSelectionChange:function(){if(this._isCreated){var a=this._getSelectionStart(),b=this._getSelectionLength();"undefined"===typeof a&&(a=0);"undefined"===typeof b&&(b=0);this._selectionStart===a&&this._selectionLength===b||this._handleSelectionChange(a,b)}},_handleSelectionChange:function(a,b){this._selectionStart=a;this._selectionLength=b;this.dispatchSimpleEvent("selectionChanged")},_setSelectionStart:function(a){this._visualPropertyCheck();try{this._inputElement.selectionStart!==a&&(this._inputElement.selectionStart=a)}catch(b){}},_getSelectionStart:function(){this._visualPropertyCheck();try{return this.isValidString(this._inputElement.value)?this._inputElement.selectionStart:0}catch(a){return 0}},_setSelectionLength:function(a){this._visualPropertyCheck();try{if(this.isValidString(this._inputElement.value)){var b=this._inputElement.selectionStart+a;this._inputElement.selectionEnd!=b&&(this._inputElement.selectionEnd=b)}}catch(c){}},_getSelectionLength:function(){this._visualPropertyCheck();try{return this._inputElement.selectionEnd-this._inputElement.selectionStart}catch(a){return 0}},selectAll:function(){this._visualPropertyCheck();null!=this.getValue()&&(this._setSelectionStart(0),this._setSelectionLength(this._inputElement.value.length));this._inputElement.select();this.isEnabled()&&this.isSeeable()&&this._inputElement.focus();this._detectSelectionChange()},_applyElement:function(a,b){this.base(arguments,a,b);if(a){var c=this.getInputElement();c.disabled=!1===this.getEnabled();c.readOnly=this.getReadOnly();c.value=null!=this.getValue()?this.getValue().toString():"";null!=this.getMaxLength()&&(c.maxLength=this.getMaxLength());c.style.padding=0;c.style.margin=0;c.style.border="0 none";c.style.background="transparent";rwt.client.Client.isTrident()&&(c.style.verticalAlign="top");c.style.overflow=this._inputOverflow;c.style.outline="none";c.style.resize="none";c.style.WebkitAppearance="none";c.style.MozAppearance="none";this._renderFont();this._renderTextColor();this._renderTextAlign();this._renderCursor();this._renderTextShadow();this._textInit();this._getTargetNode().appendChild(this._inputElement)}},_textInit:function(){this._inputElement.addEventListener("input",this.__oninput,!1);this._applyBrowserFixesOnCreate()},_postApply:function(){this._syncFieldWidth();this._syncFieldHeight()},_changeInnerWidth:function(){this._syncFieldWidth()},_changeInnerHeight:function(){this._syncFieldHeight();this._centerFieldVertically()},_syncFieldWidth:function(){this._inputElement.style.width=Math.max(2,this.getInnerWidth())+"px"},_syncFieldHeight:function(){"input"!==this._inputTag&&(this._inputElement.style.height=this.getInnerHeight()+"px")},_applyCursor:function(){this.isCreated()&&this._renderCursor()},_renderCursor:function(){var a=this.getCursor();this._inputElement.style.cursor=a?a:""},_applyTextAlign:function(){this._inputElement&&this._renderTextAlign()},_renderTextAlign:function(){var a=this.getTextAlign();"rtl"===this.getDirection()&&("left"===a?a="right":"right"===a&&(a="left"));this._inputElement.style.textAlign=a||""},_applyEnabled:function(a,b){this.isCreated()&&(this._inputElement.disabled=!1===a);return this.base(arguments,a,b)},_applyValue:function(){this._renderValue();this._detectSelectionChange()},_renderValue:function(){this._inValueProperty=!0;var a=this.getValue();this.isCreated()&&(null===a&&(a=""),this._inputElement.value!==a&&(this._inputElement.value=a));delete this._inValueProperty},_applyMaxLength:function(a){this._inputElement&&(this._inputElement.maxLength=null==a?"":a)},_applyReadOnly:function(a){this._inputElement&&(this._inputElement.readOnly=a);this.toggleState("readonly",a)},_renderTextColor:function(){if(this.isCreated()){var a=this.getEnabled()?this.getTextColor():this.__theme$textColor;this._textColor!==a&&(this._textColor=a,rwt.html.Style.setStyleProperty(this._inputElement,"color",a||""))}},_applyFont:function(a){this._styleFont(a)},_styleFont:function(a){this.__font=a;this._renderFont()},_renderFont:function(){this.isCreated()&&(null!=this.__font?this.__font.renderElement(this._inputElement):rwt.html.Font.resetElement(this._inputElement))},_applyTextShadow:function(a){this.__textShadow=a;this._inputElement&&this._renderTextShadow()},_renderTextShadow:function(){rwt.html.Style.setTextShadow(this._inputElement,this.__textShadow)},_visualizeFocus:function(){this.base(arguments);if(!rwt.widgets.util.FocusHandler.blockFocus)try{this._inputElement.focus()}catch(a){}},_visualizeBlur:function(){this.base(arguments);try{this._inputElement.blur()}catch(a){}},_afterAppear:function(){this.base(arguments);this._centerFieldVertically();this._renderSelection()},_centerFieldVertically:function(){if("input"===this._inputTag&&this._inputElement){var a=this.getInnerHeight(),b=this._inputElement.offsetHeight;0!==b&&(a=(a-b)/2,0>a&&(a=0),this._inputElement.style.top=Math.floor(a)+"px")}},_oninput:function(){try{var a=!0;this.hasEventListeners("input")&&(a=this.dispatchEvent(new rwt.event.DataEvent("input",this._typed),!0));if(a)rwt.client.Timer.once(this._updateValueProperty,this,0);else if(rwt.client.Client.isWebkit()||rwt.client.Client.isBlink())rwt.client.Timer.once(this._renderSelection,this,0),this._selectionNeedsUpdate=!0}catch(b){rwt.runtime.ErrorHandler.processJavaScriptError(b)}},_updateValueProperty:function(){this.isDisposed()||this.setValue(this.getComputedValue().toString())},_ontabfocus:function(){this.selectAll()},_applyFocused:function(a,b){this.base(arguments,a,b);a&&!rwt.widgets.util.FocusHandler.mouseFocus&&this._renderSelection()},_onblur:function(){null!=this.getParent()&&this._setSelectionLength(0)},_onkeydown:function(a){"Backspace"==a.getKeyIdentifier()&&this.getReadOnly()&&a.preventDefault();this._detectSelectionChange();this._typed=null},_onkeypress:function(a){"Tab"!==a.getKeyIdentifier()&&a.stopPropagation();this._selectionNeedsUpdate&&this._renderSelection();this._detectSelectionChange();this._typed=String.fromCharCode(a.getCharCode())},_onkeyup:function(){this._selectionNeedsUpdate&&this._renderSelection();this._detectSelectionChange();this._typed=null},_onMouseDownUp:function(){this._detectSelectionChange();this._typed=null},_applyBrowserFixes:rwt.util.Variant.select("qx.client",{"default":function(){},trident:function(){this._checkTimer=new rwt.client.Timer(0);this._checkTimer.addEventListener("interval",this._checkValueChanged,this);this.addEventListener("keypress",this._checkTimer.start,this._checkTimer);this.addEventListener("keyup",this._checkTimer.start,this._checkTimer);this.addEventListener("mousemove",this._checkValueChanged,this);this.addEventListener("mouseout",this._checkValueChanged,this);this.addEventListener("blur",this._checkValueChanged,this)}}),_checkValueChanged:function(){this._checkTimer.stop();var a=this.getComputedValue(),b=this.getValue();a!==b&&this._oninput()},_applyBrowserFixesOnCreate:rwt.util.Variant.select("qx.client",{"default":function(){},"webkit|blink":function(){this.addEventListener("keydown",this._preventEnter,this);this.addEventListener("keypress",this._preventEnter,this);this.addEventListener("keyup",this._preventEnter,this);this._applyIOSFixes()}}),_applyIOSFixes:function(){if("ios"===rwt.client.Client.getPlatform()){var a=rwt.util.Functions.bind(function(){var a=rwt.remote.WidgetManager.getInstance().findControl(this);a.getFocusRoot().setFocusedChild(a)},this);this._inputElement.addEventListener("focus",a,!1);this.addEventListener("dispose",function(){null!=this._inputElement&&this._inputElement.removeEventListener("focus",a,!1)})}},_preventEnter:function(a){"Enter"===a.getKeyIdentifier()&&a.preventDefault()},isValidString:function(a){return"string"===typeof a&&""!==a}}});rwt.qx.Class.define("rwt.widgets.base.VerticalBoxLayout",{extend:rwt.widgets.base.BoxLayout,properties:{orientation:{refine:!0,init:"vertical"}}});rwt.qx.Class.define("rwt.util.Range",{extend:rwt.qx.Target,events:{change:"rwt.event.Event"},properties:{value:{check:"!isNaN(value)\x26\x26value\x3e\x3dthis.getMin()\x26\x26value\x3c\x3dthis.getMax()",nullable:!0,event:"change",init:0},precision:{check:"Integer",nullable:!0,event:"change",init:0},min:{check:"Number",apply:"_applyMin",event:"change",init:0},max:{check:"Number",apply:"_applyMax",event:"change",init:100},wrap:{check:"Boolean",init:!1}},members:{_applyMax:function(a){this.setValue(Math.min(this.getValue(),a))},_applyMin:function(a){this.setValue(Math.max(this.getValue(),a))},limit:function(a){var b=this.getPrecision();if(null!=b)var c=Math.pow(10,b);if(this.getWrap()){null!=b&&(a=Math.round(a*c)/c);if(a<this.getMin())return this.getMax()-(this.getMin()-a)+1;if(a>this.getMax())return this.getMin()+(a-this.getMax())-1}return a<this.getMin()?this.getMin():a>this.getMax()?this.getMax():null!=b?Math.round(a*c)/c:a}}});rwt.qx.Class.define("rwt.widgets.TabFolder",{extend:rwt.widgets.base.BoxLayout,construct:function(){this.base(arguments);this.addEventListener("changeFocused",rwt.widgets.util.TabUtil.onTabFolderChangeFocused);this.addEventListener("keypress",rwt.widgets.util.TabUtil.onTabFolderKeyPress);this._bar=new rwt.widgets.base.TabFolderBar;this._pane=new rwt.widgets.base.TabFolderPane;this.add(this._bar,this._pane);this.setEnableElementFocus(!1)},properties:{appearance:{refine:!0,init:"tab-view"},orientation:{refine:!0,init:"vertical"},alignTabsToLeft:{check:"Boolean",init:!0,apply:"_applyAlignTabsToLeft"},placeBarOnTop:{check:"Boolean",init:!0,apply:"_applyPlaceBarOnTop"}},members:{getPane:function(){return this._pane},getBar:function(){return this._bar},_applyDirection:function(a){this.base(arguments,a);var b="rtl"===a;this._bar.setReverseChildrenOrder(b);this.setAlignTabsToLeft(!b)},_applyAlignTabsToLeft:function(a){this._bar.setHorizontalChildrenAlign(a?"left":"right");this._bar._addChildrenToStateQueue()},_applyPlaceBarOnTop:function(a){a?this._bar.moveSelfToBegin():this._bar.moveSelfToEnd();this._bar._addChildrenToStateQueue()}},destruct:function(){this._disposeObjects("_bar","_pane")}});rwt.qx.Class.define("rwt.widgets.util.RadioManager",{extend:rwt.qx.Target,construct:function(a,b){this.base(arguments);this._items=[];this.setName(null!=a?a:rwt.widgets.util.RadioManager.AUTO_NAME_PREFIX+this.toHashCode());null!=b&&this.add.apply(this,b)},statics:{AUTO_NAME_PREFIX:"qx-radio-"},properties:{selected:{nullable:!0,apply:"_applySelected",event:"changeSelected",check:"rwt.qx.Object"},name:{check:"String",nullable:!0,apply:"_applyName"}},members:{getItems:function(){return this._items},getEnabledItems:function(){for(var a=[],b=0,c=this._items,d=c.length;b<d;b++)c[b].getEnabled()&&a.push(c[b]);return a},handleItemChecked:function(a,b){b?this.setSelected(a):this.getSelected()==a&&this.setSelected(null)},add:function(){for(var a=arguments,b=a.length,c,d=0;d<b;d++){c=a[d];if(rwt.util.Arrays.contains(this._items,c))break;this._items.push(c);c.setManager(this);c.getChecked()&&this.setSelected(c);c.setName(this.getName())}},remove:function(a){rwt.util.Arrays.remove(this._items,a);a.setManager(null);a.getChecked()&&this.setSelected(null)},_applySelected:function(a,b){b&&b.setChecked(!1);a&&a.setChecked(!0)},_applyName:function(a){for(var b=0,c=this._items,d=c.length;b<d;b++)c[b].setName(a)},selectNext:function(a){a=this._items.indexOf(a);if(-1!=a){var b=0,c=this._items.length;for(a=(a+1)%c;b<c&&!this._items[a].getEnabled();)a=(a+1)%c,b++;this._selectByIndex(a)}},selectPrevious:function(a){a=this._items.indexOf(a);if(-1!=a){var b=0,c=this._items.length;for(a=(a-1+c)%c;b<c&&!this._items[a].getEnabled();)a=(a-1+c)%c,b++;this._selectByIndex(a)}},_selectByIndex:function(a){this._items[a].getEnabled()&&(this.setSelected(this._items[a]),this._items[a].setFocused(!0))}},destruct:function(){this._disposeObjectDeep("_items",1)}});rwt.qx.Class.define("rwt.widgets.base.TabFolderBar",{extend:rwt.widgets.base.BoxLayout,construct:function(){this.base(arguments);this.initZIndex();this.initHeight();this._manager=new rwt.widgets.util.RadioManager},properties:{appearance:{refine:!0,init:"tab-view-bar"},zIndex:{refine:!0,init:2},height:{refine:!0,init:"auto"}},members:{getManager:function(){return this._manager}},destruct:function(){this._disposeObjects("_manager")}});rwt.qx.Class.define("rwt.widgets.base.TabFolderPane",{extend:rwt.widgets.base.Parent,construct:function(){this.base(arguments);this.initZIndex();this.initHeight()},properties:{appearance:{refine:!0,init:"tab-view-pane"},zIndex:{refine:!0,init:1},height:{refine:!0,init:"1*"}}});rwt.qx.Class.define("rwt.widgets.base.Popup",{extend:rwt.widgets.base.Parent,construct:function(){this.base(arguments);this.setZIndex(this._minZIndex);this._isFocusRoot&&this.activateFocusRoot();this.initHeight();this.initWidth()},properties:{appearance:{refine:!0,init:"popup"},width:{refine:!0,init:"auto"},height:{refine:!0,init:"auto"},display:{refine:!0,init:!1},autoHide:{check:"Boolean",init:!0},centered:{check:"Boolean",init:!1},restrictToPageOnOpen:{check:"Boolean",init:!0},restrictToPageLeft:{check:"Integer",init:0},restrictToPageRight:{check:"Integer",init:0},restrictToPageTop:{check:"Integer",init:0},restrictToPageBottom:{check:"Integer",init:0}},members:{_isFocusRoot:!1,_showTimeStamp:(new Date(0)).valueOf(),_hideTimeStamp:(new Date(0)).valueOf(),getFocusRoot:function(){return this.isFocusRoot()?this:null},_beforeAppear:function(){this.base(arguments);this.getRestrictToPageOnOpen()&&(this._wantedLeft=this.getLeft(),null!=this._wantedLeft&&(this.setLeft(1E4),null!=this.getElement()&&(this.getElement().style.left=1E4)));rwt.widgets.util.PopupManager.getInstance().add(this);rwt.widgets.util.PopupManager.getInstance().update(this);this._showTimeStamp=(new Date).valueOf();this.bringToFront()},_beforeDisappear:function(){this.base(arguments);rwt.widgets.util.PopupManager.getInstance().remove(this);this._hideTimeStamp=(new Date).valueOf()},_afterAppear:function(){this.base(arguments);if(this.getRestrictToPageOnOpen()){var a=rwt.widgets.base.ClientDocument.getInstance(),b=a.getClientWidth(),a=a.getClientHeight(),c=rwt.html.Viewport.getScrollTop(),d=rwt.html.Viewport.getScrollLeft(),e=this.getRestrictToPageLeft()+d,d=this.getRestrictToPageRight()-d,f=this.getRestrictToPageTop()+c,c=this.getRestrictToPageBottom()-c,g=null==this._wantedLeft?this.getLeft():this._wantedLeft,h=this.getTop(),k=this.getBoxWidth(),l=this.getBoxHeight(),m=this.getLeft(),n=h;g+k>b-d&&(g=b-d-k);h+l>a-c&&(h=a-c-l);g<e&&(g=e);h<f&&(h=f);if(g!=m||h!=n){var p=this;window.setTimeout(function(){p.setLeft(g);p.setTop(h)},0)}}},_makeActive:function(){this.getFocusRoot().setActiveChild(this)},_makeInactive:function(){var a=this.getFocusRoot();a.getActiveChild()==this&&a.setActiveChild(a)},_minZIndex:1E6,bringToFront:function(){this.setZIndex(this._minZIndex+1E6);this._sendTo()},_sendTo:function(){for(var a=rwt.util.Objects.getValues(rwt.widgets.util.PopupManager.getInstance().getAll()),b=rwt.event.EventHandler.getMenuManager(),b=rwt.util.Objects.getValues(b.getAll()),a=a.concat(b).sort(function(a,b){return a.getZIndex()-b.getZIndex()}),b=a.length,c=this._minZIndex,d=0;d<b;d++)a[d].setZIndex(c++)},getShowTimeStamp:function(){return this._showTimeStamp},getHideTimeStamp:function(){return this._hideTimeStamp},positionRelativeTo:function(a,b,c){a instanceof rwt.widgets.base.Widget&&(a=a.getElement());if(a)a=rwt.html.Location.get(a),this.setLocation(a.left+(b||0),a.top+(c||0));else throw Error("Missing reference element");},centerToBrowser:function(){var a=rwt.widgets.base.ClientDocument.getInstance(),b=(a.getClientWidth()-this.getBoxWidth())/2,a=(a.getClientHeight()-this.getBoxHeight())/2;this.setLeft(0>b?0:b);this.setTop(0>a?0:a)}},destruct:function(){rwt.widgets.util.PopupManager.getInstance().remove(this);this._disposeFields("_showTimeStamp","_hideTimeStamp")}});rwt.qx.Class.define("rwt.widgets.util.PopupManager",{extend:rwt.util.ObjectManager,statics:{getInstance:function(){return rwt.runtime.Singletons.get(rwt.widgets.util.PopupManager)}},members:{update:function(a){a instanceof rwt.widgets.base.Widget||(a=null);var b,c,d=this.getAll();for(c in d)b=d[c],b.getAutoHide()&&a!=b&&!b.contains(a)&&b.hide()}}});rwt.qx.Class.define("rwt.widgets.util.SelectionManager",{extend:rwt.qx.Target,construct:function(a){this.base(arguments);this._selectedItems=new rwt.widgets.util.Selection;null!=a&&this.setBoundedWidget(a)},events:{changeSelection:"rwt.event.DataEvent"},properties:{boundedWidget:{check:"rwt.widgets.base.Widget",nullable:!0},multiSelection:{check:"Boolean",init:!0},dragSelection:{check:"Boolean",init:!0},canDeselect:{check:"Boolean",init:!0},fireChange:{check:"Boolean",init:!0},anchorItem:{check:"Object",nullable:!0,apply:"_applyAnchorItem",event:"changeAnchorItem"},leadItem:{check:"Object",nullable:!0,apply:"_applyLeadItem",event:"changeLeadItem"},multiColumnSupport:{check:"Boolean",init:!1}},members:{_applyAnchorItem:function(a,b){b&&this.renderItemAnchorState(b,!1);a&&this.renderItemAnchorState(a,!0)},_applyLeadItem:function(a,b){b&&this.renderItemLeadState(b,!1);a&&this.renderItemLeadState(a,!0)},_getFirst:function(){return this.getBoundedWidget().getFirstVisibleChild()},_getLast:function(){return this.getBoundedWidget().getLastVisibleChild()},getFirst:function(){var a=this._getFirst();if(a)return a.getEnabled()?a:this.getNext(a)},getLast:function(){var a=this._getLast();if(a)return a.getEnabled()?a:this.getPrevious(a)},getItems:function(){return this.getBoundedWidget().getChildren()},getNextSibling:function(a){return a.getNextSibling()},getPreviousSibling:function(a){return a.getPreviousSibling()},getNext:function(a){for(;a;){a=this.getNextSibling(a);if(!a)break;if(this.getItemEnabled(a))return a}return null},getPrevious:function(a){for(;a;){a=this.getPreviousSibling(a);if(!a)break;if(this.getItemEnabled(a))return a}return null},isBefore:function(a,b){var c=this.getItems();return c.indexOf(a)<c.indexOf(b)},isEqual:function(a,b){return a==b},getItemHashCode:function(a){return a.toHashCode()},scrollItemIntoView:function(a,b){a.scrollIntoView(b)},getItemLeft:function(a){return a.getOffsetLeft()},getItemTop:function(a){return a.getOffsetTop()},getItemWidth:function(a){return a.getOffsetWidth()},getItemHeight:function(a){return a.getOffsetHeight()},getItemEnabled:function(a){return a.getEnabled()},renderItemSelectionState:function(a,b){a.toggleState("selected",b);a.handleStateChange&&a.handleStateChange()},renderItemAnchorState:function(a,b){a.toggleState("anchor",b);null!=a.handleStateChange&&a.handleStateChange()},renderItemLeadState:function(a,b){a.toggleState("lead",b);null!=a.handleStateChange&&a.handleStateChange()},getItemSelected:function(a){return this._selectedItems.contains(a)},setItemSelected:function(a,b){switch(this.getMultiSelection()){case !0:if(!this.getItemEnabled(a))break;if(this.getItemSelected(a)==b)break;this.renderItemSelectionState(a,b);b?this._selectedItems.add(a):this._selectedItems.remove(a);this._dispatchChange();break;case !1:var c=this.getSelectedItems()[0];b?this.isEqual(a,c)||(null!=c&&this.renderItemSelectionState(c,!1),this.renderItemSelectionState(a,!0),this._selectedItems.removeAll(),this._selectedItems.add(a),this._dispatchChange()):this.isEqual(c,a)||(this.renderItemSelectionState(a,!1),this._dispatchChange())}},getSelectedItems:function(){return this._selectedItems.toArray()},getSelectedItem:function(){return this._selectedItems.getFirst()},setSelectedItems:function(a){var b=this._getChangeValue(),c=this.getFireChange();this.setFireChange(!1);this._deselectAll();for(var d,e=a.length,f=0;f<e;f++)d=a[f],this.getItemEnabled(d)&&(this._selectedItems.add(d),this.renderItemSelectionState(d,!0));this.setFireChange(c);c&&this._hasChanged(b)&&this._dispatchChange()},setSelectedItem:function(a){if(a&&this.getItemEnabled(a)){var b=this._getChangeValue(),c=this.getFireChange();this.setFireChange(!1);this._deselectAll();this._selectedItems.add(a);this.renderItemSelectionState(a,!0);this.setFireChange(c);c&&this._hasChanged(b)&&this._dispatchChange()}},selectAll:function(){var a=this._getChangeValue(),b=this.getFireChange();this.setFireChange(!1);this._selectAll();this.setFireChange(b);b&&this._hasChanged(a)&&this._dispatchChange()},_selectAll:function(){if(this.getMultiSelection()){var a,b=this.getItems(),c=b.length;this._selectedItems.removeAll();for(var d=0;d<c;d++)a=b[d],this.getItemEnabled(a)&&(this._selectedItems.add(a),this.renderItemSelectionState(a,!0));return!0}},deselectAll:function(){var a=this._getChangeValue(),b=this.getFireChange();this.setFireChange(!1);this._deselectAll();this.setFireChange(b);b&&this._hasChanged(a)&&this._dispatchChange()},_deselectAll:function(){for(var a=this._selectedItems.toArray(),b=0;b<a.length;b++)this.renderItemSelectionState(a[b],!1);this._selectedItems.removeAll();return!0},selectItemRange:function(a,b){var c=this._getChangeValue(),d=this.getFireChange();this.setFireChange(!1);this._selectItemRange(a,b,!0);this.setFireChange(d);d&&this._hasChanged(c)&&this._dispatchChange()},_selectItemRange:function(a,b,c){if(this.isBefore(b,a))return this._selectItemRange(b,a,c);for(c&&this._deselectAll();null!=a;){this.getItemEnabled(a)&&(this._selectedItems.add(a),this.renderItemSelectionState(a,!0));if(this.isEqual(a,b))break;a=this.getNext(a)}return!0},_deselectItemRange:function(a,b){if(this.isBefore(b,a))return this._deselectItemRange(b,a);for(var c=a;null!=c;){this._selectedItems.remove(c);this.renderItemSelectionState(c,!1);if(this.isEqual(c,b))break;c=this.getNext(c)}},_activeDragSession:!1,handleMouseDown:function(a,b){b.stopPropagation();if(b.isLeftButtonPressed()||b.isRightButtonPressed())if(!b.isRightButtonPressed()||!this.getItemSelected(a))if(b.isShiftPressed()||this.getDragSelection()||!this.getItemSelected(a)&&!b.isCtrlPressed()?this._onmouseevent(a,b):this.setLeadItem(a),this._activeDragSession=this.getDragSelection())this.getBoundedWidget().addEventListener("mouseup",this._ondragup,this),this.getBoundedWidget().setCapture(!0)},_ondragup:function(){this.getBoundedWidget().removeEventListener("mouseup",this._ondragup,this);this.getBoundedWidget().setCapture(!1);this._activeDragSession=!1},handleMouseUp:function(a,b){b.isLeftButtonPressed()&&((b.isCtrlPressed()||this.getItemSelected(a)&&!this._activeDragSession)&&this._onmouseevent(a,b),this._activeDragSession&&(this._activeDragSession=!1,this.getBoundedWidget().setCapture(!1)))},handleMouseOver:function(a,b){this.getDragSelection()&&this._activeDragSession&&this._onmouseevent(a,b,!0)},handleClick:function(){},handleDblClick:function(){},_onmouseevent:function(a,b,c){if(this.getItemEnabled(a)){var d=this._getChangeValue(),e=this.getLeadItem(),f=this.getFireChange();this.setFireChange(!1);var g=this.getSelectedItems().length;this.setLeadItem(a);var h=this.getAnchorItem(),k=b.isCtrlPressed();b=b.isShiftPressed();if(!h||0===g||k&&!b&&this.getMultiSelection()&&!this.getDragSelection())this.setAnchorItem(a),h=a;if((k||b||this._activeDragSession)&&this.getMultiSelection())this._activeDragSession&&c?(e&&this._deselectItemRange(h,e),this.isBefore(h,a)?this._addToCurrentSelection?this._selectItemRange(h,a,!1):this._deselectItemRange(h,a):this._addToCurrentSelection?this._selectItemRange(a,h,!1):this._deselectItemRange(a,h),this.scrollItemIntoView((this.getBoundedWidget().getScrollTop()>this.getItemTop(a)-1?this.getPrevious(a):this.getNext(a))||a)):this.getMultiSelection()&&k&&!b?(this._activeDragSession||(this._addToCurrentSelection=!(this.getCanDeselect()&&this.getItemSelected(a))),this.setItemSelected(a,this._addToCurrentSelection),this.setAnchorItem(a)):this.getMultiSelection()&&k&&b?(this._activeDragSession||(this._addToCurrentSelection=!(this.getCanDeselect()&&this.getItemSelected(a))),this._addToCurrentSelection?this._selectItemRange(h,a,!1):this._deselectItemRange(h,a)):this.getMultiSelection()&&!k&&b&&(this.getCanDeselect()?this._selectItemRange(h,a,!0):(e&&this._deselectItemRange(h,e),this._selectItemRange(h,a,!1)));else{if(!this.getItemEnabled(a))return;this._deselectAll();this.setAnchorItem(a);this._activeDragSession&&this.scrollItemIntoView((this.getBoundedWidget().getScrollTop()>this.getItemTop(a)-1?this.getPrevious(a):this.getNext(a))||a);this.getItemSelected(a)||this.renderItemSelectionState(a,!0);this._selectedItems.add(a);this._addToCurrentSelection=!0}this.setFireChange(f);f&&this._hasChanged(d)&&this._dispatchChange()}},handleKeyPress:function(a){var b=this._getChangeValue(),c=this.getFireChange();this.setFireChange(!1);if("A"==a.getKeyIdentifier()&&a.isCtrlPressed())this.getMultiSelection()&&(this._selectAll(),this.setLeadItem(this.getFirst()));else{var d=this.getAnchorItem(),e=this.getItemToSelect(a);e&&this.getItemEnabled(e)&&((this.setLeadItem(e),this.scrollItemIntoView(e),a.preventDefault(),a.isShiftPressed()&&this.getMultiSelection())?(null==d&&this.setAnchorItem(e),this._selectItemRange(this.getAnchorItem(),e,!0)):a.isCtrlPressed()?"Space"==a.getKeyIdentifier()&&(this._selectedItems.contains(e)?(this.renderItemSelectionState(e,!1),this._selectedItems.remove(e),this.setAnchorItem(this._selectedItems.getFirst())):(a.isCtrlPressed()&&this.getMultiSelection()||this._deselectAll(),this.renderItemSelectionState(e,!0),this._selectedItems.add(e),this.setAnchorItem(e))):(this._deselectAll(),this.renderItemSelectionState(e,!0),this._selectedItems.add(e),this.setAnchorItem(e)))}this.setFireChange(c);c&&this._hasChanged(b)&&this._dispatchChange()},getItemToSelect:function(a){if(a.isAltPressed())return null;switch(a.getKeyIdentifier()){case "Home":return this.getHome(this.getLeadItem());case "End":return this.getEnd(this.getLeadItem());case "Down":return this.getDown(this.getLeadItem());case "Up":return this.getUp(this.getLeadItem());case "Left":return this.getLeft(this.getLeadItem());case "Right":return this.getRight(this.getLeadItem());case "PageUp":return this.getPageUp(this.getLeadItem())||this.getHome(this.getLeadItem());case "PageDown":return this.getPageDown(this.getLeadItem())||this.getEnd(this.getLeadItem());case "Space":if(a.isCtrlPressed())return this.getLeadItem()}return null},_dispatchChange:function(){this.getFireChange()&&this.hasEventListeners("changeSelection")&&this.dispatchEvent(new rwt.event.DataEvent("changeSelection",this.getSelectedItems()),!0)},_hasChanged:function(a){return a!=this._getChangeValue()},_getChangeValue:function(){return this._selectedItems.getChangeValue()},getHome:function(){return this.getFirst()},getEnd:function(){return this.getLast()},getDown:function(a){return a?this.getMultiColumnSupport()?this.getUnder(a)||this.getLast():this.getNext(a):this.getFirst()},getUp:function(a){return a?this.getMultiColumnSupport()?this.getAbove(a)||this.getFirst():this.getPrevious(a):this.getLast()},getLeft:function(a){return this.getMultiColumnSupport()?a?this.getPrevious(a):this.getLast():null},getRight:function(a){return this.getMultiColumnSupport()?a?this.getNext(a):this.getFirst():null},getPageUp:function(){var a=this.getLeadItem();a||(a=this.getFirst());var b=this.getBoundedWidget();if(b.isCreated())for(var c=b.getScrollTop(),d=b.getClientHeight(),e=0;2>e;){for(;a&&this.getItemTop(a)-this.getItemHeight(a)>=c;)a=this.getUp(a);if(null==a)break;if(a!=this.getLeadItem()){this.scrollItemIntoView(a,!0);break}b.setScrollTop(c-d-this.getItemHeight(a));c=b.getScrollTop();e++}return a},getPageDown:function(){var a=this.getLeadItem();a||(a=this.getFirst());var b=this.getBoundedWidget();if(b.isCreated())for(var c=b.getScrollTop(),d=b.getClientHeight(),e=0;2>e;){for(;a&&this.getItemTop(a)+2*this.getItemHeight(a)<=c+d;)a=this.getDown(a);if(null==a)break;if(a!=this.getLeadItem())break;b.setScrollTop(c+d-2*this.getItemHeight(a));c=b.getScrollTop();e++}return a}},destruct:function(){this._disposeObjects("_selectedItems")}});rwt.qx.Class.define("rwt.widgets.util.Selection",{extend:rwt.qx.Object,construct:function(){this.base(arguments);this.__storage=[]},members:{add:function(a){-1===this.__storage.indexOf(a)&&this.__storage.push(a)},remove:function(a){a=this.__storage.indexOf(a);-1!==a&&this.__storage.splice(a,1)},removeAll:function(){this.__storage=[]},contains:function(a){return-1!==this.__storage.indexOf(a)},toArray:function(){return this.__storage.slice(0)},getFirst:function(){return 0<this.__storage.length?this.__storage[0]:null},getChangeValue:function(){for(var a=[],b=0;b<this.__storage.length;b++)a.push(this.__storage[b].toHashCode());a.sort();return a.join(";")},isEmpty:function(){return 0===this.__storage.length}},destruct:function(){this._disposeFields("__storage")}});namespace("rwt.widgets.util");rwt.widgets.util.ScrollBarsActivator=function(a){this._scrollable=a;this._hovered=!1;this._activateScrollBarsTimer=new rwt.client.Timer(150);this._activateScrollBarsTimer.addEventListener("interval",this._onActivationTimer,this);this._deactivateScrollBarsTimer=new rwt.client.Timer(1E3);this._deactivateScrollBarsTimer.addEventListener("interval",this._onDeactivationTimer,this);this._registerListeners()};rwt.widgets.util.ScrollBarsActivator.install=function(a){new rwt.widgets.util.ScrollBarsActivator(a)};rwt.widgets.util.ScrollBarsActivator.prototype={_registerListeners:function(){this._scrollable.addEventListener("elementOver",this._onClientOver,this);this._scrollable.addEventListener("elementOut",this._onClientOut,this);this._scrollable instanceof rwt.widgets.Grid?(this._scrollable.addEventListener("topItemChanged",this._onScroll,this),this._scrollable.addEventListener("scrollLeftChanged",this._onScroll,this)):this._scrollable.addEventListener("scroll",this._onScroll,this);this._scrollable.addEventListener("dispose",this._onDispose,this)},_onDispose:function(){this._activateScrollBarsTimer.dispose();this._activateScrollBarsTimer=null;this._deactivateScrollBarsTimer.dispose();this._deactivateScrollBarsTimer=null},_onScroll:function(){this._activateScrollBars(!this._hovered)},_onClientOver:function(a){!this._hovered&&this._scrollable.contains(a.getOriginalTarget())&&(this._hovered=!0,this._activateScrollBarsTimer.stop(),this._activateScrollBarsTimer.start())},_onClientOut:function(a){a=a.getRelatedTarget();this._scrollable.contains(a)||(this._hovered=!1,this._deactivateScrollBars())},_onChangeCapture:function(){this._hovered||this._deactivateScrollBars()},_onActivationTimer:function(){this._hovered&&this._activateScrollBars(!1)},_onDeactivationTimer:function(){this._hovered||this._deactivateScrollBars()},_activateScrollBars:function(a){this._scrollable.isDisposed()||(this._scrollable.getHorizontalBar().addState("active"),this._scrollable.getVerticalBar().addState("active"),this._activateScrollBarsTimer.stop(),this._deactivateScrollBarsTimer.stop(),a&&this._deactivateScrollBarsTimer.start())},_deactivateScrollBars:function(){if(!this._scrollable.isDisposed()){var a=rwt.event.EventHandler.getCaptureWidget();a&&this._scrollable.contains(a)?a.addEventListener("changeCapture",this._onChangeCapture,this):(this._scrollable.getHorizontalBar().removeState("active"),this._scrollable.getVerticalBar().removeState("active"),this._activateScrollBarsTimer.stop(),this._deactivateScrollBarsTimer.stop())}}};rwt.qx.Class.define("rwt.widgets.base.AbstractSlider",{extend:rwt.widgets.base.Parent,construct:function(a){this.base(arguments);this.setOverflow("hidden");this._horizontal=a;this._minimum=this._selection=0;this._maximum=100;this._increment=1;this._thumbLength=this._pageIncrement=10;this._thumbDragOffset=this._thumbLengthPx=this._minThumbSize=0;this._autoRepeat="";this._mouseOffset=0;this._delayTimer=new rwt.client.Timer(250);this._repeatTimer=new rwt.client.Timer(100);this._thumb=new rwt.widgets.base.BasicButton("push",!0);this._minButton=new rwt.widgets.base.BasicButton("push",!0);this._maxButton=new rwt.widgets.base.BasicButton("push",!0);this.add(this._thumb);this.add(this._minButton);this.add(this._maxButton);this._minButton.setTabIndex(null);this._maxButton.setTabIndex(null);this._thumb.setTabIndex(null);this._configureAppearance();this._setStates();this._registerListeners();this._setDisplayFor(this._minButton);this._setDisplayFor(this._maxButton)},destruct:function(){this._delayTimer.stop();this._delayTimer.dispose();this._delayTimer=null;this._repeatTimer.stop();this._repeatTimer.dispose();this._maxButton=this._minButton=this._thumb=this._repeatTimer=null},members:{setThumb:function(a){if(0>=a)throw Error("Scrollbar thumb must be positive");this._thumbLength=a;this._renderThumb()},getThumb:function(){return this._thumbLength},setMaximum:function(a){if(0>a)throw Error("Scrollbar maximum must be positive");this._maximum=a;this._renderThumb();this.dispatchSimpleEvent("changeMaximum")},getMaximum:function(){return this._maximum},setMinimum:function(a){this._minimum=a;this._renderThumb();this.dispatchSimpleEvent("changeMinimum")},getMinimum:function(){return this._maximum},setMinThumbSize:function(a){this._minThumbSize=a},_setSelection:function(a){a=this._limitSelection(Math.round(a));a!==this._selection&&(this._selection=a,this._selectionChanged())},_setIncrement:function(a){this._increment=a},_setPageIncrement:function(a){this._pageIncrement=a},_registerListeners:function(){this._repeatTimer.addEventListener("interval",this._onRepeatTimerInterval,this);this._delayTimer.addEventListener("interval",this._repeatTimerStart,this);this.addEventListener("changeWidth",this._onChangeSize,this);this.addEventListener("changeHeight",this._onChangeSize,this);this.addEventListener("changeEnabled",this._onChangeEnabled,this);this.addEventListener("mousedown",this._onMouseDown,this);this.addEventListener("mouseup",this._onMouseUp,this);this.addEventListener("mouseout",this._onMouseOut,this);this.addEventListener("mouseover",this._onMouseOver,this);this.addEventListener("mousemove",this._onMouseMove,this);this.addEventListener("mousewheel",this._onMouseWheel,this);this._thumb.addEventListener("mousedown",this._onThumbMouseDown,this);this._thumb.addEventListener("mousemove",this._onThumbMouseMove,this);this._thumb.addEventListener("mouseup",this._onThumbMouseUp,this);this._minButton.addEventListener("mousedown",this._onMinButtonMouseEvent,this);this._maxButton.addEventListener("mousedown",this._onMaxButtonMouseEvent,this);this._minButton.addEventListener("stateOverChanged",this._onMinButtonMouseEvent,this);this._maxButton.addEventListener("stateOverChanged",this._onMaxButtonMouseEvent,this)},_selectionChanged:function(){this._renderThumb();""===this._autoRepeat||this._repeatTimer.isEnabled()||this._delayTimer.start();this.dispatchSimpleEvent("selectionChanged")},_onChangeSize:function(){this._renderThumb()},_onChangeEnabled:function(a){this._thumb.setVisibility(a.getValue())},_onMouseWheel:function(a){a.getTarget()===this&&(a.preventDefault(),a.stopPropagation(),a=a.getWheelDelta(),a=this._selection-a/Math.abs(a)*this._increment,a<this._minimum&&(a=this._minimum),a>this._maximum-this._thumbLength&&(a=this._maximum-this._thumbLength),this._setSelection(a))},_onMouseDown:function(a){a.isLeftButtonPressed()&&(this._mouseOffset=this._getMouseOffset(a),this._handleLineMouseDown())},_onMouseUp:function(){this.setCapture(!1);this._autoRepeat="";this._delayTimer.stop();this._repeatTimer.stop()},_onMouseOver:function(a){a.getOriginalTarget()===this&&"line"===this._autoRepeat.slice(0,4)&&(this.setCapture(!1),this._repeatTimerStart())},_onMouseOut:function(a){a=a.getRelatedTarget();a===this||this.contains(a)||"line"!==this._autoRepeat.slice(0,4)||(this.setCapture(!0),this._delayTimer.stop(),this._repeatTimer.stop())},_onMouseMove:function(a){this._mouseOffset=this._getMouseOffset(a)},_onMinButtonMouseEvent:function(a){a.stopPropagation();this._minButton.hasState("pressed")?(this._autoRepeat="minButton",this._setSelection(this._selection-this._increment)):this._autoRepeat=""},_onMaxButtonMouseEvent:function(a){a.stopPropagation();this._maxButton.hasState("pressed")?(this._autoRepeat="maxButton",this._setSelection(this._selection+this._increment)):this._autoRepeat=""},_onThumbMouseDown:function(a){a.stopPropagation();this._thumb.addState("pressed");a.isLeftButtonPressed()&&(this._thumbDragOffset=this._getMouseOffset(a)-this._getThumbPosition(),this._thumb.setCapture(!0))},_onThumbMouseMove:function(a){a.stopPropagation();this._thumb.getCapture()&&(a=this._getMouseOffset(a),a=this._pxToVirtual(a-this._thumbDragOffset),this._setSelection(a))},_onThumbMouseUp:function(a){this._thumb.hasState("pressed")&&(a.stopPropagation(),this._repeatTimer.stop(),this._thumb.setCapture(!1),this._thumb.removeState("pressed"))},_layoutX:function(){this._horizontal?("rtl"===this.getDirection()?(this._minButton.setLeft(null),this._minButton.setRight(0),this._maxButton.setRight(null),this._maxButton.setLeft(0)):(this._minButton.setLeft(0),this._minButton.setRight(null),this._maxButton.setRight(0),this._maxButton.setLeft(null)),this._renderThumbPosition()):(this._thumb.setWidth("100%"),this._minButton.setWidth("100%"),this._maxButton.setWidth("100%"))},_layoutY:function(){this._horizontal?(this._thumb.setHeight("100%"),this._minButton.setHeight("100%"),this._maxButton.setHeight("100%")):this._maxButton.setBottom(0)},addState:function(a){this.base(arguments,a);"rwt_RIGHT_TO_LEFT"===a&&(this._minButton.addState(a),this._maxButton.addState(a))},removeState:function(a){this.base(arguments,a);"rwt_RIGHT_TO_LEFT"===a&&(this._minButton.removeState(a),this._maxButton.removeState(a))},_setStates:function(){var a=this._horizontal?"rwt_HORIZONTAL":"rwt_VERTICAL",b=this._horizontal?"horizontal":"vertical";this.addState(a);this._minButton.addState(a);this._minButton.addState(b);this._maxButton.addState(a);this._maxButton.addState(b);this._thumb.addState(a);this._renderAppearance();this._minButton._renderAppearance();this._maxButton._renderAppearance();this._thumb._renderAppearance()},_visualizeFocus:function(){this.base(arguments);this._thumb.addState("focused")},_visualizeBlur:function(){this.base(arguments);this._thumb.removeState("focused")},_repeatTimerStart:function(){this._delayTimer.stop();""!==this._autoRepeat&&this._repeatTimer.start()},_onRepeatTimerInterval:function(){switch(this._autoRepeat){case "minButton":this._setSelection(this._selection-this._increment);break;case "maxButton":this._setSelection(this._selection+this._increment);break;case "linePlus":case "lineMinus":this._handleLineMouseDown()}},_handleLineMouseDown:function(){var a;a=this._thumbLengthPx/2;a=this._getThumbPosition()+a;var b;this._mouseOffset>a?(b=this._selection+this._pageIncrement,a="linePlus"):(a="lineMinus",b=this._selection-this._pageIncrement);if(""===this._autoRepeat||this._autoRepeat===a)this._autoRepeat=a,this._setSelection(b)},_renderThumb:function(){this._renderThumbSize();this._renderThumbPosition()},_renderThumbPosition:function(){this._setThumbPositionPx(this._virtualToPx(this._selection));this.dispatchSimpleEvent("updateToolTip",this)},_renderThumbSize:function(){var a=!1,b=this._getLineSize(),c=this._maximum-this._minimum;0<b&&0<c&&(this._setThumbLengthPx(Math.max(this._minThumbSize,Math.round(this._thumbLength*b/c))),a=!0);return a},_setThumbLengthPx:function(a){this._thumbLengthPx=a;this._horizontal?this._thumb.setWidth(this._thumbLengthPx):this._thumb.setHeight(this._thumbLengthPx)},_setThumbPositionPx:function(a){this._horizontal?"rtl"===this.getDirection()?(this._thumb.setLeft(null),this._thumb.setRight(a)):(this._thumb.setLeft(a),this._thumb.setRight(null)):this._thumb.setTop(a)},_pxToVirtual:function(a){var b=this._getMinButtonWidth();a=(a-b)/this._getVirtualToPxRatio()+this._minimum;return this._limitSelection(Math.round(a))},_virtualToPx:function(a){return this._getMinButtonWidth()+this._getVirtualToPxRatio()*(a-this._minimum)},_getVirtualToPxRatio:function(){var a=Math.max(0,this._getLineSize()-this._thumbLengthPx),b=this._maximum-this._minimum-this._thumbLength;return 0===b?0:a/b},_limitSelection:function(a){var b=a;a>=this._maximum-this._thumbLength&&(b=this._maximum-this._thumbLength);b<=this._minimum&&(b=this._minimum);return b},_getMouseOffset:function(a){var b=rwt.html.Location;return this._horizontal?(a=a.getPageX()-b.getLeft(this.getElement()),"rtl"===this.getDirection()?this._getSliderSize()-a:a):a.getPageY()-b.getTop(this.getElement())},_getThumbPosition:function(){return this._horizontal?"rtl"===this.getDirection()?this._thumb.getRight():this._thumb.getLeft():this._thumb.getTop()},_getLineSize:function(){var a=this._getMinButtonWidth()+this._getMaxButtonWidth();return this._getSliderSize()-this.getFrameWidth()-a},_getSliderSize:function(){return this._horizontal?this.getWidth():this.getHeight()},_getMinButtonWidth:function(){return this._horizontal?this._minButton.getWidth():this._minButton.getHeight()},_getMaxButtonWidth:function(){return this._horizontal?this._maxButton.getWidth():this._maxButton.getHeight()},_setDisplayFor:function(a){null===a.getImage()[0]&&(this._horizontal?a.setWidth(0):a.setHeight(0),a.setDisplay(!1))}}});rwt.qx.Class.define("rwt.widgets.base.ScrollBar",{extend:rwt.widgets.base.AbstractSlider,construct:function(a){this.base(arguments,a);this._idealValue=0;this._idealThumb=10;this._renderSamples=this._renderSum=this._lastDispatchedValue=0;this.setMinimum(0);this._hasSelectionListener=!1;var b=new rwt.theme.ThemeValues(this.__states);this.setMinThumbSize(b.getCssDimension("ScrollBar-Thumb","min-height"));this._autoThumbSize=!0;this.setIncrement(20);this.addEventListener("mousedown",this._stopEvent,this);this.addEventListener("mouseup",this._stopEvent,this);this.addEventListener("click",this._stopEvent,this);this.addEventListener("dblclick",this._stopEvent,this)},members:{_configureAppearance:function(){this.setAppearance("scrollbar");this._thumb.setAppearance("scrollbar-thumb");this._minButton.setAppearance("scrollbar-min-button");this._maxButton.setAppearance("scrollbar-max-button")},_applyOpacity:function(a,b){this.base(arguments,a,b);rwt.html.Style.setTransition(this,"opacity 250ms")},setValue:function(a){this._idealValue=a;this._setSelection(a)},getValue:function(){return this._selection},setMaximum:function(a){this.base(arguments,a);this._checkValue()},setThumb:function(a){this.base(arguments,a);this._checkValue();this._updatePageIncrement()},setIncrement:function(a){this._setIncrement(a)},setHasSelectionListener:function(a){this._hasSelectionListener=a},getHasSelectionListener:function(){return this._hasSelectionListener},isHorizontal:function(){return this._horizontal},setAutoThumbSize:function(a){this._autoThumbSize=a},_updateThumbLength:function(){if(this._autoThumbSize){var a=this._getSliderSize();0<a&&this.setThumb(a)}},_updatePageIncrement:function(){this._setPageIncrement(this.getThumb())},_stopEvent:function(a){a.stopPropagation();a.preventDefault()},_dispatchValueChanged:function(){this._lastDispatchedValue=this._selection;this.createDispatchEvent("changeValue")},_updateStepsize:function(){var a=this._selection;this.base(arguments);a!==this._selection&&this._dispatchValueChanged()},_onChangeSize:function(){this._updateThumbLength();this._updatePageIncrement();this.base(arguments)},_renderThumbSize:function(){this.base(arguments)&&this._renderThumbIcon()},_renderThumbIcon:function(){var a=this._horizontal?this._thumb.getCellWidth(1):this._thumb.getCellHeight(1),a=this._thumbLengthPx>=a+6;this._thumb.setCellVisible(1,a)},_checkValue:function(){null!==this._idealValue&&this._idealValue?this._setSelection(this._idealValue):this._setSelection(this._selection)},_setSelection:function(a){a!==this._idealValue&&(this._idealValue=null);this.base(arguments,a)},_selectionChanged:function(){this.base(arguments);this._dispatchValueChanged()}}});rwt.qx.Class.define("rwt.html.ImagePreloaderSystem",{extend:rwt.qx.Target,construct:function(a,b,c){this.base(arguments);this._list=a instanceof Array?rwt.util.Objects.fromArray(a):a;this._timer=new rwt.client.Timer(3E3);this._timer.addEventListener("interval",this.__oninterval,this);b&&this.addEventListener("completed",b,c||null)},events:{completed:"rwt.event.Event"},members:{_stopped:!1,start:function(){if(rwt.util.Objects.isEmpty(this._list))this.createDispatchEvent("completed");else{for(var a in this._list){var b=rwt.html.ImagePreloaderManager.getInstance().create(a);b.isErroneous()||b.isLoaded()?delete this._list[a]:(b._origSource=a,b.addEventListener("load",this.__onload,this),b.addEventListener("error",this.__onerror,this))}this._check()}},__onload:function(a){this.getDisposed()||(delete this._list[a.getTarget()._origSource],this._check())},__onerror:function(a){this.getDisposed()||(delete this._list[a.getTarget()._origSource],this._check())},__oninterval:function(){this._stopped=!0;this._timer.stop();this.createDispatchEvent("completed")},_check:function(){this._stopped||(rwt.util.Objects.isEmpty(this._list)?(this._timer.stop(),this.createDispatchEvent("completed")):this._timer.restart())}},destruct:function(){this._timer&&(this._timer.removeEventListener("interval",this.__oninterval,this),this._disposeObjects("_timer"));this._disposeFields("_list")}});rwt.qx.Class.define("rwt.html.Iframes",{statics:{getWindow:function(a){try{var b=rwt.html.Iframes.getDocument(a);return b?b.defaultView:null}catch(c){return null}},getDocument:function(a){try{return a.contentDocument}catch(b){return null}},getBody:function(a){return(a=rwt.html.Iframes.getDocument(a))?a.getElementsByTagName("body")[0]:null}}});namespace("rwt.remote");(function(){rwt.remote.Request=function(a,b,c){this._url=a;this._method=b;this._async=!0;this._data=this._error=this._success=null;this._responseType=c;this._request=rwt.remote.Request.createXHR()};rwt.remote.Request.createXHR=function(){return new XMLHttpRequest};rwt.remote.Request.prototype={dispose:function(){null!=this._request&&(this._request.onreadystatechange=null,this._request.abort(),this._request=this._error=this._success=null)},send:function(){var a=null,b="POST"===this._method;!b&&this._data&&(a=this._data);var c=this._url;a&&(c+=(0<=c.indexOf("?")?"\x26":"?")+a);this._request.open(this._method,c,this._async);this._configRequest();this._request.send(b?this._data:void 0);this._async||this.dispose()},setAsynchronous:function(a){this._async=a},getAsynchronous:function(){return this._async},setSuccessHandler:function(a,b){this._success=function(){a.apply(b,arguments)}},setErrorHandler:function(a,b){this._error=function(){a.apply(b,arguments)}},setData:function(a){this._data=a},getData:function(){return this._data},_configRequest:function(){this._request.setRequestHeader("Content-Type","application/json; charset\x3dUTF-8");this._request.onreadystatechange=rwt.util.Functions.bind(this._onReadyStateChange,this)},_onReadyStateChange:function(){if(4===this._request.readyState){var a;"unknown"!==typeof this._request.responseText&&(a=this._request.responseText);a={responseText:a,status:this._request.status,responseHeaders:this._getHeaders(),target:this};200===this._request.status?this._success&&this._success(a):this._error&&this._error(a);this._async&&this.dispose()}},_getHeaders:function(){for(var a=this._request.getAllResponseHeaders().split(/[\r\n]+/g),b={},c=0;c<a.length;c++){var d=a[c].match(/^([^:]+)\s*:\s*(.+)$/i);d&&(b[d[1].toLowerCase()]=d[2])}return b}}})();(function(){var a=function(){return rwt.widgets.base.WidgetToolTip.getInstance()};rwt.qx.Class.define("rwt.widgets.util.ToolTipManager",{extend:rwt.qx.Object,statics:{getInstance:function(){return rwt.runtime.Singletons.get(rwt.widgets.util.ToolTipManager)}},properties:{currentToolTipTarget:{nullable:!0,apply:"_applyCurrentToolTipTarget"}},members:{_applyCurrentToolTipTarget:function(b,c){c&&(a()._stopShowTimer(),a()._startHideTimer(),c.removeEventListener("updateToolTip",this._updateEventHandler));a().setBoundToWidget(b);b&&(a()._startShowTimer(),b.addEventListener("updateToolTip",this._updateEventHandler))},handleMouseEvent:function(a){var b=a.getType();"mouseover"===b?this._handleMouseOver(a):"mouseout"===b?this._handleMouseOut(a):"mousemove"===b&&this._handleMouseMove(a)},_handleMouseOver:function(b){b=b.getTarget();if(b===a()||a().contains(b))this.setCurrentToolTipTarget(a().getLastWidget());else{for(b instanceof rwt.widgets.base.Widget||1!=b.nodeType||(b=rwt.event.EventHandlerUtil.getTargetObject(b));null!=b&&null===b.getToolTipText();)b=b.getParent();this.setCurrentToolTipTarget(b)}},_handleMouseOut:function(b){var c=b.getTarget();b=b.getRelatedTarget();if(c!==a()){var d=this.getCurrentToolTipTarget();if(!d||b!=a()&&!a().contains(b))b&&c&&c.contains(b)||d&&!b&&this.setCurrentToolTipTarget(null)}},_handleMouseMove:function(b){this.getCurrentToolTipTarget()&&a()._handleMouseMove(b)},handleFocus:function(){},handleBlur:function(b){(b=b.getTarget())&&this.getCurrentToolTipTarget()===b&&(a()._stopShowTimer(),a()._startHideTimer())},handleKeyEvent:function(b){switch(b.getKeyIdentifier()){case "Control":case "Alt":case "Shift":case "Meta":case "Win":break;default:a()._stopShowTimer(),a()._quickHide()}},_updateEventHandler:function(b){a().getBoundToWidget()===b&&a().updateText()}}})})();namespace("rwt.client");rwt.client.FileUploader=function(){this._sequenceId=0;this._holder={}};rwt.client.FileUploader.getInstance=function(){return rwt.runtime.Singletons.get(rwt.client.FileUploader)};rwt.client.FileUploader.createFormData=function(){return new FormData};rwt.client.FileUploader.prototype={addFile:function(a){var b="f"+this._sequenceId;this._holder[b]=a;this._sequenceId++;return b},getFileById:function(a){return this._holder[a]},submit:function(a){var b=a.url,c=a.fileIds;a=rwt.client.FileUploader.createFormData();for(var d=0;d<c.length;d++){var e=this._holder[c[d]];if(!e)throw Error('Unkown file id "'+c[d]+'".');a.append("file",e)}c=rwt.remote.Request.createXHR();c.open("POST",b);c.send(a)}};rwt.remote.HandlerRegistry.add("rwt.client.FileUploader",{factory:function(){return rwt.client.FileUploader.getInstance()},service:!0,methods:["submit"]});rwt.qx.Class.define("rwt.client.BrowserNavigation",{extend:rwt.qx.Target,statics:{getInstance:function(){return rwt.runtime.Singletons.get(rwt.client.BrowserNavigation)}},construct:function(){this.base(arguments);this._hasNavigationListener=!1;this._titles={};this._state=this.__getState();this.__startTimer()},events:{request:"rwt.event.DataEvent"},properties:{timeoutInterval:{check:"Number",init:100,apply:"_applyTimeoutInterval"}},members:{addToHistory:function(a,b){null!=b&&(document.title=b);this._titles[a]=document.title;a!=this._state&&(this._state=a,this.__storeState(a))},getState:function(){return this._state},navigateBack:function(){rwt.client.Timer.once(function(){history.back()},0)},navigateForward:function(){rwt.client.Timer.once(function(){history.forward()},0)},_applyTimeoutInterval:function(a){this._timer.setInterval(a)},__onHistoryLoad:function(a){this._state=a;this.createDispatchDataEvent("request",a);null!=this._titles[a]&&(document.title=this._titles[a])},__startTimer:function(){this._timer=new rwt.client.Timer(this.getTimeoutInterval());this._timer.addEventListener("interval",function(){var a=this.__getState();a!=this._state&&this.__onHistoryLoad(a)},this);this._hasNavigationListener&&this._timer.start()},__getHash:function(){var a=window.location.href,b=a.indexOf("#");return 0<=b?a.substring(b+1):""},__getState:function(){return decodeURIComponent(this.__getHash())},__storeState:function(a){window.location.hash="#"+encodeURIComponent(a).replace(/%2F/g,"/");return!0},setHasNavigationListener:function(a){(this._hasNavigationListener=a)?(this.addEventListener("request",this._historyNavigated,this),this._timer&&this._timer.start()):(this.removeEventListener("request",this._historyNavigated,this),this._timer&&this._timer.stop())},_historyNavigated:function(a){a=a.getData();rwt.remote.Connection.getInstance().getRemoteObject(this).notify("Navigation",{state:a})}},destruct:function(){this._timer.stop();this._disposeObjects("_timer");this._disposeFields("_iframe","_titles")}});rwt.remote.HandlerRegistry.add("rwt.client.BrowserNavigation",{factory:function(){return rwt.client.BrowserNavigation.getInstance()},service:!0,listeners:["Navigation"],methods:["addToHistory"],methodHandler:{addToHistory:function(a,b){a.addToHistory(b.state,b.title)}}});rwt.qx.Class.define("rwt.event.DragAndDropHandler",{extend:rwt.util.ObjectManager,statics:{getInstance:function(){return rwt.runtime.Singletons.get(rwt.event.DragAndDropHandler)}},construct:function(){this.base(arguments);this.__data={};this.__actions={};this.__cursors={};for(var a,b,c=["move","copy","alias","nodrop"],d=0,e=c.length;d<e;d++)b=c[d],a=this.__cursors[b]=new rwt.widgets.base.Image,a.setAppearance("cursor-dnd-"+b),a.setZIndex(1E8)},properties:{sourceWidget:{check:"rwt.widgets.base.Widget",nullable:!0},destinationWidget:{check:"rwt.widgets.base.Widget",nullable:!0,apply:"_applyDestinationWidget"},currentAction:{check:"String",nullable:!0,event:"changeCurrentAction"},defaultCursorDeltaX:{check:"Integer",init:5},defaultCursorDeltaY:{check:"Integer",init:15}},members:{__lastDestinationEvent:null,_applyDestinationWidget:function(a){a&&(a.dispatchEvent(new rwt.event.DragEvent("dragdrop",this.__lastDestinationEvent,a,this.getSourceWidget())),this.__lastDestinationEvent=null)},addData:function(a,b){this.__data[a]=b},getData:function(a){return this.__data[a]},clearData:function(){this.__data={}},getDropDataTypes:function(){var a=this.getDestinationWidget(),b=[];if(!a)return b;for(var a=a.getDropDataTypes(),c=0,d=a.length;c<d;c++)a[c]in this.__data&&b.push(a[c]);return b},getDropTarget:rwt.util.Variant.select("qx.client",{"default":function(a){for(a=a.getTarget();null!=a&&a.supportsDrop(this.__dragCache);){if(this.supportsDrop(a))return a;a=a.getParent()}return null}}),startDrag:function(){if(!this.__dragCache)throw Error("Invalid usage of startDrag. Missing dragInfo!");this.__dragCache.dragHandlerActive=!0;this.setSourceWidget(this.__dragCache.sourceWidget);this.__feedbackWidget&&(this.__feedbackWidget.setVisibility(!1),rwt.widgets.base.ClientDocument.getInstance().add(this.__feedbackWidget),this.__feedbackWidget.setZIndex(1E8))},_fireUserEvents:function(a,b,c){a&&a!=b&&a.hasEventListeners("dragout")&&a.dispatchEvent(new rwt.event.DragEvent("dragout",c,a,b),!0);b&&(a!=b&&b.hasEventListeners("dragover")&&b.dispatchEvent(new rwt.event.DragEvent("dragover",c,b,a),!0),b.hasEventListeners("dragmove")&&b.dispatchEvent(new rwt.event.DragEvent("dragmove",c,b,null),!0))},handleMouseEvent:function(a){switch(a.getType()){case "mousedown":return this._handleMouseDown(a);case "mouseup":return this._handleMouseUp(a);case "mousemove":return this._handleMouseMove(a)}},_handleMouseDown:function(a){!a.getDefaultPrevented()&&a.isLeftButtonPressed()&&null==this.__dragCache&&(this.__dragCache={startScreenX:a.getScreenX(),startScreenY:a.getScreenY(),pageX:a.getPageX(),pageY:a.getPageY(),sourceWidget:a.getTarget(),sourceElement:a.getDomTarget(),sourceTopLevel:a.getTarget().getTopLevelWidget(),dragHandlerActive:!1,hasFiredDragStart:!1})},_handleMouseMove:function(a){if(this.__dragCache)if(this.__dragCache.dragHandlerActive){this.__dragCache.pageX=a.getPageX();this.__dragCache.pageY=a.getPageY();var b=this.getDropTarget(a);this.setCurrentAction(b?this._evalNewAction(a.isShiftPressed(),a.isCtrlPressed(),a.isAltPressed()):null);this._fireUserEvents(this.__dragCache.currentDropWidget,b,a);this.__dragCache.currentDropWidget=b;this._renderCursor();this._renderFeedbackWidget()}else!this.__dragCache.hasFiredDragStart&&(5<Math.abs(a.getScreenX()-this.__dragCache.startScreenX)||5<Math.abs(a.getScreenY()-this.__dragCache.startScreenY))&&(this.__dragCache.sourceWidget.dispatchEvent(new rwt.event.DragEvent("dragstart",a,this.__dragCache.sourceWidget),!0),this.__dragCache.hasFiredDragStart=!0,this.__dragCache.dragHandlerActive&&(b=this.getDropTarget(a),this._fireUserEvents(null,b,a),this.__dragCache.currentDropWidget=b,rwt.widgets.base.ClientDocument.getInstance().setCapture(!0)))},_handleMouseUp:function(a){this.__dragCache&&(this.__dragCache.dragHandlerActive?this._endDrag(this.getDropTarget(a),a):this.__dragCache=null)},handleKeyEvent:function(a){if(this.__dragCache)switch(a.getType()){case "keydown":this._handleKeyDown(a);break;case "keyup":this._handleKeyUp(a)}},_handleKeyDown:function(a){if("Escape"==a.getKeyIdentifier())this.cancelDrag(a);else if(null!=this.getCurrentAction())switch(a.getKeyIdentifier()){case "Shift":case "Control":case "Alt":this.setAction(this._evalNewAction(a.isShiftPressed(),a.isCtrlPressed(),a.isAltPressed())),this._renderCursor(),a.preventDefault()}},_handleKeyUp:function(a){var b="Shift"==a.getKeyIdentifier(),c="Control"==a.getKeyIdentifier(),d="Alt"==a.getKeyIdentifier();(b||c||d)&&null!=this.getCurrentAction()&&(this.setAction(this._evalNewAction(!b&&a.isShiftPressed(),!c&&a.isCtrlPressed(),!d&&a.isAltPressed())),this._renderCursor(),a.preventDefault())},cancelDrag:function(a){this.__dragCache&&(this.__dragCache.dragHandlerActive?this._endDrag(null,a):this.__dragCache=null)},globalCancelDrag:function(){this.__dragCache&&this.__dragCache.dragHandlerActive&&this._endDragCore()},_endDrag:function(a,b){a&&(this.__lastDestinationEvent=b,this.setDestinationWidget(a));this.getSourceWidget().dispatchEvent(new rwt.event.DragEvent("dragend",b,this.getSourceWidget(),a),!0);this._endDragCore()},_endDragCore:function(){this.__feedbackWidget&&(rwt.widgets.base.ClientDocument.getInstance().remove(this.__feedbackWidget),this.__feedbackAutoDispose&&this.__feedbackWidget.destroy(),this.__feedbackWidget=null);var a=this.__cursor;a&&(a._style.display="none",this.__cursor=null);this._cursorDeltaY=this._cursorDeltaX=null;this.__dragCache&&(this.__dragCache=this.__dragCache.currentDropWidget=null);rwt.widgets.base.ClientDocument.getInstance().setCapture(!1);this.clearData();this.clearActions();this.setSourceWidget(null);this.setDestinationWidget(null)},setCursorPosition:function(a,b){this._cursorDeltaX=a;this._cursorDeltaY=b},_renderCursor:function(){var a,b=this.__cursor;switch(this.getCurrentAction()){case "move":a=this.__cursors.move;break;case "copy":a=this.__cursors.copy;break;case "alias":a=this.__cursors.alias;break;default:a=this.__cursors.nodrop}a!=b&&null!=b&&(b._style.display="none");a._initialLayoutDone||(rwt.widgets.base.ClientDocument.getInstance().add(a),rwt.widgets.base.Widget.flushGlobalQueues());a._renderRuntimeLeft(this.__dragCache.pageX+(null!=this._cursorDeltaX?this._cursorDeltaX:this.getDefaultCursorDeltaX()));a._renderRuntimeTop(this.__dragCache.pageY+(null!=this._cursorDeltaY?this._cursorDeltaY:this.getDefaultCursorDeltaY()));a!=b&&(a._style.display="");this.__cursor=a},supportsDrop:function(a){a=a.getDropDataTypes();if(!a)return!1;for(var b=0;b<a.length;b++)if(a[b]in this.__data)return!0;return!1},addAction:function(a,b){this.__actions[a]=!0;(b||null==this.getCurrentAction())&&this.setCurrentAction(a)},clearActions:function(){this.__actions={};this.setCurrentAction(null)},removeAction:function(a){delete this.__actions[a];this.getCurrentAction()==a&&this.setCurrentAction(null)},setAction:function(a){null==a||a in this.__actions?this.setCurrentAction(a):this.addAction(a,!0)},_evalNewAction:function(a,b,c){if(a&&b&&"alias"in this.__actions)return"alias";if(a&&c&&"copy"in this.__actions)return"copy";if(a&&"move"in this.__actions)return"move";if(c&&"alias"in this.__actions)return"alias";if(b&&"copy"in this.__actions)return"copy";for(var d in this.__actions)return d;return null},setFeedbackWidget:function(a,b,c,d){this.__feedbackWidget=a;this.__feedbackDeltaX=null!=b?b:10;this.__feedbackDeltaY=null!=c?c:10;this.__feedbackAutoDispose=d?!0:!1},_renderFeedbackWidget:function(){this.__feedbackWidget&&(this.__feedbackWidget.setVisibility(!0),this.__feedbackWidget._renderRuntimeLeft(this.__dragCache.pageX+this.__feedbackDeltaX),this.__feedbackWidget._renderRuntimeTop(this.__dragCache.pageY+this.__feedbackDeltaY))}},destruct:function(){this._disposeObjectDeep("__cursors",1);this._disposeObjects("__feedbackWidget");this._disposeFields("__dragCache","__data","__actions","__lastDestinationEvent")}});rwt.qx.Class.define("rwt.event.DragEvent",{extend:rwt.event.MouseEvent,construct:function(a,b,c,d){this._mouseEvent=b;var e=null;switch(a){case "dragstart":case "dragover":e=b.getOriginalTarget()}this.base(arguments,a,b.getDomEvent(),c.getElement(),c,e,d)},members:{getMouseEvent:function(){return this._mouseEvent},startDrag:function(){if("dragstart"!=this.getType())throw Error("rwt.event.DragEvent startDrag can only be called during the dragstart event: "+this.getType());this.stopPropagation();rwt.event.DragAndDropHandler.getInstance().startDrag()},addData:function(a,b){rwt.event.DragAndDropHandler.getInstance().addData(a,b)},getData:function(a){return rwt.event.DragAndDropHandler.getInstance().getData(a)},clearData:function(){rwt.event.DragAndDropHandler.getInstance().clearData()},getDropDataTypes:function(){return rwt.event.DragAndDropHandler.getInstance().getDropDataTypes()},addAction:function(a){rwt.event.DragAndDropHandler.getInstance().addAction(a)},removeAction:function(a){rwt.event.DragAndDropHandler.getInstance().removeAction(a)},getAction:function(){return rwt.event.DragAndDropHandler.getInstance().getCurrentAction()},clearActions:function(){rwt.event.DragAndDropHandler.getInstance().clearActions()},setFeedbackWidget:function(a,b,c,d){rwt.event.DragAndDropHandler.getInstance().setFeedbackWidget(a,b,c,d)},setCursorPosition:function(a,b){rwt.event.DragAndDropHandler.getInstance().setCursorPosition(a,b)}},destruct:function(){this._disposeFields("_mouseEvent")}});rwt.qx.Class.define("rwt.widgets.base.Iframe",{extend:rwt.widgets.base.Terminator,construct:function(a){this.base(arguments);this.initSelectable();this.initTabIndex();this.initScrolling();null!=a&&this.setSource(a)},events:{load:"rwt.event.Event"},statics:{load:function(a){try{if(!a)throw Error("Could not find iframe which was loaded [A]!");a.currentTarget&&(a=a.currentTarget);if(a._QxIframe)a._QxIframe._onload();else if(a.parentNode)throw Error("Could not find iframe which was loaded [B]!");}catch(b){rwt.runtime.ErrorHandler.processJavaScriptError(b)}},_useAlternateLayouting:function(){return rwt.client.Client.isMobileSafari()}},properties:{tabIndex:{refine:!0,init:0},selectable:{refine:!0,init:!1},appearance:{refine:!0,init:"iframe"},source:{check:"String",apply:"_applySource",event:"changeSource",nullable:!0},frameName:{check:"String",init:"",apply:"_applyFrameName"},scrolling:{check:["yes","no","auto"],init:"auto",apply:"_applyScrolling"}},members:{getIframeNode:function(){return this._iframeNode},setIframeNode:function(a){return this._iframeNode=a},getBlockerNode:function(){return this._blockerNode},setBlockerNode:function(a){return this._blockerNode=a},getContentWindow:function(){return this.isCreated()?rwt.html.Iframes.getWindow(this.getIframeNode()):null},getContentDocument:function(){return this.isCreated()?rwt.html.Iframes.getDocument(this.getIframeNode()):null},isLoaded:function(){return this._isLoaded},reload:function(){if(this.isCreated()&&this.getContentWindow()){this._isLoaded=!1;var a=this.queryCurrentUrl()||this.getSource();try{try{this.getContentWindow().location.replace(a)}catch(b){this.getIframeNode().src=a}}catch(b){throw Error("Iframe source could not be set! This may be related to AdBlock Plus Firefox Extension.");}}},queryCurrentUrl:function(){var a=this.getContentDocument();try{if(a&&a.location)return a.location.href}catch(b){}return null},block:function(){this._blockerNode&&(!this._blockerNode.parentElement||rwt.client.Client.isGecko()&&!this._blockerNode.parentNode)&&this._getBlockerParent().appendChild(this._blockerNode)},release:function(){this._blockerNode&&(this._blockerNode.parentElement||rwt.client.Client.isGecko()&&this._blockerNode.parentNode)&&this._getBlockerParent().removeChild(this._blockerNode)},_getBlockerParent:function(){var a=this.getElement();return this._innerStyle?a.firstChild:a},_generateIframeElement:function(){var a=this._createIframeNode(this.getFrameName());a._QxIframe=this;a.frameBorder="0";a.frameSpacing="0";a.marginWidth="0";a.marginHeight="0";rwt.widgets.base.Iframe._useAlternateLayouting()||(a.width="100%",a.height="100%");a.hspace="0";a.vspace="0";a.border="0";a.unselectable="on";a.allowTransparency="true";a.style.position="absolute";a.style.top=0;a.style.left=0;return a},_createIframeNode:function(a){var b=rwt.widgets.base.Iframe._element=document.createElement("iframe");b.onload=rwt.widgets.base.Iframe.load;a&&(b.name=a);return b},_generateBlockerElement:function(){var a=rwt.widgets.base.Iframe._blocker=document.createElement("div"),b=a.style;b.position="absolute";b.top=0;b.left=0;b.width="100%";b.height="100%";b.zIndex=1;rwt.client.Client.isTrident()&&11>rwt.client.Client.getVersion()&&(b.backgroundImage="url("+(rwt.remote.Connection.RESOURCE_PATH+"static/image/blank.gif")+")");return a},_applyElement:function(a,b){var c=this.setIframeNode(this._generateIframeElement());this.setBlockerNode(this._generateBlockerElement());this._syncSource();this._syncScrolling();a.appendChild(c);this.base(arguments,a,b)},_beforeAppear:function(){this.base(arguments);rwt.widgets.util.IframeManager.getInstance().add(this)},_beforeDisappear:function(){this.base(arguments);rwt.widgets.util.IframeManager.getInstance().remove(this)},_applySource:function(){this.isCreated()&&this._syncSource()},_syncSource:function(){var a=this.getSource();if(null==a||""===a)a=rwt.remote.Connection.RESOURCE_PATH+"static/html/blank.html";this._isLoaded=!1;try{if(this.getContentWindow())try{this.getContentWindow().location.replace(a)}catch(b){this.getIframeNode().src=a}else this.getIframeNode().src=a}catch(b){throw Error("Iframe source could not be set! This may be related to AdBlock Plus Firefox Extension.");}},_applyScrolling:function(){this.isCreated()&&this._syncScrolling()},_syncScrolling:function(){this.getIframeNode().setAttribute("scrolling",this.getScrolling())},_applyFrameName:function(){if(this.isCreated())throw Error("Not allowed to set frame name after it has been created");},_onload:function(){this._isLoaded||(this._isLoaded=!0,this.createDispatchEvent("load"))},_isLoaded:!1},defer:function(a,b){if(rwt.widgets.base.Iframe._useAlternateLayouting()){var c=b._renderRuntimeWidth,d=b._renderRuntimeHeight,e=b._resetRuntimeWidth,f=b._resetRuntimeHeight;b._renderRuntimeWidth=function(a){c.call(this,a);this._iframeNode.style.minWidth=a+"px";this._iframeNode.style.maxWidth=a+"px"};b._renderRuntimeHeight=function(a){d.call(this,a);this._iframeNode.style.minHeight=a+"px";this._iframeNode.style.maxHeight=a+"px"};b._resetRuntimeWidth=function(a){e.call(this,a);this._iframeNode.style.minWidth="";this._iframeNode.style.maxWidth=""};b._resetRuntimeHeight=function(a){f.call(this,a);this._iframeNode.style.minHeight="";this._iframeNode.style.maxHeight=""}}},destruct:function(){this._iframeNode&&(this._iframeNode._QxIframe=null,this._iframeNode=this._iframeNode.onload=null,this._getTargetNode().innerHTML="");this._disposeFields("__onload","_blockerNode")}});rwt.qx.Mixin.define("rwt.widgets.util.MResizable",{construct:function(){this._frame=new rwt.widgets.base.Terminator;this._frame.setAppearance("resizer-frame");this.addEventListener("mousedown",this._onmousedown);this.addEventListener("mouseup",this._onmouseup);this.addEventListener("mousemove",this._onmousemove)},properties:{resizableWest:{check:"Boolean",init:!0,apply:"_applyResizable"},resizableNorth:{check:"Boolean",init:!0,apply:"_applyResizable"},resizableEast:{check:"Boolean",init:!0,apply:"_applyResizable"},resizableSouth:{check:"Boolean",init:!0,apply:"_applyResizable"},resizable:{group:["resizableNorth","resizableEast","resizableSouth","resizableWest"],mode:"shorthand"},resizeMethod:{init:"frame",check:["opaque","lazyopaque","frame","translucent"],event:"changeResizeMethod"}},members:{isResizable:function(){return this.getResizableWest()||this.getResizableEast()||this.getResizableNorth()||this.getResizableSouth()},getResizable:function(){return this.isResizable()},_applyResizable:function(){},_onmousedown:function(a){if(this._resizeNorth||this._resizeSouth||this._resizeWest||this._resizeEast){this.setCapture(!0);this.getTopLevelWidget().setGlobalCursor(this.getCursor());var b=this.getElement(),c=this._getResizeParent(),d=c.getElement(),d=rwt.html.Location.get(d,"scroll"),e=rwt.html.Location.get(b);switch(this.getResizeMethod()){case "translucent":this.setOpacity(.5);break;case "frame":var f=this._frame;f.getParent()!=c&&(f.setParent(c),rwt.widgets.base.Widget.flushGlobalQueues());f._renderRuntimeLeft(e.left-d.left);f._renderRuntimeTop(e.top-d.top);f._renderRuntimeWidth(b.offsetWidth);f._renderRuntimeHeight(b.offsetHeight);f.setZIndex(this.getZIndex()+1)}c=this._resizeSession={};f=this._getMinSizeReference();this._resizeWest&&(c.boxWidth=b.offsetWidth,c.boxRight=e.right);if(this._resizeWest||this._resizeEast)c.boxLeft=e.left,c.parentContentLeft=d.left,c.parentContentRight=d.right,c.minWidth=f.getMinWidthValue(),c.maxWidth=f.getMaxWidthValue();this._resizeNorth&&(c.boxHeight=b.offsetHeight,c.boxBottom=e.bottom);if(this._resizeNorth||this._resizeSouth)c.boxTop=e.top,c.parentContentTop=d.top,c.parentContentBottom=d.bottom,c.minHeight=f.getMinHeightValue(),c.maxHeight=f.getMaxHeightValue()}else delete this._resizeSession;a.stopPropagation()},_onmouseup:function(a){var b=this._resizeSession;b&&(this.setCapture(!1),this.getTopLevelWidget().setGlobalCursor(null),"lazyopaque"===this.getResizeMethod()||"frame"===this.getResizeMethod()&&this._frame&&this._frame.getParent()?(null!=b.lastLeft&&this.setLeft(b.lastLeft),null!=b.lastTop&&this.setTop(b.lastTop),null!=b.lastWidth&&this._changeWidth(b.lastWidth),null!=b.lastHeight&&this._changeHeight(b.lastHeight),"frame"==this.getResizeMethod()&&this._frame.setParent(null)):"translucent"===this.getResizeMethod()&&this.setOpacity(null),delete this._resizeSession);a.stopPropagation()},_near:function(a,b){return b>a-5&&b<a+5},_onmousemove:function(a){if(!this._disableResize){var b=this._resizeSession;if(b)switch(this._resizeWest?(b.lastWidth=rwt.util.Numbers.limit(b.boxWidth+b.boxLeft-Math.max(a.getPageX(),b.parentContentLeft),b.minWidth,b.maxWidth),b.lastLeft=b.boxRight-b.lastWidth-b.parentContentLeft):this._resizeEast&&(b.lastWidth=rwt.util.Numbers.limit(Math.min(a.getPageX(),b.parentContentRight)-b.boxLeft,b.minWidth,b.maxWidth)),this._resizeNorth?(b.lastHeight=rwt.util.Numbers.limit(b.boxHeight+b.boxTop-Math.max(a.getPageY(),b.parentContentTop),b.minHeight,b.maxHeight),b.lastTop=b.boxBottom-b.lastHeight-b.parentContentTop):this._resizeSouth&&(b.lastHeight=rwt.util.Numbers.limit(Math.min(a.getPageY(),b.parentContentBottom)-b.boxTop,b.minHeight,b.maxHeight)),this.getResizeMethod()){case "opaque":case "translucent":if(this._resizeWest||this._resizeEast)this.setWidth(b.lastWidth),this._resizeWest&&this.setLeft(b.lastLeft);if(this._resizeNorth||this._resizeSouth)this.setHeight(b.lastHeight),this._resizeNorth&&this.setTop(b.lastTop);break;default:var c="frame"==this.getResizeMethod()?this._frame:this;if(this._resizeWest||this._resizeEast)c._renderRuntimeWidth(b.lastWidth),this._resizeWest&&c._renderRuntimeLeft(b.lastLeft);if(this._resizeNorth||this._resizeSouth)c._renderRuntimeHeight(b.lastHeight),this._resizeNorth&&c._renderRuntimeTop(b.lastTop)}else b="",c=this.getElement(),this._resizeNorth=this._resizeSouth=this._resizeWest=this._resizeEast=!1,c=rwt.html.Location.get(c),this._near(c.top,a.getPageY())?this.getResizableNorth()&&(b="n",this._resizeNorth=!0):this._near(c.bottom,a.getPageY())&&this.getResizableSouth()&&(b="s",this._resizeSouth=!0),this._near(c.left,a.getPageX())?this.getResizableWest()&&(b+="w",this._resizeWest=!0):this._near(c.right,a.getPageX())&&this.getResizableEast()&&(b+="e",this._resizeEast=!0),this._resizeNorth||this._resizeSouth||this._resizeWest||this._resizeEast?this.setCursor(b+"-resize"):this.resetCursor();a.stopPropagation()}}},destruct:function(){this._disposeObjects("_frame")}});rwt.qx.Class.define("rwt.widgets.base.ResizablePopup",{extend:rwt.widgets.base.Popup,include:rwt.widgets.util.MResizable,construct:function(){this.base(arguments);this.initMinWidth();this.initMinHeight();this.initWidth();this.initHeight()},properties:{appearance:{refine:!0,init:"resizer"},minWidth:{refine:!0,init:"auto"},minHeight:{refine:!0,init:"auto"},width:{refine:!0,init:"auto"},height:{refine:!0,init:"auto"}},members:{_changeWidth:function(a){this.setWidth(a)},_changeHeight:function(a){this.setHeight(a)},_getResizeParent:function(){return this.getParent()},_getMinSizeReference:function(){return this}}});rwt.qx.Class.define("rwt.widgets.base.Window",{extend:rwt.widgets.base.ResizablePopup,construct:function(a,b,c){this.base(arguments);this.setWindowManager(c||rwt.widgets.base.Window.getDefaultWindowManager());var d=this._layout=new rwt.widgets.base.VerticalBoxLayout;d.setEdge(0);this.add(d);var e=this._captionBar=new rwt.widgets.base.HorizontalBoxLayout;e.setAppearance("window-captionbar");e.setHeight("auto");e.setOverflow("hidden");d.add(e);var f=this._captionIcon=new rwt.widgets.base.Image;f.setAppearance("window-captionbar-icon");e.add(f);f=this._captionTitle=new rwt.widgets.base.Label(a);f.setAppearance("window-captionbar-title");f.setSelectable(!1);e.add(f);f=this._captionFlex=new rwt.widgets.base.HorizontalSpacer;e.add(f);f=this._minimizeButton=new rwt.widgets.base.BasicButton("push",!0);f.setAppearance("window-captionbar-minimize-button");f.setTabIndex(null);f.addEventListener("execute",this._onminimizebuttonclick,this);f.addEventListener("mousedown",this._onbuttonmousedown,this);e.add(f);f=this._restoreButton=new rwt.widgets.base.BasicButton("push",!0);f.setAppearance("window-captionbar-restore-button");f.setTabIndex(null);f.addEventListener("execute",this._onrestorebuttonclick,this);f.addEventListener("mousedown",this._onbuttonmousedown,this);f=this._maximizeButton=new rwt.widgets.base.BasicButton("push",!0);f.setAppearance("window-captionbar-maximize-button");f.setTabIndex(null);f.addEventListener("execute",this._onmaximizebuttonclick,this);f.addEventListener("mousedown",this._onbuttonmousedown,this);e.add(f);f=this._closeButton=new rwt.widgets.base.BasicButton("push",!0);f.setAppearance("window-captionbar-close-button");f.setTabIndex(null);f.addEventListener("execute",this._onclosebuttonclick,this);f.addEventListener("mousedown",this._onbuttonmousedown,this);e.add(f);f=this._pane=new rwt.widgets.base.Parent;f.setHeight("1*");f.setOverflow("hidden");d.add(f);d=this._statusBar=new rwt.widgets.base.HorizontalBoxLayout;d.setAppearance("window-statusbar");d.setHeight("auto");f=this._statusText=new rwt.widgets.base.Label("Ready");f.setAppearance("window-statusbar-text");f.setSelectable(!1);d.add(f);null!=a&&this.setCaption(a);null!=b&&this.setIcon(b);this.setAutoHide(!1);this.addEventListener("mousedown",this._onwindowmousedown);this.addEventListener("click",this._onwindowclick);e.addEventListener("mousedown",this._oncaptionmousedown,this);e.addEventListener("mouseup",this._oncaptionmouseup,this);e.addEventListener("mousemove",this._oncaptionmousemove,this);e.addEventListener("dblclick",this._oncaptiondblblick,this);this.remapChildrenHandlingTo(this._pane)},statics:{getDefaultWindowManager:function(){rwt.widgets.base.Window._defaultWindowManager||(rwt.widgets.base.Window._defaultWindowManager=new rwt.widgets.util.WindowManager);return rwt.widgets.base.Window._defaultWindowManager}},properties:{appearance:{refine:!0,init:"window"},windowManager:{check:"rwt.widgets.util.WindowManager",event:"changeWindowManager"},active:{check:"Boolean",init:!1,apply:"_applyActive",event:"changeActive"},modal:{check:"Boolean",init:!1,apply:"_applyModal",event:"changeModal"},mode:{check:["minimized","maximized"],init:null,nullable:!0,apply:"_applyMode",event:"changeMode"},opener:{check:"rwt.widgets.base.Widget"},caption:{apply:"_applyCaption",event:"changeCaption",dispose:!0},icon:{check:"String",nullable:!0,apply:"_applyIcon",event:"changeIcon"},status:{check:"String",init:"Ready",apply:"_applyStatus",event:"changeStatus"},showClose:{check:"Boolean",init:!0,apply:"_applyShowClose"},showMaximize:{check:"Boolean",init:!0,apply:"_applyShowMaximize"},showMinimize:{check:"Boolean",init:!0,apply:"_applyShowMinimize"},showStatusbar:{check:"Boolean",init:!1,apply:"_applyShowStatusbar"},allowClose:{check:"Boolean",init:!0,apply:"_applyAllowClose"},allowMaximize:{check:"Boolean",init:!0,apply:"_applyAllowMaximize"},allowMinimize:{check:"Boolean",init:!0,apply:"_applyAllowMinimize"},showCaption:{check:"Boolean",init:!0,apply:"_applyShowCaption"},showIcon:{check:"Boolean",init:!0,apply:"_applyShowIcon"},moveable:{check:"Boolean",init:!0,event:"changeMoveable"},moveMethod:{check:["opaque","frame","translucent"],init:"opaque",event:"changeMoveMethod"}},members:{_isFocusRoot:!0,getPane:function(){return this._pane},getCaptionBar:function(){return this._captionBar},getStatusBar:function(){return this._statusBar},close:function(){this.hide()},open:function(a){null!=a&&this.setOpener(a);this.getCentered()&&this.centerToBrowser();this.show()},focus:function(){this.setActive(!0)},blur:function(){this.setActive(!1)},maximize:function(){this.setMode("maximized")},minimize:function(){this.setMode("minimized")},restore:function(){this.setMode(null)},_beforeAppear:function(){rwt.widgets.base.Parent.prototype._beforeAppear.call(this);rwt.widgets.util.PopupManager.getInstance().update();rwt.event.EventHandler.setFocusRoot(this);this.getWindowManager().add(this);this._makeActive()},_beforeDisappear:function(){rwt.widgets.base.Parent.prototype._beforeDisappear.call(this);var a=rwt.event.EventHandler.getFocusRoot();(a==this||this.contains(a))&&rwt.event.EventHandler.setFocusRoot(null);(a=rwt.event.EventHandler.getCaptureWidget())&&this.contains(a)&&a.setCapture(!1);this.getWindowManager().remove(this);this._makeInactive()},_minZIndex:1E5,_sendTo:function(){for(var a=rwt.util.Objects.getValues(this.getWindowManager().getAll()).sort(function(a,b){return a.getZIndex()-b.getZIndex()}),b=a.length,c=this._minZIndex,d=0;d<b;d++)a[d].setZIndex(c++)},_applyActive:function(a,b){b?(this.getFocused()&&this.setFocused(!1),this.getWindowManager().getActiveWindow()==this&&this.getWindowManager().setActiveWindow(null),this._setActiveState(!1)):(this.getFocusedChild()||this.setFocused(!0),this._setActiveState(!0),this.getWindowManager().setActiveWindow(this),this.bringToFront())},_setActiveState:function(a){this.getWindowManager().blockActiveState||(this.toggleState("active",a),this._captionBar.toggleState("active",a),this._minimizeButton.toggleState("active",a),this._restoreButton.toggleState("active",a),this._maximizeButton.toggleState("active",a),this._closeButton.toggleState("active",a))},_applyModal:function(a){if(this._initialLayoutDone&&this.getVisibility()&&this.getDisplay()){var b=this.getTopLevelWidget();a?b.block(this):b.release(this)}},_applyAllowClose:function(){this._closeButtonManager()},_applyAllowMaximize:function(){this._maximizeButtonManager()},_applyAllowMinimize:function(){this._minimizeButtonManager()},_applyMode:function(a,b){switch(a){case "minimized":this._disableResize=!0;this._minimize();break;case "maximized":this._disableResize=!0;this._maximize();break;default:switch(delete this._disableResize,b){case "maximized":this._restoreFromMaximized();break;case "minimized":this._restoreFromMinimized()}}},_applyShowCaption:function(a){a?this._captionBar.addAt(this._captionTitle,this.getShowIcon()?1:0):this._captionBar.remove(this._captionTitle)},_applyShowIcon:function(a){a?this._captionBar.addAtBegin(this._captionIcon):this._captionBar.remove(this._captionIcon)},_applyShowStatusbar:function(a){a?this._layout.addAtEnd(this._statusBar):this._layout.remove(this._statusBar)},_applyShowClose:function(a){a?this._captionBar.addAtEnd(this._closeButton):this._captionBar.remove(this._closeButton)},_applyShowMaximize:function(a){a?(a="maximized"==this.getMode()?this._restoreButton:this._maximizeButton,this.getShowMinimize()?this._captionBar.addAfter(a,this._minimizeButton):this._captionBar.addAfter(a,this._captionFlex)):(this._captionBar.remove(this._maximizeButton),this._captionBar.remove(this._restoreButton))},_applyShowMinimize:function(a){a?this._captionBar.addAfter(this._minimizeButton,this._captionFlex):this._captionBar.remove(this._minimizeButton)},_minimizeButtonManager:function(){!1===this.getAllowMinimize()?this._minimizeButton.setEnabled(!1):this._minimizeButton.resetEnabled()},_closeButtonManager:function(){!1===this.getAllowClose()?this._closeButton.setEnabled(!1):this._closeButton.resetEnabled()},_maximizeButtonManager:function(){var a=this.getAllowMaximize()&&this.getResizable()&&this._computedMaxWidthTypeNull&&this._computedMaxHeightTypeNull;this._maximizeButton&&(!1===a?this._maximizeButton.setEnabled(!1):this._maximizeButton.resetEnabled());this._restoreButton&&(!1===a?this._restoreButton.setEnabled(!1):this._restoreButton.resetEnabled())},_applyStatus:function(a){this._statusText.setText(a)},_applyMaxWidth:function(a){this.base(arguments,a);this._maximizeButtonManager()},_applyMaxHeight:function(a){this.base(arguments,a);this._maximizeButtonManager()},_applyResizable:function(){this._maximizeButtonManager()},_applyCaption:function(a){this._captionTitle.setText(a)},_applyIcon:function(a){this._captionIcon.setSource(a)},_minimize:function(){this.blur();this.hide()},_restoreFromMaximized:function(){this.setLeft(this._previousLeft?this._previousLeft:null);this.setWidth(this._previousWidth?this._previousWidth:null);this.setRight(this._previousRight?this._previousRight:null);this.setTop(this._previousTop?this._previousTop:null);this.setHeight(this._previousHeight?this._previousHeight:null);this.setBottom(this._previousBottom?this._previousBottom:null);this.removeState("maximized");if(this.getShowMaximize()){var a=this._captionBar,b=a.indexOf(this._restoreButton);a.remove(this._restoreButton);a.addAt(this._maximizeButton,b)}this.focus()},_restoreFromMinimized:function(){this.hasState("maximized")&&this.setMode("maximized");this.show();this.focus()},_maximize:function(){if(!this.hasState("maximized")){this._previousLeft=this.getLeft();this._previousWidth=this.getWidth();this._previousRight=this.getRight();this._previousTop=this.getTop();this._previousHeight=this.getHeight();this._previousBottom=this.getBottom();this.setLeft(0);this.setTop(0);this.setWidth("100%");this.setHeight("100%");this.addState("maximized");if(this.getShowMaximize()){var a=this._captionBar,b=a.indexOf(this._maximizeButton);a.remove(this._maximizeButton);a.addAt(this._restoreButton,b)}this.focus()}},_onwindowclick:function(a){a.stopPropagation()},_onwindowmousedown:function(){try{this.focus()}catch(a){rwt.runtime.ErrorHandler.processJavaScriptError(a)}},_onbuttonmousedown:function(a){a.stopPropagation()},_onminimizebuttonclick:function(a){this.minimize();this._minimizeButton.removeState("pressed");this._minimizeButton.removeState("abandoned");this._minimizeButton.removeState("over");a.stopPropagation()},_onrestorebuttonclick:function(a){this.restore();this._restoreButton.removeState("pressed");this._restoreButton.removeState("abandoned");this._restoreButton.removeState("over");a.stopPropagation()},_onmaximizebuttonclick:function(a){this.maximize();this._maximizeButton.removeState("pressed");this._maximizeButton.removeState("abandoned");this._maximizeButton.removeState("over");a.stopPropagation()},_onclosebuttonclick:function(a){this.close();this._closeButton.removeState("pressed");this._closeButton.removeState("abandoned");this._closeButton.removeState("over");a.stopPropagation()},_oncaptionmousedown:function(a){if(a.isLeftButtonPressed()&&this.getMoveable()&&null==this.getMode()){this._captionBar.setCapture(!0);var b=this.getElement(),c=this.getParent().getElement(),c=rwt.html.Location.get(c,"scroll"),d=rwt.html.Location.get(b),e=rwt.html.Viewport.getScrollLeft(),f=rwt.html.Viewport.getScrollTop();this._dragSession={offsetX:a.getPageX()-d.left+c.left+e,offsetY:a.getPageY()-d.top+c.top+f,parentAvailableAreaLeft:c.left+e+5,parentAvailableAreaTop:c.top+f+5,parentAvailableAreaRight:c.right+e-5,parentAvailableAreaBottom:c.bottom+f-5};switch(this.getMoveMethod()){case "translucent":this.setOpacity(.5);break;case "frame":a=this._frame,a.getParent()!=this.getParent()&&(a.setParent(this.getParent()),rwt.widgets.base.Widget.flushGlobalQueues()),a._renderRuntimeLeft(d.left-c.left),a._renderRuntimeTop(d.top-c.top),a._renderRuntimeWidth(b.offsetWidth),a._renderRuntimeHeight(b.offsetHeight),a.setZIndex(this.getZIndex()+1)}}},_oncaptionmouseup:function(){var a=this._dragSession;if(a){this._captionBar.setCapture(!1);null!=a.lastX&&this.setLeft(a.lastX);null!=a.lastY&&this.setTop(a.lastY);switch(this.getMoveMethod()){case "translucent":this.setOpacity(null);break;case "frame":this._frame.setParent(null)}delete this._dragSession}},_oncaptionmousemove:function(a){var b=this._dragSession;if(b&&this._captionBar.getCapture()){var c=this._appModal?a.getClientX():a.getPageX();a=this._appModal?a.getClientY():a.getPageY();if(rwt.util.Numbers.isBetween(c,b.parentAvailableAreaLeft,b.parentAvailableAreaRight)&&rwt.util.Numbers.isBetween(a,b.parentAvailableAreaTop,b.parentAvailableAreaBottom)){var d="frame"==this.getMoveMethod()?this._frame:this;d._renderRuntimeLeft(b.lastX=c-b.offsetX);d._renderRuntimeTop(b.lastY=a-b.offsetY)}}},_oncaptiondblblick:function(){if(this._maximizeButton.getEnabled())return"maximized"==this.getMode()?this.restore():this.maximize()}},destruct:function(){this._disposeObjects("_layout","_captionBar","_captionIcon","_captionTitle","_captionFlex","_closeButton","_minimizeButton","_maximizeButton","_restoreButton","_pane","_statusBar","_statusText")}});rwt.qx.Class.define("rwt.widgets.base.HorizontalSpacer",{extend:rwt.widgets.base.Terminator,construct:function(){this.base(arguments);this.initWidth()},properties:{width:{refine:!0,init:"1*"}}});rwt.qx.Class.define("rwt.widgets.util.WindowManager",{extend:rwt.util.ObjectManager,properties:{activeWindow:{check:"Object",nullable:!0,apply:"_applyActiveWindow"}},members:{blockActiveState:!1,_applyActiveWindow:function(a,b){rwt.widgets.util.PopupManager.getInstance().update();b&&b.setActive(!1);a&&a.setActive(!0);b&&b.getModal()&&b.getTopLevelWidget().release(b);a&&a.getModal()&&a.getTopLevelWidget().block(a)},update:function(){var a,b=this.getAll(),c;for(c in b)a=b[c],a.getAutoHide()&&a.hide()},compareWindows:function(a,b){switch(a.getWindowManager().getActiveWindow()){case a:return 1;case b:return-1}return a.getZIndex()-b.getZIndex()},add:function(a){this.base(arguments,a);this.setActiveWindow(a)},remove:function(a){this.base(arguments,a);if(this.getActiveWindow()==a){var b=[],c;for(c in this._objects)b.push(this._objects[c]);c=b.length;0===c?this.setActiveWindow(null):1===c?this.setActiveWindow(b[0]):1<c&&(b.sort(this.compareWindows),this.setActiveWindow(b[c-1]))}}}});rwt.qx.Class.define("rwt.widgets.MenuItemSeparator",{extend:rwt.widgets.base.Parent,construct:function(){this.base(arguments);this.initHeight();this.setStyleProperty("fontSize","0");this.setStyleProperty("lineHeight","0");this._line=new rwt.widgets.base.Terminator;this._line.setAnonymous(!0);this._line.setAppearance("menu-separator-line");this.add(this._line);this.addEventListener("mousedown",this._onmousedown)},properties:{height:{refine:!0,init:"auto"},appearance:{refine:!0,init:"menu-separator"}},members:{hasIcon:rwt.util.Functions.returnFalse,hasLabel:rwt.util.Functions.returnFalse,hasShortcut:rwt.util.Functions.returnFalse,hasMenu:rwt.util.Functions.returnFalse,_onmousedown:function(a){a.stopPropagation()}},destruct:function(){this._disposeObjects("_line")}});rwt.qx.Class.define("rwt.widgets.base.TabFolderPage",{extend:rwt.widgets.base.Parent,construct:function(a){this.base(arguments);void 0!==a&&this.setButton(a);this.initTop();this.initRight();this.initBottom();this.initLeft()},properties:{top:{refine:!0,init:0},right:{refine:!0,init:0},bottom:{refine:!0,init:0},left:{refine:!0,init:0},display:{refine:!0,init:!1},button:{check:"rwt.widgets.TabItem",apply:"_applyButton"}},members:{_applyButton:function(a,b){b&&b.setPage(null);a&&a.setPage(this)}}});rwt.qx.Class.define("rwt.runtime.ErrorHandler",{statics:{_overlay:null,_box:null,processJavaScriptErrorInResponse:function(a,b,c){var d=this._getErrorPageHeader(),d=d+("\x3cpre\x3e"+this._gatherErrorDetails(b,a,c)+"\x3c/pre\x3e");this.showErrorBox("client error",!0,d)},processJavaScriptError:function(a){this.errorObject=a;if("object"===typeof console){var b="Error: "+(a.message?a.message:a);"undefined"!==typeof console.error?console.error(b):"undefined"!==typeof console.log&&console.log(b);"function"===typeof console.log&&a.stack?console.log("Error stack:\n"+a.stack):"undefined"!==typeof console.trace&&console.trace()}b=!0;try{b=rwt.util.Variant.isSet("qx.debug","on")}catch(c){}if(b)throw b=this._getErrorPageHeader(),b+="\x3cpre\x3e"+this._gatherErrorDetails(a)+"\x3c/pre\x3e",this.showErrorBox("client error",!0,b),a;},showErrorPage:function(a){this._enableTextSelection();this._freezeApplication();document.title="Error Page";this._createErrorPageArea().innerHTML=a},showErrorBox:function(a,b,c){b&&this._freezeApplication();"connection error"!==a&&this._unloadAllIframes();this._overlay=this._createOverlay();this._box=this._createErrorBoxArea(450,150);rwt.theme.ThemeStore.getInstance().getBorder("ErrorBox",{},"border").renderElement(this._box);this._box.style.padding="0px";this._box.style.overflow="hidden";a=this._getErrorBoxData(a);this._title=this._createErrorBoxTitleArea(this._box);this._title.innerHTML=a.title;this._description=this._createErrorBoxDescriptionArea(this._box);this._description.innerHTML=a.description;this._action=this._createErrorBoxActionArea(this._box);a=a.action;c&&0<c.trim().length&&(a+=this._getDetailsAction());a&&(this._action.innerHTML=a);if(a=this._action.getElementsByTagName("a")[0])this._styleHyperlinkAsButton(a),a.focus();if(a=document.getElementById("rwt_detailsActionHyperlink")){this._styleHyperlinkAsButton(a);var d=this;a.addEventListener("click",function(){d.showErrorPage(c)})}},_getDetailsAction:function(){return'\x3ca id\x3d"rwt_detailsActionHyperlink" href\x3d"javascript:void(0)"\x3e'+rwt.client.ClientMessages.getInstance().getMessage("Details")+"\x3c/a\x3e"},showWaitHint:function(){this._overlay=this._createOverlay();var a=rwt.theme.ThemeStore.getInstance().getSizedImage("SystemMessage-DisplayOverlay",{},"background-image");a&&a[0]&&(this._box=this._createErrorBoxArea(a[1],a[2]),rwt.html.Style.setBackgroundImage(this._box,a[0]),this._box.style.backgroundColor="transparent",this._box.style.border="none",this._box.style.overflow="hidden")},hideErrorBox:function(){this._box&&(this._box.parentNode.removeChild(this._box),this._box=null);this._overlay&&(this._overlay.parentNode.removeChild(this._overlay),this._overlay=null);rwt.event.EventHandler.setBlockKeyEvents(!1)},_getErrorPageHeader:function(){var a=this._getErrorBoxData("client error"),b="\x3ch2\x3e"+a.title+"\x3c/h2\x3e",b=b+("\x3ch3\x3e"+a.details+"\x3c/h3\x3e");return b+"\x3chr/\x3e"},_gatherErrorDetails:function(a,b,c){var d=[];try{d.push("Error: "+a+"\n");b&&d.push("Script: "+b);if(a instanceof Error){for(var e in a)d.push(e+": "+a[e]);a.stack&&d.push("Stack: "+a.stack)}d.push("Debug: "+rwt.util.Variant.get("qx.debug"));c&&d.push("Request: "+c.getData());rwt.widgets.base.Widget._inFlushGlobalQueues&&d.push("Phase: "+rwt.widgets.base.Widget._flushGlobalQueuesPhase)}catch(f){}return d.join("\n  ")},_createOverlay:function(){var a=document.createElement("div"),b=rwt.theme.ThemeStore.getInstance(),c=b.getColor("SystemMessage-DisplayOverlay",{},"background-color"),b=b.getAlpha("SystemMessage-DisplayOverlay",{},"background-color"),d=a.style;d.position="fixed";d.width="100%";d.height="100%";d.backgroundColor="undefined"===c?"transparent":c;d.opacity=b;d.zIndex=1E8;document.body.appendChild(a);rwt.event.EventHandler.setBlockKeyEvents(!0);return a},_createErrorPageArea:function(){var a=document.createElement("div"),b=a.style;b.position="absolute";b.width="100%";b.height="100%";b.backgroundColor="#ffffff";b.zIndex=100000001;b.overflow="auto";b.padding="10px";document.body.appendChild(a);return a},_createErrorBoxArea:function(a,b){var c=document.createElement("div"),d=c.style;d.position="fixed";d.width=a+"px";d.height=b+"px";var e=rwt.widgets.base.ClientDocument.getInstance(),f=(e.getClientWidth()-a)/2,e=(e.getClientHeight()-b)/2;d.left=(0>f?0:f)+"px";d.top=(0>e?0:e)+"px";d.zIndex=100000001;d.padding="10px";d.textAlign="center";d.fontFamily='verdana,"lucida sans",arial,helvetica,sans-serif';d.fontSize="12px";d.fontStyle="normal";d.fontWeight="normal";document.body.appendChild(c);return c},_createErrorBoxTitleArea:function(a){var b=document.createElement("div"),c=rwt.theme.ThemeStore.getInstance(),d=c.getColor("ErrorBox-Titlebar",{},"color"),e=c.getFont("ErrorBox-Titlebar",{},"font"),c=c.getColor("ErrorBox-Titlebar",{},"background-color"),f=b.style;f.position="absolute";f.left="0px";f.top="0px";f.width="100%";f.height="40px";f.padding="10px";f.textAlign="left";f.color=d;f.font=e.toCss();f.backgroundColor=c;a.appendChild(b);return b},_createErrorBoxDescriptionArea:function(a){var b=document.createElement("div"),c=rwt.theme.ThemeStore.getInstance(),d=c.getColor("ErrorBox",{},"color"),e=c.getFont("ErrorBox",{},"font"),c=c.getColor("ErrorBox",{},"background-color"),f=b.style;f.position="absolute";f.left="0px";f.top="40px";f.width="100%";f.height="70px";f.padding="10px";f.overflow="auto";f.textAlign="left";f.font=e.toCss();f.color=d;f.backgroundColor=c;a.appendChild(b);return b},_createErrorBoxActionArea:function(a){var b=document.createElement("div"),c=b.style;c.position="absolute";c.left="0px";c.top="110px";c.width="100%";c.height="40px";c.padding="10px";c.textAlign="center";c.borderTop="1px solid #CCCCCC";c.backgroundColor="#F2F2F2";c.fontSize="14px";a.appendChild(b);return b},_freezeApplication:function(){try{rwt.widgets.Display.getCurrent().setExitConfirmation(null),rwt.event.EventHandler.detachEvents(),rwt.qx.Target.prototype.dispatchEvent=function(){},rwt.animation.Animation._stopLoop()}catch(a){try{console.log("_freezeApplication exception: "+a)}catch(b){}}},_unloadAllIframes:function(){for(var a=document.getElementsByTagName("iframe"),b=0;b<a.length;b++)a[b].src=rwt.remote.Connection.RESOURCE_PATH+"static/html/blank.html"},_enableTextSelection:function(){rwt.widgets.base.ClientDocument.getInstance().setSelectable(!0);rwt.client.Client.isGecko()&&document.documentElement.removeEventListener("mousedown",rwt.event.EventHandlerUtil._ffMouseFixListener,!1)},_getErrorBoxData:function(a){var b={title:"",description:"",details:"",action:""},c=rwt.client.ClientMessages.getInstance();switch(a){case "invalid request counter":case "request failed":b.title=c.getMessage("ServerError");b.description=c.getMessage("ServerErrorDescription");b.action='\x3ca href\x3d"'+this._getRestartURL()+'"\x3e'+c.getMessage("Restart")+"\x3c/a\x3e";break;case "session timeout":b.title=c.getMessage("SessionTimeout");b.description=c.getMessage("SessionTimeoutDescription");b.action='\x3ca href\x3d"'+this._getRestartURL()+'"\x3e'+c.getMessage("Restart")+"\x3c/a\x3e";break;case "connection error":b.title=c.getMessage("ConnectionError");b.description=c.getMessage("ConnectionErrorDescription");b.action='\x3ca href\x3d"javascript:rwt.remote.Connection.getInstance()._retry();"\x3e'+c.getMessage("Retry")+"\x3c/a\x3e";break;case "client error":b.title=c.getMessage("ClientError");b.description=c.getMessage("ClientErrorDescription");b.details=c.getMessage("Details");b.action='\x3ca href\x3d"'+this._getRestartURL()+'"\x3e'+c.getMessage("Restart")+"\x3c/a\x3e";break;default:b.title=c.getMessage("ServerError"),b.description=c.getMessage("ServerErrorDescription"),b.action='\x3ca href\x3d"'+this._getRestartURL()+'"\x3e'+c.getMessage("Restart")+"\x3c/a\x3e"}b.title=rwt.util.Encoding.replaceNewLines(b.title,"");b.description=rwt.util.Encoding.replaceNewLines(b.description,"\x3cbr/\x3e");return b},_getRestartURL:function(){var a=String(window.location),b=a.indexOf("#");-1!=b&&(a=a.substring(0,b));return a},_styleHyperlinkAsButton:function(a){a=a.style;a.outline="none";a.textDecoration="none";a.backgroundColor="#E8E8E8";a.color="#4a4a4a";a.padding="5px 15px";a.margin="5px";a.borderTop="1px solid #CCCCCC";a.borderRight="1px solid #333333";a.borderBottom="1px solid #333333";a.borderLeft="1px solid #CCCCCC"}}});namespace("rwt.widgets.util");(function(){var a=rwt.util.Variant;rwt.widgets.util.CellRendererRegistry=function(){var a=function(){},b={};this.add=function(a){if(null==a||"string"!==typeof a.contentType||"string"!==typeof a.cellType)throw Error("Can not register invalid renderer");if(null!=b[a.cellType])throw Error("Renderer for cellType "+a.cellType+" already registered");c(a);b[a.cellType]=a};this.getRendererFor=function(a){return b[a]||null};this.removeRendererFor=function(a){delete b[a]};this.getAll=function(){a.prototype=b;return new a};var c=function(a){var b=a.createElement||d;a.createElement=function(a){var c=b(a);c.style.position="absolute";c.style.overflow="hidden";var d=a.selectable?"rwt-cell-selectable":"rwt-cell",e;e=(e=a.name)&&1<e.length?e.charAt(0).match(/[a-zA-Z]/)&&e.match(/^[a-zA-Z0-9_\-]*$/):!1;e&&(d+=" "+a.name);c.setAttribute("class",d);return c}},d=function(){return document.createElement("div")};this.add(e);this.add(f)};rwt.widgets.util.CellRendererRegistry.getInstance=function(){return rwt.runtime.Singletons.get(rwt.widgets.util.CellRendererRegistry)};var b=rwt.util.Encoding,c=function(a,c){var d=b.escapeText(a,!1),d=b.replaceNewLines(d,c?"":"\x3cbr/\x3e");return d=b.replaceWhiteSpaces(d)},d={LEFT:"left",CENTER:"center",RIGHT:"right",TOP:"top",BOTTOM:"bottom"},e={cellType:"text",contentType:"text",createElement:function(a){var b=document.createElement("div");b.style.textAlign=d[a.horizontalAlignment]||"left";b.style.whiteSpace=a.wrap?"":"nowrap";b.style.textOverflow="ellipsis";return b},renderContent:a.select("qx.client",{trident:function(a,d,e,f){d=d||"";f.markupEnabled?a.rap_Markup!==d&&(a.innerHTML=d,a.rap_Markup=d):f.seeable?(f.removeNewLines&&(d=b.replaceNewLines(d,"")),a.innerText=d):a.innerHTML=c(d,f.removeNewLines)},"default":function(a,b,d,e){b=b||"";e.markupEnabled?b!==a.rap_Markup&&(a.innerHTML=b,a.rap_Markup=b):a.innerHTML=c(b,e.removeNewLines)}})},f={cellType:"image",contentType:"image",renderContent:function(a,b,c,d){c=d.enabled?1:.3;rwt.html.Style.setBackgroundImage(a,b?b[0]:null);a.style.opacity=c},createElement:function(a){var b=document.createElement("div");rwt.html.Style.setBackgroundRepeat(b,"no-repeat");var c=["center","center"];"FIT"===a.scaleMode?rwt.html.Style.setBackgroundSize(b,"contain"):"FILL"===a.scaleMode?rwt.html.Style.setBackgroundSize(b,"cover"):"STRETCH"===a.scaleMode?rwt.html.Style.setBackgroundSize(b,"100% 100%"):(c[0]=d[a.horizontalAlignment]||"center",c[1]=d[a.verticalAlignment]||"center");rwt.html.Style.setBackgroundPosition(b,c.join(" "));return b}}})();(function(a){rwt.qx.Class.define("rwt.widgets.base.GridRowContainer",{extend:rwt.widgets.base.VerticalBoxLayout,construct:function(){this.base(arguments);this.$rows=a("\x3cdiv\x3e").css(b).appendTo(this);this.$el=a(this);this.setOverflow("hidden");this._scrollLeft=0;this._rowHeight=16;this._rowWidth=0;this._gridLines={horizontal:null,vertical:null};this._renderTime=this._topItem=this._baseAppearance=null;this._topItemIndex=0;this._items=[];this._asyncQueue={};this._asyncTimer=new rwt.client.Timer(0);this._asyncTimer.addEventListener("interval",this._onAsyncTimer,this);this._hoverItem=null;this._hoverTargetType=[];this._config=rwt.widgets.base.GridRowContainer.createRenderConfig();this.addEventListener("elementOver",this._onElementOver,this);this.addEventListener("elementOut",this._onElementOut,this)},destruct:function(){for(;0<this.getRowCount();)this.getRow(0).dispose();this._hoverTargetType=this._hoverItem=this._items=this._renderTime=this._topItem=this._gridLines=null;this._asyncTimer.dispose();this._asyncTimer=null},statics:{createRenderConfig:function(){return{textColor:null,font:null,enabled:!0,seeable:!1,focused:!1,linesVisible:!1,fullSelection:!1,hideSelection:!1,alwaysHideSelection:!1,autoHeight:!1,variant:null,selectionPadding:null,indentionWidth:0,hasCheckBoxes:!1,checkBoxLeft:null,checkBoxWidth:null,columnCount:0,cellOrder:[0],treeColumn:0,alignment:[],wordWrap:[],itemLeft:[],itemWidth:[],itemImageLeft:[],itemImageWidth:[],itemTextLeft:[],itemTextWidth:[],itemCellCheck:[],itemCellCheckLeft:[],itemCellCheckWidth:[],vBarWidth:0}}},members:{setTopItem:function(a,b,e){this._topItem=a;if(e){a=b-this._topItemIndex;this._topItemIndex=b;b=0<a;a=Math.abs(a);if(a>=this.getRowCount())this._renderAll(!0);else{var c=this.getRowCount()-a;e=b?c:0;c=this.getRow(b?a:c);this._sortRows(c,b);this._updateRows(e,a,!0)}this._checkHoverItem()}else this._topItemIndex=b},getRenderConfig:function(){return this._config},setSelectionProvider:function(a,b){this._selectionProvider=[a,b]},setBaseAppearance:function(a){this._baseAppearance=a},setRowWidth:function(a){this._rowWidth=a;this.$rows.css("width",a);this._forEachRow(function(b){b.setWidth(a)})},setRowHeight:function(a){this._rowHeight=a;this._forEachRow(function(b){b.setHeight(a)});this._updateRowCount()},setCellToolTipsEnabled:function(a){(this._cellToolTipsEnabled=a)?this.setToolTipText(""):this.resetToolTipText()},getCellToolTipsEnabled:function(){return this._cellToolTipsEnabled},requestToolTipText:function(){this.dispatchSimpleEvent("renderCellToolTip",this._hoverRow,!0)},getToolTipTargetBounds:function(){return rwt.widgets.util.GridCellToolTipSupport.getCurrentToolTipTargetBounds(this._hoverRow)},updateGridLines:function(){this._gridLines={horizontal:this._getGridLine("horizontal"),vertical:this._getGridLine("vertical")};this._forEachRow(function(a){a.setGridLines(this._gridLines);a.setState("linesvisible",this._config.linesVisible)})},updateLeftBorder:function(){this.$el.css("box-shadow","-1px 0px 8px rgba(0, 0, 0, 0.2)")},updateRightBorder:function(){this.$el.css("box-shadow","-1px 0px 8px rgba(0, 0, 0, 0.2)")},_getGridLine:function(a){if(!this._config.linesVisible)return null;var b={rowTempalte:null!=this._config.rowTemplate};b[a]=!0;null!=this._config.variant&&(b[this._config.variant]=!0);a=new rwt.theme.ThemeValues(b);b=a.getCssColor(rwt.util.Strings.toFirstUp(this._baseAppearance)+"-GridLine","color");b="undefined"==b?"transparent":b;a.dispose();return b},getRowCount:function(){return this.$rows.prop("childElementCount")},getRow:function(a){return this.$rows.prop("children")[a].row},renderAll:function(){this._renderAll(!1)},renderItemQueue:function(a){for(var b in a){var c=a[b],f=this._items.indexOf(c);-1!==f&&this._renderRow(this.getRow(f),c)}},renderItem:function(a){if(this._isCreated&&null!=a){var b=this.findRowByItem(a);null!=b&&this._renderRow(b,a)}},renderRowHeight:function(){this._forEachRow(function(a){var b=this.findItemByRow(a);null!=b&&a.renderHeight(b,this._config)})},setScrollLeft:function(a){this._scrollLeft=a;this.isSeeable()&&this.base(arguments,a)},findRowByElement:function(a){for(;a&&!a.row&&!a.rwtWidget;)a=a.parentElement;return a?a.row:null},findItemByRow:function(a){for(var b=-1,c=this.getRowCount(),f=0;f<c&&-1===b;f++)this.getRow(f)===a&&(b=f);return-1!==b?this._items[b]:null},findRowByItem:function(a){a=this._items.indexOf(a);return-1!==a?this.getRow(a):null},getRowIndex:function(a){return this._items.indexOf(this.findItemByRow(a))},getHoverItem:function(){return this._hoverItem},_getRowAppearance:function(){return this._baseAppearance+"-row"},_renderAll:function(a){this._updateRows(0,this.getRowCount(),a)},_updateRowCount:function(){for(var a=Math.round(this.getHeight()/this._rowHeight+.5);this.getRowCount()<a;){var b=new rwt.widgets.base.GridRow;b.setMirror("rtl"===this.getDirection());b.setAppearance(this._getRowAppearance());b.setGridLines(this._gridLines);b.$el.css({zIndex:0,width:this._rowWidth,height:this._rowHeight});b.setState("linesvisible",this._config.linesVisible);this.$rows.append(b.$el)}for(;this.getRowCount()>a;)this.getRow(this.getRowCount()-1).dispose();this._items.length=this.getRowCount();this._updateRowsEvenState()},_updateRowsEvenState:function(){this._forEachRow(function(a,b){a.updateEvenState(this._topItemIndex+b)})},_updateRows:function(a,b,e){this._updateRowsEvenState();var c=this._topItem;b=a+b;for(var d=0;null!=c&&d<this.getRowCount();)this._items[d]=c,d>=a&&d<=b&&this._renderRow(this.getRow(d),c,e),c=c.getNextItem(),d++;for(a=d;a<this.getRowCount();a++)this._renderRow(this.getRow(a),null,e),this._items[a]=null},_renderRow:function(a,b,e){a.renderItem(b,this._config,this._isSelected(b),this._getHoverElement(b),e);b&&this.dispatchSimpleEvent("rowRendered",a)},_sortRows:function(a,b){for(var c=this.getRowCount()-1;this.getRow(0)!==a;)b?(this.$rows.append(this.getRow(0).$el),this._items.push(this._items.shift())):(this.$rows.prepend(this.getRow(c).$el),this._items.unshift(this._items.pop()))},_checkHoverItem:function(){var a=rwt.event.MouseEvent.getClientX(),b=rwt.event.MouseEvent.getClientY(),a=rwt.event.EventHandlerUtil.getElementAt(a,b),b=this.findRowByElement(a);this._hoverRow!==b&&this._onRowOver(b,a)},_onElementOver:function(a){a=a.getDomTarget();this._onRowOver(this.findRowByElement(a),a)},_onElementOut:function(a){a=a.getDomEvent();a=rwt.event.EventHandlerUtil.getRelatedTargetObjectFromEvent(a);this.findRowByElement(a)||(this._hoverTargetType=[],this._setHoverItem(null,null))},_onRowOver:function(a,b){if(a){var c=this.findItemByRow(a),d=a.identify(b);if(c!==this._hoverItem||this._hoverTargetType[0]!==d[0])this._hoverTargetType=d,this._setHoverItem(c,a)}},_setHoverItem:function(a,b){var c=this._hoverItem;this._hoverItem=a;this._hoverRow=b||(a?this.findRowByItem(a):null);c!==a&&(this.dispatchSimpleEvent("hoverItem",a),this.dispatchSimpleEvent("updateToolTip",this),this._renderAsync(c));this._renderAsync(a)},_getHoverElement:function(a){var b=null;this._hoverItem===a&&(b=this._hoverTargetType);return b},_renderAsync:function(a){null!==a&&(this._asyncQueue[a.toHashCode()]=a,this._asyncTimer.start())},_onAsyncTimer:function(){this._asyncTimer.stop();this.renderItemQueue(this._asyncQueue);this._asyncQueue={}},_isSelected:function(a){return this._selectionProvider[0].call(this._selectionProvider[1],a)},_forEachRow:function(a){for(var b=this.getRowCount(),c=0;c<b;c++)a.call(this,this.getRow(c),c)},_applyHeight:function(a,b){this.base(arguments,a,b);this._updateRowCount()},_applyDirection:function(a){this.base(arguments,a);var b="rtl"===this.getDirection();this.$rows.css({left:b?"":0,right:b?0:""});this._forEachRow(function(a){a.setMirror(b)})},_afterAppear:function(){this.base(arguments);this.setScrollLeft(this._scrollLeft)},supportsDrop:function(){return!0}}});var b={position:"absolute",left:0,top:0,height:"100%"}})(rwt.util._RWTQuery);namespace("rwt.widgets.util");rwt.widgets.util.GridRowContainerWrapper=function(){this._fixedColumns=0;this._container=[];this._container[0]=new rwt.widgets.base.GridRowContainer;this._container[1]=new rwt.widgets.base.GridRowContainer;this._container[2]=new rwt.widgets.base.GridRowContainer;this._config=rwt.widgets.base.GridRowContainer.createRenderConfig();this._rowWidth=this._splitOffset=this._width=0;this.addEventListener("hoverItem",this._onHoverItem,this)};rwt.widgets.util.GridRowContainerWrapper.createInstance=function(){if(!this.prototype._protoInit){for(var a=0;a<this._CONTAINER_DELEGATES.length;a++)this._createContainerDelegater(this._CONTAINER_DELEGATES[a]);for(a=0;a<this._CONTAINER_GETTER_DELEGATES.length;a++)this._createContainerGetterDelegater(this._CONTAINER_GETTER_DELEGATES[a]);this.prototype._protoInit=!0}return new rwt.widgets.util.GridRowContainerWrapper};rwt.widgets.util.GridRowContainerWrapper._createContainerDelegater=function(a){this.prototype[a]=function(){this._container[0][a].apply(this._container[0],arguments);this._container[1][a].apply(this._container[1],arguments);this._container[2][a].apply(this._container[2],arguments)}};rwt.widgets.util.GridRowContainerWrapper._createContainerGetterDelegater=function(a){this.prototype[a]=function(){return this._container[0][a].apply(this._container[0],arguments)}};rwt.widgets.util.GridRowContainerWrapper._CONTAINER_DELEGATES="setParent destroy addEventListener removeEventListener setSelectionProvider setHeight setTop setBackgroundColor setBackgroundImage setRowHeight setTopItem renderItem setToolTip renderItemQueue setBaseAppearance setCellToolTipsEnabled getRow setToolTipText setDirection".split(" ");rwt.widgets.util.GridRowContainerWrapper._CONTAINER_GETTER_DELEGATES="getTop getHeight getHoverItem getElement getChildrenLength getRowCount".split(" ");rwt.widgets.util.GridRowContainerWrapper.prototype={_protoInit:!1,getSubContainer:function(a){return this._container[a]||null},setFixedColumns:function(a){this._fixedColumns=a;this._updateConfig()},getFixedColumns:function(){return this._fixedColumns},setFixedRight:function(a){this._fixedRight=a;this._updateConfig()},getRenderConfig:function(){return this._config},setPostRenderFunction:function(){},setWidth:function(a){this._width=a;this._layoutX()},getWidth:function(){return this._width},setRowWidth:function(a){this._rowWidth=a;this._layoutX()},setScrollLeft:function(a){this._container[1].setScrollLeft(a)},findItemByRow:function(a){var b=this._container[0].findItemByRow(a);null==b&&(b=this._container[1].findItemByRow(a));null==b&&(b=this._container[2].findItemByRow(a));return b},findRowByElement:function(a){var b=this._container[0].findRowByElement(a);null==b&&(b=this._container[1].findRowByElement(a));null==b&&(b=this._container[2].findRowByElement(a));return b},updateGridLines:function(){this._container[0].getRenderConfig().linesVisible=this._config.linesVisible;this._container[0].getRenderConfig().variant=this._config.variant;this._container[0].updateGridLines();this._container[1].getRenderConfig().linesVisible=this._config.linesVisible;this._container[1].getRenderConfig().variant=this._config.variant;this._container[1].updateGridLines();this._container[2].getRenderConfig().linesVisible=this._config.linesVisible;this._container[2].getRenderConfig().variant=this._config.variant;this._container[2].updateGridLines();this._container[2].updateLeftBorder()},renderAll:function(){this._updateConfig();this._container[0].renderAll();this._container[1].renderAll();this._container[2].renderAll()},getSplitOffset:function(a){return a<this._fixedColumns?0:this._splitOffset},getRowIndex:function(a){var b=this._container[0].getRowIndex(a);0>b&&(b=this._container[1].getRowIndex(a));0>b&&(b=this._container[2].getRowIndex(a));return b},_updateConfig:function(){var a=this._container[0].getRenderConfig(),b=this._container[1].getRenderConfig();this._copyConfigToSubContainer(a,b);a.containerNumber=0;b.containerNumber=1;b.hasCheckBoxes=!1;var c=this._container[2].getRenderConfig();this._copyConfigToSubContainer(a,c);c.containerNumber=2;c.hasCheckBoxes=!1;for(var d=this._config.cellOrder,e=this._computeRightColumnsOffset(d),f=0;f<d.length;f++){var g=d[f];f==d.length-1?(a.itemWidth[g]=0,b.itemWidth[g]=0,c.itemLeft[g]=0,c.itemImageLeft[g]=0,c.itemTextLeft[g]=0,c.markupEnabled=!0,this.rightFixWidth=c.itemWidth[g]):(f<this._fixedColumns?b.itemWidth[g]=0:(a.itemWidth[g]=0,b.itemLeft[g]-=e,b.itemImageLeft[g]-=e,b.itemTextLeft[g]-=e),c.itemWidth[g]=0)}this._splitOffset!==e&&(this._splitOffset=e,this._layoutX())},_copyConfigToSubContainer:function(a,b){for(var c in this._config)this._config[c]instanceof Array?(a[c]=this._config[c].concat(),b[c]=this._config[c].concat()):(a[c]=this._config[c],b[c]=this._config[c])},_computeRightColumnsOffset:function(a){return a.length>this._fixedColumns?this._config.itemLeft[a[this._fixedColumns]]:this._width},_layoutX:function(){var a=Math.min(this._splitOffset,this._width);this._container[0].setWidth(a);this._container[0].setRowWidth(a);this._container[1].setLeft(a);this._container[1].setRowWidth(this._rowWidth-a);var b=this._fixedRight?this._fixedRight:0;this._container[1].setWidth(this._width-a-b);this._container[2].setRight(0);this._container[2].setWidth(b);this._container[2].setRowWidth(b)},_onHoverItem:function(a){for(var b=0;b<this._container.length;b++)this._container[b]._setHoverItem(a)},findRowByItem:function(a,b){return this._container[b<this._fixedColumns?0:1].findRowByItem(a)}};namespace("rwt.widgets.util");rwt.widgets.util.GridUtil={setFixedColumns:function(a,b){var c=a.getRowContainer();c.setFixedColumns&&(c.setFixedColumns(b),a.update())},setFixedRight:function(a,b){var c=a.getRowContainer();c.setFixedRight&&(c.setFixedRight(b),a.update())},createTreeRowContainer:function(a){return a.splitContainer||a.fixedRight?rwt.widgets.util.GridRowContainerWrapper.createInstance():new rwt.widgets.base.GridRowContainer},getColumnByPageX:function(a,b){var c=a.getRowContainer(),d=c instanceof rwt.widgets.util.GridRowContainerWrapper;d&&(c=a.getRowContainer().getSubContainer(0));c=this._getColumnByPageX(c,b);-1===c&&d&&(c=a.getRowContainer().getSubContainer(1),c=this._getColumnByPageX(c,b),-1===c&&(c=a.getRowContainer().getSubContainer(2),c=this._getColumnByPageX(c,b)));return c},_getColumnByPageX:function(a,b){for(var c=a.getRenderConfig(),d=c.columnCount,e=0===d?0:-1,f=a.getRow(0).$el.get(0),f=rwt.html.Location.getLeft(f),g=0;-1==e&&g<d;g++){var h=f+c.itemLeft[g];b>=h&&b<h+c.itemWidth[g]&&(e=g)}return e}};namespace("rwt.widgets.util");rwt.widgets.util.GridRowLayout=function(a,b){this._gridConfig=a;this._item=b;this._computeIndention();this._gridConfig.rowTemplate||(this._computeCellPadding(),this._computeAllCells(),this._gridConfig.hasCheckBoxes&&this._computeCheckBox())};rwt.widgets.util.GridRowLayout.prototype._computeIndention=function(){var a=this._gridConfig.treeColumn;this.indention=this._item&&"number"===typeof a&&-1<a?this._gridConfig.indentionWidth*(this._item.getLevel()+1):0};rwt.widgets.util.GridRowLayout.prototype._computeCellPadding=function(){var a=rwt.theme.AppearanceManager.getInstance(),b={};this._gridConfig.variant&&(b[this._gridConfig.variant]=!0);this.cellPadding=a.styleFrom(this._gridConfig.baseAppearance+"-cell",b).padding};rwt.widgets.util.GridRowLayout.prototype._computeAllCells=function(){this._initCells();for(var a=-1,b=0;b<this._gridConfig.cellOrder.length;b++)-1===a?(a=this._item?this._item.getColumnSpan(this._gridConfig.cellOrder[b]):0,this._computeCell(b,a)):this.cellWidth[this._gridConfig.cellOrder[b]]=0,a--};rwt.widgets.util.GridRowLayout.prototype._initCells=function(){this.cellLeft=Array(this._gridConfig.itemLeft.length);this.cellWidth=Array(this._gridConfig.itemWidth.length);this.cellImageLeft=Array(this._gridConfig.itemImageLeft.length);this.cellImageWidth=Array(this._gridConfig.itemImageWidth.length);this.cellTextLeft=Array(this._gridConfig.itemTextLeft.length);this.cellTextWidth=Array(this._gridConfig.itemTextWidth.length);this.cellCheckLeft=Array(this._gridConfig.itemCellCheckLeft.length);this.cellCheckWidth=Array(this._gridConfig.itemCellCheckWidth.length)};rwt.widgets.util.GridRowLayout.prototype._computeCell=function(a,b){var c=this._gridConfig.cellOrder[a];this.cellLeft[c]=this._gridConfig.itemLeft[c];this.cellWidth[c]=this._gridConfig.itemWidth[c];this.cellImageLeft[c]=this._gridConfig.itemImageLeft[c];this.cellImageWidth[c]=this._gridConfig.itemImageWidth[c];this.cellTextLeft[c]=this._gridConfig.itemTextLeft[c];this.cellTextWidth[c]=this._gridConfig.itemTextWidth[c];this.cellCheckLeft[c]=this._gridConfig.itemCellCheckLeft[c];this.cellCheckWidth[c]=this._gridConfig.itemCellCheckWidth[c];0<b&&this._expandCell(a,b);this._gridConfig.treeColumn===c&&this._indentCellContent(c)};rwt.widgets.util.GridRowLayout.prototype._expandCell=function(a,b){var c=this._gridConfig.cellOrder[a],d=this._gridConfig.cellOrder[a],e=this._gridConfig.cellOrder[Math.min(a+b,this._gridConfig.cellOrder.length-1)],e=this._gridConfig.itemLeft[e]+this._gridConfig.itemWidth[e];this.cellWidth[c]=e-this._gridConfig.itemLeft[d];this.cellTextWidth[c]=e-this._gridConfig.itemTextLeft[d]-this.cellPadding[1]};rwt.widgets.util.GridRowLayout.prototype._indentCellContent=function(a){var b=this.cellLeft[a]+this.cellWidth[a],c=this.cellImageLeft[a]+=this.indention,d=this.cellTextLeft[a]+=this.indention,e=this.cellCheckLeft[a]+=this.indention;c+this.cellImageWidth[a]>b&&(this.cellImageWidth[a]=Math.max(0,b-c));d+this.cellTextWidth[a]>b&&(this.cellTextWidth[a]=Math.max(0,b-d));e+this.cellCheckWidth[a]>b&&(this.cellCheckWidth[a]=Math.max(0,b-e))};rwt.widgets.util.GridRowLayout.prototype._computeCheckBox=function(){this.checkBoxLeft=this._gridConfig.checkBoxLeft+this.indention;this.checkBoxWidth=this._gridConfig.checkBoxWidth;var a=this._gridConfig.cellOrder[0],a=this.cellLeft[a]+this.cellWidth[a];this.checkBoxLeft+this.checkBoxWidth>a&&(this.checkBoxWidth=Math.max(0,a-this.checkBoxLeft))};namespace("rwt.widgets.util");rwt.widgets.util.GridSynchronizer=function(a){this._grid=a;this._grid.addEventListener("selectionChanged",this._onSelectionChanged,this);this._grid.addEventListener("focusItemChanged",this._onFocusItemChanged,this);this._grid.addEventListener("topItemChanged",this._onTopItemChanged,this);this._grid.addEventListener("scrollLeftChanged",this._onScrollLeftChanged,this);this._grid.getRootItem().addEventListener("update",this._onItemUpdate,this)};rwt.widgets.util.GridSynchronizer.prototype={_onSelectionChanged:function(a){if(!rwt.remote.EventUtil.getSuspended()){var b=a.item,c=a.type,d=rwt.remote.Connection.getInstance();"selection"===c?d.getRemoteObject(this._grid).set("selection",this._getSelectionList()):"check"===c?d.getRemoteObject(b).set("checked",b.isChecked()):"cellCheck"===c&&d.getRemoteObject(b).set("cellChecked",this._getCellChecked(b));this._notifySelectionChanged(a)}},_notifySelectionChanged:function(a){var b,c=a.type;"check"===c||"cellCheck"===c?b="check":"cell"===c?b="cell":"hyperlink"===c&&(b="hyperlink");a={item:this._getItemId(a.item),detail:b,index:a.index,text:a.text};"defaultSelection"===c?rwt.remote.EventUtil.notifyDefaultSelected(this._grid,a):rwt.remote.EventUtil.notifySelected(this._grid,a)},_onFocusItemChanged:function(){if(!rwt.remote.EventUtil.getSuspended()){var a=rwt.remote.Connection.getInstance(),b=this._getItemId(this._grid.getFocusItem());a.getRemoteObject(this._grid).set("focusItem",b)}},_onTopItemChanged:function(){if(!rwt.remote.EventUtil.getSuspended()){var a=this._grid.getVerticalBar(),b=rwt.remote.Connection.getInstance(),c=b.getRemoteObject(this._grid);c.set("topItemIndex",this._grid.getTopItemIndex());if(a.getHasSelectionListener())b.onNextSend(function(){b.getRemoteObject(a).notify("Selection")},this);if(c.isListening("SetData"))b.onNextSend(function(){c.notify("SetData")},this);(a.getHasSelectionListener()||c.isListening("SetData"))&&b.sendDelayed(400)}},_onScrollLeftChanged:function(){var a=this._grid.getHorizontalBar(),b=rwt.remote.Connection.getInstance();b.getRemoteObject(this._grid).set("scrollLeft",a.getValue());a.getHasSelectionListener()&&(b.onNextSend(function(){b.getRemoteObject(a).notify("Selection")},this),b.sendDelayed(400))},_onItemUpdate:function(a){if(!rwt.remote.EventUtil.getSuspended()||a.rendering){var b=rwt.remote.Connection.getInstance();if("height"===a.msg)b.getRemoteObject(a.target).set("height",a.target.getOwnHeight());else if("expanded"===a.msg||"collapsed"===a.msg){var c="expanded"===a.msg;b.getRemoteObject(a.target).set("expanded",c);b.getRemoteObject(this._grid).notify(c?"Expand":"Collapse",{item:this._getItemId(a.target)})}}},_getSelectionList:function(){for(var a=[],b=this._grid.getSelection(),c=0;c<b.length;c++)a.push(this._getItemId(b[c]));return a},_getCellChecked:function(a){a=a.getCellChecked();for(var b=[],c=0;c<this._grid.getRenderConfig().columnCount;c++)b[c]=!0===a[c];return b},_getItemId:function(a){var b=rwt.remote.ObjectRegistry;if(a.isCached())b=b.getId(a);else var c=a.getParent(),b=c.isRootItem()?b.getId(this._grid):b.getId(c),b=b+("#"+c.indexOf(a));return b}};(function(a){var b=rwt.widgets.util.CellRendererRegistry.getInstance().getAll();rwt.qx.Class.define("rwt.widgets.base.GridRow",{extend:rwt.qx.Target,construct:function(){this.base(arguments);this.$el=a("\x3cdiv\x3e").css({overflow:"hidden",userSelect:"none",height:16,position:"relative",borderWidth:"0px",borderStyle:"solid"});this.$el.prop("row",this);this._styleMap={};this._appearance=null;this._overlayStyleMap={};this._elementStyleCache={};this.$overlay=this.$checkBox=this.$expandIcon=this._variant=null;this.$treeColumnParts=[];this._lastAttributes={};this.$cellLabels=[];this.$cellImages=[];this.$cellCheckBoxes=[];this.$cellBackgrounds=[];this.$indentIcons=[];this._cellsRendered=this._usedIdentIcons=0;this._templateRenderer=null;this._mirror=!1},destruct:function(){this.$el.removeProp("row").detach();this._layout=this._hoverTarget=this._gridConfig=this._item=this.$indentIcons=this.$cellBackgrounds=this.$cellCheckBoxes=this.$cellImages=this.$cellLabels=this.$treeColumnParts=this.$checkBox=this.$expandIcon=this.$el=null},members:{_gridLines:{horizontal:null,vertical:null},renderItem:function(a,b,e,f,g){this._item=a;this._gridConfig=b;this._selected=this._renderAsSelected(b,e);this._hoverTarget=f;this._scrolling=g;this._layout=new rwt.widgets.util.GridRowLayout(b,a);this._renderStates();this._renderItemBackground();this._renderItemForeground();this._renderItemFont();this._renderIndention();this._renderContent();this._renderHeight();this._renderOverlay();this._renderHtmlAttributes();this.dispatchSimpleEvent("itemRendered",a)},identify:function(a){var b=["other"],c=function(b){return null!=b&&b.is(a)};if(c(this.$expandIcon))b=["expandIcon"];else if(c(this.$checkBox))b=["checkBox"];else if(this.$cellCheckBoxes.some(c))b=this.$cellCheckBoxes.filter(c)[0],b=["cellCheckBox",this.$cellCheckBoxes.indexOf(b)];else for(;!this.$el.is(a)&&"other"===b[0];)this.$treeColumnParts.some(c)?b=["treeColumn"]:this._templateRenderer&&this._templateRenderer.isCellSelectable(a)&&(b=["selectableCell",this._templateRenderer.getCellName(a)]),a=a.parentNode;return b},updateEvenState:function(a){this.setState("even",0===a%2)},setAppearance:function(a){this._appearance=a},getAppearance:function(){return this._appearance},setWidth:function(a){this.$el.css("width",a)},setHeight:function(a){this.$el.css("height",a)},getTop:function(){return this.$el.get(0).offsetTop},getWidth:function(){return parseInt(this.$el.css("width")||"0")},getHeight:function(){return parseInt(this.$el.css("height")||"0")},getNextIndentOffset:function(){return this._item&&-1!==this._gridConfig.treeColumn?(this._item.getLevel()+1)*this._gridConfig.indentionWidth:0},renderHeight:function(a,b){this._renderHeight({item:a,gridConfig:b})},setState:function(a,b){this.__states||(this.__states={});b?this.__states[a]=!0:delete this.__states[a]},hasState:function(a){return this.__states&&this.__states[a]?!0:!1},setGridLines:function(a){this._gridLines=a;this.$el.css({borderBottomColor:a.horizontal||"",borderBottomWidth:a.horizontal?"1px":"0px"});for(a=0;a<this.$cellBackgrounds.length;a++)this._renderVericalGridLine(a)},getGridLines:function(){return this._gridLines},setMirror:function(a){this._mirror=a;for(a=0;a<this.$cellBackgrounds.length;a++)this._renderVericalGridLine(a)},getMirror:function(){return this._mirror},_renderStates:function(){this._item&&(this.setState("rowtemplate",null!=this._gridConfig.rowTemplate),this.setState("checked",this._item.isChecked()),this.setState("grayed",this._item.isGrayed()),this.setState("parent_unfocused",this._renderAsUnfocused(this._gridConfig)),this.setState("selected",this._gridConfig.fullSelection?this._selected:!1),this._renderVariantState(this._item.getVariant()),this._renderOverState(this._hoverTarget,this._gridConfig),this._styleMap=this._getStyleMap(),this.setState("selected",this._selected),this._overlayStyleMap=this._gridConfig.fullSelection?this._getOverlayStyleMap(this._selected):this._getTreeColumnStyleMap(this._selected))},_renderItemBackground:function(){var a,b,e;this._item&&(null!==this._item.getBackground()&&!1!==this._gridConfig.enabled?a=this._item.getBackground():(a=this._styleMap.background,b=this._styleMap.backgroundImage,e=this._styleMap.backgroundGradient));this.$el.css({backgroundColor:"undefined"!==a?a:"",backgroundImage:"undefined"!==b?b:"",backgroundGradient:"undefined"!==e?e:""})},_renderItemForeground:function(){this.$el.css("color",this._getItemColor()||"")},_renderItemFont:function(){this._elementStyleCache.font!==this._gridConfig.font&&(this._elementStyleCache.font=this._gridConfig.font,this._setFont(this.$el,this._gridConfig.font));if(this._elementStyleCache.textDecoration!==this._styleMap.textDecoration){var a=this._elementStyleCache.textDecoration=this._styleMap.textDecoration;this.$el.css({textDecoration:null==a||"none"===a?"":a})}this._elementStyleCache.textOverflow!==this._styleMap.textOverflow&&(a=this._elementStyleCache.textOverflow=this._styleMap.textOverflow,this.$el.css("textOverflow",null==a||"clip"===a?"":a));this._elementStyleCache.textShadow!==this._styleMap.textShadow&&(this._elementStyleCache.textShadow=this._styleMap.textShadow,this.$el.css("textShadow",this._styleMap.textShadow||""))},_renderIndention:function(){this._usedIdentIcons=0;this._item&&-1!==this._gridConfig.treeColumn&&!this._gridConfig._hideIndentionImage&&(this._renderExpandImage(),this._renderLineImages());for(var a=this._usedIdentIcons;a<this.$indentIcons.length;a++)this.$indentIcons[a].css("display","none")},_renderContent:function(){this._gridConfig.rowTemplate?this._renderTemplate():(this._gridConfig.hasCheckBoxes&&this._renderCheckBox(),this._renderCells())},_renderHeight:function(){if(this._item){if(this._gridConfig.autoHeight){var a=this._computeAutoHeight();this._item.getDefaultHeight()>=a-1&&(a=null);this._item.setHeight(a,!0)}this._item.getOwnHeight()!==this.getHeight()&&this.$el.css("height",this._item.getOwnHeight())}},_renderOverlay:function(){if(this._item&&this._hasOverlayBackground(this._gridConfig)){var a=this._overlayStyleMap.backgroundGradient;a?this._getOverlayElement().css("backgroundGradient",a||""):this._getOverlayElement().css({backgroundColor:this._overlayStyleMap.background,opacity:this._overlayStyleMap.backgroundAlpha});this._renderOverlayBounds()}else this.$overlay&&this.$overlay.css("display","none")},_renderHtmlAttributes:function(){this.$el.removeAttr(Object.keys(this._lastAttributes).join(" "));var a=this._item?this._item.getHtmlAttributes():{};a.id&&1===this._gridConfig.containerNumber&&(a=rwt.util.Objects.copy(a),a.id+="-1");this.$el.attr(a);this._lastAttributes=a},_renderTemplate:function(){var a=this._layout.indention,b=this.getWidth()-a-this._gridConfig.vBarWidth,e=this.getHeight(),f=this._getTemplateRenderer(this._gridConfig);f.targetBounds=[a,0,b,e];f.markupEnabled=this._gridConfig.markupEnabled;f.targetIsEnabled=this._gridConfig.enabled;f.targetIsSeeable=this._gridConfig.seeable;f.renderItem(this._item)},_getTemplateRenderer:function(a){null==this._templateRenderer&&(this._templateRenderer=new rwt.widgets.util.TemplateRenderer(a.rowTemplate,this.$el.get(0),100));return this._templateRenderer},_renderCheckBox:function(){var a=this._getCheckBoxImage();this._getCheckBoxElement().css({display:null===a?"none":"",opacity:this._gridConfig.enabled?1:.3,backgroundImage:a||""});a=-1!==this._gridConfig.treeColumn;!this._item||!a&&this._scrolling||this._renderCheckBoxBounds()},_renderCells:function(){var a=this._getColumnCount(this._gridConfig);this._cellsRendered>a&&this._removeCells(a,this._cellsRendered);for(var b=0;b<a;b++)0<this._layout.cellWidth[b]?(this._renderCellBackground(b),this._renderCellCheckBox(b),this._renderCellImage(b),this._renderCellLabel(b),!this._gridConfig.fullSelection&&this._isTreeColumn(b)&&(this.$treeColumnParts=[this.$cellImages[b],this.$cellLabels[b]])):this._removeCell(b);this._cellsRendered=a},_renderCellBackground:function(a){var b=this._getCellBackgroundColor(a),c=!1;if("undefined"!==b&&b!=this._styleMap.backgroundColor)c=!this._scrolling||!this.$cellBackgrounds[a],this._getCellBackgroundElement(a).css("backgroundColor",b);else if(this.$cellBackgrounds[a]||this._gridLines.vertical)this._getCellBackgroundElement(a).css("backgroundColor",""),c=!this._scrolling;c&&this._renderCellBackgroundBounds(a)},_renderCellCheckBox:function(a){if(this._gridConfig.itemCellCheck[a]){var b=this._getCellCheckBoxImage(a),c=this._isTreeColumn(a)||!this._scrolling||!this.$cellCheckBoxes[a];this._getCellCheckBoxElement(a).css({display:null===b?"none":"",opacity:this._gridConfig.enabled?1:.3,backgroundImage:b||""});c&&this._renderCellCheckBounds(a)}},_renderCellImage:function(a){var b=this._item?this._item.getImage(a):null,c=this._isTreeColumn(a)||!this._scrolling;null!==b?(c=c||!this.$cellImages[a],this._getCellImageElement(a).css({opacity:this._gridConfig.enabled?1:.3,backgroundImage:b[0]||""})):this.$cellImages[a]&&this._getCellImageElement(a).css({backgroundImage:""});c&&this._renderCellImageBounds(a)},_renderCellLabel:function(a){var b,c=this._isTreeColumn(a),f=c||!this._scrolling;if(this._item&&this._item.hasText(a)){f=f||!this.$cellLabels[a];b=this._getCellLabelElement(a);this._renderCellLabelContent(a,b);if(f){var g=this._mirror?"right":"left",h=this._getAlignment(a,this._gridConfig);b.css("textAlign",c?g:h)}this._renderCellLabelFont(a,b)}else this.$cellLabels[a]&&(b=this._getCellLabelElement(a),this._renderCellLabelContent(-1,b));f&&this._renderCellLabelBounds(a)},_renderCellLabelContent:function(a,d){var c={markupEnabled:this._gridConfig.markupEnabled,seeable:this._gridConfig.seeable,removeNewLines:!0},f=this._item?this._item.getText(a):null;b.text.renderContent(d.get(0),f,null,c)},_renderCellLabelFont:function(a,b){b.css({color:this._getCellColor(a)||"",whiteSpace:this._gridConfig.wordWrap[a]?"":"nowrap"});this._setFont(b,this._item.getCellFont(a))},_getCheckBoxImage:function(){if(!this._item)return null;this.setState("over",this._hoverTarget&&"checkBox"===this._hoverTarget[0]);this.setState("disabled",!this._item.isCellCheckable(0));var a=this._getImageFromAppearance("check-box",this.__states);this.setState("over",null!==this._hoverTarget);this.setState("disabled",!1);return a},_getCellCheckBoxImage:function(a){if(!this._item)return null;this.setState("checked",this._item.isCellChecked(a));this.setState("disabled",!this._item.isCellCheckable(a));this.setState("grayed",this._item.isCellGrayed(a));this.setState("over",this._hoverTarget&&"cellCheckBox"===this._hoverTarget[0]&&this._hoverTarget[1]===a);a=this._getImageFromAppearance("check-box",this.__states);this.setState("disabled",!1);return a},_getCellBackgroundColor:function(a){return this._item&&!1!==this._gridConfig.enabled?this._item.getCellBackground(a):"undefined"},_getItemColor:function(){var a="undefined";this._gridConfig.fullSelection&&(a=this._overlayStyleMap.foreground);"undefined"===a&&(a=this._styleMap.foreground);"undefined"===a&&(a=this._gridConfig.textColor);"undefined"===a&&(a="inherit");return a},_getCellColor:function(a){var b=this._isTreeColumn(a),c=this._gridConfig.fullSelection||b?this._overlayStyleMap.foreground:"undefined";"undefined"===c&&!1!==this._gridConfig.enabled&&this._item.getCellForeground(a)&&(c=this._item.getCellForeground(a));"undefined"===c&&b&&!this._gridConfig.fullSelection&&(c=this._overlayStyleMap.rowForeground);"undefined"===c&&(c="inherit");return c},_renderCheckBoxBounds:function(){var a=this._layout.checkBoxLeft;this.$checkBox.css({left:this._mirror?"":a,right:this._mirror?a:"",top:0,width:this._layout.checkBoxWidth,height:"100%"})},_renderCellBackgroundBounds:function(a){var b=this.$cellBackgrounds[a];if(b){var c=this._layout.cellLeft[a];b.css({left:this._mirror?"":c,right:this._mirror?c:"",top:0,width:this._layout.cellWidth[a],height:"100%"})}},_renderCellCheckBounds:function(a){var b=this.$cellCheckBoxes[a];if(b){var c=this._layout.cellCheckLeft[a];b.css({left:this._mirror?"":c,right:this._mirror?c:"",top:0,width:this._layout.cellCheckWidth[a],height:"100%"})}},_renderCellImageBounds:function(a){var b=this.$cellImages[a];if(b){var c=this._layout.cellImageLeft[a];b.css({left:this._mirror?"":c,right:this._mirror?c:"",top:0,width:this._layout.cellImageWidth[a],height:"100%"})}},_renderCellLabelBounds:function(a){var b=this.$cellLabels[a];if(b)if(2==this._gridConfig.containerNumber){var c=this._layout.cellLeft[a];b.css({left:this._mirror?"":c,right:this._mirror?c:"",top:0,width:this._layout.cellWidth[a],height:"100%",display:"inline-flex","justify-content":"flex-end","align-items":"center","flex-direction":"row"})}else c=this._layout.cellTextLeft[a],b.css({left:this._mirror?"":c,right:this._mirror?c:"",top:this._layout.cellPadding[0],width:this._layout.cellTextWidth[a],height:"auto"})},_renderOverlayBounds:function(){if(!this._gridConfig.fullSelection){var a=this._gridConfig.treeColumn,b=this._gridConfig.selectionPadding,e=this._layout.cellTextLeft[a],e=e-b[0],f=this._layout.cellTextWidth[a],f=f+(0<f?b[0]:0),a=this._computeVisualTextWidth(a),a=a+(b[0]+b[1]),f=Math.min(f,a);this._getOverlayElement().css({left:this._mirror?"":e,right:this._mirror?e:"",width:f})}},_computeAutoHeight:function(){for(var a=0,b=0;b<this.$cellLabels.length;b++)this.$cellLabels[b]&&(a=Math.max(a,Math.ceil(this.$cellLabels[b].outerHeight())));b=this._layout.cellPadding;return a+b[0]+b[2]},_computeVisualTextWidth:function(a){var b=rwt.widgets.util.FontSizeCalculation,c=0;this.$cellLabels[a]&&(c=this._getCellFont(a),c=this._getFontProps(c),a=this.$cellLabels[a].html(),c=b.computeTextDimensions(a,c)[0]);return c},_getCellFont:function(a){a=this._item.getCellFont(a);if(null===a||""===a)a=this._gridConfig.font;return a},_getFontProps:function(a){var b={};a instanceof rwt.html.Font?a.renderStyle(b):(a=rwt.html.Font.fromString(a),a.renderStyle(b),a.dispose());return b},_renderExpandImage:function(){var a=this._getExpandSymbol();this.$expandIcon=null!=a?this._addIndentSymbol(this._item.getLevel(),this._gridConfig,a):null},_renderLineImages:function(){var a=this._getLineSymbol();if(null!=a)for(var b=this._item.getParent();!b.isRootItem();)b.hasNextSibling()&&this._addIndentSymbol(b.getLevel(),this._gridConfig,a),b=b.getParent()},_getExpandSymbol:function(){var a=this._getParentStates(this._gridConfig);0!==this._item.getLevel()||this._item.hasPreviousSibling()||(a.first=!0);this._item.hasNextSibling()||(a.last=!0);this._item.hasChildren()&&(this._item.isExpanded()?a.expanded=!0:a.collapsed=!0);this._hoverTarget&&"expandIcon"===this._hoverTarget[0]&&(a.over=!0);this._mirror&&(a.rwt_RIGHT_TO_LEFT=!0);return this._getImageFromAppearance("indent",a)},_getLineSymbol:function(){var a=this._getParentStates(this._gridConfig);a.line=!0;this._mirror&&(a.rwt_RIGHT_TO_LEFT=!0);return this._getImageFromAppearance("indent",a)},_getParentStates:function(a){var b={};a.variant&&(b[a.variant]=!0);return b},_addIndentSymbol:function(a,b,e){var c=null,d=(a+1)*b.indentionWidth;if(d<=b.itemWidth[b.treeColumn]||b.rowTemplate)a*=b.indentionWidth,d-=a,c=this._getIndentImageElement().css({opacity:b.enabled?1:.3,backgroundImage:e,left:this._mirror?"":a,right:this._mirror?a:"",top:0,width:d,height:"100%"});return c},_getCheckBoxElement:function(){null===this.$checkBox&&(this.$checkBox=this._createElement(3).css({backgroundRepeat:"no-repeat",backgroundPosition:"center"}));return this.$checkBox},_getCellLabelElement:function(a){var b=this.$cellLabels[a];b||(b=this._createElement(3),b.css({textDecoration:"inherit",textOverflow:"inherit",backgroundColor:""}),this.$cellLabels[a]=b);return b},_getCellImageElement:function(a){var b=this.$cellImages[a];b||(b=this._createElement(3),b.css({backgroundRepeat:"no-repeat",backgroundPosition:"center"}),this.$cellImages[a]=b);return b},_getCellCheckBoxElement:function(a){var b=this.$cellCheckBoxes[a];b||(b=this._createElement(3),b.css({backgroundRepeat:"no-repeat",backgroundPosition:"center"}),this.$cellCheckBoxes[a]=b);return b},_getOverlayElement:function(){null===this.$overlay&&(this.$overlay=this._createElement(2),0<this._gridConfig._overlayWidth?this.$overlay.css({width:""+this._gridConfig._overlayWidth+"px",height:"100%"}):this.$overlay.css({width:"100%",height:"100%"}));return this.$overlay.css({display:""})},_getCellBackgroundElement:function(a){var b=this.$cellBackgrounds[a];b||(b=this._createElement(1).css({borderWidth:"0px",borderStyle:"solid"}),this.$cellBackgrounds[a]=b,this._renderVericalGridLine(a));return b},_renderVericalGridLine:function(a){this.$cellBackgrounds[a].css({borderRightWidth:!this._mirror&&this._gridLines.vertical?"1px":"0px",borderLeftWidth:this._mirror&&this._gridLines.vertical?"1px":"0px",borderColor:this._gridLines.vertical||""})},_getIndentImageElement:function(){var a;this._usedIdentIcons<this.$indentIcons.length?a=this.$indentIcons[this._usedIdentIcons]:(a=this._createElement(3).css({backgroundRepeat:"no-repeat",backgroundPosition:"center",zIndex:3}),this.$indentIcons.push(a));this._usedIdentIcons++;return a.html("").css({backgroundColor:"",display:""})},_createElement:function(b){return a("\x3cdiv\x3e").css({position:"absolute",overflow:"hidden",zIndex:b}).appendTo(this.$el)},_removeCells:function(a,b){for(var c=a;c<b;c++)this._removeCell(c)},_removeCell:function(a){this._removeNode(this.$cellBackgrounds,a);this._removeNode(this.$cellImages,a);this._removeNode(this.$cellCheckBoxes,a);this._removeNode(this.$cellLabels,a)},_removeNode:function(a,b){var c=a[b];c&&(c.detach(),a[b]=null)},_getStyleMap:function(){return rwt.theme.AppearanceManager.getInstance().styleFrom(this._appearance,this.__states)},_getOverlayStyleMap:function(){return rwt.theme.AppearanceManager.getInstance().styleFrom(this._appearance+"-overlay",this.__states)},_getTreeColumnStyleMap:function(a){var b=rwt.theme.AppearanceManager.getInstance(),c=b.styleFrom(this._appearance+"-overlay",this.__states);a?(a=b.styleFrom(this._appearance,this.__states),c.rowForeground=a.foreground):c.rowForeground="undefined";return c},_renderVariantState:function(a){this._variant!=a&&(null!=this._variant&&this.setState(this._variant,!1),this._variant=a,null!=this._variant&&this.setState(this._variant,!0))},_renderOverState:function(a,b){var c=null!=a&&"treeColumn"===a[0];this.setState("over",null!==a&&b.fullSelection||c)},_renderAsUnfocused:function(a){return!a.focused&&!this.hasState("dnd_selected")},_renderAsSelected:function(a,b){return(b||this.hasState("dnd_selected"))&&(!a.hideSelection||a.focused)&&!a.alwaysHideSelection},_hasOverlayBackground:function(a){return!a.fullSelection&&a.rowTemplate?!1:"undefined"!==this._overlayStyleMap.background||null!==this._overlayStyleMap.backgroundImage||null!==this._overlayStyleMap.backgroundGradient},_getImageFromAppearance:function(a,b){var c=this._appearance+"-"+a;return(c=rwt.theme.AppearanceManager.getInstance().styleFrom(c,b))&&c.backgroundImage?c.backgroundImage:null},_setFont:function(a,b){""===b||null===b?this._resetFont(a):b instanceof rwt.html.Font?b.renderStyle(a.get(0).style):a.css("font",b)},_resetFont:function(a){a.css({font:"",fontFamily:"",fontSize:"",fontVariant:"",fontStyle:"",fontWeight:""})},_getAlignment:function(a,b){var c=b.alignment[a]?b.alignment[a]:"left";if(this._mirror){if("left"===c)return"right";if("right"===c)return"left"}return c},_getColumnCount:function(a){return Math.max(1,a.columnCount)},_isTreeColumn:function(a){return a===this._gridConfig.treeColumn}}})})(rwt.util._RWTQuery);rwt.qx.Class.define("rwt.widgets.Menu",{extend:rwt.widgets.base.Popup,include:rwt.animation.VisibilityAnimationMixin,construct:function(){this.base(arguments);this._openTimer=new rwt.client.Timer(250);this._closeTimer=new rwt.client.Timer(250);this._layout=new rwt.widgets.base.VerticalBoxLayout;this._preItem=null;this._menuLayoutScheduled=!1;this._opener=null;this._mnemonics=!1;this._openItem=this._hoverItem=null;this._itemsHiddenFlag=!1;this.setAppearance("menu");this._maxCellWidths=[null,null,null,null,null];this._layout.set({top:0,right:0,bottom:0,left:0,anonymous:!0});this.add(this._layout);this.addEventListener("mousedown",this._onMouseDown);this.addEventListener("mouseup",this._onMouseUp);this.addEventListener("mouseout",this._onMouseOut);this.addEventListener("mouseover",this._onMouseOver);this.addEventListener("keypress",this._onKeyPress);this.addEventListener("keydown",this._onKeyDown);this._openTimer.addEventListener("interval",this._onOpenTimer,this);this._closeTimer.addEventListener("interval",this._onCloseTimer,this);this.addToDocument()},destruct:function(){rwt.widgets.util.MenuManager.getInstance().remove(this);this._makeInactive();this._disposeObjects("_openTimer","_closeTimer","_preItem","_animation");this._disposeFields("_layout","_opener","_hoverItem","_openItem")},statics:{menuDetectedByKey:function(a){"Apps"===a.getKeyIdentifier()&&rwt.widgets.Menu.contextMenuHandler(a)},menuDetectedByMouse:function(a){a.getButton()===rwt.event.MouseEvent.C_BUTTON_RIGHT&&rwt.widgets.Menu.contextMenuHandler(a)},contextMenuHandler:function(a){var b=rwt.widgets.util.WidgetUtil.getControl(a.getTarget()),c=b?b.getContextMenu():null;if(null!=c){a.stopPropagation();a.preventDefault();a=rwt.event.MouseEvent.getPageX();var d=rwt.event.MouseEvent.getPageY();c.setLocation(a,d);c.setOpener(b);c.show()}},getAllowContextMenu:function(a,b){var c=!1;switch(a.classname){case "rwt.widgets.Label":case "rwt.widgets.Text":case "rwt.widgets.base.GridRowContainer":case "rwt.widgets.ListItem":case "rwt.widgets.base.BasicText":!1!==a.getEnabled()&&rwt.widgets.Menu._hasNativeMenu(b)&&(c=rwt.widgets.util.WidgetUtil.getControl(a),c=null!==c?null==c.getContextMenu():null==a.getContextMenu())}return c},_hasNativeMenu:function(a){var b="string"==typeof a.tagName?a.tagName.toLowerCase():"";return"a"===b?a.getAttribute("href")&&"_rwt"!==a.getAttribute("target"):"input"===b||"textarea"===b}},members:{_minZIndex:1E7,setOpener:function(a){this._opener=a},getOpener:function(){return this._opener},setMnemonics:function(a){if(this._mnemonics!==a){this._mnemonics=a;a=this._layout.getChildren();for(var b=0;b<a.length;b++)a[b].renderText&&a[b].renderText()}},getMnemonics:function(){return this._mnemonics},addMenuItemAt:function(a,b){a.setParentMenu&&a.setParentMenu(this);var c=b;this._preItem&&this._preItem!==a&&c++;this._layout.addAt(a,c)},scheduleMenuLayout:function(){if(!0!==this._menuLayoutScheduled){this._menuLayoutScheduled=!0;for(var a=this._layout.getChildren(),b=a.length,c=0;c<b;c++)a[c]._invalidatePreferredInnerWidth(),a[c].addToQueue("layoutX");this.addToQueue("menuLayout")}},_layoutPost:function(a){this.base(arguments,a);a.menuLayout&&(this._menuLayoutScheduled=!1,this.isSeeable()&&this._afterAppear())},getMaxCellWidth:function(a){if(null==this._maxCellWidths[a]){for(var b=0,c=this._layout.getChildren(),d=c.length,e=0;e<d;e++)c[e].getPreferredCellWidth&&(b=Math.max(b,c[e].getPreferredCellWidth(a)));this._maxCellWidths[a]=b}0===a&&0===this._maxCellWidths[0]&&0===this.getMaxCellWidth(1)&&(this._maxCellWidths[a]=13);return this._maxCellWidths[a]},invalidateMaxCellWidth:function(a){this._maxCellWidths[a]=null},invalidateAllMaxCellWidths:function(){for(var a=0;5>a;a++)this._maxCellWidths[a]=null},isSubElement:function(a,b){var c=!1;if(a.getParent()===this._layout||!b&&a===this)c=!0;if(!c)for(var d=this._layout.getChildren(),e=d.length,f=0;f<e;f++)this.hasSubmenu(d[f])&&d[f].getMenu().isSubElement(a,b)&&(c=!0);return c},setHoverItem:function(a,b){var c=a?a:this._openItem;this._hoverItem&&this._hoverItem!=c&&this._hoverItem.removeState("over");c&&c.addState("over");this._hoverItem=c;b||(this._openTimer.setEnabled(!1),this.hasSubmenu(c)&&this._openItem!=c&&this._openTimer.setEnabled(!0),this._openItem&&(this._openItem==c||null==c?this._closeTimer.setEnabled(!1):null!=c&&this._closeTimer.setEnabled(!0)));this.dispatchSimpleEvent("changeHoverItem")},getHoverItem:function(){return this._hoverItem},hoverFirstItem:function(a){this._isDisplayable&&!this._itemsHiddenFlag&&(this.setHoverItem(null,!0),a?this._hoverPreviousItem():this._hoverNextItem());this.toggleState("hoverFristItem",!this._isDisplayable||this._itemsHiddenFlag)},_hoverNextItem:function(){var a,b=null,c=this._layout.getVisibleChildren(),d=c.indexOf(this._hoverItem),e=d;do d++,d>c.length&&(d=-1),(a=0<=d?c[d]:null)&&a.isEnabled()&&"rwt.widgets.MenuItem"==a.classname&&(b=a);while(!b&&d!=e);this.setHoverItem(b,!0)},_hoverPreviousItem:function(){var a,b=null,c=this._layout.getVisibleChildren(),d=c.indexOf(this._hoverItem),e=d;do d--,-1>d&&(d=c.length),(a=0<=d?c[d]:null)&&a.isEnabled()&&"rwt.widgets.MenuItem"==a.classname&&(b=a);while(!b&&d!=e);this.setHoverItem(b,!0)},_makeActive:function(){this.setCapture(!0)},_makeInactive:function(){this.setCapture(!1)},_beforeAppear:function(){rwt.widgets.base.Parent.prototype._beforeAppear.call(this);rwt.widgets.util.MenuManager.getInstance().add(this);this.bringToFront();this._makeActive();this._menuShown();rwt.widgets.util.MnemonicHandler.getInstance().deactivate()},_beforeDisappear:function(){rwt.widgets.base.Parent.prototype._beforeDisappear.call(this);rwt.widgets.util.MenuManager.getInstance().remove(this);this._makeInactive();this.setOpenItem(null);this.setHoverItem(null);if(this._opener instanceof rwt.widgets.MenuItem){var a=this._opener.getParentMenu();a instanceof rwt.widgets.MenuBar&&(this._opener.removeState("pressed"),a.getOpenItem()==this._opener&&a.setOpenItem(null))}this._menuHidden()},hasSubmenu:function(a){return a&&a.getMenu&&a.getMenu()},_onOpenTimer:function(){this._openTimer.stop();this.setOpenItem(this._hoverItem);this._closeTimer.stop()},_onCloseTimer:function(){this._closeTimer.stop();this.setOpenItem(null)},openByMnemonic:function(a){this.setOpenItem(a,!0);this.setHoverItem(null,!0)},setOpenItem:function(a,b){this._openItem&&this._openItem.getMenu()&&(this._openItem.setSubMenuOpen(!1),this._openItem.getMenu().hide(),this.getVisibility()&&this._makeActive());if((this._openItem=a)&&a.getMenu()&&a.getEnabled()){var c=a.getMenu();a.setSubMenuOpen(!0);c.setOpener(a);var d=a.getElement(),e=this.getElement(),f=rwt.html.Location.getLeft(e);c.setTop(rwt.html.Location.getTop(d)-2);"rtl"===this.getDirection()?c.setRight(window.innerWidth-f-3):c.setLeft(f+e.offsetWidth-3);c.setMnemonics(!0===b);c.show();b&&c.hoverFirstItem()}},_onMouseOut:function(a){var b=a.getOriginalTarget();this.contains(b)?(a=a.getRelatedTarget(),(b===this||a!==this&&!this.contains(a))&&this.setHoverItem(null)):(b._dispatchEvent(a),a.stopPropagation())},_onMouseOver:function(a){var b=a.getOriginalTarget();this.contains(b)?(b instanceof rwt.widgets.MenuItem&&this.setHoverItem(b),this._unhoverSubMenu()):(b._dispatchEvent(a),a.stopPropagation())},_onMouseDown:function(a){this._unhoverSubMenu();var b=a.getOriginalTarget();this.contains(b)||(rwt.event.EventHandlerUtil.handleFocusedChild(b),b._dispatchEvent(a),a.stopPropagation())},_onMouseUp:function(a){var b=a.getOriginalTarget();this.contains(b)?b instanceof rwt.widgets.MenuItem&&b.execute():(b._dispatchEvent(a),a.stopPropagation())},_unhoverSubMenu:function(){if(this._openItem){var a=this._openItem.getMenu();a.setOpenItem(null);a.setHoverItem(null)}},_onKeyDown:function(a){if(this._mnemonics&&(a=a.getKeyCode(),!isNaN(a)&&rwt.event.EventHandlerUtil.isAlphaNumericKeyCode(a))){a={type:"trigger",charCode:a,success:!1};for(var b=this._layout.getChildren(),c=0;c<b.length;c++)b[c].handleMnemonic&&b[c].handleMnemonic(a)}},_onKeyPress:function(a){switch(a.getKeyIdentifier()){case "Up":this._handleKeyUp(a);break;case "Down":this._handleKeyDown(a);break;case "Left":this._handleKeyLeft(a);break;case "Right":this._handleKeyRight(a);break;case "Enter":this._handleKeyEnter(a)}},_handleKeyUp:function(a){this._openItem?this._openItem.getMenu()._hoverPreviousItem():this._hoverPreviousItem();a.preventDefault();a.stopPropagation()},_handleKeyDown:function(a){this._openItem?this._openItem.getMenu()._hoverNextItem():this._hoverNextItem();a.preventDefault();a.stopPropagation()},_handleKeyLeft:function(a){if(this._opener instanceof rwt.widgets.MenuItem){var b=this._opener.getParentMenu();if(b instanceof rwt.widgets.Menu){var c=this._opener;b.setOpenItem(null);b.setHoverItem(c,!0);a.preventDefault();a.stopPropagation()}}},_handleKeyRight:function(a){this.hasSubmenu(this._hoverItem)&&(this._onOpenTimer(),this.setHoverItem(null,!0),this._openItem.getMenu().hoverFirstItem(),a.preventDefault(),a.stopPropagation())},_handleKeyEnter:function(a){this.hasSubmenu(this._hoverItem)?(this._onOpenTimer(),this.setHoverItem(null,!0),this._openItem.getMenu().hoverFirstItem()):this._hoverItem&&(this._hoverItem.execute(),rwt.widgets.util.MenuManager.getInstance().update());a.preventDefault();a.stopPropagation()},_menuShown:function(){if(!rwt.remote.EventUtil.getSuspended()){var a=rwt.remote.Connection.getInstance().getRemoteObject(this);if(a.isListening("Show")){null==this._preItem&&(this._preItem=new rwt.widgets.MenuItem("push"),this._preItem.setText("..."),this._preItem.setEnabled(!1),this.addMenuItemAt(this._preItem,0));for(var b=this._layout.getChildren(),c=0;c<b.length;c++)b[c].setDisplay(!1);this._preItem.setDisplay(!0);this._itemsHiddenFlag=!0;60>this.getWidth()&&this.setWidth(60);a.notify("Show")}else a=0!==this._layout.getChildren().length,this.setDisplay(a)}},_menuHidden:function(){rwt.remote.EventUtil.getSuspended()||rwt.remote.Connection.getInstance().getRemoteObject(this).notify("Hide")},unhideItems:function(a){if(a){a=this._layout.getChildren();for(var b=0;b<a.length;b++)a[b].setDisplay(!0);this._preItem&&this._preItem.setDisplay(!1);this._itemsHiddenFlag=!1}else this.hide()},showMenu:function(a,b,c){null!=a&&(a._renderAppearance(),"rtl"===a.getDirection()?(a.setLeft(null),a.setRight(window.innerWidth-b)):(a.setLeft(b),a.setRight(null)),a.setTop(c),a.show())}}});rwt.remote.HandlerRegistry.add("rwt.widgets.Menu",{factory:function(a){var b;-1!=a.style.indexOf("BAR")?(b=new rwt.widgets.MenuBar,rwt.remote.HandlerUtil.callWithTarget(a.parent,function(a){b.setParent(a)})):b=new rwt.widgets.Menu;rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);return b},destructor:rwt.remote.HandlerUtil.getWidgetDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:["bounds","enabled","customVariant","direction"],propertyHandler:{bounds:function(a,b){a.hasState("rwt_BAR")&&(a.setLeft(b[0]),a.setTop(b[1]),a.setWidth(b[2]),a.setHeight(b[3]))}},events:["Show","Hide"],listeners:["Help"],listenerHandler:{Help:rwt.remote.HandlerUtil.getControlListenerHandler("Help")},methods:["unhideItems","showMenu"],methodHandler:{unhideItems:function(a,b){a.hasState("rwt_BAR")||a.unhideItems(b.reveal)},showMenu:function(a,b){a.hasState("rwt_POP_UP")&&a.showMenu(a,b.x,b.y)}}});namespace("rwt.remote");(function(){var a;rwt.remote.EventUtil={_suspended:!1,setSuspended:function(b){a._suspended=b},getSuspended:function(){return a._suspended},DOUBLE_CLICK_TIME:500,_capturingWidget:null,_lastMouseDown:{widget:null,button:"",x:-1,y:-1,mouseUpCount:0},_shiftKey:!1,_ctrlKey:!1,_altKey:!1,_metaKey:!1,_button:rwt.event.MouseEvent.C_BUTTON_NONE,eventTimestamp:function(){var a=rwt.runtime.System.getInstance();return((new Date).getTime()-a.getStartupTime())%2147483647},widgetDefaultSelected:function(b){a.notifyDefaultSelected(b.getTarget())},widgetSelected:function(b){var c=b.getTarget().getLeft(),d=b.getTarget().getTop(),e=b.getTarget().getWidth(),f=b.getTarget().getHeight();a.notifySelected(b.getTarget(),c,d,e,f)},notifySelected:function(b){if(!a.getSuspended()&&!b.isDisposed()){var c=rwt.remote.Connection.getInstance(),d=a._createSelectionProperties.apply(this,arguments);c.getRemoteObject(b).notify("Selection",d)}},notifyDefaultSelected:function(b){if(!a.getSuspended()&&!b.isDisposed()){var c=rwt.remote.Connection.getInstance(),d=a._createSelectionProperties.apply(this,arguments);c.getRemoteObject(b).notify("DefaultSelection",d)}},_createSelectionProperties:function(){var b;b=2===arguments.length?arguments[1]:{x:arguments[1],y:arguments[2],width:arguments[3],height:arguments[4],detail:arguments[5]};a.addButtonToProperties(b);a.addModifierToProperties(b);return b},addButtonToProperties:function(b,c){switch(c?c.getButton():a._button){case rwt.event.MouseEvent.C_BUTTON_LEFT:b.button=1;break;case rwt.event.MouseEvent.C_BUTTON_MIDDLE:b.button=2;break;case rwt.event.MouseEvent.C_BUTTON_RIGHT:b.button=3}},addModifierToProperties:function(b,c){var d="mac"===rwt.client.Client.getPlatform()&&!0===(c?c.metaKey:a._metaKey);b.shiftKey=c?c.shiftKey:a._shiftKey;b.ctrlKey=(c?c.ctrlKey:a._ctrlKey)||d;b.altKey=c?c.altKey:a._altKey},focusGained:function(b){a.getSuspended()||rwt.remote.Connection.getInstance().getRemoteObject(b.getTarget()).notify("FocusIn")},focusLost:function(b){a.getSuspended()||rwt.remote.Connection.getInstance().getRemoteObject(b.getTarget()).notify("FocusOut")},mouseDown:function(b){!a.getSuspended()&&a._isRelevantMouseEvent(this,b)&&(a._capturingWidget=this,a._notifyMouseListeners(this,b,"MouseDown"))},mouseUp:function(b){!a.getSuspended()&&a._isRelevantMouseEvent(this,b)&&(a._capturingWidget=null,a._notifyMouseListeners(this,b,"MouseUp"))},mouseDoubleClick:function(b){if(!a.getSuspended()&&a._isRelevantMouseEvent(this,b))if(a._capturingWidget=this,a._isDoubleClick(this,b))a._clearLastMouseDown(),a._notifyMouseListeners(this,b,"MouseDoubleClick");else{var c=a._lastMouseDown;c.widget=this;c.button=b.getButton();c.x=b.getPageX();c.y=b.getPageY();c.mouseUpCount=0;rwt.client.Timer.once(a._clearLastMouseDown,this,a.DOUBLE_CLICK_TIME)}},mouseUpCounter:function(b){!a.getSuspended()&&a._isRelevantMouseEvent(this,b)&&(a._capturingWidget=null,a._lastMouseDown.mouseUpCount+=1)},_isRelevantMouseEvent:function(b,c){var d=!0;if(b!==a._capturingWidget&&b!==c.getOriginalTarget())var d=rwt.remote.WidgetManager.getInstance(),e=c.getOriginalTarget(),d=d.findEnabledControl(e),d=b===d;return d},_clearLastMouseDown:function(){var b=a._lastMouseDown;b.widget=null;b.button="";b.mouseUpCount=0;b.x=-1;b.y=-1},_isDoubleClick:function(b,c){var d=a._lastMouseDown;return 1===d.mouseUpCount&&d.widget===b&&d.button===rwt.event.MouseEvent.C_BUTTON_LEFT&&d.button===c.getButton()&&a._isCloseTo(d.x,d.y,c.getPageX(),c.getPageY())},_isCloseTo:function(a,c,d,e){return d>=a-5&&d<=a+5&&e>=c-5&&e<=c+5},_notifyMouseListeners:function(b,c,d){var e={x:c.getPageX(),y:c.getPageY(),time:a.eventTimestamp()};a.addButtonToProperties(e,c);a.addModifierToProperties(e);rwt.remote.Connection.getInstance().getRemoteObject(b).notify(d,e)},helpRequested:function(a){if("F1"===a.getKeyIdentifier()){a.stopPropagation();a.preventDefault();a=a.getTarget();var b=rwt.remote.WidgetManager.getInstance(),d=b.findIdByWidget(a);null===d&&(a=b.findControl(a),d=b.findIdByWidget(a));null!=d&&rwt.remote.Connection.getInstance().getRemoteObject(a).notify("Help")}},menuDetectedByKey:function(b){if("Apps"===b.getKeyIdentifier()){b.stopPropagation();b.preventDefault();var c=rwt.event.MouseEvent.getPageX(),d=rwt.event.MouseEvent.getPageY();a.sendMenuDetected(b.getTarget(),c,d)}},menuDetectedByMouse:function(b){if(b.getButton()===rwt.event.MouseEvent.C_BUTTON_RIGHT){b.stopPropagation();b.preventDefault();var c=b.getPageX(),d=b.getPageY();a.sendMenuDetected(b.getTarget(),c,d)}},sendMenuDetected:function(b,c,d){if(!a.getSuspended()){for(var e=rwt.remote.WidgetManager.getInstance();null!=b&&!e.isControl(b);)b=b.getParent?b.getParent():null;null!=e.findIdByWidget(b)&&rwt.remote.Connection.getInstance().getRemoteObject(b).notify("MenuDetect",{x:c,y:d})}}};a=rwt.remote.EventUtil})();(function(){namespace("rwt.client");rwt.widgets.util.ToolTipConfig={getConfig:function(a){if(a.getParent()instanceof rwt.widgets.CoolBar)return this._getClickableConfig(a);switch(a.classname){case "rwt.widgets.ControlDecorator":return this._quickConfig;case "rwt.widgets.Label":return this._getLabelConfig(a);case "rwt.widgets.Button":case "rwt.widgets.TabItem":case "rwt.widgets.CTabItem":return this._getClickableConfig(a);case "rwt.widgets.Text":case "rwt.widgets.Spinner":case "rwt.widgets.Combo":case "rwt.widgets.DateTimeDate":case "rwt.widgets.DateTimeTime":return this._fieldConfig;case "rwt.widgets.ToolItem":return this._getClickableConfig(a);case "rwt.widgets.ProgressBar":return rwt.util.Objects.mergeWith({overlap:3},this._getBarConfig(a));case "rwt.widgets.Scale":case "rwt.widgets.Slider":return rwt.util.Objects.mergeWith({overlap:-2},this._getBarConfig(a));case "rwt.widgets.base.GridRowContainer":return this._rowConfig;default:return this._defaultConfig}},_getBarConfig:function(a){return a.hasState("rwt_VERTICAL")?this._verticalBarConfig:this._horizontalBarConfig},_getClickableConfig:function(a){if(a.hasState("rwt_VERTICAL"))return this._verticalClickableConfig;a=a.getAppearance();var b=this._horizontalClickableConfig;return"check-box"===a||"radio-button"===a?rwt.util.Objects.mergeWith({overlap:-1},b):b},_getLabelConfig:function(a){return a._rawText?this._fieldConfig:this._quickConfig},_defaultConfig:{position:"mouse",appearOn:"rest",disappearOn:"move",appearDelay:1E3,disappearDelay:200,autoHide:!0},_horizontalClickableConfig:{position:"horizontal-center",appearOn:"enter",disappearOn:"exit",appearDelay:200,disappearDelay:100,autoHide:!0},_verticalClickableConfig:{position:"vertical-center",appearOn:"enter",disappearOn:"exit",appearDelay:200,disappearDelay:100,autoHide:!0},_horizontalBarConfig:{position:"horizontal-center",appearOn:"enter",disappearOn:"exit",appearDelay:200,disappearDelay:100,autoHide:!1},_verticalBarConfig:{position:"vertical-center",appearOn:"enter",disappearOn:"exit",appearDelay:200,disappearDelay:100,autoHide:!1},_fieldConfig:{position:"align-left",appearOn:"rest",disappearOn:"exit",appearDelay:500,disappearDelay:200,autoHide:!0},_quickConfig:{position:"horizontal-center",appearOn:"enter",disappearOn:"exit",appearDelay:20,disappearDelay:50,autoHide:!1,overlap:-1},_rowConfig:{position:"align-left",appearOn:"rest",disappearOn:"exitTargetBounds",appearDelay:700,disappearDelay:100,autoHide:!0}}})();rwt.qx.Class.define("rwt.widgets.base.WidgetToolTip",{extend:rwt.widgets.base.Popup,include:rwt.animation.VisibilityAnimationMixin,construct:function(){this.base(arguments);this._label=new rwt.widgets.base.MultiCellWidget(["label"]);this._label.setParent(this);this._pointer=null;this._showTimer=new rwt.client.Timer;this._showTimer.addEventListener("interval",this._onshowtimer,this);this._hideTimer=new rwt.client.Timer;this._hideTimer.addEventListener("interval",this._onhidetimer,this);this._lastWidget=null;this._fallbackMode=!1;this.addEventListener("mouseover",this._onMouseOver);this.addEventListener("mouseout",this._onMouseOver);this.addEventListener("mouseup",this._onMouseUp);this._config={};this.setRestrictToPageOnOpen(!1)},statics:{getInstance:function(){return rwt.runtime.Singletons.get(rwt.widgets.base.WidgetToolTip)},setToolTipText:function(a,b){if(null!=b&&""!==b){var c=b;if(!0!==a.getUserData("toolTipMarkupEnabled"))var d=rwt.util.Encoding,c=d.escapeText(c,!1),c=d.replaceNewLines(c,"\x3cbr/\x3e");a.setToolTipText(c);a.dispatchSimpleEvent("updateToolTip",a)}else a.setToolTipText(null)}},properties:{appearance:{refine:!0,init:"widget-tool-tip"},mousePointerOffsetX:{check:"Integer",init:1},mousePointerOffsetY:{check:"Integer",init:20},boundToWidget:{check:"rwt.widgets.base.Widget",apply:"_applyBoundToWidget",nullable:!0,init:null},pointers:{nullable:!0,init:null,themeable:!0},textAlign:{check:["left","center","right"],init:"center",themeable:!0,apply:"_applyTextAlign"}},members:{_minZIndex:1E7,_targetDistance:4,updateText:function(){this.getBoundToWidget()&&(this._updateTextInternal(),this.getText()&&!this._showTimer.isEnabled()&&this._onshowtimer(),this.getText()||this._quickHide())},getLastWidget:function(){return this._lastWidget},getFocusRoot:function(){return null},_applyElement:function(a,b){this.base(arguments,a,b)},_applyTextAlign:function(a){this._label.setHorizontalChildrenAlign(a)},_getPointerElement:function(){null==this._pointer&&(this._pointer=document.createElement("div"),this._pointer.style.position="absolute",rwt.html.Style.setBackgroundRepeat(this._pointer,"no-repeat"),rwt.html.Style.setPointerEvents(this._pointer,"none"),this.getElement().appendChild(this._pointer));return this._pointer},_applyBoundToWidget:function(a,b){a?(this.setParent(rwt.widgets.base.ClientDocument.getInstance()),this._config=rwt.widgets.util.ToolTipConfig.getConfig(this.getBoundToWidget()),this._showTimer.setInterval(this._config.appearDelay||1E3),this._hideTimer.setInterval(this._config.disappearDelay||200),this.setAutoHide(!1!==this._config.autoHide)):b&&(this._config={})},_beforeAppear:function(){this.base(arguments);this._stopShowTimer()},_beforeDisappear:function(){this.base(arguments);this._stopHideTimer()},_startShowTimer:function(){!this._allowQuickAppear()||"enter"!==this._config.appearOn&&this._lastWidget!=this.getBoundToWidget()?this._showTimer.getEnabled()||this._showTimer.start():this._onshowtimer()},_allowQuickAppear:function(){var a=(new Date).getTime();return this.isSeeable()||0<this._hideTimeStamp&&300>a-this._hideTimeStamp},_startHideTimer:function(){this._hideTimer.getEnabled()||this._hideTimer.start()},_stopShowTimer:function(){this._showTimer.getEnabled()&&this._showTimer.stop()},_stopHideTimer:function(){this._hideTimer.getEnabled()&&this._hideTimer.stop()},_onMouseOver:function(a){this._pointer&&this._pointer===a.getDomTarget()||0<this.getElement().getElementsByTagName("a").length||this._quickHide()},_onMouseUp:function(){rwt.client.Timer.once(function(){this._quickHide()},this,100)},_quickHide:function(){this._disappearAnimation&&this._disappearAnimation.isRunning()?this._disappearAnimation.skip():this._disappearAnimation&&this._disappearAnimation.getDefaultRenderer().isActive()?(this._disappearAnimation.getDefaultRenderer().setActive(!1),this.hide(),this._disappearAnimation.getDefaultRenderer().setActive(!0)):this.hide()},_handleMouseMove:function(a){if(this.getBoundToWidget())if(this.isSeeable()&&!this._hideTimer.getEnabled())if("move"===this._config.disappearOn||this._fallbackMode)this._startHideTimer();else{if("exitTargetBounds"===this._config.disappearOn){var b=this._getTargetBounds(),c=a.getPageX();a=a.getPageY();(c<b.left||c>b.left+b.width||a<b.top||a>b.top+b.height)&&this._startHideTimer()}}else"rest"===this._config.appearOn&&this._showTimer.restart()},_onshowtimer:function(){this._lastWidget=this.getBoundToWidget();this._stopShowTimer();this._stopHideTimer();this._updateTextInternal();this.getText()?(this._allowQuickAppear()&&this._appearAnimation&&this._appearAnimation.getDefaultRenderer().isActive()&&!this.isSeeable()?(this._appearAnimation.getDefaultRenderer().setActive(!1),this.show(),this._appearAnimation.getDefaultRenderer().setActive(!0)):this.show(),rwt.widgets.base.Widget.flushGlobalQueues(),this._afterAppearLayout(),rwt.widgets.base.Widget.flushGlobalQueues()):this.getBoundToWidget().requestToolTipText&&this.getBoundToWidget().requestToolTipText()},_onhidetimer:function(){"rest"===this._config.appearOn&&this._showTimer.start();return this.hide()},_afterAppearLayout:function(){var a=this._getTargetBounds();this._fallbackMode=this._computeFallbackMode(a);var b=this._getViewportBounds(),c=this._getOwnDimension(),b=this._getPositionAfterAppear(a,b,c);this.setLeft(b[0]);this.setTop(b[1]);this._renderPointer(a,{left:b[0]+this._cachedBorderLeft,top:b[1]+this._cachedBorderTop,width:c.width-this._cachedBorderLeft-this._cachedBorderRight,height:c.height-this._cachedBorderTop-this._cachedBorderBottom})},_renderPointer:function(a,b){var c=this.getPointers(),d=this._config.position&&"mouse"!==this._config.position&&c&&!this._fallbackMode;this._getPointerElement().style.display="none";d&&(d=this._getDirection(a,b),"up"===d&&c[0]?this._renderPointerUp(a,b):"down"===d&&c[2]?this._renderPointerDown(a,b):"left"===d&&c[3]?this._renderPointerLeft(a,b):"right"===d&&c[1]&&this._renderPointerRight(a,b))},_renderPointerUp:function(a,b){var c=this.getPointers()[0],d=this._getPointerElement();rwt.html.Style.setBackgroundImage(d,c[0]);d.style.width=c[1]+"px";d.style.height=c[2]+"px";d.style.top=-1*c[2]+"px";this._renderPointerHorizontalAlign(a,b,c);d.style.display=""},_renderPointerDown:function(a,b){var c=this.getPointers()[2],d=this._getPointerElement();rwt.html.Style.setBackgroundImage(d,c[0]);d.style.width=c[1]+"px";d.style.height=c[2]+"px";d.style.top=b.height+"px";this._renderPointerHorizontalAlign(a,b,c);d.style.display=""},_renderPointerLeft:function(a,b){var c=this.getPointers()[3],d=this._getPointerElement(),e=this._getBoundsCenter(a);rwt.html.Style.setBackgroundImage(d,c[0]);d.style.width=c[1]+"px";d.style.height=c[2]+"px";d.style.left=-1*c[1]+"px";d.style.top=Math.round(e.top-b.top-c[2]/2)+"px";d.style.display=""},_renderPointerRight:function(a,b){var c=this.getPointers()[1],d=this._getPointerElement(),e=this._getBoundsCenter(a);rwt.html.Style.setBackgroundImage(d,c[0]);d.style.width=c[1]+"px";d.style.height=c[2]+"px";d.style.left=b.width+"px";d.style.top=Math.round(e.top-b.top-c[2]/2)+"px";d.style.display=""},_renderPointerHorizontalAlign:function(a,b,c){var d=this._getPointerElement();"align-left"===this._config.position?(c=a.left+this._targetDistance+this._cachedBorderLeft+this.getPaddingLeft(),d.style.left=Math.round(c-b.left)+"px"):(a=this._getBoundsCenter(a),d.style.left=Math.round(a.left-b.left-c[1]/2)+"px")},_getDirection:function(a,b){var c=b.left>=a.left&&b.left<=a.left+a.width;return a.left>=b.left&&a.left<=b.left+b.width||c?b.top>a.top?"up":"down":b.left>a.left?"left":"right"},_getBoundsCenter:function(a){return{left:a.left+a.width/2,top:a.top+a.height/2}},_updateTextInternal:function(){this._label.setCellContent(0,this.getBoundToWidget().getToolTipText())},_computeFallbackMode:function(a){var b=this._getViewportBounds(),c=a.left,d=a.left+a.width,e=a.top,f=a.top+a.height;if(c<b.left||e<b.top||d>b.left+b.width||f>b.top+b.height)return!0;var g=this.getElement().style.display;this.getElement().style.display="none";a=[document.elementFromPoint(c+a.width/2-b.left,e+1-b.top),document.elementFromPoint(d-1-b.left,e+a.height/2-b.top),document.elementFromPoint(c+a.width/2-b.left,f-1-b.top),document.elementFromPoint(c+1-b.left,e+a.height/2-b.top)];this.getElement().style.display=g;g=this.getBoundToWidget();for(b=0;4>b;b++)if(c=rwt.event.EventHandlerUtil.getOriginalTargetObject(a[b]),null==c||g!==c&&!g.contains(c))return!0;return!1},getText:function(){return this._label.getCellContent(0)},_getPositionAfterAppear:function(a,b,c){if(this._fallbackMode)a=this._positionMouseRelative(a,b,c);else switch(this._config.position){case "horizontal-center":a=this._positionHorizontalCenter(a,b,c);break;case "align-left":a=this._positionAlignLeft(a,b,c);break;case "vertical-center":a=this._positionVerticalCenter(a,b,c);break;default:a=this._positionMouseRelative(a,b,c)}a[0]=Math.min(a[0],b.left+b.width-c.width);a[1]=Math.min(a[1],b.top+b.height-c.height);a[0]=Math.max(a[0],b.left);a[1]=Math.max(a[1],b.top);return a},_positionMouseRelative:function(){return[rwt.event.MouseEvent.getPageX()+this.getMousePointerOffsetX(),rwt.event.MouseEvent.getPageY()+this.getMousePointerOffsetY()]},_positionHorizontalCenter:function(a,b,c){var d=this._getHorizontalOffsetCentered(a,c,b);a=this._getVerticalOffsetAutoByAbsolutePosition(a,c,b);return[d,a]},_positionAlignLeft:function(a,b,c){var d=this._getHorizontalOffsetAlignLeft(a,c,b);a=this._getVerticalOffsetAutoByAbsolutePosition(a,c,b);return[d,a]},_positionVerticalCenter:function(a,b,c){var d=this._getHorizontalOffsetAuto(a,c,b);a=this._getVerticalOffsetCentered(a,c,b);return[d,a]},_getVerticalOffsetAutoByAbsolutePosition:function(a,b){var c=this._getVerticalOffsetTop(a,b);30>c&&(c=this._getVerticalOffsetBottom(a,b));return c},_getVerticalOffsetTop:function(a,b){return a.top-b.height-this._getTargetDistance("down")},_getVerticalOffsetBottom:function(a){return a.top+a.height+this._getTargetDistance("up")},_getHorizontalOffsetCentered:function(a,b){return Math.round(a.left+a.width/2-b.width/2)},_getHorizontalOffsetAlignLeft:function(a){return a.left+this._targetDistance},_getHorizontalOffsetAuto:function(a,b,c){var d=a.left;return d>c.width-d-a.width?a.left-b.width-this._getTargetDistance("right"):a.left+a.width+this._getTargetDistance("left")},_getVerticalOffsetCentered:function(a,b){return Math.round(a.top+a.height/2-b.height/2)},_getTargetBounds:function(){var a=this.getBoundToWidget(),b=rwt.html.Location.get(a.getElement()),b={left:b.left,top:b.top,width:a.getBoxWidth(),height:a.getBoxHeight()};a.getToolTipTargetBounds&&(a=a.getToolTipTargetBounds(),b.left+=a.left,b.top+=a.top,b.width=a.width,b.height=a.height);return b},_getViewportBounds:function(){var a=rwt.html.Viewport;return{left:a.getScrollLeft(),top:a.getScrollTop(),width:a.getWidth(),height:a.getHeight()}},_getOwnDimension:function(){return{width:this.getBoxWidth(),height:this.getBoxHeight()}},_getTargetDistance:function(a){var b="number"===typeof this._config.overlap?this._config.overlap:4,c=this.getPointers();return"up"===a&&c&&c[0]?c[0][2]-b:"down"===a&&c&&c[2]?c[2][2]-b:"left"===a&&c&&c[3]?c[3][1]-b:"right"===a&&c&&c[1]?c[1][1]-b:this._targetDistance}},destruct:function(){this._disposeObjects("_showTimer","_hideTimer","_label")}});rwt.qx.Class.define("rwt.theme.ThemeStore",{extend:rwt.qx.Object,statics:{getInstance:function(){return rwt.runtime.Singletons.get(rwt.theme.ThemeStore)}},construct:function(){this._values={dimensions:{},boxdims:{},images:{},gradients:{},fonts:{},colors:{},borders:{},cursors:{},animations:{},shadows:{}};this._cssValues={};this._statesMap={"*":{hover:"over"},"DateTime-Calendar-Day":{unfocused:"parent_unfocused"},"List-Item":{unfocused:"parent_unfocused"},Text:{"read-only":"readonly"},TreeItem:{unfocused:"parent_unfocused"},"Tree-RowOverlay":{unfocused:"parent_unfocused"},TreeColumn:{hover:"mouseover"},Shell:{inactive:"!active"},"Shell-Titlebar":{inactive:"!active"},"Shell-MinButton":{inactive:"!active"},"Shell-MaxButton":{inactive:"!active"},"Shell-CloseButton":{inactive:"!active"},TableColumn:{hover:"mouseover"},TableItem:{unfocused:"parent_unfocused"},"Table-RowOverlay":{unfocused:"parent_unfocused"},TabItem:{selected:"checked",first:"firstChild",last:"lastChild",bottom:"barBottom"}};this._namedColors={}},members:{setCurrentTheme:function(a){this._currentTheme=a},getCurrentTheme:function(){return this._currentTheme},setFallbackTheme:function(a){this.fallbackTheme=a},getFallbackTheme:function(){return this.fallbackTheme},defineValues:function(a){for(var b in this._values)if(b in a)for(var c in a[b])c in this._values[b]||(this._values[b][c]=a[b][c])},setThemeCssValues:function(a,b,c){this._cssValues[a]=b;c&&(this.fallbackTheme=a);this._fillNamedColors(a)},getColor:function(a,b,c,d){a=this._getCssValue(a,b,c,d);a=this._values.colors[a];a instanceof Array&&(a="#"+rwt.util.Colors.rgbToHexString(a));return a},getAlpha:function(a,b,c,d){a=this._getCssValue(a,b,c,d);a=this._values.colors[a];b=1;a instanceof Array?b=a[3]:"transparent"===a&&(b=0);return b},getNamedColor:function(a){var b=this._namedColors[a];return b?b:a},getDimension:function(a,b,c,d){a=this._getCssValue(a,b,c,d);return this._values.dimensions[a]},getBoxDimensions:function(a,b,c,d){a=this._getCssValue(a,b,c,d);return this._values.boxdims[a]},getFloat:function(a,b,c,d){return parseFloat(this._getCssValue(a,b,c,d))},getIdentifier:function(a,b,c,d){return this._getCssValue(a,b,c,d)},getImage:function(a,b,c,d){a=this._getCssValue(a,b,c,d);return null!=this._values.images[a]?"rwt-resources/themes/images/"+a:rwt.theme.ThemeValues.NONE_IMAGE},getSizedImage:function(a,b,c,d){a=this._getCssValue(a,b,c,d);b=this._values.images[a];return null!=b?["rwt-resources/themes/images/"+a].concat(b):rwt.theme.ThemeValues.NONE_IMAGE_SIZED},getCursor:function(a,b,c,d){a=this._getCssValue(a,b,c,d);b=this._values.cursors[a];null===b&&(b="rwt-resources/themes/cursors/"+a);return b},getAnimation:function(a,b,c,d){a=this._getCssValue(a,b,c,d);return this._values.animations[a]},getFont:function(a,b,c,d){a=this._getCssValue(a,b,c,d);b=this._values.fonts[a];b instanceof rwt.html.Font||(c=new rwt.html.Font,c.setSize(b.size),c.setFamily(b.family),c.setBold(b.bold),c.setItalic(b.italic),this._values.fonts[a]=c);return this._values.fonts[a]},getBorder:function(a,b,c,d){c=this._createCompleteBorderKey(a,b,d);var e=this._getCssValue(a,b,"border-radius",d),f=this._values.boxdims[e],g=null!=f&&"0000"!==f.join("");g&&(c+="#"+e);e=this._values.borders[c];if(!(e&&e instanceof rwt.html.Border)){var e=this.getBorderEdge(a,b,"border-top",d),h=this.getBorderEdge(a,b,"border-right",d),k=this.getBorderEdge(a,b,"border-bottom",d);d=this.getBorderEdge(a,b,"border-left",d);a=[e.getWidthTop(),h.getWidthTop(),k.getWidthTop(),d.getWidthTop()];b=[e.getColorTop(),h.getColorTop(),k.getColorTop(),d.getColorTop()];d=[e.getStyleTop(),h.getStyleTop(),k.getStyleTop(),d.getStyleTop()];e=new rwt.html.Border(a,d,b,g?f:void 0);this._values.borders[c]=e}return e},getBorderEdge:function(a,b,c,d){var e;c=this._getCssValue(a,b,c,d);var f=this._values.borders[c],g=f instanceof rwt.html.Border;b=this._getCssValue(a,b,"border-radius",d);a=this._values.boxdims[b];if(null!=a&&"0000"!==a.join("")&&(b=c+"#"+b,e=this._values.borders[b],!e)){e=g?f.getWidthTop():f.width;d=g?f.getStyleTop():f.style;var h=g?f.getColorTop():f.color;e=new rwt.html.Border(e,d,h,a);this._values.borders[b]=e}e||(g?e=f:(e=new rwt.html.Border(f.width,f.style,f.color),this._values.borders[c]=e));return e},getNamedBorder:function(a){var b="_"+a,c=this._values.borders[b];if(!c)if(a=rwt.theme.BorderDefinitions.getDefinition(a)){var c=this._resolveNamedColors(a.color),d=this._resolveNamedColors(a.innerColor),c=new rwt.html.Border(a.width,"complex",c,d);this._values.borders[b]=c}else c=null;return c},getShadow:function(a,b,c,d){a=this._getCssValue(a,b,c,d);return this._values.shadows[a]},getGradient:function(a,b,c,d){var e=null;a=this._getCssValue(a,b,c,d);if(b=this._values.gradients[a]){if(b.colors&&b.percents){e=[];for(c=0;c<b.colors.length;c++)e[c]=[b.percents[c]/100,b.colors[c]];e.horizontal=!b.vertical;this._values.gradients[a]=e}e=this._values.gradients[a]}return e},_getCssValue:function(a,b,c,d){var e;null==d&&(d=this._currentTheme);if(void 0!==this._cssValues[d]&&void 0!==this._cssValues[d][a]&&void 0!==this._cssValues[d][a][c])for(var f=this._cssValues[d][a][c],g=0;g<f.length;g++)if(this._matches(b,a,f[g][0])){e=f[g][1];break}void 0===e&&d!=this.fallbackTheme&&(e=this._getCssValue(a,b,c,this.fallbackTheme));return e},_matches:function(a,b,c){for(var d=!0,e=0;e<c.length&&d;e++){var f=c[e];if(0<f.length){var g=f.charAt(0);"."==g?d="variant_"+f.substr(1)in a:":"==g?(d=this._translateState(f.substr(1),b),d="!"==d.charAt(0)?!(d.substr(1)in a):d in a):"["==g&&(d="rwt_"+f.substr(1)in a)}}return d},_translateState:function(a,b){var c=a;b in this._statesMap&&a in this._statesMap[b]?c=this._statesMap[b][a]:a in this._statesMap["*"]&&(c=this._statesMap["*"][a]);return c},_resolveNamedColors:function(a){var b=null;if(a)for(var b=[],c=0;c<a.length;c++)b[c]=this.getNamedColor(a[c]);return b},_fillNamedColors:function(a){this._namedColors.darkshadow=this.getColor("Display",{},"rwt-darkshadow-color",a);this._namedColors.highlight=this.getColor("Display",{},"rwt-highlight-color",a);this._namedColors.lightshadow=this.getColor("Display",{},"rwt-lightshadow-color",a);this._namedColors.shadow=this.getColor("Display",{},"rwt-shadow-color",a);this._namedColors.thinborder=this.getColor("Display",{},"rwt-thinborder-color",a);this._namedColors["selection-marker"]=this.getColor("Display",{},"rwt-selectionmarker-color",a);this._namedColors.background=this.getColor("*",{},"background-color",a);this._namedColors.foreground=this.getColor("*",{},"color",a);this._namedColors["info.foreground"]=this.getColor("Widget-ToolTip",{},"color",a)},_createCompleteBorderKey:function(a,b,c){var d=this._getCssValue(a,b,"border-top",c),e=this._getCssValue(a,b,"border-right",c),f=this._getCssValue(a,b,"border-bottom",c);a=this._getCssValue(a,b,"border-left",c);return d===e&&d===f&&d===a?d:d+"#"+e+"#"+f+"#"+a}}});rwt.remote.HandlerRegistry.add("rwt.theme.ThemeStore",{factory:function(){return rwt.theme.ThemeStore.getInstance()},service:!0,methods:["loadActiveTheme","loadFallbackTheme"],methodHandler:{loadActiveTheme:function(a,b){var c=new rwt.remote.Request(b.url,"GET","application/json");c.setAsynchronous(!1);c.setSuccessHandler(function(c){c=JSON.parse(c.responseText);a.defineValues(c.values);a.setThemeCssValues(b.url,c.theme,!1);a.setCurrentTheme(b.url)});c.send()},loadFallbackTheme:function(a,b){var c=new rwt.remote.Request(b.url,"GET","application/json");c.setAsynchronous(!1);c.setSuccessHandler(function(c){c=JSON.parse(c.responseText);a.defineValues(c.values);a.setThemeCssValues(b.url,c.theme,!0)});c.send()}}});(function(a){var b=a("\x3cdiv\x3e").css({position:"absolute",overflow:"hidden",whiteSpace:"nowrap",textDecoration:"inherit"}),c=a("\x3cdiv\x3e").css({position:"absolute",backgroundRepeat:"no-repeat"});rwt.qx.Class.define("rwt.widgets.base.MultiCellWidget",{extend:rwt.widgets.base.Terminator,construct:function(b){this.base(arguments);this.$el=a(this);this.__cellCount=this.$cells=this.__cellData=null;this.__styleRegExp=/([a-z])([A-Z])/g;this.__createCellData(b);this.__paddingCache=[0,0,0,0];this.__fontCache={};this.__colorCache="";this._flexibleCell=-1;this._expandFlexCell=!1;this.initWidth();this.initHeight();this.addToQueue("createContent");this.setOverflow("hidden");this.initSelectable();this.initCursor();this.initTextColor();this.initHorizontalChildrenAlign()},destruct:function(){this._disposeObjectDeep("__cellData",0);this._disposeObjectDeep("$cells",0);this._disposeObjectDeep("__paddingCache",0);this._disposeObjectDeep("_fontCache",0)},properties:{spacing:{check:"Integer",init:4,themeable:!0,apply:"_applySpacing",event:"changeSpacing"},vertical:{init:!1,apply:"_applyVertical",themeable:!0},horizontalChildrenAlign:{check:["left","center","right"],init:"center",themeable:!0,apply:"_applyHorizontalChildrenAlign"},verticalChildrenAlign:{check:["top","middle","bottom"],init:"middle",themeable:!0,apply:"_applyVerticalChildrenAlign"},textOverflow:{check:["clip","ellipsis"],init:"clip",themeable:!0,apply:"_applyTextOverflow"},wordWrap:{check:"Boolean",init:!1,apply:"_applyWordWrap"},selectable:{refine:!0,init:!1},textColor:{refine:!0,init:"#000000"},cursor:{refine:!0,init:"default"},allowStretchX:{refine:!0,init:!1},allowStretchY:{refine:!0,init:!1},appearance:{refine:!0,init:"atom"},width:{refine:!0,init:"auto"},height:{refine:!0,init:"auto"}},members:{setCellContent:function(a,b){this.__updateComputedCellDimension(a);this._cellHasContent(a)!=(null!=b)?(this._invalidatePreferredInnerWidth(),this.addToQueue("createContent")):this.addToQueue("updateContent");this.__cellData[a][1]=b},setCellDimension:function(a,b,c){this.setCellWidth(a,b);this.setCellHeight(a,c)},setCellVisible:function(a,b){this.__cellData[a][6]=b;this.$cells[a]&&this.$cells[a].css("display",b?"":"none")},isCellVisible:function(a){return this.__cellData[a][6]},getCellNode:function(a){return this.$cells[a]?this.$cells[a].get(0):null},getCellContent:function(a){return this.__cellData[a][1]},setCellWidth:function(a,b){this._getCellWidth(a)!==b&&(this._setCellWidth(a,b),this._invalidatePreferredInnerWidth(),this._scheduleLayoutX())},setCellHeight:function(a,b){this._setCellHeight(a,b);this._invalidatePreferredInnerWidth();this._invalidatePreferredInnerHeight();this._scheduleLayoutY()},setFlexibleCell:function(a){this._flexibleCell=a},getFlexibleCell:function(){return this._flexibleCell},expandFlexCell:function(a){"boolean"===typeof a&&(this._expandFlexCell=a);return this._expandFlexCell},getCellDimension:function(a){var b=this.getCellWidth(a);a=this.getCellHeight(a);return[b,a]},getCellWidth:function(a,b){var c=this.__cellData[a],d=this._flexibleCell===a&&!0!==b,e=null!=c[2]?c[2]:c[4];if(null==e||d&&null===c[3])e=this.__computeCellDimension(c)[0];d&&(e=this._adjustCellWidth(a,e));return e},getCellHeight:function(a,b){var c=this.__cellData[a],d=this._flexibleCell===a&&!0!==b,e=null!=c[3]?c[3]:c[5];if(null==e||d&&null===c[3])e=d&&this.getWordWrap()?this.getCellWidth(a):null,e=this.__computeCellDimension(c,e)[1];d&&(e=this._adjustCellHeight(a,e));return e},_applyElement:function(a,b){this.base(arguments,a,b);if(a){this._createSubElements();var c=this.getFont();c?c.render(this):rwt.html.Font.reset(this)}},_applyDirection:function(a){this.base(arguments,a);this.addToQueue("layoutX")},_createSubElements:function(){for(var a=0;a<this.__cellCount;a++){var e=this._cellHasContent(a),f=null!=this.getCellNode(a);!f&&e?this._isTextCell(a)?this.__setCellNode(a,b.clone()):this._isImageCell(a)&&this.__setCellNode(a,c.clone()):f&&!e?this.$cells[a].css("display","none"):f&&e&&this.isCellVisible(a)&&this.$cells[a].css("display","")}this.getEnabled()||this._applyEnabled(!1);"clip"!==this.getTextOverflow()&&this._applyTextOverflow(this.getTextOverflow());this.getWordWrap()&&this._applyWordWrap(!0)},_applyVertical:function(){this._scheduleLayoutX();this._scheduleLayoutY()},_applySpacing:function(){this._invalidatePreferredInnerWidth();this._scheduleLayoutX()},_applyHorizontalChildrenAlign:function(a){this._scheduleLayoutX();this.setStyleProperty("textAlign",a)},_applyVerticalChildrenAlign:function(){this._scheduleLayoutY()},_applyPaddingTop:function(a){this.addToLayoutChanges("paddingTop");this.__paddingCache[0]=a;this._invalidateFrameHeight()},_applyPaddingRight:function(a){this.addToLayoutChanges("paddingRight");this.__paddingCache[1]=a;this._invalidateFrameWidth()},_applyPaddingBottom:function(a){this.addToLayoutChanges("paddingBottom");this.__paddingCache[2]=a;this._invalidateFrameHeight()},_applyPaddingLeft:function(a){this.addToLayoutChanges("paddingLeft");this.__paddingCache[3]=a;this._invalidateFrameWidth()},_applyEnabled:function(a,b){this.base(arguments,a,b);this._styleAllImagesEnabled()},_applyTextOverflow:function(a){for(var b=0;b<this.__cellCount;b++)this._isTextCell(b)&&this.$cells[b]&&this.$cells[b].css("textOverflow","clip"===a?"":a)},_applyWordWrap:function(a){-1!==this._flexibleCell&&this.$cells[this._flexibleCell]&&this.$cells[this._flexibleCell].css("whiteSpace",a?"":"nowrap")},_scheduleLayoutX:function(){this.addToQueue("layoutX");this._afterScheduleLayoutX()},_scheduleLayoutY:function(){this.addToQueue("layoutY");this._afterScheduleLayoutY()},_afterScheduleLayoutX:rwt.util.Functions.returnTrue,_afterScheduleLayoutY:rwt.util.Functions.returnTrue,_beforeComputeInnerWidth:rwt.util.Functions.returnTrue,_beforeComputeInnerHeight:rwt.util.Functions.returnTrue,_beforeRenderLayout:rwt.util.Functions.returnTrue,_afterRenderLayout:rwt.util.Functions.returnTrue,_cellHasContent:function(a){return null!=this.__cellData[a][1]},_isImageCell:function(a){return"image"==this.__cellData[a][0]},_isTextCell:function(a){return"label"==this.__cellData[a][0]},_setCellWidth:function(a,b){this.__cellData[a][2]=b},_getCellWidth:function(a){return this.__cellData[a][2]},_setCellHeight:function(a,b){this.__cellData[a][3]=b},__setCellNode:function(a,b){this.$cells[a]=b;null===b||this.isCellVisible(a)||b.css("display","none");null!==b&&this.$el.append(b)},__cellHasNode:function(a){return null!=this.$cells[a]},__createCellData:function(a){var b=[],c=[];this.__cellCount=a.length;for(var d=0;d<this.__cellCount;d++)c[d]=null,b[d]=[a[d],null,null,null,null,null,!0];this.$cells=c;this.__cellData=b},__updateComputedCellDimension:function(a){a=this.__cellData[a];a[4]=null;a[5]=null;null==a[2]&&(this._invalidatePreferredInnerWidth(),this._scheduleLayoutX());null==a[3]&&(this._invalidatePreferredInnerHeight(),this._scheduleLayoutY())},__computeCellDimension:function(a,b){var c;c="label"==a[0]&&null!=a[1]?rwt.widgets.util.FontSizeCalculation.computeTextDimensions(a[1],this.__fontCache,b):[0,0];a[4]=c[0];a[5]=c[1];return c},_isWidthEssential:rwt.util.Functions.returnTrue,_isHeightEssential:rwt.util.Functions.returnTrue,_computePreferredInnerWidth:function(){return this.getVertical()?this._getContentSizeOrthogonalDir():this._getContentSizeFlowDir("ignoreFlexible")},_computePreferredInnerHeight:function(){return this.getVertical()?this._getContentSizeFlowDir("ignoreFlexible"):this._getContentSizeOrthogonalDir()},_adjustCellWidth:function(a,b){var c=this._getAvailableInnerWidth(),d=this._getContentSizeFlowDir("skipFlexible"),c=Math.max(0,c-d);return b>c||this._expandFlexCell?c:b},_getContentSizeFlowDir:function(a){var b=this.getVertical();b?this._beforeComputeInnerHeight():this._beforeComputeInnerWidth();var c="ignoreFlexible"===a;a="skipFlexible"===a;for(var d=0,h=0,k=0;k<this.__cellCount;k++)this.cellIsDisplayable(k)&&(d++,a&&k===this._flexibleCell||(h+=b?this.getCellHeight(k,c):this.getCellWidth(k,c)));return h+=Math.max(0,d-1)*this.getSpacing()},_getContentSizeOrthogonalDir:function(){var a=this.getVertical();a?this._beforeComputeInnerWidth():this._beforeComputeInnerHeight();for(var b=0,c=0;c<this.__cellCount;c++)b=Math.max(b,a?this.getCellWidth(c,!0):this.getCellHeight(c,!0));return b},_adjustCellHeight:function(a,b){var c=this.getInnerHeight();return b>c?c:b},cellIsDisplayable:function(a){return this._flexibleCell===a||0<this.getCellWidth(a)},renderPadding:function(){},_layoutPost:function(a){a.createContent&&this._createSubElements();if(a.updateContent||a.createContent)this._updateAllImages(),this._updateAllLabels();a.layoutX=a.width||a.layoutX||a.frameWidth||a.initial;a.layoutY=a.height||a.layoutY||a.frameHeight||a.initial||a.layoutX&&-1!=this._flexibleCell;this._beforeRenderLayout(a);var b=this.getVertical();(a.layoutY&&b||a.layoutX&&!b)&&this._renderLayoutFlowDir();(a.layoutX&&b||a.layoutY&&!b)&&this._renderLayoutOrthDir();this._afterRenderLayout(a);this.base(arguments,a)},_renderLayoutFlowDir:function(){for(var a=this.getSpacing(),b=this.getVertical(),c=this._getFirstCellOffset(b),g=0;g<this.__cellCount;g++)if(this.cellIsDisplayable(g)){var h=b?this.getCellHeight(g):this.getCellWidth(g);this._cellHasContent(g)&&("rtl"===this.getDirection()?this.$cells[g].css(b?"top":"right",c):this.$cells[g].css(b?"top":"left",c),this.$cells[g].css(b?"height":"width",Math.max(0,h)));c+=h+a}},_getFirstCellOffset:function(a){var b=a?this.getVerticalChildrenAlign():this.getHorizontalChildrenAlign(),c=this._getContentSizeFlowDir();a=a?this.getInnerHeight():this._getAvailableInnerWidth();switch(b){case "left":return this.__paddingCache[3];case "center":return Math.round(this.__paddingCache[3]+a/2-c/2);case "middle":return Math.round(this.__paddingCache[0]+a/2-c/2);case "right":return this.__paddingCache[3]+a-c}},_renderLayoutOrthDir:function(){for(var a=this.getVertical(),b=0;b<this.__cellCount;b++)this._cellHasContent(b)&&this._renderCellLayoutOrthDir(b,a)},_renderCellLayoutOrthDir:function(a,b){var c=b?this.getHorizontalChildrenAlign():this.getVerticalChildrenAlign(),d=this.__paddingCache,e=b?this._getAvailableInnerWidth():this.getInnerHeight(),k=b?this.getCellWidth(a):this.getCellHeight(a),l=null;switch(c){case "top":l=d[0];break;case "middle":l=Math.round(d[0]+.5*e-.5*k);break;case "center":l=Math.round(d[3]+.5*e-.5*k);break;case "bottom":l=d[0]+e-k}"rtl"===this.getDirection()?this.$cells[a].css(b?"right":"top",l):this.$cells[a].css(b?"left":"top",l);this.$cells[a].css(b?"width":"height",k)},_getAvailableInnerWidth:function(){return this.getInnerWidth()},_updateAllImages:function(){for(var a=0;a<this.__cellCount;a++)this._isImageCell(a)&&this._cellHasContent(a)&&this._updateImage(a)},_styleAllImagesEnabled:function(){for(var a=0;a<this.__cellCount;a++)this._isImageCell(a)&&this.__cellHasNode(a)&&this._updateImage(a)},_updateImage:function(a){this.$cells[a].css({opacity:this.getEnabled()?1:.3,backgroundImage:this.getCellContent(a)})},_applyFont:function(a){this._styleFont(a)},_styleFont:function(a){a?(a.render(this),a.renderStyle(this.__fontCache)):(rwt.html.Font.reset(this),rwt.html.Font.resetStyle(this.__fontCache));for(a=0;a<this.__cellCount;a++)this._isTextCell(a)&&this._cellHasContent(a)&&this.__updateComputedCellDimension(a)},_updateAllLabels:function(){for(var a=0;a<this.__cellCount;a++)this._isTextCell(a)&&this._cellHasContent(a)&&this._updateLabel(a)},_updateLabel:function(a){this.$cells[a].html(this.getCellContent(a))}}})})(rwt.util._RWTQuery);rwt.qx.Class.define("rwt.widgets.TabItem",{extend:rwt.widgets.base.MultiCellWidget,include:rwt.widgets.util.OverStateMixin,construct:function(){this.base(arguments,["image","label"]);this.initChecked();this.initTabIndex();this._mnemonicIndex=this._rawText=null;this.addEventListener("mousedown",this._onmousedown);this.addEventListener("keydown",this._onkeydown);this.addEventListener("keypress",this._onkeypress)},properties:{appearance:{refine:!0,init:"tab-item"},tabIndex:{refine:!0,init:1},checked:{check:"Boolean",init:!1,apply:"_applyChecked",event:"changeChecked"},page:{check:"rwt.widgets.base.TabFolderPage",apply:"_applyPage",nullable:!0},manager:{check:"rwt.widgets.util.RadioManager",nullable:!0,apply:"_applyManager"},name:{check:"String",apply:"_applyName"}},members:{setText:function(a){this._rawText=a;this._mnemonicIndex=null;this._applyText(!1)},setImage:function(a){null===a?(this.setCellContent(0,null),this.setCellDimension(0,0,0)):(this.setCellContent(0,a[0]),this.setCellDimension(0,a[1],a[2]))},setMnemonicIndex:function(a){this._mnemonicIndex=a;var b=rwt.widgets.util.MnemonicHandler.getInstance();"number"===typeof a&&0<=a?b.add(this,this._onMnemonic):b.remove(this)},getMnemonicIndex:function(){return this._mnemonicIndex},computeBadgePosition:function(a){return[-1*a[1]+this.getPaddingTop()+1,Math.round(this.getPaddingRight()/2),"auto","auto"]},_applyText:function(a){this._rawText?(a=rwt.util.Encoding.escapeText(this._rawText,a?this._mnemonicIndex:void 0),this.setCellContent(1,a)):this.setCellContent(1,null)},_onMnemonic:function(a){switch(a.type){case "show":this._applyText(!0);break;case "hide":this._applyText(!1);break;case "trigger":var b=this._rawText.toUpperCase().charCodeAt(this._mnemonicIndex);a.charCode===b&&(this.setChecked(!0),a.success=!0)}},_onkeydown:function(a){a=a.getKeyIdentifier();"Enter"!==a&&"Space"!==a||this.setChecked(!0)},_onkeypress:function(a){switch(a.getKeyIdentifier()){case "Left":(a=this.getPreviousActiveSibling())&&a!==this&&(delete rwt.widgets.util.FocusHandler.mouseFocus,a.setFocused(!0),a.setChecked(!0));break;case "Right":(a=this.getNextActiveSibling())&&a!==this&&(delete rwt.widgets.util.FocusHandler.mouseFocus,a.setFocused(!0),a.setChecked(!0))}},_renderAppearance:function(){this.getView()&&(this.toggleState("firstChild",this.isFirstVisibleChild()),this.toggleState("lastChild",this.isLastVisibleChild()),this.toggleState("alignLeft",this.getView().getAlignTabsToLeft()),this.toggleState("alignRight",!this.getView().getAlignTabsToLeft()),this.toggleState("barTop",this.getView().getPlaceBarOnTop()),this.toggleState("barBottom",!this.getView().getPlaceBarOnTop()));this.base(arguments)},getView:function(){var a=this.getParent();return a?a.getParent():null},_applyManager:function(a,b){b&&b.remove(this);a&&a.add(this)},_applyParent:function(a,b){this.base(arguments,a,b);b&&b.getManager().remove(this);a&&a.getManager().add(this)},_applyPage:function(a,b){b&&b.setButton(null);a&&(a.setButton(this),this.getChecked()?a.show():a.hide())},_applyChecked:function(a){if(this._hasParent){var b=this.getManager();b&&b.handleItemChecked(this,a)}this.toggleState("checked",a);(b=this.getPage())&&(this.getChecked()?b.show():b.hide());this.setZIndex(a?1:0);this.addToQueue("updateBadgePosition")},_applyName:function(a){this.getManager()&&this.getManager().setName(a)},_onmousedown:function(){this.setChecked(!0)}},destruct:function(){this.setMnemonicIndex(null)}});rwt.qx.Class.define("rwt.widgets.ListItem",{extend:rwt.widgets.base.MultiCellWidget,construct:function(){this.base(arguments,["label"]);this.setHorizontalChildrenAlign("left");this.setContainerOverflow(!1)},properties:{appearance:{refine:!0,init:"list-item"},width:{refine:!0,init:null},allowStretchX:{refine:!0,init:!0}},members:{setLabel:function(a){this.setCellContent(0,a)},getLabel:function(){return this.getCellContent(0)},matchesString:function(a){var b;b=(b=this.getCellNode(0))?b.innerText||b.textContent:this.getLabel();a="string"===typeof a?a.toLowerCase():"";b="string"===typeof b?b.toLowerCase():"";return""!==a&&0===b.indexOf(a)},getCellHeight:function(){return this.getHeight()-this.getPaddingTop()},getCellWidth:function(){return this.getWidth()-this.getPaddingLeft()-this.getPaddingRight()},_applyDirection:function(a){this.base(arguments,a);this.setHorizontalChildrenAlign("rtl"===a?"right":"left")}}});rwt.qx.Class.define("rwt.widgets.util.MenuManager",{extend:rwt.util.ObjectManager,statics:{getInstance:function(){return rwt.runtime.Singletons.get(rwt.widgets.util.MenuManager)}},members:{update:function(a,b){var c=this.getAll(),d="mousedown"==b,e="mouseup"==b,f=d||e,g=null!=a,h=g&&a.getMenu&&null!=a.getMenu(),k=this._getMenuBar(a),l;for(l in c){var m=c[l],n=!1;if(m.getAutoHide()){var p=m.getOpener()===a,r=!(m.getOpener()instanceof rwt.widgets.MenuItem),q=k!=this._getMenuBar(m);g&&f||(n=!0);d&&q&&(n=!0);d&&r&&p&&(n=!0);h||p||(d&&!m.isSubElement(a)&&(n=!0),e&&m.isSubElement(a,!0)&&a.isEnabled()&&(n=!0))}n&&m.hide()}},_getMenuBar:function(a){var b=null,c=null;if(a instanceof rwt.widgets.MenuItem)b=a.getParentMenu();else if(a instanceof rwt.widgets.Menu||a instanceof rwt.widgets.MenuBar)b=a;for(;null==c&&null!=b;)b instanceof rwt.widgets.MenuBar?c=b:b=b.getOpener()instanceof rwt.widgets.MenuItem?b.getOpener().getParentMenu():null;return c}}});rwt.qx.Class.define("rwt.widgets.MenuItem",{extend:rwt.widgets.base.MultiCellWidget,construct:function(a){this.base(arguments,["image","image","label","label","image"]);this._selected=!1;this._subMenu=this._mnemonicIndex=this._rawText=this._parentMenu=null;this._subMenuOpen=!1;this._preferredCellWidths=null;this.set({width:"auto",horizontalChildrenAlign:"left",verticalChildrenAlign:"middle"});this.addEventListener("changeFont",this._onFontChange);this.addState(a);switch(a){case "push":this._isDeselectable=this._isSelectable=!1;break;case "check":this._isDeselectable=this._isSelectable=!0;break;case "cascade":this._isDeselectable=this._isSelectable=!1;break;case "radio":this._isSelectable=!0,this.setNoRadioGroup(!1),rwt.widgets.util.RadioButtonUtil.registerExecute(this)}this._preferredCellWidths=[0,0,0,0,13];this._isSelectable&&this.setCellContent(0,"")},destruct:function(){this.setMnemonicIndex(null);this.setParentMenu(null);this._disposeFields("_parentMenu","_subMenu")},properties:{selectionIndicator:{apply:"_applySelectionIndicator",nullable:!0,themeable:!0},arrow:{apply:"_applyArrow",nullable:!0,themeable:!0},appearance:{refine:!0,init:"menu-item"}},members:{setText:function(a){this._rawText=a;this._mnemonicIndex=null;this.renderText()},setAccelerator:function(a){var b=null;a&&(b=rwt.util.Encoding.escapeText(a),b=rwt.util.Encoding.replaceWhiteSpaces("    "+b));this.setCellContent(3,b);this.setCellDimension(3,null,null);this._setPreferredCellWidth(3,this.getCellWidth(3))},setMnemonicIndex:function(a){this._mnemonicIndex=a;if(this._parentMenu instanceof rwt.widgets.MenuBar){var b=rwt.widgets.util.MnemonicHandler.getInstance();"number"===typeof a&&0<=a?b.add(this,this._onMnemonic):b.remove(this)}else null!=a&&this._isMnemonicMenu()&&this.renderText()},renderText:function(){this._applyText(this._isMnemonicMenu())},_isMnemonicMenu:function(){return null!=this._parentMenu&&this._parentMenu.getMnemonics()},getMnemonicIndex:function(){return this._mnemonicIndex},handleMnemonic:function(a){this._onMnemonic(a)},_applyText:function(a){this._rawText?(a=rwt.util.Encoding.escapeText(this._rawText,a?this._mnemonicIndex:void 0),this._setText(a)):this._setText(null)},_afterRenderLayout:function(a){a.createContent&&this.getCellNode(3)&&(a="rtl"===this.getDirection(),this.getCellNode(3).style.textAlign=a?"left":"right")},_onMnemonic:function(a){switch(a.type){case "show":this._applyText(!0);break;case "hide":this._applyText(!1);break;case "trigger":if(this._rawText&&null!==this._mnemonicIndex){var b=this._rawText.toUpperCase().charCodeAt(this._mnemonicIndex);a.charCode===b&&(this.hasState("cascade")?this._parentMenu.openByMnemonic(this):(this.execute(),rwt.widgets.util.MenuManager.getInstance().update()),a.success=!0)}}},setParentMenu:function(a){var b=this._applyParentMenuDirection;this._parentMenu&&this._parentMenu.removeEventListener("changeDirection",b,this);if(this._parentMenu=a)this._applyParentMenuDirection(),this._parentMenu.addEventListener("changeDirection",b,this)},getParentMenu:function(){return this._parentMenu},setSubMenuOpen:function(a){this._subMenuOpen=a},setMenu:function(a){this._subMenu=a;this.dispatchSimpleEvent("subMenuChanged")},getMenu:function(){return this._subMenu},_applyParentMenuDirection:function(){var a=this._parentMenu.getDirection();this.setDirection(a);this.setHorizontalChildrenAlign("rtl"===a?"right":"left")},_applySelectionIndicator:function(a){var b=a?a[0]:null,c=a?a[1]:0;a=a?a[2]:0;null==b?this.setCellContent(0,this._isSelectable?"":null):this.setCellContent(0,b);this.setCellHeight(0,a);this._setPreferredCellWidth(0,c)},_setPreferredCellWidth:function(a,b){this._preferredCellWidths[a]=b;this._parentMenu instanceof rwt.widgets.Menu&&this._parentMenu.invalidateMaxCellWidth(a);this._scheduleLayoutX()},_afterScheduleLayoutX:function(){this._parentMenu instanceof rwt.widgets.Menu&&this._parentMenu.scheduleMenuLayout()},getPreferredCellWidth:function(a){return this._preferredCellWidths[a]},setImage:function(a,b,c){this.setCellContent(1,a);this.setCellHeight(1,c);this._setPreferredCellWidth(1,b)},_setText:function(a){this.setCellContent(2,a);this.setCellDimension(2,null,null);this._setPreferredCellWidth(2,this.getCellWidth(2))},_onFontChange:function(){this.setCellDimension(2,null,null);this._setPreferredCellWidth(2,this.getCellWidth(2))},_applyArrow:function(a){var b=a?a[1]:13,c=a?a[2]:0;this.setCellContent(4,a?a[0]:null);this.setCellHeight(4,c);this._setPreferredCellWidth(4,b)},_beforeComputeInnerWidth:function(){if(this._parentMenu instanceof rwt.widgets.Menu)for(var a=0;5>a;a++)this._setCellWidth(a,this._parentMenu.getMaxCellWidth(a))},_beforeAppear:function(){this.base(arguments);this._parentMenu instanceof rwt.widgets.Menu&&(this._parentMenu.invalidateAllMaxCellWidths(),this._parentMenu.scheduleMenuLayout())},setSubMenu:function(a){this._subMenu=a;this.createDispatchEvent("subMenuChanged")},setNoRadioGroup:function(a){this.hasState("radio")&&(this._isDeselectable=this._noRadioGroup=a)},getNoRadioGroup:function(){return this._noRadioGroup},execute:function(){this.isEnabled()&&(this.base(arguments),this._isSelectable?this.setSelection(!(this._selected&&this._isDeselectable)):this._notifySelected())},setSelection:function(a){var b=this._selected,c=this._selected!=a;c&&(this._selected=a,this.toggleState("selected",a),rwt.remote.EventUtil.getSuspended()||rwt.remote.Connection.getInstance().getRemoteObject(this).set("selection",this._selected));(c||b)&&this._notifySelected()},_notifySelected:function(){this._shouldSendEvent()&&rwt.remote.EventUtil.notifySelected(this)},_shouldSendEvent:function(){return!this.hasState("cascade")}}});rwt.remote.HandlerRegistry.add("rwt.widgets.MenuItem",{factory:function(a){var b;rwt.remote.HandlerUtil.callWithTarget(a.parent,function(c){var d=rwt.remote.HandlerUtil.createStyleMap(a.style),e=c.hasState("rwt_BAR"),f="push";d.CASCADE?f="cascade":d.CHECK&&!e?f="check":d.RADIO&&!e&&(f="radio");d.SEPARATOR?b=new rwt.widgets.MenuItemSeparator:(b=new rwt.widgets.MenuItem(f),b.setNoRadioGroup(c.hasState("rwt_NO_RADIO_GROUP")),e&&b.addState("onMenuBar"));c.addMenuItemAt(b,a.index);rwt.remote.HandlerUtil.addDestroyableChild(c,b);b.setUserData("protocolParent",c)});rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);return b},destructor:rwt.remote.HandlerUtil.getWidgetDestructor(),properties:"menu enabled text mnemonicIndex image selection customVariant data".split(" "),propertyHandler:{data:rwt.remote.HandlerUtil.getControlPropertyHandler("data"),menu:function(a,b){a.hasState("rwt_SEPARATOR")||rwt.remote.HandlerUtil.callWithTarget(b,function(b){a.setMenu(b)})},text:function(a,b){if(!a.hasState("rwt_SEPARATOR")){var c=b,d=c.indexOf("\t"),e=null;-1!=d&&(e=c.substring(d+1),c=c.substring(0,d));a.setText(c);a.setAccelerator(e)}},image:function(a,b){a.hasState("rwt_SEPARATOR")||(null===b?a.setImage(b):a.setImage.apply(a,b))},selection:function(a,b){a.hasState("rwt_SEPARATOR")||a.setSelection(b)}},events:["Selection"],listeners:["Help"],listenerHandler:{Help:rwt.remote.HandlerUtil.getControlListenerHandler("Help")}});rwt.qx.Class.define("rwt.widgets.util.RadioButtonUtil",{statics:{registerExecute:function(a){a.addEventListener("execute",this._onSelection,this)},registerKeypress:function(a){a.addEventListener("keypress",this._onKeypress,this)},_onKeypress:function(a){var b=a.getTarget();switch(a.getKeyIdentifier()){case "Left":case "Up":this._setNextOrPrevious(b,"previous");a.preventDefault();a.stopPropagation();break;case "Right":case "Down":this._setNextOrPrevious(b,"next");a.preventDefault();a.stopPropagation();break;case "Home":case "End":case "PageDown":case "PageUp":a.preventDefault(),a.stopPropagation()}},_onSelection:function(a){this._unselectSiblings(a.getTarget())},_isRadioElement:function(a){return a.hasState("radio")},_getRadioGroup:function(a){var b=[];if(!a.getNoRadioGroup()){var c=a.getParent().getChildren(),d=c.length;if("rwt.widgets.Button"==a.classname)for(var e=0;e<d;e++)this._isRadioElement(c[e])&&b.push(c[e]);else for(var f=!1,e=0;e<d&&(!f||this._isRadioElement(c[e]));)f||(f=c[e]==a),this._isRadioElement(c[e])?b.push(c[e]):b=[],e++}return b},_setNextOrPrevious:function(a,b){var c=this._getRadioGroup(a);if(0<c.length){for(var d,e=0;e<c.length;e++)c[e]==a&&(d=e);e=d;if("next"==b){do e++,e>=c.length&&(e=0);while(!c[e].getEnabled())}if("previous"==b){do e--,0>e&&(e=c.length-1);while(!c[e].getEnabled())}e!==d&&(c=c[e],this._unselectSiblings(c),c.setSelection(!0),c.setFocused(!0))}},_unselectSiblings:function(a){for(var b=this._getRadioGroup(a),c=0;c<b.length;c++)b[c]!==a&&b[c].setSelection(!1)}}});rwt.qx.Class.define("rwt.widgets.MenuBar",{extend:rwt.widgets.base.HorizontalBoxLayout,construct:function(){this.base(arguments);this._openItem=this._hoverItem=null;this._mnemonics=this._active=!1;this.addState("rwt_FLAT");this.setAppearance("toolbar");this.addEventListener("mousedown",this._onMouseDown);this.addEventListener("mouseup",this._onMouseUp);this.addEventListener("mouseover",this._onMouseOver);this.addEventListener("mouseout",this._onMouseOut);this.addEventListener("keydown",this._onKeyDown);this.addEventListener("keypress",this._onKeyPress)},destruct:function(){this._openItem=this._hoverItem=null;this._mnemonics=this._active=!1;rwt.widgets.util.MenuManager.getInstance().remove(this);this.setActive(!1)},members:{setActive:function(a){this.isDisposed()||this._active==a||((this._active=a)?this._activate():this._deactivate())},getActive:function(){return this._active},setMnemonics:function(a){if(!this.isDisposed()&&this._mnemonics!==a){this._mnemonics=a;a=this.getChildren();for(var b=0;b<a.length;b++)a[b].renderText&&a[b].renderText()}},getMnemonics:function(){return this._mnemonics},addMenuItemAt:function(a,b){a.setParentMenu&&a.setParentMenu(this);this.addAt(a,b)},setHoverItem:function(a){var b=a?a:this._openItem;null!=this._hoverItem&&this._hoverItem!=a&&this._hoverItem.removeState("over");null!=b&&(b.addState("over"),null!=this._openItem&&this._openItem!=b&&this.setOpenItem(b));this._hoverItem=b},openByMnemonic:function(a){this.setOpenItem(a,!0);this.setHoverItem(null,!0)},setOpenItem:function(a,b){var c=this._openItem;null!=c&&null!=c.getMenu()&&(c.setSubMenuOpen(!1),c.getMenu().hide());if(null!=a&&a!=c&&null!=a.getMenu()&&a.getEnabled()){this._openItem=a;this.setActive(!0);a.addState("pressed");c=a.getMenu();a.setSubMenuOpen(!0);c.setOpener(a);var d=a.getElement(),e=rwt.html.Location.getLeft(d);c.setTop(rwt.html.Location.getTop(d)+d.offsetHeight);"rtl"===this.getDirection()?c.setRight(window.innerWidth-d.offsetWidth-e):c.setLeft(e);c.setMnemonics(!0===b);c.show()}else this._openItem=null;this.dispatchSimpleEvent("changeOpenItem")},getOpenItem:function(){return this._openItem},getOpener:rwt.util.Functions.returnNull,isSubElement:function(a,b){var c=!1;if(a.getParent()===this||!b&&a===this)c=!0;if(!c)for(var d=this.getChildren(),e=d.length,f=0;f<e;f++)this.hasSubmenu(d[f])&&d[f].getMenu().isSubElement(a,b)&&(c=!0);return c},hasSubmenu:function(a){return a&&a.getMenu&&a.getMenu()},hide:function(){this.setActive(!1)},getAutoHide:rwt.util.Functions.returnTrue,_applyDirection:function(a){this.base(arguments,a);var b="rtl"===a;this.setReverseChildrenOrder(b);this.setHorizontalChildrenAlign(b?"right":"left")},_activate:function(){rwt.widgets.util.MenuManager.getInstance().add(this);null==this._openItem&&this.setHoverItem(this.getFirstChild());this.setCapture(!0)},_deactivate:function(){rwt.widgets.util.MenuManager.getInstance().remove(this);this.setMnemonics(!1);this.setOpenItem(null);this.setHoverItem(null);this.setCapture(!1)},_onKeyDown:function(a){if(this._mnemonics&&(a=a.getKeyCode(),!isNaN(a)&&rwt.event.EventHandlerUtil.isAlphaNumericKeyCode(a))){a={type:"trigger",charCode:a,success:!1};for(var b=this.getChildren(),c=0;c<b.length;c++)b[c].handleMnemonic&&b[c].handleMnemonic(a)}},_onKeyPress:function(a){switch(a.getKeyIdentifier()){case "Up":this._handleKeyUp(a);break;case "Down":this._handleKeyDown(a);break;case "Left":this._handleKeyLeft(a);break;case "Right":this._handleKeyRight(a)}},_handleKeyDown:function(a){this.hasSubmenu(this._hoverItem)&&(this.setOpenItem(this._hoverItem),this._openItem.getMenu().hoverFirstItem(),a.preventDefault(),a.stopPropagation())},_handleKeyUp:function(a){this.hasSubmenu(this._hoverItem)&&(this.setOpenItem(this._hoverItem),this._openItem.getMenu().hoverFirstItem(!0),a.preventDefault(),a.stopPropagation())},_handleKeyRight:function(){if(this._hoverItem){var a=this._hoverItem.getNextSibling();a&&this.setHoverItem(a)}},_handleKeyLeft:function(){if(this._hoverItem){var a=this._hoverItem.getPreviousSibling();a&&this.setHoverItem(a)}},_onMouseOver:function(a){var b=a.getOriginalTarget();this.contains(b)?this.setHoverItem(b==this?null:b):(b._dispatchEvent(a),a.stopPropagation())},_onMouseOut:function(a){var b=a.getOriginalTarget();this.contains(b)?(a=a.getRelatedTarget(),b!=this&&this.contains(a)||this.setHoverItem(null)):(b._dispatchEvent(a),a.stopPropagation())},_onMouseDown:function(a){var b=a.getOriginalTarget();this.contains(b)?b!=this&&this.setOpenItem(b):(b._dispatchEvent(a),a.stopPropagation())},_onMouseUp:function(a){var b=a.getOriginalTarget();this.contains(b)?b instanceof rwt.widgets.MenuItem&&b.execute():(b._dispatchEvent(a),a.stopPropagation())}}});namespace("rwt.remote");rwt.remote.DNDSupport=function(){this._dragSources={};this._dropTargets={};this._eventQueue={};this._requestScheduled=!1;this._currentTargetElement=this._currentDropControl=this._currentDragControl=null;this._currentMousePosition={x:0,y:0};this._dropFeedbackRenderer=this._dataTypeOverwrite=this._actionOverwrite=null;this._dropFeedbackFlags=0;this._dragFeedbackWidget=null;this._blockDrag=!1};rwt.remote.DNDSupport.getInstance=function(){return rwt.runtime.Singletons.get(rwt.remote.DNDSupport)};rwt.remote.DNDSupport.prototype={registerDragSource:function(a){var b=a.control;b.addEventListener("dragstart",this._dragStartHandler,this);b.addEventListener("dragend",this._dragEndHandler,this);this._dragSources[b.toHashCode()]=a},setDragSourceTransferTypes:function(a,b){this._getDragSource(a).dataTypes=b},deregisterDragSource:function(a){a=a.control;a.removeEventListener("dragstart",this._dragStartHandler,this);a.removeEventListener("dragend",this._dragEndHandler,this);delete this._dragSources[a.toHashCode()]},isDragSource:function(a){return"undefined"!=typeof this._getDragSource(a)},isDropTarget:function(a){return"undefined"!=typeof this._getDropTarget(a)},_dragStartHandler:function(a){var b=rwt.remote.WidgetManager.getInstance(),c=a.getCurrentTarget(),b=b.findControl(a.getTarget());if(b==c&&!this._blockDrag){var d=this._getDragSource(c).dataTypes;if(0<d.length){for(var e=0;e<d.length;e++)a.addData(d[e],!0);this._actionOverwrite=null;this._currentDragControl=c;d=rwt.event.DragAndDropHandler.getInstance();d.clearActions();e=rwt.widgets.base.ClientDocument.getInstance();e.addEventListener("elementOver",this._onMouseOver,this);e.addEventListener("keydown",this._onKeyEvent,this);e.addEventListener("keyup",this._onKeyEvent,this);this.setCurrentTargetElement(a.getOriginalTarget());rwt.widgets.util.WidgetUtil._fakeMouseEvent(this._currentTargetElement,"mouseout");b=this._getFeedbackWidget(b,d.__dragCache.sourceElement);d.setFeedbackWidget(b,10,20);a.startDrag();a.stopPropagation()}this._sendDragSourceEvent(c,"DragStart",a.getMouseEvent())}},_dragEndHandler:function(a){var b=a.getCurrentTarget(),c=a.getMouseEvent();this._blockDrag=!0;this._sendDragSourceEvent(b,"DragEnd",c);this._cleanUp();a.stopPropagation()},_sendDragSourceEvent:function(a,b,c){var d=0,e=0;c instanceof rwt.event.MouseEvent&&(d=c.getPageX(),e=c.getPageY());c={};c.widget=this._getDragSource(a);c.eventName=b;c.param={x:Math.round(d),y:Math.round(e),time:rwt.remote.EventUtil.eventTimestamp()};this._eventQueue[b]=c;a=rwt.remote.Connection.getInstance();this._requestScheduled||(a.addEventListener("send",this._onSend,this),this._requestScheduled=!0);a.send()},registerDropTarget:function(a){var b=a.control;b.addEventListener("dragover",this._dragOverHandler,this);b.addEventListener("dragmove",this._dragMoveHandler,this);b.addEventListener("dragout",this._dragOutHandler,this);b.addEventListener("dragdrop",this._dragDropHandler,this);this._dropTargets[b.toHashCode()]=a;b.setSupportsDropMethod(rwt.util.Functions.returnTrue)},setDropTargetTransferTypes:function(a,b){a.setDropDataTypes(b)},deregisterDropTarget:function(a){a=a.control;a.setDropDataTypes([]);a.removeEventListener("dragover",this._dragOverHandler,this);a.removeEventListener("dragmove",this._dragMoveHandler,this);a.removeEventListener("dragout",this._dragOutHandler,this);a.removeEventListener("dragdrop",this._dragDropHandler,this);delete this._dropTargets[a.toHashCode()];a.setSupportsDropMethod(null)},_dragOverHandler:function(a){var b=a.getCurrentTarget(),c=a.getMouseEvent();this._currentDropControl=b;var d=this._computeCurrentAction(c,b);this._setAction(d,null);this._sendDropTargetEvent(b,"DragEnter",c,d);a.stopPropagation()},_dragMoveHandler:function(a){var b=a.getCurrentTarget(),c=a.getMouseEvent();this._currentMousePosition.x=c.getPageX();this._currentMousePosition.y=c.getPageY();var d=this._computeCurrentAction(c,b);this._setAction(d,c);this._sendDropTargetEvent(b,"DragOver",c,d);a.stopPropagation()},_dragOutHandler:function(a){var b=a.getCurrentTarget(),c=a.getMouseEvent();this._currentTargetElement!==c.getDomTarget()&&this._onMouseOver(c);rwt.event.DragAndDropHandler.getInstance().clearActions();this.setFeedback(b,null,0);this._dataTypeOverwrite=this._actionOverwrite=this._currentDropControl=null;this._isEventScheduled("DragEnter")?(this._cancelEvent("DragEnter"),this._cancelEvent("DragOver")):this._sendDropTargetEvent(b,"DragLeave",c,"none");a.stopPropagation()},_dragDropHandler:function(a){var b=a.getCurrentTarget(),c=a.getMouseEvent(),d=this._computeCurrentAction(c,b);this._sendDropTargetEvent(b,"DropAccept",c,d);a.stopPropagation()},_sendDropTargetEvent:function(a,b,c,d){var e=this._getCurrentItemTarget(),e=null!=e?rwt.remote.ObjectRegistry.getId(e):null,f;c instanceof rwt.event.MouseEvent?(f=c.getPageX(),c=c.getPageY()):(f=this._currentMousePosition.x,c=this._currentMousePosition.y);var g=rwt.remote.ObjectRegistry.getId(this._currentDragControl),h=rwt.remote.EventUtil.eventTimestamp();d="alias"==d?"link":d;var k={};k.widget=this._getDropTarget(a);k.eventName=b;k.param={x:Math.round(f),y:Math.round(c),item:e,operation:d,feedback:this._dropFeedbackFlags,dataType:this._dataTypeOverwrite,source:g,time:h};this._eventQueue[b]=k;this._requestScheduled||(a=rwt.remote.Connection.getInstance(),a.addEventListener("send",this._onSend,this),this._requestScheduled=!0,rwt.client.Timer.once(a.send,a,200))},_isEventScheduled:function(a){return"undefined"!=typeof this._eventQueue[a]},_cancelEvent:function(a){delete this._eventQueue[a]},_setPropertyRetroactively:function(a,b,c){for(var d in this._eventQueue){var e=this._eventQueue[d];e.widget.control===a&&(e.param[b]=c)}},_attachEvents:function(){for(var a=rwt.remote.Connection.getInstance(),b=this._getEventOrder(this._eventQueue),c=0;c<b.length;c++){var d=this._eventQueue[b[c]];d&&a.getRemoteObject(d.widget).notify(d.eventName,d.param)}this._eventQueue={}},_getEventOrder:function(a){return this._isLeaveBeforeEnter(a)?"DragStart DragLeave DragEnter DragOperationChanged DragOver DropAccept DragEnd".split(" "):"DragStart DragEnter DragOperationChanged DragOver DragLeave DropAccept DragEnd".split(" ")},_isLeaveBeforeEnter:function(a){var b=a.DragLeave;a=a.DragEnter;return b&&a&&b.param.time<=a.param.time},_getCurrentItemTarget:function(){var a=this._getCurrentFeedbackTarget();return a instanceof rwt.widgets.base.GridRow?this._currentDropControl._rowContainer.findItemByRow(a):a},_setAction:function(a,b){var c=rwt.event.DragAndDropHandler.getInstance();c.getCurrentAction()!=a&&(c.clearActions(),c.setAction(a),null!=b&&this._sendDropTargetEvent(this._currentDropControl,"DragOperationChanged",b,a))},_operationsToActions:function(a){for(var b={},c=0;c<a.length;c++){var d=this._toAction(a[c]);b[d]=null!=d}return b},_toAction:function(a){switch(a){case "DROP_MOVE":a="move";break;case "DROP_COPY":a="copy";break;case "DROP_LINK":a="alias"}return a},_computeCurrentAction:function(a,b){var c;if(null!=this._actionOverwrite)c=this._actionOverwrite;else{c="move";var d=a.isShiftPressed(),e=a.isCtrlPressed(),f=a.isAltPressed();!e||d||f?!f||d||e?!f&&d&&e&&(c="alias"):c="alias":c="copy";d=this._getDropTarget(b).actions;this._getDragSource(this._currentDragControl).actions[c]&&d[c]||(c="none")}return c},_createFeedback:function(a){null==this._dropFeedbackRenderer&&a instanceof rwt.widgets.Grid&&(this._dropFeedbackRenderer=new rwt.widgets.util.GridDNDFeedback(a))},_renderFeedback:function(){if(null!=this._dropFeedbackRenderer){var a=this._getCurrentFeedbackTarget();this._dropFeedbackRenderer.renderFeedback(a)}},_getCurrentFeedbackTarget:function(){var a=null;this._currentDropControl instanceof rwt.widgets.Grid&&(a=this._currentTargetElement,a=this._currentDropControl.getRowContainer().findRowByElement(a));return a},_getFeedbackWidget:function(a,b){null==this._dragFeedbackWidget&&(this._dragFeedbackWidget=new rwt.widgets.base.MultiCellWidget(["image","label"]),this._dragFeedbackWidget.setOpacity(.7),this._dragFeedbackWidget.setEnabled(!1),this._dragFeedbackWidget.setPadding(2));if(a instanceof rwt.widgets.Grid){var c=a.getRowContainer().findRowByElement(b);if(c)return this._configureTreeRowFeedback(c),this._dragFeedbackWidget}return null},_configureTreeRowFeedback:function(a){var b=this._dragFeedbackWidget,c=this._currentDragControl,d=c._rowContainer.findItemByRow(a);if(null!=d){var c=c.getRenderConfig(),e=d.getImage(c.treeColumn);null!=e&&(b.setCellContent(0,e[0]),b.setCellDimension(0,c.itemImageWidth[c.treeColumn],a.getHeight()));a=d.getCellBackground(c.treeColumn);e=d.getCellForeground(c.treeColumn);b.setBackgroundColor(a);b.setTextColor(e);d=d.getText(c.treeColumn);b.setCellContent(1,rwt.util.Encoding.escapeText(d,!1));b.setFont(c.font)}},_resetFeedbackWidget:function(){null!=this._dragFeedbackWidget&&(this._dragFeedbackWidget.setParent(null),this._dragFeedbackWidget.setFont(null),this._dragFeedbackWidget.setCellContent(0,null),this._dragFeedbackWidget.setCellDimension(0,null,null),this._dragFeedbackWidget.setCellContent(1,null),this._dragFeedbackWidget.setBackgroundColor(null))},_onSend:function(){this._attachEvents();this._blockDrag=this._requestScheduled=!1;rwt.remote.Connection.getInstance().removeEventListener("send",this._onSend,this)},_onMouseOver:function(a){a=a.getDomTarget();null!=this._dropFeedbackRenderer?this._dropFeedbackRenderer.isFeedbackNode(a)||this.setCurrentTargetElement(a):this.setCurrentTargetElement(a)},setCurrentTargetElement:function(a){this._currentTargetElement=a;this._renderFeedback()},_onKeyEvent:function(a){if("keyup"==a.getType()&&"Alt"==a.getKeyIdentifier())this._sendDragSourceEvent(this._currentDragControl,"DragEnd",a),this.cancel();else if(null!=this._currentDropControl){var b=rwt.event.DragAndDropHandler.getInstance(),c=this._computeCurrentAction(a,this._currentDropControl);this._setAction(c,a);b._renderCursor()}},_cleanUp:function(){var a=rwt.widgets.util.WidgetUtil;a._fakeMouseEvent(this._currentTargetElement,"elementOver");a._fakeMouseEvent(this._currentTargetElement,"mouseover");this.setCurrentTargetElement(null);null!=this._currentDropControl&&(this.setFeedback(this._currentDropControl,null,0),this._currentDropControl=null);rwt.event.DragAndDropHandler.getInstance().setFeedbackWidget(null);this._resetFeedbackWidget();this._dataTypeOverwrite=this._currentDragControl=null;this._currentMousePosition.x=0;this._currentMousePosition.y=0;a=rwt.widgets.base.ClientDocument.getInstance();a.removeEventListener("elementOver",this._onMouseOver,this);a.removeEventListener("keydown",this._onKeyEvent,this);a.removeEventListener("keyup",this._onKeyEvent,this)},_getDragSource:function(a){return this._dragSources[a.toHashCode()]},_getDropTarget:function(a){return this._dropTargets[a.toHashCode()]},cancel:function(){null!=this._currentDragControl&&(rwt.event.DragAndDropHandler.getInstance().globalCancelDrag(),this._cleanUp())},setOperationOverwrite:function(a,b){if(a==this._currentDropControl){var c=this._toAction(b),d=rwt.event.DragAndDropHandler.getInstance();this._actionOverwrite=c;this._setAction(c,null);d._renderCursor()}this._setPropertyRetroactively(a,"operation",b)},setFeedback:function(a,b,c){if(a==this._currentDropControl){if(null!=b){if(this._createFeedback(a),null!=this._dropFeedbackRenderer){a={};for(var d=0;d<b.length;d++)a[b[d]]=!0;this._dropFeedbackRenderer.setFeedback(a);this._renderFeedback()}}else null!=this._dropFeedbackRenderer&&(this._dropFeedbackRenderer.dispose(),this._dropFeedbackRenderer=null);this._dropFeedbackFlags=c}},setDataType:function(a,b){a==this._currentDropControl&&(this._dataTypeOverwrite=b);this._setPropertyRetroactively(a,"dataType",b)}};namespace("rwt.widgets");rwt.widgets.DragSource=function(a,b){this.control=a;this.actions=rwt.remote.DNDSupport.getInstance()._operationsToActions(b);this.dataTypes=[];rwt.remote.DNDSupport.getInstance().registerDragSource(this)};rwt.widgets.DragSource.prototype={dispose:function(){rwt.remote.DNDSupport.getInstance().deregisterDragSource(this)},setTransfer:function(a){rwt.remote.DNDSupport.getInstance().setDragSourceTransferTypes(this.control,a)}};namespace("rwt.widgets");(function(){var a=rwt.widgets.util.WidgetUtil.callWithElement;rwt.widgets.DropTarget=function(a,c){this.control=a;this.actions=rwt.remote.DNDSupport.getInstance()._operationsToActions(c);rwt.remote.DNDSupport.getInstance().registerDropTarget(this);this._onDragEvent=rwt.util.Functions.bind(this._onDragEvent,this)};rwt.widgets.DropTarget.prototype={dispose:function(){rwt.remote.DNDSupport.getInstance().deregisterDropTarget(this)},setTransfer:function(a){rwt.remote.DNDSupport.getInstance().setDropTargetTransferTypes(this.control,a)},changeFeedback:function(a,c){rwt.remote.DNDSupport.getInstance().setFeedback(this.control,a,c)},changeDetail:function(a){rwt.remote.DNDSupport.getInstance().setOperationOverwrite(this.control,a)},changeDataType:function(a){rwt.remote.DNDSupport.getInstance().setDataType(this.control,a)},setFileDropEnabled:function(b){if(rwt.client.Client.supportsFileDrop()){var c=this._onDragEvent;a(this.control,function(a){b?(a.addEventListener("dragenter",c,!1),a.addEventListener("dragover",c,!1),a.addEventListener("drop",c,!1)):(a.removeEventListener("dragenter",c,!1),a.removeEventListener("dragover",c,!1),a.removeEventListener("drop",c,!1))})}},_onDragEvent:function(a){try{this._isDraggingFiles(a)&&(rwt.event.EventHandlerUtil.stopDomEvent(a),a.stopPropagation(),"drop"===a.type&&this._sendDropAccept(a))}catch(c){rwt.runtime.ErrorHandler.processJavaScriptError(c)}},_sendDropAccept:function(a){rwt.remote.Connection.getInstance().getRemoteObject(this).notify("DropAccept",{x:Math.round(a.pageX),y:Math.round(a.pageY),time:rwt.remote.EventUtil.eventTimestamp(),operation:"move",feedback:0,files:this._getFiles(a)})},_isDraggingFiles:function(a){a=a.dataTransfer.types;return a.indexOf?-1!==a.indexOf("Files"):a.contains("Files")},_getFiles:function(a){var b=rwt.client.FileUploader.getInstance();a=a.dataTransfer.files;for(var d={},e=0;e<a.length;e++){var f=a.item(e),g=b.addFile(f);d[g]={type:f.type,size:f.size,name:f.name}}return d}}})();rwt.remote.HandlerRegistry.add("rwt.widgets.DropTarget",{factory:function(a){var b=rwt.remote.ObjectRegistry.getObject(a.control);a=new rwt.widgets.DropTarget(b,a.style);rwt.remote.HandlerUtil.addDestroyableChild(b,a);return a},destructor:function(a){rwt.remote.HandlerUtil.removeDestroyableChild(a.control,a);a.dispose()},properties:["transfer","fileDropEnabled"],events:["DragEnter","DragOver","DragLeave","DragOperationChanged","DropAccept"],methods:["changeFeedback","changeDetail","changeDataType"],methodHandler:{changeFeedback:function(a,b){a.changeFeedback(b.feedback,b.flags)},changeDetail:function(a,b){a.changeDetail(b.detail)},changeDataType:function(a,b){a.changeDataType(b.dataType)}}});rwt.remote.HandlerRegistry.add("rwt.widgets.DragSource",{factory:function(a){var b=rwt.remote.ObjectRegistry.getObject(a.control);a=new rwt.widgets.DragSource(b,a.style);rwt.remote.HandlerUtil.addDestroyableChild(b,a);return a},destructor:function(a){rwt.remote.HandlerUtil.removeDestroyableChild(a.control,a);a.dispose()},properties:["transfer"],events:["DragStart","DragEnd"],methods:["cancel"],methodHandler:{cancel:function(){rwt.remote.DNDSupport.getInstance().cancel()}}});rwt.qx.Class.define("rwt.theme.ThemeValues",{extend:rwt.qx.Object,construct:function(a){if(void 0===a)throw Error("no states given");this._states=a;this._store=rwt.theme.ThemeStore.getInstance()},statics:{NONE_IMAGE:null,NONE_IMAGE_SIZED:[null,0,0]},members:{getCssBorder:function(a,b){return"border"===b?this._store.getBorder(a,this._states,b):this._store.getBorderEdge(a,this._states,b)},getCssNamedBorder:function(a){return this._store.getNamedBorder(a)},getCssColor:function(a,b){return this._store.getColor(a,this._states,b)},getCssAlpha:function(a,b){return this._store.getAlpha(a,this._states,b)},getCssNamedColor:function(a){return this._store.getNamedColor(a)},getCssFont:function(a,b){return this._store.getFont(a,this._states,b)},getCssDimension:function(a,b){return this._store.getDimension(a,this._states,b)},getCssBoxDimensions:function(a,b){return this._store.getBoxDimensions(a,this._states,b)},getCssFloat:function(a,b){return this._store.getFloat(a,this._states,b)},getCssIdentifier:function(a,b){return this._store.getIdentifier(a,this._states,b)},getCssImage:function(a,b){return this._store.getImage(a,this._states,b)},getCssSizedImage:function(a,b){return this._store.getSizedImage(a,this._states,b)},getCssGradient:function(a,b){return this._store.getGradient(a,this._states,b)},getCssCursor:function(a,b){return this._store.getCursor(a,this._states,b)},getCssAnimation:function(a,b){return this._store.getAnimation(a,this._states,b)},getCssShadow:function(a,b){return this._store.getShadow(a,this._states,b)},mergeBorders:function(a,b,c,d,e){if(null==a)throw Error("Unable to merge borders. Base border is null");var f=a,g=!1,h=a.getColors(),k=a.getWidths();a=a.getStyles();null!=b&&0!==b.getWidthTop()&&(g=!0,h[0]=b.getColorTop(),k[0]=b.getWidthTop(),a[0]=b.getStyleTop());null!=c&&0!==c.getWidthRight()&&(g=!0,h[1]=c.getColorRight(),k[1]=c.getWidthRight(),a[1]=c.getStyleRight());null!=d&&0!==d.getWidthBottom()&&(g=!0,h[2]=d.getColorBottom(),k[2]=d.getWidthBottom(),a[2]=d.getStyleBottom());null!=e&&0!==e.getWidthLeft()&&(g=!0,h[3]=e.getColorLeft(),k[3]=e.getWidthLeft(),a[3]=e.getStyleLeft());g&&(f=new rwt.html.Border(k,a,h));return f}}});
rwt.qx.Class.define("rwt.widgets.Grid",{extend:rwt.widgets.base.Parent,construct:function(a){this.base(arguments);this._rootItem=new rwt.widgets.GridItem;this._hasMultiSelection=!1;this._leadItem=null;this._topItemIndex=0;this._topItem=null;this._selection=[];this._focusItem=null;this._renderQueue={};this._selectionOffsetX=this._selectionTimestamp=this._resizeLine=null;this._delayedSelection=!1;this._sortColumn=this._sortDirection=null;this._hasFixedColumns=!1;this._footerHeight=this._headerHeight=0;this._itemHeight=16;this._rowContainer=rwt.widgets.util.GridUtil.createTreeRowContainer(a);this._columns={};this._horzScrollBar=new rwt.widgets.base.ScrollBar(!0);this._vertScrollBar=new rwt.widgets.base.ScrollBar(!1);this._vertScrollBar.setAutoThumbSize(!1);this._footer=this._header=null;this.add(this._rowContainer);this.add(this._horzScrollBar);this.add(this._vertScrollBar);this._config=this._rowContainer.getRenderConfig();this.setCursor("default");this.setOverflow("hidden");this.setEnableElementFocus(!1);rwt.widgets.base.Widget.disableScrolling(this);rwt.widgets.util.ScrollBarsActivator.install(this);this._configureScrollBars();this._registerListeners();this._parseArgsMap(a)},destruct:function(){this._rootItem.removeEventListener("update",this._onItemUpdate,this);this._rootItem.dispose();this._resizeLine=this._sortColumn=this._focusItem=this._leadItem=this._vertScrollBar=this._horzScrollBar=this._footer=this._header=this._rowContainer=this._rootItem=null},members:{_createHeader:function(){this._header=new rwt.widgets.base.GridHeader({appearance:this.getAppearance(),splitContainer:this._hasFixedColumns,fixedRight:this._fixedRight,config:this._config});this.add(this._header);this._header.addEventListener("showResizeLine",this._onShowResizeLine,this);this._header.addEventListener("hideResizeLine",this._onHideResizeLine,this);this._header.setTop(0);this._header.setScrollLeft(this._adjustScrollLeft(this._horzScrollBar.getValue()));this._header.setDirection(this.getDirection());this._scheduleColumnUpdate()},_createFooter:function(){this._footer=new rwt.widgets.base.GridHeader({appearance:this.getAppearance(),splitContainer:this._hasFixedColumns,fixedRight:this._fixedRight,footer:!0,config:this._config});this.add(this._footer);this._footer.setScrollLeft(this._adjustScrollLeft(this._horzScrollBar.getValue()));this._footer.setDirection(this.getDirection());this._scheduleColumnUpdate()},_configureScrollBars:function(){var a=function(a){a.stopPropagation()};this._horzScrollBar.setZIndex(1E8);this._horzScrollBar.setVisibility(!1);this._horzScrollBar.addEventListener("dragstart",a);this._vertScrollBar.setZIndex(1E8);this._vertScrollBar.setVisibility(!1);this._vertScrollBar.setIncrement(1);this._vertScrollBar.addEventListener("dragstart",a)},_registerListeners:function(){this._rootItem.addEventListener("update",this._onItemUpdate,this);this.addEventListener("mousedown",this._onMouseDown,this);this.addEventListener("mouseup",this._onMouseUp,this);this.addEventListener("click",this._onClick,this);this.addEventListener("mouseout",this._onMouseOut,this);this.addEventListener("keypress",this._onKeyPress,this);this.addEventListener("focusin",this._onFocusIn,this);this._rowContainer.addEventListener("mousewheel",this._onClientAreaMouseWheel,this);this._horzScrollBar.addEventListener("changeValue",this._onHorzScrollBarChangeValue,this);this._horzScrollBar.addEventListener("changeMaximum",this._onHorzScrollBarChangeMaximum,this);this._vertScrollBar.addEventListener("changeValue",this._onVertScrollBarChangeValue,this);this._rowContainer.setSelectionProvider(this.isItemSelected,this);this._rowContainer.addEventListener("appear",this._onChangeSeeable);this._rowContainer.addEventListener("disappear",this._onChangeSeeable)},_parseArgsMap:function(a){a.noScroll&&this._rowContainer.removeEventListener("mousewheel",this._onClientAreaMouseWheel,this);this._config.hideSelection=!!a.hideSelection;this._hasMultiSelection=!!a.multiSelection;this._config.fullSelection=!!a.fullSelection;this._config.markupEnabled=a.markupEnabled;this._hasFixedColumns=a.splitContainer;this._fixedRight=a.fixedRight;this._config.baseAppearance=a.appearance;this._config.rowTemplate=a.rowTemplate;a.fullSelection||(this._config.selectionPadding=a.selectionPadding);a.check&&(this._config.hasCheckBoxes=!0,this._config.checkBoxLeft=a.checkBoxMetrics[0],this._config.checkBoxWidth=a.checkBoxMetrics[1]);"number"===typeof a.indentionWidth&&(this._config.indentionWidth=a.indentionWidth);this._config.rowTemplate&&this.addState("rowtemplate");this._rowContainer.setBaseAppearance(a.appearance);this.setAppearance(a.appearance)},setItemCount:function(a){this._rootItem.setItemCount(a)},setHeaderVisible:function(a){a&&null==this._header?this._createHeader():a||(this._header.destroy(),this._header=null);this._layoutX();this._layoutY()},setHideIndentionImage:function(a){this._config._hideIndentionImage=a},setOverlayWidth:function(a){this._config._overlayWidth=a},setFixedRight:function(a){this._fixedRight=a},setFooterVisible:function(a){a&&null==this._footer?this._createFooter():a||(this._footer.destroy(),this._footer=null);this._scheduleUpdate("scrollHeight");this._layoutX();this._layoutY()},setHeaderHeight:function(a){this._headerHeight=a;this._layoutX();this._layoutY()},setFooterHeight:function(a){this._footerHeight=a;this._scheduleUpdate("scrollHeight");this._layoutX();this._layoutY()},setItemHeight:function(a){this._itemHeight=a;this._rowContainer.setRowHeight(a);this._rootItem.setDefaultHeight(a);this._updateScrollThumbHeight();this._scheduleUpdate("scrollHeight")},setColumnCount:function(a){this._config.columnCount=a;this._scheduleUpdate();this._updateScrollWidth()},setItemMetrics:function(a,b,c,d,e,f,g,h,k){this._config.itemLeft[a]=b;this._config.itemWidth[a]=c;this._config.itemImageLeft[a]=d;this._config.itemImageWidth[a]=e;this._config.itemTextLeft[a]=f;this._config.itemTextWidth[a]=g;isNaN(h)||(this._config.itemCellCheckLeft[a]=h,this._config.itemCellCheckWidth[a]=k);this._scheduleUpdate();this._updateScrollWidth()},setTreeColumn:function(a){this._config.treeColumn=a},scrollItemIntoView:function(a){this._disableRender=!0;this._scrollIntoView(a.getFlatIndex(),a);delete this._disableRender},setTopItemIndex:function(a){this._disableRender=!0;this._setTopItemIndex(a);delete this._disableRender},getTopItemIndex:function(){return this._topItemIndex},setScrollLeft:function(a){this._horzScrollBar.setValue(a)},selectItem:function(a){this._selectItem(a,!1);this._scheduleItemUpdate(a)},deselectItem:function(a){this._deselectItem(a,!1);this._scheduleItemUpdate(a)},setFocusItem:function(a){this._focusItem=a;this.dispatchSimpleEvent("focusItemChanged")},getFocusItem:function(){return this._focusItem},setSortDirection:function(a){this._sortDirection=a;null!==this._sortColumn&&this._sortColumn.setSortDirection(this._sortDirection)},setSortColumn:function(a){null!==this._sortColumn&&this._sortColumn.setSortDirection("none");this._sortColumn=a;null!==this._sortColumn&&this._sortColumn.setSortDirection(this._sortDirection)},setScrollBarsVisible:function(a,b){this._horzScrollBar.setVisibility(a);this._vertScrollBar.setVisibility(b);this._config.vBarWidth=this._getVerticalBarWidth();this._layoutX();this._layoutY()},getVerticalBar:function(){return this._vertScrollBar},getHorizontalBar:function(){return this._horzScrollBar},isVerticalBarVisible:function(){return this._vertScrollBar.getVisibility()},isHorizontalBarVisible:function(){return this._horzScrollBar.getVisibility()},setAlignment:function(a,b){this._config.alignment[a]=b;this._scheduleUpdate()},setWordWrap:function(a,b){this._config.wordWrap[a]=b;this._scheduleUpdate()},setAutoHeight:function(a){this._config.autoHeight=a;this._scheduleUpdate()},setCellCheck:function(a,b){this._config.itemCellCheck[a]=b;this._scheduleUpdate()},setLinesVisible:function(a){this._config.linesVisible=a;this.toggleState("linesvisible",a);this._rowContainer.updateGridLines();this._scheduleUpdate()},setAlwaysHideSelection:function(a){this._config.alwaysHideSelection=a;this._scheduleUpdate()},setIndentionWidth:function(a){this._config.indentionWidth=a;this._scheduleUpdate()},addState:function(a){this.base(arguments,a);"variant_"===a.slice(0,8)&&(this._config.variant=a,this._rootItem.setVariant(a),this._rowContainer.updateGridLines(),this._scheduleColumnUpdate())},removeState:function(a){this._config.variant===a&&(this._config.variant=null,this._rootItem.setVariant(null),this._rowContainer.updateGridLines(),this._scheduleColumnUpdate());this.base(arguments,a)},getRenderConfig:function(){return this._config},getRootItem:function(){return this._rootItem},isFocusItem:function(a){return this._focusItem===a},isItemSelected:function(a){return-1!=this._selection.indexOf(a)},getSelection:function(){return this._selection.slice(0)},getRowContainer:function(){return this._rowContainer},getTableHeader:function(){return this._header},getFooter:function(){return this._footer},update:function(){this._scheduleUpdate()},addColumn:function(a){this._columns[a.toHashCode()]=a;a.addEventListener("update",this._scheduleColumnUpdate,this);this._scheduleColumnUpdate()},setColumnOrder:function(a){this._columnOrder=a;this._config.cellOrder=a&&0<a.length?a.map(function(a){return a.getIndex()}):[0]},getColumnOrder:function(){return this._columnOrder},removeColumn:function(a){delete this._columns[a.toHashCode()];a.removeEventListener("update",this._scheduleColumnUpdate,this);this._scheduleColumnUpdate()},_onItemUpdate:function(a){var b=a.target;"collapsed"===a.msg?this._focusItem&&(this._focusItem.isDisposed()||this._focusItem.isChildOf(b))&&this.setFocusItem(b):"remove"===a.msg?this._scheduleUpdate("checkDisposedItems"):"height"===a.msg&&(this._enableAltScrolling(),this._scheduleUpdate("scrollHeight"));a.rendering||this._renderItemUpdate(b,a);return!1},_beforeAppear:function(){this.base(arguments);this._scheduleColumnUpdate()},_afterInsertDom:function(){this.base(arguments);this._config.autoHeight&&this._rowContainer.renderRowHeight()},_onChangeSeeable:function(){this._config.seeable=this.isSeeable()},_scheduleColumnUpdate:function(){rwt.widgets.base.Widget.addToGlobalWidgetQueue(this);this._scheduleUpdate()},flushWidgetQueue:function(){this._updateColumns()},_onVertScrollBarChangeValue:function(){this._updateTopItemIndex()},_updateTopItemIndex:function(){this._topItemIndex=this._vertScrollBar.getValue();this._topItem=null;this._allowRender()?this._updateTopItem(!0):this._scheduleUpdate("topItem");this.dispatchSimpleEvent("topItemChanged")},_onHorzScrollBarChangeValue:function(){this._setScrollLeft(this._adjustScrollLeft(this._horzScrollBar.getValue()));this.dispatchSimpleEvent("scrollLeftChanged")},_onHorzScrollBarChangeMaximum:function(){this._setScrollLeft(this._adjustScrollLeft(this._horzScrollBar.getValue()))},_setScrollLeft:function(a){this._rowContainer.setScrollLeft(a);this._header&&this._header.setScrollLeft(a);this._footer&&this._footer.setScrollLeft(a)},_onMouseDown:function(a){this._delayedSelection=!1;if(!this._checkAndProcessHyperlink(a)){var b=this._rowContainer.findRowByElement(a.getDomTarget());b&&this._onRowMouseDown(b,a)}},_onMouseUp:function(a){this._delayedSelection?this._onMouseDown(a):this._checkAndProcessHyperlink(a)},_onClick:function(a){this._checkAndProcessHyperlink(a)},_onRowMouseDown:function(a,b){var c=this._rowContainer.findItemByRow(a);if(null!=c){var d=a.identify(b.getDomTarget());"expandIcon"===d[0]&&c.hasChildren()?this._onExpandClick(c):"checkBox"===d[0]||"cellCheckBox"===d[0]?this._toggleCheckSelection(c,d[1]):"selectableCell"===d[0]?this._fireSelectionChanged(c,"cell",null,d[1]):("treeColumn"===d[0]||this._acceptsGlobalSelection())&&this._onSelectionClick(b,c)}},_acceptsGlobalSelection:function(){return this._config.fullSelection||this._config.rowTemplate},_checkAndProcessHyperlink:function(a){var b=null,c=a.getOriginalTarget();this._config.markupEnabled&&c instanceof rwt.widgets.base.GridRowContainer&&(b=this._findHyperlink(a),null!==b&&this._isRWTHyperlink(b)&&(a.setDefaultPrevented(!0),"click"===a.getType()&&(a=this._rowContainer.findRowByElement(a.getDomTarget()),a=this._rowContainer.findItemByRow(a),c=b.getAttribute("href"),c||(c=b.innerHTML),this._fireSelectionChanged(a,"hyperlink",null,c))));return null!==b},_findHyperlink:function(a){a=a.getDomTarget();for(var b=a.tagName.toLowerCase();"a"!==b&&"div"!==b;)a=a.parentNode,b=a.tagName.toLowerCase();return"a"===b?a:null},_isRWTHyperlink:function(a){return"_rwt"===a.getAttribute("target")},_onExpandClick:function(a){var b=!a.isExpanded();b||this._deselectVisibleChildren(a);a.setExpanded(b)},_onSelectionClick:function(a,b){this._isDoubleClicked(a,b)?this._fireSelectionChanged(b,"defaultSelection"):this._hasMultiSelection?this._delayMultiSelect(a,b)||this._multiSelectItem(a,b):this._singleSelectItem(a,b)},_delayMultiSelect:function(a,b){this._isDragSource()&&this.isItemSelected(b)&&"mousedown"===a.getType()&&(this._delayedSelection=!0);return this._delayedSelection},_onMouseOut:function(){this._delayedSelection=!1},_onClientAreaMouseWheel:function(a){var b=a.getWheelDelta(),c=Math.abs(b)/b*Math.ceil(2*Math.abs(b)),b=this._vertScrollBar.getValue();this._vertScrollBar.setValue(b-c);c=this._vertScrollBar.getValue();this._vertScrollBar.setValue(c);c!==b&&(a.preventDefault(),a.stopPropagation())},_onKeyPress:function(a){var b="rtl"===this.getDirection();if(null!=this._focusItem)switch(a.getKeyIdentifier()){case "Enter":this._handleKeyEnter(a);break;case "Space":this._handleKeySpace(a);break;case "Up":this._handleKeyUp(a);break;case "Down":this._handleKeyDown(a);break;case "PageUp":this._handleKeyPageUp(a);break;case "PageDown":this._handleKeyPageDown(a);break;case "Home":this._handleKeyHome(a);break;case "End":this._handleKeyEnd(a);break;case "Left":b?this._handleKeyRight(a):this._handleKeyLeft(a);break;case "Right":b?this._handleKeyLeft(a):this._handleKeyRight(a)}this._stopKeyEvent(a)},_stopKeyEvent:function(a){switch(a.getKeyIdentifier()){case "Up":case "Down":case "Left":case "Right":case "Home":case "End":case "PageUp":case "PageDown":a.preventDefault(),a.stopPropagation()}},_onShowResizeLine:function(a){a=a.position;null===this._resizeLine&&(this._resizeLine=new rwt.widgets.base.Terminator,this._resizeLine.setAppearance("table-column-resizer"),this.add(this._resizeLine),rwt.widgets.base.Widget.flushGlobalQueues());var b=this._rowContainer.getTop();this._resizeLine._renderRuntimeTop(b);a=a-2-this._horzScrollBar.getValue();"rtl"===this.getDirection()?this._resizeLine._renderRuntimeRight(a):this._resizeLine._renderRuntimeLeft(a);this._resizeLine._renderRuntimeHeight(this._rowContainer.getHeight());this._resizeLine.removeStyleProperty("visibility")},_onHideResizeLine:function(){this._resizeLine.setStyleProperty("visibility","hidden")},_handleKeyEnter:function(){this._fireSelectionChanged(this._focusItem,"defaultSelection")},_handleKeySpace:function(a){if(a.isCtrlPressed()||!this.isItemSelected(this._focusItem)){var b=this._focusItem.getFlatIndex();this._handleKeyboardSelect(a,this._focusItem,b)}this._config.hasCheckBoxes&&this._toggleCheckSelection(this._focusItem)},_handleKeyUp:function(a){var b=this._focusItem.getPreviousItem();if(null!=b){var c=b.getFlatIndex();this._handleKeyboardSelect(a,b,c)}},_handleKeyDown:function(a){var b=this._focusItem.getNextItem();if(null!=b){var c=b.getFlatIndex();this._handleKeyboardSelect(a,b,c)}},_handleKeyPageUp:function(a){var b=this._focusItem.getOffset(),c=this._getClientAreaHeight(),c=Math.max(0,b-c),b=this._rootItem.findItemByOffset(c);0!==c&&(b=b.getNextItem());c=b.getFlatIndex();this._handleKeyboardSelect(a,b,c)},_handleKeyPageDown:function(a){var b=this._focusItem.getOffset(),c=this._getClientAreaHeight(),d=this.getRootItem().getOffsetHeight()-1,c=Math.min(d,b+c),b=this._rootItem.findItemByOffset(c);c!==d&&(b=b.getPreviousItem());d=b.getFlatIndex();this._handleKeyboardSelect(a,b,d)},_handleKeyHome:function(a){var b=this.getRootItem().getChild(0);this._handleKeyboardSelect(a,b,0)},_handleKeyEnd:function(a){var b=this.getRootItem().getLastChild(),c=this.getRootItem().getVisibleChildrenCount()-1;this._handleKeyboardSelect(a,b,c)},_handleKeyLeft:function(a){if(a.isCtrlPressed())this._scrollLeft();else if(this._focusItem.isExpanded())this._focusItem.setExpanded(!1);else if(this._focusItem.getParent().isRootItem())this._scrollLeft();else{var b=this._focusItem.getParent(),c=b.getFlatIndex();this._handleKeyboardSelect(a,b,c,!0)}},_handleKeyRight:function(a){if(a.isCtrlPressed())this._scrollRight();else if(this._focusItem.hasChildren())if(this._focusItem.isExpanded()){var b=this._focusItem.getChild(0),c=b.getFlatIndex();this._handleKeyboardSelect(a,b,c,!0)}else this._focusItem.setExpanded(!0);else this._scrollRight()},_handleKeyboardSelect:function(a,b,c,d){this._hasMultiSelection&&!d?this._multiSelectItem(a,b):this._singleSelectItem(a,b);this._scrollIntoView(c,b)},_onFocusIn:function(){if(null===this._focusItem){var a=this._rootItem.getChild(0);a&&this.setFocusItem(a)}},_scrollLeft:function(){this._horzScrollBar.setValue(this._horzScrollBar.getValue()-10)},_scrollRight:function(){this._horzScrollBar.setValue(this._horzScrollBar.getValue()+10)},_updateColumns:function(){this.setColumnOrder(this._columnOrder);this._updateScrollWidth();null!=this._header&&this._header.renderColumns(this._columns);null!=this._footer&&this._footer.renderColumns(this._columns)},_renderItemUpdate:function(a,b){if(a.isDisplayable())switch(b.msg){case "expanded":case "collapsed":this._topItem=null;this._scheduleUpdate("scrollHeight");break;case "add":case "remove":a.isExpanded()?this._scheduleUpdate("scrollHeight"):this._scheduleItemUpdate(a);this._topItem=null;break;case "content":this._scheduleItemUpdate(a);break;default:this._allowRender()?this._rowContainer.renderItem(a):this._scheduleItemUpdate(a)}},_scheduleUpdate:function(a){void 0!==a&&this.addToQueue(a);this._renderQueue.allItems=!0;this.addToQueue("updateRows")},_scheduleItemUpdate:function(a){this._renderQueue[a.toHashCode()]=a;this.addToQueue("updateRows")},_layoutPost:function(a){this.base(arguments,a);a.checkDisposedItems&&this._checkDisposedItems();a.scrollHeight&&this._updateScrollHeight();(a.scrollHeight||a.topItem)&&this._updateTopItem(!1);a.updateRows&&(this._renderQueue.allItems?this._rowContainer.renderAll():this._rowContainer.renderItemQueue(this._renderQueue),this._renderQueue={})},_enableAltScrolling:function(){this._altScrollingEnabled||(this._altScrollingEnabled=!0,this._vertScrollBar.setThumb(1))},_updateScrollHeight:function(){var a=this.getRootItem().getVisibleChildrenCount();this._altScrollingEnabled&&(a=a-this._getLastPageRowCount()+1,this._setVerticalScrollBarVisible(1<a));this._vertScrollBar.getDisposed()||this._vertScrollBar.getMaximum()===a||this._vertScrollBar.setMaximum(a)},_getLastPageRowCount:function(){for(var a=this._getClientAreaHeight(),b=this._getLastVisibleItem(),c=0;b&&0<a;)a-=b.getOwnHeight(),0<a&&(c++,b=b.getPreviousItem());return c},_getLastVisibleItem:function(){for(var a=this.getRootItem().getLastChild();a&&a.hasChildren()&&a.isExpanded();)a=a.getLastChild();return a},_updateScrollThumbHeight:function(){if(!this._altScrollingEnabled){var a=Math.max(1,Math.floor(this._getClientAreaHeight()/this._itemHeight));this._vertScrollBar.setThumb(a)}},_setVerticalScrollBarVisible:function(a){var b=this._vertScrollBar.getVisibility();a!==b&&(this._vertScrollBar.setVisibility(a),this._layoutX())},_updateTopItem:function(a){this._rowContainer.setTopItem(this._getTopItem(),this._topItemIndex,a)},_updateScrollWidth:function(){var a=this._getItemWidth();this._rowContainer.setRowWidth(this._getRowWidth());this._horzScrollBar.getDisposed()||this._horzScrollBar.setMaximum(a);this._header&&this._header.setScrollWidth(a+this._getVerticalBarWidth());this._footer&&this._footer.setScrollWidth(a+this._getVerticalBarWidth())},_scrollIntoView:function(a,b){if(a<this._topItemIndex)this._setTopItemIndex(a);else if(a>this._topItemIndex){var c=this._getTopItem().getOffset(),d=b.getOffset(),e=this._getClientAreaHeight()-b.getOwnHeight();d>c+e&&(c=d-e-1,c=this.getRootItem().findItemByOffset(c).getFlatIndex()+1,this._setTopItemIndex(c))}this._allowRender()&&rwt.widgets.base.Widget.flushGlobalQueues()},_setTopItemIndex:function(a){this._updateScrollHeight();this._vertScrollBar.setValue(a)},_fireSelectionChanged:function(a,b,c,d){this.dispatchSimpleEvent("selectionChanged",{item:a,type:b,index:"number"===typeof c?c:void 0,text:null!=d?d:void 0})},_isDoubleClicked:function(a,b){var c=!1,d="mousedown"===a.getType(),e="left"===a.getButton();if(e&&d&&this.isFocusItem(b)&&null!=this._selectionTimestamp){var f=new Date,g=a.getPageX(),h=rwt.remote.EventUtil.DOUBLE_CLICK_TIME;f.getTime()-this._selectionTimestamp.getTime()<h&&8>Math.abs(this._selectionOffsetX-g)&&(c=!0)}d&&e&&!c?(this._selectionTimestamp=new Date,this._selectionOffsetX=a.getPageX()):d&&(this._selectionTimestamp=null);return c},_singleSelectItem:function(a,b){a.isCtrlPressed()&&this.isItemSelected(b)?this._ctrlSelectItem(b):this._exclusiveSelectItem(b)},_multiSelectItem:function(a,b){a instanceof rwt.event.MouseEvent&&a.isRightButtonPressed()?this.isItemSelected(b)||this._exclusiveSelectItem(b):a.isCtrlPressed()?a instanceof rwt.event.KeyEvent&&b!=this._focusItem?this.setFocusItem(b):this._ctrlSelectItem(b):a.isShiftPressed()?null!=this._focusItem?this._shiftSelectItem(b):this._exclusiveSelectItem(b):this._exclusiveSelectItem(b)},_exclusiveSelectItem:function(a){this.deselectAll();this._leadItem=null;this._selectItem(a,!0);this._fireSelectionChanged(a,"selection");this.setFocusItem(a)},_ctrlSelectItem:function(a){this.isItemSelected(a)?this._deselectItem(a,!0):this._selectItem(a,!0);this._fireSelectionChanged(a,"selection");this.setFocusItem(a)},_shiftSelectItem:function(a){this.deselectAll();var b=null!=this._leadItem?this._leadItem:this._focusItem;this._leadItem=b;var c=a,d=b.getFlatIndex(),e=c.getFlatIndex();d>e&&(d=b,b=c,c=d);for(this._selectItem(b,!0);b!==c;)b=b.getNextItem(),this._selectItem(b,!0);this._fireSelectionChanged(a,"selection");this.setFocusItem(a)},_selectItem:function(a,b){this.isItemSelected(a)||this._selection.push(a);b&&this._rowContainer.renderItem(a)},_deselectItem:function(a,b){this.isItemSelected(a)&&this._selection.splice(this._selection.indexOf(a),1);b&&this._rowContainer.renderItem(a)},deselectAll:function(){this._checkDisposedItems();var a=this._selection;this._selection=[];for(var b=0;b<a.length;b++)this._rowContainer.renderItem(a[b])},_toggleCheckSelection:function(a,b){a.isCached()&&(isNaN(b)?(a.setChecked(!a.isChecked()),this._fireSelectionChanged(a,"check")):a.isCellCheckable(b)&&(a.toggleCellChecked(b),this._fireSelectionChanged(a,"cellCheck",b)))},_deselectVisibleChildren:function(a){var b=a.getNextItem();for(a=a.getNextItem(!0);b!==a;)this._deselectItem(b,!1),b=b.getNextItem()},_applyFocused:function(a,b){this.base(arguments,a,b);this._config.focused=a;this._scheduleUpdate()},_applyEnabled:function(a,b){this.base(arguments,a,b);this._config.enabled=a;this._scheduleUpdate()},_checkDisposedItems:function(){this._focusItem&&this._focusItem.isDisposed()&&(this._focusItem=null);this._leadItem&&this._leadItem.isDisposed()&&(this._leadItem=null);for(var a=0;a<this._selection.length;)this._selection[a].isDisposed()?this._deselectItem(this._selection[a],!1):a++},_applyTextColor:function(a,b){this.base(arguments,a,b);this._config.textColor=a;this._scheduleUpdate()},_applyFont:function(a,b){this.base(arguments,a,b);this._config.font=a;this._scheduleUpdate()},_applyBackgroundColor:function(a){this._rowContainer.setBackgroundColor(a)},_applyBackgroundImage:function(a){this._rowContainer.setBackgroundImage(a)},_applyDirection:function(a){this.base(arguments,a);this._config.rtl="rtl"===a;this.getLayoutImpl().setMirror("rtl"===a);this._rowContainer.setDirection(a);this._horzScrollBar.setDirection(a);this._header&&this._header.setDirection(a);this._footer&&this._footer.setDirection(a);this._onHorzScrollBarChangeValue();this._scheduleUpdate()},_layoutX:function(){var a=Math.max(0,this.getWidth()-this.getFrameWidth());this._header&&(this._header.setLeft(0),this._header.setWidth(a));this._footer&&(this._footer.setLeft(0),this._footer.setWidth(a));this._vertScrollBar.getVisibility()&&this._vertScrollBar.setLeft(a-this._vertScrollBar.getWidth());this._horzScrollBar.setLeft(0);this._horzScrollBar.setWidth(a-this._getVerticalBarWidth());this._rowContainer.setWidth(a);this._updateScrollWidth();this._scheduleUpdate()},_layoutY:function(){var a=this._header?this._headerHeight:0,b=this._footer?this._footerHeight:0,c=this.getHeight()-this.getFrameHeight()-a-b,c=Math.max(0,c);this._header&&this._header.setHeight(this._headerHeight);this._footer&&(this._footer.setHeight(this._footerHeight),this._footer.setTop(a+c));this._horzScrollBar.getVisibility()&&this._horzScrollBar.setTop(a+c+b-this._getHorizontalBarHeight());this._vertScrollBar.setHeight(c+b-this._getHorizontalBarHeight());this._vertScrollBar.setTop(a);this._rowContainer.setTop(a);this._rowContainer.setHeight(c);this._updateScrollThumbHeight();this._scheduleUpdate("scrollHeight")},_getItemWidth:function(){var a=0;if(this._config.rowTemplate)a=this._rowContainer.getWidth();else if(0<this._config.itemLeft.length)for(var b=Math.max(1,this._config.columnCount),c=0;c<b;c++)a=Math.max(a,this._config.itemLeft[c]+this._config.itemWidth[c]);return a},_getRowWidth:function(){var a=this._rowContainer.getWidth(),b=this._getVerticalBarWidth();return Math.max(this._getItemWidth()+(this.isHorizontalBarVisible()?b:0),a)},_allowRender:function(){return!this._disableRender&&!rwt.remote.EventUtil.getSuspended()&&this.isSeeable()},_isDragSource:function(){return this.hasEventListeners("dragstart")},_getTopItem:function(){null===this._topItem&&(this._topItem=this._rootItem.findItemByFlatIndex(this._topItemIndex));return this._topItem},_getHorizontalBarHeight:function(){return this._horzScrollBar.getVisibility()?this._horzScrollBar.getHeight():0},_getVerticalBarWidth:function(){return this._vertScrollBar.getVisibility()?this._vertScrollBar.getWidth():0},_getClientAreaHeight:function(){var a=this._rowContainer.getHeight();return this._footer?a:a-this._getHorizontalBarHeight()},_adjustScrollLeft:function(a){return rwt.widgets.base.Scrollable.adjustScrollLeft(this,a)},setEnableCellToolTip:function(a){this.setCellToolTipsEnabled(a)},setCellToolTipsEnabled:function(a){this._rowContainer.setCellToolTipsEnabled(a);rwt.widgets.util.GridCellToolTipSupport.setEnabled(this,a)},getCellToolTipsEnabled:function(){return this._rowContainer.getCellToolTipsEnabled()},setCellToolTipText:function(a){if(!0!==this.getUserData("toolTipMarkupEnabled")){var b=rwt.util.Encoding;a=b.escapeText(a,!1);a=b.replaceNewLines(a,"\x3cbr/\x3e")}rwt.widgets.util.GridCellToolTipSupport.showToolTip(a)}}});rwt.remote.HandlerRegistry.add("rwt.widgets.ScrollBar",{factory:function(a){var b=rwt.remote.HandlerUtil.createStyleMap(a.style),c=rwt.remote.ObjectRegistry.getObject(a.parent);b.HORIZONTAL?c.getHorizontalBar?b=c.getHorizontalBar():(b=new rwt.widgets.base.ScrollBar(!0),rwt.remote.HandlerUtil.setParent(b,a.parent)):c.getVerticalBar?b=c.getVerticalBar():(b=new rwt.widgets.base.ScrollBar(!1),rwt.remote.HandlerUtil.setParent(b,a.parent));rwt.remote.HandlerUtil.addDestroyableChild(c,b);b.setUserData("protocolParent",c);return b},destructor:function(a){var b=a.getUserData("protocolParent");b&&rwt.remote.HandlerUtil.removeDestroyableChild(b,a)},properties:["visibility"],propertyHandler:{visibility:function(a,b){var c=a.getParent();c.setScrollBarsVisible?a.isHorizontal()?c.setScrollBarsVisible(b,c.isVerticalBarVisible()):c.setScrollBarsVisible(c.isHorizontalBarVisible(),b):a.setDisplay(b)}},listeners:rwt.remote.HandlerUtil.extendControlListeners(["Selection"]),listenerHandler:{},methods:[]});rwt.remote.HandlerRegistry.add("rwt.widgets.Grid",{factory:function(a){var b=rwt.remote.HandlerUtil.createStyleMap(a.style),c=a.rowTemplate?new rwt.widgets.util.Template(a.rowTemplate):null,b=new rwt.widgets.Grid({appearance:a.appearance,noScroll:b.NO_SCROLL,multiSelection:b.MULTI,check:b.CHECK,fullSelection:"table"!==a.appearance||c?b.FULL_SELECTION:!0,hideSelection:b.HIDE_SELECTION,checkBoxMetrics:a.checkBoxMetrics,selectionPadding:a.selectionPadding,indentionWidth:a.indentionWidth,splitContainer:a.splitContainer,markupEnabled:a.markupEnabled,hideIndentionImage:a.hideIndentionImage,overlayWidth:a.overlayWidth,fixedRight:a.fixedRight,rowTemplate:c});rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);b.setUserData("isControl",!0);rwt.remote.HandlerUtil.setParent(b,a.parent);new rwt.widgets.util.GridSynchronizer(b);return b},destructor:function(a){for(var b=a.getRootItem().getUncachedChildren(),c=0;c<b.length;c++)b[c].dispose();rwt.remote.HandlerUtil.getControlDestructor()(a)},getDestroyableChildren:function(a){return a.getRootItem().getCachedChildren().concat(rwt.remote.HandlerUtil.getDestroyableChildrenFinder()(a))},properties:rwt.remote.HandlerUtil.extendControlProperties("itemCount itemHeight itemMetrics columnCount treeColumn fixedColumns headerHeight headerVisible hideIndentionImage overlayWidth fixedRight footerHeight footerVisible linesVisible topItemIndex scrollLeft selection focusItem sortDirection sortColumn alwaysHideSelection enableCellToolTip cellToolTipText columnOrder autoHeight indentionWidth".split(" ")),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({itemMetrics:function(a,b){for(var c=0;c<b.length;c++)a.setItemMetrics.apply(a,b[c])},fixedColumns:function(a,b){rwt.widgets.util.GridUtil.setFixedColumns(a,b)},fixedRight:function(a,b){rwt.widgets.util.GridUtil.setFixedRight(a,b)},focusItem:function(a,b){rwt.remote.HandlerUtil.callWithTarget(b,function(b){a.setFocusItem(b)})},selection:function(a,b){a.deselectAll();for(var c=function(b){a.selectItem(b)},d=0;d<b.length;d++)rwt.remote.HandlerUtil.callWithTarget(b[d],c)},columnOrder:function(a,b){rwt.remote.HandlerUtil.callWithTargets(b,function(b){a.setColumnOrder(b)})},sortColumn:function(a,b){rwt.remote.HandlerUtil.callWithTarget(b,function(b){a.setSortColumn(b)})},scrollBarsVisible:function(a,b){a.setScrollBarsVisible(b[0],b[1])}}),events:["Selection","DefaultSelection","Expand","Collapse","SetData"],listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({})});rwt.qx.Class.define("rwt.widgets.GridItem",{extend:rwt.qx.Target,include:rwt.widgets.util.HtmlAttributesMixin,construct:function(a,b,c){this._autoDispose=!1;this.base(arguments);this._parent=a;this._level=-1;this._height=null;this._children=[];this._indexCache={};this._visibleChildrenCount=0;this._expandedItems={};this._customHeightItems={};c||(this._cached=!0);null!=this._parent&&(this._level=this._parent.getLevel()+1,this._parent._add(this,b));this._expanded=this.isRootItem();this.addEventListener("update",this._onUpdate,this);this.isRootItem()?(this._rootItem=this,this._height=16):this._rootItem=a.getRootItem()},destruct:function(){null==this._parent||this._parent.isDisposed()||this._parent._remove(this);this._customHeightItems=this._expandedItems=this._indexCache=this._children=this._height=this._parent=null;delete this._texts;delete this._images;delete this._font;delete this._cellFonts;delete this._foreground;delete this._cellForegrounds;delete this._background;delete this._cellBackgrounds;delete this._cellChecked;delete this._cellGrayed;delete this._cellCheckable;this._rootItem=null;delete this._columnSpans},statics:{createItem:function(a,b){var c=this._getItem(a);c.isChildCreated(b)&&!c.isChildCached(b)?(c=c.getChild(b),c.markCached()):c=new rwt.widgets.GridItem(c,b,!1);return c},_getItem:function(a){return a instanceof rwt.widgets.Grid?a.getRootItem():a}},members:{setItemCount:function(a){var b=this._children.length>a?"remove":"add";this._children.length=a;this._update(b)},setIndex:function(a){var b=this._parent._children;if(b.indexOf(this)!==a){var c=b[a];b[a]=this;c&&!c.isCached()&&c.dispose()}},clear:function(){delete this._cached;delete this._checked;delete this._grayed;this._texts=["..."];delete this._images;delete this._background;delete this._foreground;delete this._font;delete this._cellBackgrounds;delete this._cellForegrounds;delete this._cellFonts;delete this._columnSpans;delete this._variant},isCached:function(){return this._cached||!1},markCached:function(){this._cached=!0;delete this._texts},setTexts:function(a){this._texts=a;this._update("content")},getText:function(a){return(this._texts?this._texts[a]:void 0)||""},hasText:function(a){return!(!this._texts||!this._texts[a])},setFont:function(a){this._font=a;this._update("content")},getCellFont:function(a){a=this._cellFonts?this._cellFonts[a]:null;return"string"===typeof a&&""!==a?a:this._getFont()},_getFont:function(){return this._font||null},setCellFonts:function(a){this._cellFonts=a;this._update("content")},setForeground:function(a){this._foreground=a;this._update("content")},getCellForeground:function(a){a=this._cellForegrounds?this._cellForegrounds[a]:null;return"string"===typeof a?a:this._getForeground()},_getForeground:function(){return this._foreground||null},setCellForegrounds:function(a){this._cellForegrounds=a;this._update("content")},setBackground:function(a){this._background=a;this._update("content")},getCellBackground:function(a){a=this._cellBackgrounds?this._cellBackgrounds[a]:null;return"string"===typeof a?a:null},getBackground:function(){return this._background||null},setCellBackgrounds:function(a){this._cellBackgrounds=a;this._update("content")},setColumnSpans:function(a){this._columnSpans=a;this._update("content")},getColumnSpan:function(a){return(this._columnSpans?this._columnSpans[a]:void 0)||0},setImages:function(a){this._images=a;this._update("content")},getImage:function(a){return(this._images?this._images[a]:null)||null},setChecked:function(a){this._checked=a;this._update("check")},isChecked:function(){return this._checked||!1},setGrayed:function(a){this._grayed=a;this._update("check")},isGrayed:function(){return this._grayed||!1},setCellChecked:function(a){this._cellChecked=a;this._update("check")},toggleCellChecked:function(a){this._cellChecked||(this._cellChecked=[]);this._cellChecked[a]=!this._cellChecked[a];this._update("check")},getCellChecked:function(){return this._cellChecked||[]},isCellChecked:function(a){return this._cellChecked?this._cellChecked[a]:!1},setCellGrayed:function(a){this._cellGrayed=a;this._update("check")},isCellGrayed:function(a){return this._cellGrayed?this._cellGrayed[a]:!1},setCellCheckable:function(a){this._cellCheckable=a;this._update("check")},isCellCheckable:function(a){return this._cellCheckable&&void 0!==this._cellCheckable[a]?this._cellCheckable[a]:!0},setVariant:function(a){this._variant=a},getVariant:function(){return this._variant?this._variant:this._rootItem&&this._rootItem!==this?this._rootItem.getVariant():null},setDefaultHeight:function(a){if(!this.isRootItem())throw Error("Can only set default item height on root item");this._height=a},setHeight:function(a,b){if(this.isRootItem())throw Error("Can not set item height on root item");this._height!==a&&(this._height=a,null!==a?this._parent._addToCustomHeightItems(this):this._removeFromCustomHeightItems(this),this._update("height",null,b))},getHeight:function(){return this._height},getDefaultHeight:function(){return this.isRootItem()?this._height:this.getRootItem().getDefaultHeight()},isRootItem:function(){return 0>this._level},getRootItem:function(){return this._rootItem},getLevel:function(){return this._level},getParent:function(){return this._parent},setExpanded:function(a){this._expanded!=a&&(this._expanded=a,this._update(a?"expanded":"collapsed"),a?this._parent._addToExpandedItems(this):this._parent._removeFromExpandedItems(this))},isExpanded:function(){return this._expanded},isDisplayable:function(){return this.isRootItem()||this._parent.isRootItem()?!0:this._parent.isExpanded()&&this._parent.isDisplayable()},hasChildren:function(){return 0<this._children.length},getChildrenLength:function(){return this._children.length},isChildCreated:function(a){return void 0!==this._children[a]},isChildCached:function(a){return this._children[a].isCached()},getCachedChildren:function(){for(var a=[],b=0;b<this._children.length;b++)this.isChildCreated(b)&&this.isChildCached(b)&&a.push(this._children[b]);return a},getUncachedChildren:function(){for(var a=[],b=0;b<this._children.length;b++)this.isChildCreated(b)&&!this.isChildCached(b)&&a.push(this._children[b]);return a},getOffsetHeight:function(){var a=this.getOwnHeight();if(this.isExpanded()&&this.hasChildren())var b=this.getLastChild(),a=a+this._getChildOffset(b),a=a+b.getOffsetHeight();return a},hasCustomHeight:function(){return null!==this._height},getOwnHeight:function(){var a=0;this.isRootItem()||(a=null!==this._height?this._height:this.getDefaultHeight());return a},getVisibleChildrenCount:function(){null==this._visibleChildrenCount&&this._computeVisibleChildrenCount();return this._visibleChildrenCount},getChild:function(a){var b;0<=a&&a<this._children.length&&((b=this._children[a])||(b=new rwt.widgets.GridItem(this,a,!0)));return b},getLastChild:function(){return this.getChild(this._children.length-1)},indexOf:function(a){var b=a.toHashCode();void 0===this._indexCache[b]&&(this._indexCache[b]=this._children.indexOf(a));return this._indexCache[b]},isChildOf:function(a){var b=this._parent===a;b||this._parent.isRootItem()||(b=this._parent.isChildOf(a));return b},findItemByOffset:function(a){var b=this.getDefaultHeight(),c=this._getDifferingHeightIndicies();0===c[0]&&c.shift();var d=0,e=0,f=null,g=!1;if(0>a||0===this.getChildrenLength())g=!0;for(;!g;){var h=this.getChild(e),k=h.getOffsetHeight(),l=c.shift(),m=d+k+(l-e-1)*b;a<d+k?(a<d+h.getOwnHeight()?f=h:(f=a-d-h.getOwnHeight(),f=h.findItemByOffset(f)),g=!0):void 0===l||m>a?(f=this.getChild(e+1+Math.floor((a-d-k)/b)),g=!0):(e=l,d=m)}return f},findItemByFlatIndex:function(a){for(var b=this._getExpandedIndicies(),c=null,d=!1;!d&&0<=a;){var e=b.shift();if(void 0===e||e>=a)(c=this.getChild(a))&&(this._indexCache[c.toHashCode()]=a),d=!0;else{var f=this.getChild(e).getVisibleChildrenCount(),g=a-e;if(g<=f){if(c=this.getChild(e).findItemByFlatIndex(g-1),d=!0,null==c)throw Error("getItemByFlatIndex failed");}else a-=f}}return c},getOffset:function(){var a=0;this._parent.isRootItem()||(a+=this._parent.getOffset()+this._parent.getOwnHeight());return a+=this._parent._getChildOffset(this)},_getChildOffset:function(a){a=this.indexOf(a);for(var b=a*this.getDefaultHeight(),c=this._getDifferingHeightIndicies();0<c.length&&a>c[0];)var d=c.shift(),b=b-this.getDefaultHeight(),b=b+this._children[d].getOffsetHeight();return b},getFlatIndex:function(){for(var a=this._parent.indexOf(this),b=a,c=this._parent._getExpandedIndicies();0<c.length&&a>c[0];)var d=c.shift(),b=b+this._parent._children[d].getVisibleChildrenCount();this._parent.isRootItem()||(b+=this._parent.getFlatIndex()+1);return b},hasPreviousSibling:function(){return 0<=this._parent.indexOf(this)-1},hasNextSibling:function(){return this._parent.indexOf(this)+1<this._parent.getChildrenLength()},getPreviousSibling:function(){var a=this._parent.indexOf(this)-1;return this._parent.getChild(a)},getNextSibling:function(){var a=this._parent.indexOf(this)+1,b=this._parent.getChild(a);this._parent._indexCache[b.toHashCode()]=a;return b},getNextItem:function(a){var b=null;!a&&this.hasChildren()&&this.isExpanded()?b=this.getChild(0):this.hasNextSibling()?b=this.getNextSibling():0<this.getLevel()&&(b=this._parent.getNextItem(!0));return b},getPreviousItem:function(){var a=null;if(this.hasPreviousSibling())for(a=this.getPreviousSibling();a.hasChildren()&&a.isExpanded();)a=a.getLastChild();else 0<this.getLevel()&&(a=this._parent);return a},_add:function(a,b){this._children[b]?(this._children.splice(b,0,a),this._children.pop(),this._update("add",a)):this._children[b]=a},_remove:function(a){a.isExpanded()&&delete this._expandedItems[a.toHashCode()];a.hasCustomHeight()&&delete this._customHeightItems[a.toHashCode()];var b=this._children.indexOf(a);-1!==b&&(this._children.splice(b,1),this._children.push(void 0));this._update("remove",a)},_addToExpandedItems:function(a){this._expandedItems[a.toHashCode()]=a},_removeFromExpandedItems:function(a){delete this._expandedItems[a.toHashCode()]},_addToCustomHeightItems:function(a){this._customHeightItems[a.toHashCode()]=a},_removeFromCustomHeightItems:function(a){delete this._customHeightItems[a.toHashCode()]},getEnabled:function(){return!0},_update:function(a,b,c){a={msg:a,related:b,rendering:c,target:this};this.dispatchSimpleEvent("update",a,!0);delete a.target;delete a.related;delete a.msg},_onUpdate:function(a){"content"!==a.msg&&"check"!==a.msg&&(this._visibleChildrenCount=null,this._indexCache={})},_computeVisibleChildrenCount:function(){var a=0;if(this.isExpanded()||this.isRootItem())for(var a=this._children.length,b=0;b<this._children.length;b++)this.isChildCreated(b)&&(a+=this.getChild(b).getVisibleChildrenCount());this._visibleChildrenCount=a},_getDifferingHeightIndicies:function(){var a=[],b;for(b in this._expandedItems)a.push(this.indexOf(this._expandedItems[b]));for(b in this._customHeightItems)this._expandedItems[b]||a.push(this.indexOf(this._customHeightItems[b]));return a.sort(function(a,b){return a-b})},_getExpandedIndicies:function(){var a=[],b;for(b in this._expandedItems)a.push(this.indexOf(this._expandedItems[b]));return a.sort(function(a,b){return a-b})},toString:function(){return"TreeItem "+(this._texts?this._texts.join():"")}}});rwt.remote.HandlerRegistry.add("rwt.widgets.GridItem",{factory:function(a){var b;rwt.remote.HandlerUtil.callWithTarget(a.parent,function(c){b=rwt.widgets.GridItem.createItem(c,a.index)});return b},destructor:function(a){for(var b=a.getUncachedChildren(),c=0;c<b.length;c++)b[c].dispose();a.dispose()},getDestroyableChildren:function(a){return a.getCachedChildren()},properties:"itemCount texts images background foreground font cellBackgrounds cellForegrounds cellFonts expanded checked grayed cellChecked cellGrayed cellCheckable customVariant height index columnSpans data".split(" "),propertyHandler:{data:rwt.remote.HandlerUtil.getControlPropertyHandler("data"),background:function(a,b){var c=null==b?null:rwt.util.Colors.rgbToRgbString(b);a.setBackground(c)},foreground:function(a,b){var c=null==b?null:rwt.util.Colors.rgbToRgbString(b);a.setForeground(c)},font:function(a,b){var c=null==b?null:rwt.html.Font.fromArray(b).toCss();a.setFont(c)},cellBackgrounds:function(a,b){var c=[];if(b)for(var d=0;d<b.length;d++){var e=null===b[d]?null:rwt.util.Colors.rgbToRgbString(b[d]);c[d]=e}a.setCellBackgrounds(c)},cellForegrounds:function(a,b){var c=[];if(b)for(var d=0;d<b.length;d++){var e=null===b[d]?null:rwt.util.Colors.rgbToRgbString(b[d]);c[d]=e}a.setCellForegrounds(c)},cellFonts:function(a,b){var c=[];if(b)for(var d=0;d<b.length;d++){var e=null===b[d]?"":rwt.html.Font.fromArray(b[d]).toCss();c[d]=e}a.setCellFonts(c)},customVariant:function(a,b){a.setVariant(b)}},methods:["clear"]});rwt.qx.Class.define("rwt.widgets.util.GridDNDFeedback",{extend:rwt.qx.Object,construct:function(a){this.base(arguments);this._tree=a;this._scrollTimer=this._expandTimer=this._insertIndicator=this._currentRow=this._feedback=null},destruct:function(){this._renderFeedback(this._currentRow,!1);null!=this._expandTimer&&(this._expandTimer.dispose(),this._expandTimer=null);null!=this._scrollTimer&&(this._scrollTimer.dispose(),this._scrollTimer=null);this._currentRow=this._insertIndicator=this._feedback=this._tree=null},members:{setFeedback:function(a){this._renderFeedback(this._currentRow,!1);this._feedback=a;this._renderFeedback(this._currentRow,!0)},renderFeedback:function(a){this._renderFeedback(this._currentRow,!1);this._renderFeedback(a,!0);this._currentRow=a},isFeedbackNode:function(a){var b=!1;null!=this._insertIndicator&&this._insertIndicator==a&&(b=!0);return b},_renderFeedback:function(a,b){var c=this._tree._rowContainer.findItemByRow(a);null!=this._feedback&&null!=a&&null!=c&&(this._feedback.FEEDBACK_SELECT?this._renderFeedbackSelect(a,b):this._feedback.FEEDBACK_INSERT_BEFORE?this._renderFeedbackBefore(a,b):this._feedback.FEEDBACK_INSERT_AFTER&&this._renderFeedbackAfter(a,b),this._feedback.FEEDBACK_EXPAND&&this._renderFeedbackExpand(a,b),this._feedback.FEEDBACK_SCROLL&&this._renderFeedbackScroll(a,b))},_renderFeedbackSelect:function(a,b){a.setState("dnd_selected",b);var c=this._tree._rowContainer.findItemByRow(a);this._tree._rowContainer.renderItem(c)},_renderFeedbackBefore:function(a,b){if(b){var c=this._getRowLocation(a);c.x+=a.getNextIndentOffset();c.y--;this._showInsertIndicator(c.x,c.y)}else this._hideInsertIndicator()},_renderFeedbackAfter:function(a,b){if(b){var c=this._getRowLocation(a),d=a.getHeight();c.x+=a.getNextIndentOffset();c.y+=d-1;this._showInsertIndicator(c.x,c.y)}else this._hideInsertIndicator()},_renderFeedbackExpand:function(a,b){var c=this._tree._rowContainer.findItemByRow(a);null!=c&&c.hasChildren()&&(b&&!c.isExpanded()?this._startExpandTimer():this._stopExpandTimer())},_renderFeedbackScroll:function(a,b){b?this._startScrollTimer():this._stopScrollTimer()},_getRowLocation:function(a){var b={x:0,y:0};a=a.$el.get(0);for(var c=this._tree._getTargetNode();a!=c;)b.x+=a.offsetLeft,b.y+=a.offsetTop,a=a.parentNode;return b},_showInsertIndicator:function(a,b){if(null==this._insertIndicator){var c=document.createElement("div");c.style.position="absolute";c.style.borderTopStyle="solid";c.style.borderTopColor="black";c.style.borderTopWidth="2px";c.style.zIndex=1E5;c.style.height="2px";this._insertIndicator=c}c=this._tree.getWidthValue()-(a+6);this._insertIndicator.style.left=a+"px";this._insertIndicator.style.top=b+"px";this._insertIndicator.style.width=c+"px";this._tree._getTargetNode().appendChild(this._insertIndicator)},_hideInsertIndicator:function(){this._tree._getTargetNode().removeChild(this._insertIndicator)},_startExpandTimer:function(){null==this._expandTimer&&(this._expandTimer=new rwt.client.Timer(750),this._expandTimer.addEventListener("interval",this._onExpandTimer,this));this._expandTimer.setEnabled(!0)},_stopExpandTimer:function(){null!=this._expandTimer&&this._expandTimer.stop()},_onExpandTimer:function(){this._stopExpandTimer();this._tree._rowContainer.findItemByRow(this._currentRow).setExpanded(!0)},_startScrollTimer:function(){null==this._scrollTimer&&(this._scrollTimer=new rwt.client.Timer(250),this._scrollTimer.addEventListener("interval",this._onScrollTimer,this));this._scrollTimer.setEnabled(!0)},_stopScrollTimer:function(){null!=this._scrollTimer&&this._scrollTimer.stop()},_getScrollDirection:function(a){var b=0;a=this._tree._rowContainer.getRowIndex(a);0===a?b=-1:a>=this._tree._rowContainer.getRowCount()-2&&(b=1);return b},_onScrollTimer:function(){this._stopScrollTimer();var a=this._getScrollDirection(this._currentRow);if(0!==a){var b=this._tree._rowContainer.findItemByRow(this._currentRow);if(null!=b&&(b=0<a?b.getNextItem():b.getPreviousItem(),null!=b)){this._tree._setTopItemIndex(this._tree._topItemIndex+a);var c=this._tree._rowContainer.findRowByItem(b),d=this._currentRow;rwt.client.Timer.once(function(){this._targetUpdateCheck(d,c)},this,1)}}},_targetUpdateCheck:function(a,b){this.isDisposed()||b!=this._currentRow&&a==this._currentRow&&rwt.remote.DNDSupport.getInstance().setCurrentTargetElement(b.$el.get(0))}}});namespace("rwt.widgets.util");rwt.widgets.util.GridCellToolTipSupport={_cell:[null,null,null],_requestedCell:null,setEnabled:function(a,b){b?a.addEventListener("renderCellToolTip",this._onRender,a):a.removeEventListener("renderCellToolTip",this._onRender,a)},showToolTip:function(a){if(this._isValidToolTip(a)){var b=this._cell[0],c=rwt.remote.ObjectRegistry.getObject(this._cell[1]);b.getRowContainer().getHoverItem()===c&&(b.getRowContainer().setToolTipText(a),rwt.widgets.base.WidgetToolTip.getInstance().updateText(),b.getRowContainer().setToolTipText(""))}},getCurrentToolTipTargetBounds:function(a){var b=this._cell[0],c=b.getRowContainer(),c=c.getSplitOffset?c.getSplitOffset(this._cell[2]):0;return{left:b.getRenderConfig().itemLeft[this._cell[2]]-c,top:a.getTop(),height:a.getHeight(),width:b.getRenderConfig().itemWidth[this._cell[2]]}},_onRender:function(a){var b=null,c=-1;this._rowContainer.findItemByRow(a)&&(b=rwt.remote.ObjectRegistry.getId(this._rowContainer.getHoverItem()),c=rwt.widgets.util.GridUtil.getColumnByPageX(this,rwt.event.MouseEvent.getPageX()));rwt.widgets.util.GridCellToolTipSupport._setCell(this,b,c)},_setCell:function(a,b,c){a=[a,b,c];this._isValidCell(a)&&(this._cell=a,rwt.remote.Connection.getInstance().getRemoteObject(this._cell[0]).call("renderToolTipText",{item:this._cell[1],column:this._cell[2]}),this._requestedCell=this._cell)},_isValidCell:function(a){return a&&null!=a[0]&&null!=a[1]&&-1!=a[2]},_isValidToolTip:function(a){return a&&this._requestedCell&&this._cell[0]===this._requestedCell[0]&&this._cell[1]===this._requestedCell[1]&&this._cell[2]===this._requestedCell[2]}};rwt.qx.Class.define("rwt.widgets.base.GridHeader",{extend:rwt.widgets.base.Parent,construct:function(a){this.base(arguments);this.setOverflow("hidden");this.setZIndex(2E3);this._fixedColumns=a.splitContainer;this._fixedRight=a.fixedRight;this._scrollLeft=this._scrollWidth=0;this._footer=a.footer?!0:!1;this._baseAppearance=a.appearance;this._config=a.config;this._dummyColumn=this._createDummyColumn();this._feedbackLabel=this._currentDragColumn=null;this._labelToColumnMap={};this._columnToLabelMap={};this.addEventListener("dragstart",function(a){a.stopPropagation()})},destruct:function(){this._dummyColumn=null},events:{columnLayoutChanged:"rwt.event.Event"},members:{setScrollLeft:function(a){this._scrollLeft=a;if((this._fixedColumns||this._fixedRight)&&!rwt.widgets.base.Widget._inFlushGlobalQueues){for(var b=0;b<this._children.length;b++){var c=this._getColumnByLabel(this._children[b]);c&&c.isFixed()?this._renderLabelLeft(this._children[b],c):c&&c.isFixedRight()&&this._renderLabelLeft(this._children[b],c)}rwt.remote.EventUtil.getSuspended()||rwt.widgets.base.Widget.flushGlobalQueues()}this.isSeeable()&&this.base(arguments,a)},setScrollWidth:function(a){this._scrollWidth=a;this.getVisibility()&&this._renderDummyColumn()},_applyDirection:function(a){this.base(arguments,a);for(var b=0;b<this._children.length;b++){var c=this._getColumnByLabel(this._children[b]);this._children[b].setDirection(a);this._children[b].setHorizontalChildrenAlign(this._getAlignment(c))}this.getLayoutImpl().setMirror("rtl"===a)},_onColumnDispose:function(a){a=a.target;var b=this._getLabelByColumn(a);delete this._labelToColumnMap[b.toHashCode()];delete this._columnToLabelMap[a.toHashCode()];b.destroy()},renderColumns:function(a){for(var b in a){var c=a[b],d=this._getLabelByColumn(c);d&&this._renderLabel(d,c)}this._renderDummyColumn()},_renderLabel:function(a,b){b.isFixedRight()&&(a.updateLeftBorder(),b.setLeft(this._computedWidthValue-b._width));this._renderLabelLeft(a,b);a.setCustomVariant(b.getCustomVariant());a.setVisibility(b.getVisibility()&&0<b.getWidth());this._footer?this._renderFooterLabel(a,b):this._renderHeaderLabel(a,b);a.setHorizontalChildrenAlign(this._getAlignment(b));a.setWordWrap(b.getHeaderWordWrap())},_renderFooterLabel:function(a,b){a.setWidth(b.getFooterWidth());a.setText(b.getFooterText());a.setImage(b.getFooterImage());null!==b.getFooterFont()?a.setFont(b.getFooterFont()):a.resetFont();var c=b.isFixed()||b.isFixedRight()||1<b.getFooterSpan();a.setZIndex(c?1E7:1)},_renderHeaderLabel:function(a,b){a.setWidth(b.getWidth());a.setHoverEffect(b.getMoveable());a.clearHtmlAttributes();a.setHtmlAttributes(b.getHtmlAttributes());null!==b.getFont()?a.setFont(b.getFont()):a.resetFont();b.isMarkupEnabled()?a.setHtml(b.getText()):(a.setText(b.getText()),a.setImage(b.getImage()));a.setToolTipText(b.getToolTipText());a.setSortIndicator(b.getSortDirection());b.isGroup()&&b.getShowChevron()&&a.setChevron(b.isExpanded()?"expanded":"collapsed");this._renderLabelY(a,b);a.setZIndex(b.isFixed()||b.isFixedRight()?1E7:1)},_renderLabelY:function(a,b){if(b.isGroup())a.setTop(0),a.setHeight(b.getHeight());else if(null!=b.getGroup()){var c=b.getGroup().getHeight();a.setTop(c);a.setHeight(this.getHeight()-c)}else a.setTop(0),a.setHeight("100%")},_renderLabelLeft:function(a,b){var c=b.isFixed()||b.isFixedRight()?this._adjustScrollLeft(this._scrollLeft):0;a.setLeft(b.getLeft()+c)},_onDummyRendered:function(){this.setScrollLeft(this._scrollLeft)},_flushChildrenQueue:function(){this.base(arguments);this.setScrollLeft(this._scrollLeft)},_fireUpdateEvent:function(){this.createDispatchEvent("columnLayoutChanged")},_renderDummyColumn:function(){var a=this._getDummyColumnLeft(),b=Math.max(this._scrollWidth,this.getWidth()),b=Math.max(0,b-a);this._dummyColumn.setLeft(a);this._dummyColumn.setWidth(b);this._dummyColumn.setCustomVariant(this._config.variant)},_getDummyColumnLeft:function(){var a=this._labelToColumnMap,b=0,c;for(c in a)if(a[c].getVisibility())var d=a[c].getLeft()+a[c].getWidth(),b=Math.max(b,d);return b},_onLabelSelected:function(a){this._getColumnByLabel(a.target).handleSelectionEvent(a)},_onLabelMoveStart:function(a){a=this._getColumnByLabel(a.target);return!this._footer&&a.getMoveable()},_onLabelMoveEnd:function(a){this._getColumnByLabel(a.target).setLeft(a.position)},_onShowDragFeedback:function(a){var b=this._getColumnByLabel(a.target);this._getDragFeedback(b).setLeft(a.position)},_onHideDragFeedback:function(a){var b=a.target,c=this._getColumnByLabel(b),c=this._getDragFeedback(c),d=b.getLeft();a.snap?rwt.animation.AnimationUtil.snapTo(c,250,d,b.getTop(),!0):c.setDisplay(!1);this._currentDragColumn=null},_onLabelResizeStart:function(a){a=this._getColumnByLabel(a.target);return!this._footer&&a.getResizeable()},_onLabelResizeEnd:function(a){this._getColumnByLabel(a.target).setWidth(a.width)},_getColumnByLabel:function(a){return this._labelToColumnMap[a.toHashCode()]},_getLabelByColumn:function(a){var b=this._columnToLabelMap[a.toHashCode()];b||(b=a.getVisibility()?this._createLabel(a):null);return b},_getAlignment:function(a){a=a?a.getAlignment():"left";if("rtl"===this.getDirection()){if("left"===a)return"right";if("right"===a)return"left"}return a},_getDragFeedback:function(a){null===this._feedbackLabel&&(this._feedbackLabel=this._createFeedbackColumn());this._currentDragColumn!==a&&(this._renderLabelY(this._feedbackLabel,a),this._feedbackLabel.setWidth(a.getWidth()),this._feedbackLabel.setCustomVariant(a.getCustomVariant()),this._feedbackLabel.setText(a.getText()),this._feedbackLabel.setImage(a.getImage()),this._feedbackLabel.setSortIndicator(a.getSortDirection()),this._feedbackLabel.setHorizontalChildrenAlign(this._getAlignment(a)),this._feedbackLabel.setDisplay(!0),this._feedbackLabel.dispatchSimpleEvent("cancelAnimations"),this._currentDragColumn=a);return this._feedbackLabel},_createLabel:function(a){var b=new rwt.widgets.base.GridColumnLabel(this._baseAppearance);this._footer?b.addState("footer"):a.getResizeable()&&b.setResizeCursor("col-resize");a.isGroup()&&b.addState("group");b.setTop(0);b.setHeight("100%");b.setDirection(this.getDirection());this.add(b);this._labelToColumnMap[b.toHashCode()]=a;this._columnToLabelMap[a.toHashCode()]=b;b.addEventListener("selected",this._onLabelSelected,this);b.addEventListener("moveStart",this._onLabelMoveStart,this);b.addEventListener("showDragFeedback",this._onShowDragFeedback,this);b.addEventListener("hideDragFeedback",this._onHideDragFeedback,this);b.addEventListener("moveEnd",this._onLabelMoveEnd,this);b.addEventListener("resizeStart",this._onLabelResizeStart,this);b.addEventListener("resizeEnd",this._onLabelResizeEnd,this);a.addEventListener("dispose",this._onColumnDispose,this);return b},_createDummyColumn:function(){var a=new rwt.widgets.base.GridColumnLabel(this._baseAppearance);this._footer&&a.addState("footer");a.setTop(0);a.setHeight("100%");a.setDirection(this.getDirection());a.addState("dummy");a.addEventListener("appear",this._onDummyRendered,this);a.setEnabled(!1);this.add(a);return a},_createFeedbackColumn:function(){var a=new rwt.widgets.base.GridColumnLabel(this._baseAppearance);a.addState("moving");a.setTop(0);a.setHeight("100%");a.setDirection(this.getDirection());a.setEnabled(!1);a.setZIndex(1E8);a.addState("mouseover");this.add(a);return a},_adjustScrollLeft:function(a){return rwt.widgets.base.Scrollable.adjustScrollLeft(this.getParent(),a)}}});rwt.qx.Class.define("rwt.widgets.GridColumn",{extend:rwt.qx.Target,include:rwt.widgets.util.HtmlAttributesMixin,construct:function(a,b){this.base(arguments);this._grid=a;this._isGroup=b?!0:!1;this._index=0;this._resizable=b?!1:!0;this._moveable=!1;this._alignment="left";this._headerWordWrap=this._wordWrap=!1;this._group=null;this._height=this._left=0;this._expanded=this._visibility=!0;this._width=0;this._toolTip=null;this._fixedRight=this._markupEnabled=!1;this._customVariant=null;this._text="";this._image=this._font=null;this._footerText="";this._footerImage=this._footerFont=null;this._footerSpan=1;this._sortDirection=null;this._check=this._showChevron=!1;this._grid.addColumn(this)},destruct:function(){this._grid.removeColumn(this);this.dispatchSimpleEvent("dispose",{target:this})},members:{setLeft:function(a){rwt.remote.EventUtil.getSuspended()?(this._left=a,this._update()):this._sendMove(a)},getLeft:function(){return this._left},setWidth:function(a){rwt.remote.EventUtil.getSuspended()?(this._width=a,this._update()):this._sendResize(a)},getWidth:function(){return this._width},setHeight:function(a){this._height=a;this._update()},getHeight:function(){return this._height},setVisibility:function(a){this._visibility=a;this._update()},getVisibility:function(){return this._visibility},setExpanded:function(a){this._expanded=a;this._update()},isExpanded:function(){return this._expanded},setGroup:function(a){this._group=a},getGroup:function(){return this._group},setMarkupEnabled:function(a){this._markupEnabled=a},isMarkupEnabled:function(){return this._markupEnabled},setFixedRight:function(a){this._fixedRight=a},isFixedRight:function(){return this._fixedRight},setToolTipText:function(a){this._toolTip=a;this._update()},getToolTipText:function(){return this._toolTip},setCustomVariant:function(a){this._customVariant=a;this._update()},getCustomVariant:function(){return this._customVariant?this._customVariant:this._grid.getRenderConfig().variant},setText:function(a){this._text=a;this._update()},getText:function(){return this._text},setImage:function(a){this._image=a;this._update()},getImage:function(){return this._image},setFont:function(a){this._font=a?rwt.html.Font.fromArray(a):null;this._update()},getFont:function(){return this._font},setFooterText:function(a){this._footerText=a;this._update()},getFooterText:function(){return this._footerText},setFooterImage:function(a){this._footerImage=a;this._update()},getFooterImage:function(){return this._footerImage},setFooterFont:function(a){this._footerFont=a?rwt.html.Font.fromArray(a):null;this._update()},getFooterFont:function(){return this._footerFont},setFooterSpan:function(a){this._footerSpan=a;this._update()},getFooterSpan:function(){return this._footerSpan},getFooterWidth:function(){var a=this._width;if(1<this._footerSpan)for(var b=this._grid.getColumnOrder(),c=b.indexOf(this),d=c+1;d<c+this._footerSpan;d++)b[d]&&(a+=b[d].getWidth());return a},setIndex:function(a){this._grid.setAlignment(a,this._alignment);this._grid.setWordWrap(a,this._wordWrap);this._index=a;this._update()},getIndex:function(){return this._index},setSortDirection:function(a){this._sortDirection=a;this._update()},getSortDirection:function(){return this._sortDirection},setResizable:function(a){this._resizable=a},getResizeable:function(){return this._resizable},setMoveable:function(a){this._moveable=a},getMoveable:function(){return this._moveable},setCheck:function(a){this._grid.setCellCheck(this._index,a);this._check=a},getCheck:function(){return this._check},handleSelectionEvent:function(a){rwt.remote.EventUtil.getSuspended()||(this._isGroup&&a.chevron?(a=rwt.remote.Connection.getInstance().getRemoteObject(this),a.set("expanded",!this._expanded),a.notify(this._expanded?"Collapse":"Expand")):rwt.remote.EventUtil.notifySelected(this))},setAlignment:function(a){this._grid.setAlignment(this._index,a);this._alignment=a;this._update()},getAlignment:function(){return this._alignment},setWordWrap:function(a){this._grid.setWordWrap(this._index,a);this._wordWrap=a;this._update()},getWordWrap:function(){return this._wordWrap},setHeaderWordWrap:function(a){this._headerWordWrap=a;this._update()},getHeaderWordWrap:function(){return this._headerWordWrap},setFixed:function(a){this._fixed=a;this._update()},isFixed:function(){return this._fixed},isGroup:function(){return this._isGroup},setShowChevron:function(a){this._showChevron=a},getShowChevron:function(){return this._showChevron},_update:function(){this.dispatchSimpleEvent("update")},_sendResize:function(a){rwt.remote.EventUtil.getSuspended()||rwt.remote.Connection.getInstance().getRemoteObject(this).call("resize",{width:a})},_sendMove:function(a){rwt.remote.EventUtil.getSuspended()||rwt.remote.Connection.getInstance().getRemoteObject(this).call("move",{left:a})}}});rwt.qx.Class.define("rwt.widgets.base.GridColumnLabel",{extend:rwt.widgets.base.MultiCellWidget,construct:function(a){this.base(arguments,["image","label","image"]);this._resizeStartX=0;this._hoverEffect=this._inMove=this._feedbackVisible=this._wasResizeOrMoveEvent=this._inResize=!1;this._initialLeft=0;this._chevron=null;this.setAppearance(a+"-column");this._resizeCursor=null;this.setHorizontalChildrenAlign("left");this.setOverflow("hidden");this.setFlexibleCell(1);this.expandFlexCell(!0);this.addEventListener("elementOver",this._onElementOver,this);this.addEventListener("elementOut",this._onElementOut,this);this.addEventListener("mouseover",this._onMouseOver,this);this.addEventListener("mousemove",this._onMouseMove,this);this.addEventListener("mouseout",this._onMouseOut,this);this.addEventListener("mousedown",this._onMouseDown,this);this.addEventListener("mouseup",this._onMouseUp,this);this.addEventListener("click",this._onClick,this)},members:{setLeft:function(a){this.base(arguments,a);this._hideDragFeedback(!0)},setText:function(a){var b=rwt.util.Encoding;a=b.escapeText(a,!1);a=b.replaceNewLines(a,"\x3cbr/\x3e");this.setCellContent(1,a)},setHtml:function(a){this.setCellContent(1,a)},updateLeftBorder:function(){this.$el.css("box-shadow","-1px 0px 8px rgba(0, 0, 0, 0.2)")},setImage:function(a){null===a?(this.setCellContent(0,null),this.setCellDimension(0,0,0)):(this.setCellContent(0,a[0]),this.setCellDimension(0,a[1],a[2]))},setHoverEffect:function(a){this._hoverEffect=a},setResizeCursor:function(a){this._resizeCursor=a},setSortIndicator:function(a){if(a){var b=rwt.theme.AppearanceManager.getInstance(),c={};c[a]=!0;null!==this._customVariant&&(c[this._customVariant]=!0);a=b.styleFrom(this.getAppearance()+"-sort-indicator",c).backgroundImage;this.setCellContent(2,a[0]);this.setCellDimension(2,a[1],a[2])}else this.setCellContent(2,null),this.setCellDimension(2,0,0)},setChevron:function(a){this._chevron=a;this._updateChevronImage(!1)},_onElementOver:function(a){this._chevron&&a.getDomTarget()===this.getCellNode(2)&&this._updateChevronImage(!0)},_onElementOut:function(a){this._chevron&&a.getDomTarget()===this.getCellNode(2)&&this._updateChevronImage(!1)},_updateChevronImage:function(a){if(this._chevron){var b=rwt.theme.AppearanceManager.getInstance(),c={};c[this._chevron]=!0;a&&(c.mouseover=!0);a=b.styleFrom(this.getAppearance()+"-chevron",c).backgroundImage;this.setCellContent(2,a[0]);this.setCellDimension(2,a[1],a[2])}else this.setCellContent(2,null),this.setCellDimension(2,0,0)},_onMouseOver:function(){!this._hoverEffect||this._inMove||this._inResize||this.addState("mouseover")},_onMouseDown:function(a){if(!this._inMove&&!this._inResize&&"left"===a.getButton())if(this._isResizeLocation(a.getPageX())&&this._allowResize()){this._inResize=!0;var b=this.getLeft()+this.getWidth();this.dispatchSimpleEvent("showResizeLine",{position:b},!0);this._resizeStartX=a.getPageX();this.setCapture(!0);a.stopPropagation();a.preventDefault();rwt.widgets.util.WidgetUtil._fakeMouseEvent(this,"mouseout")}else this._allowMove()&&(this._inMove=!0,this.setCapture(!0),this._initialLeft=a.getPageX(),a.stopPropagation(),a.preventDefault(),rwt.widgets.util.WidgetUtil._fakeMouseEvent(this,"mouseout"))},_onMouseMove:function(a){if(this._inResize){var b=this.getLeft()+this._getResizeWidth(a.getPageX());b<this.getLeft()+5&&(b=this.getLeft()+5);this.dispatchSimpleEvent("showResizeLine",{position:b},!0)}else this._inMove?(this.addState("mouseover"),b=this.getLeft()+this._getMouseOffset(a),this.dispatchSimpleEvent("showDragFeedback",{target:this,position:b}),this._feedbackVisible=!0):this._isResizeLocation(a.getPageX())?this.getTopLevelWidget().setGlobalCursor(this._resizeCursor):this.getTopLevelWidget().setGlobalCursor(null);a.stopPropagation();a.preventDefault()},_onMouseUp:function(a){var b=rwt.widgets.util.WidgetUtil;if(this._inResize){this.dispatchSimpleEvent("hideResizeLine",null,!0);this.getTopLevelWidget().setGlobalCursor(null);this.setCapture(!1);var c=this._getResizeWidth(a.getPageX());this.dispatchSimpleEvent("resizeEnd",{target:this,width:c});this._inResize=!1;this._wasResizeOrMoveEvent=!0;a.stopPropagation();a.preventDefault();b._fakeMouseEvent(a.getTarget(),"mouseover")}else this._inMove&&(this._inMove=!1,this.setCapture(!1),this.removeState("mouseover"),1<Math.abs(a.getPageX()-this._initialLeft)?(this._wasResizeOrMoveEvent=!0,c=this.getLeft()+this._getMouseOffset(a),this.dispatchSimpleEvent("moveEnd",{target:this,position:c})):this._hideDragFeedback(!1),a.stopPropagation(),a.preventDefault(),b._fakeMouseEvent(a.getTarget(),"mouseover"))},_getMouseOffset:function(a){return"rtl"===this.getDirection()?this._initialLeft-a.getPageX():a.getPageX()-this._initialLeft},_onClick:function(a){if(!this._wasResizeOrMoveEvent){var b={target:this};this._chevron&&(b.chevron=a.getDomTarget()===this.getCellNode(2),b.chevron&&this.setChevron("loading"));this.dispatchSimpleEvent("selected",b)}this._wasResizeOrMoveEvent=!1},_onMouseOut:function(a){this._inMove||this.removeState("mouseover");this._inResize||(this.getTopLevelWidget().setGlobalCursor(null),a.stopPropagation(),a.preventDefault())},_allowResize:function(){return this.dispatchSimpleEvent("resizeStart",{target:this})},_allowMove:function(){return this.dispatchSimpleEvent("moveStart",{target:this})},_hideDragFeedback:function(a){this._feedbackVisible&&(this.dispatchSimpleEvent("hideDragFeedback",{target:this,snap:a}),this._feedbackVisible=!1)},_isResizeLocation:function(a){var b=rwt.html.Location.getLeft(this.getElement());if("rtl"===this.getDirection())return a<=b+5&&a>=b;b+=this.getWidth();return a>=b-5&&a<=b},_getResizeWidth:function(a){a=this._resizeStartX-a;return"rtl"===this.getDirection()?this.getWidth()+a:this.getWidth()-a}}});rwt.remote.HandlerRegistry.add("rwt.widgets.GridColumn",{factory:function(a){var b;rwt.remote.HandlerUtil.callWithTarget(a.parent,function(a){b=new rwt.widgets.GridColumn(a);rwt.remote.HandlerUtil.addDestroyableChild(a,b)});return b},destructor:function(a){rwt.remote.HandlerUtil.removeDestroyableChild(a._grid,a);a.dispose()},properties:"index left width text image font footerText footerImage footerFont toolTipMarkupEnabled markupEnabled fixedRight toolTip resizable moveable alignment fixed group customVariant visibility check wordWrap headerWordWrap footerSpan data".split(" "),propertyHandler:{data:rwt.remote.HandlerUtil.getControlPropertyHandler("data"),toolTipMarkupEnabled:rwt.remote.HandlerUtil.getControlPropertyHandler("toolTipMarkupEnabled"),toolTip:rwt.remote.HandlerUtil.getControlPropertyHandler("toolTip"),group:function(a,b){rwt.remote.HandlerUtil.callWithTarget(b,function(b){a.setGroup(b)})}},events:["Selection"]});rwt.remote.HandlerRegistry.add("rwt.widgets.GridColumnGroup",{factory:function(a){var b,c=rwt.remote.HandlerUtil.createStyleMap(a.style);rwt.remote.HandlerUtil.callWithTarget(a.parent,function(a){b=new rwt.widgets.GridColumn(a,!0);b.setShowChevron(!0===c.TOGGLE);rwt.remote.HandlerUtil.addDestroyableChild(a,b)});return b},destructor:function(a){rwt.remote.HandlerUtil.removeDestroyableChild(a._grid,a);a.dispose()},properties:"left width height text image font expanded visibility customVariant markupEnabled headerWordWrap".split(" "),events:["Expand","Collapse"]});rwt.qx.Class.define("rwt.widgets.Browser",{extend:rwt.widgets.base.Iframe,construct:function(){this.base(arguments);this._browserFunctions={};this.setTabIndex(1);this.setSelectable(!0);this.setAppearance("browser");this.addEventListener("create",this._onCreate,this)},properties:{asynchronousResult:{check:"Boolean",init:!1},executedFunctionPending:{check:"Boolean",init:!1},executedFunctionResult:{nullable:!0,init:null},executedFunctionError:{check:"String",nullable:!0,init:null}},statics:{getDomain:function(a){var b=null;if(null!==a){a=a.toLowerCase();var c;0===a.indexOf("http://")?c=80:0===a.indexOf("https://")?c=443:0===a.indexOf("ftp://")?c=21:0===a.indexOf("ftps://")&&(c=990);c&&(b=a.slice(a.indexOf("://")+3),a=b.indexOf("/"),-1!==a&&(b=b.slice(0,a)),-1===b.indexOf(":")&&(b+=":"+c))}return b}},members:{syncSource:function(){this.isCreated()&&this._syncSource()},_applySource:function(){},_applyEnabled:function(a,b){this.base(arguments,a,b);a?this.release():this.block()},release:function(){this.getEnabled()&&this.base(arguments)},_onload:function(a){this._isInGlobalDisposeQueue||this.isDisposed()||(this.base(arguments,a),this._isContentAccessible()&&this._attachBrowserFunctions(),this._sendProgressEvent())},_onCreate:function(){this.getEnabled()||this.block()},_sendProgressEvent:function(){rwt.remote.ObjectRegistry.containsObject(this)&&rwt.remote.Connection.getInstance().getRemoteObject(this).notify("Progress")},execute:function(a){this._checkIframeAccess();var b=!0,c=null;try{c=this._parseEvalResult(this._eval(a))}catch(f){b=!1}a=rwt.remote.Connection.getInstance();var d=rwt.remote.ObjectRegistry.getId(this),e=b?"evaluationSucceeded":"evaluationFailed",b=b?{result:c}:{};a.getMessageWriter().appendCall(d,e,b);this.getExecutedFunctionPending()?a.sendImmediate(!1):a.send()},_srcInLocalDomain:function(){var a=this.getSource(),b=rwt.widgets.Browser,c=b.getDomain(document.URL),a=b.getDomain(a);return null===a||c===a},_isContentAccessible:function(){if(!this._isLoaded)return!1;var a=!1;try{var b=this.getSource()||"";-1===b.indexOf("://")&&(b=document.URL);a=-1!==b.indexOf(this.getContentDocument().domain)}catch(c){}return a},_checkIframeAccess:function(){if(!this._isContentAccessible()){var a=this._srcInLocalDomain();a||this._throwSecurityException(!1);this._isLoaded&&a&&this._throwSecurityException(!0)}},_throwSecurityException:function(a){var b=rwt.widgets.Browser,c=b.getDomain(document.URL);a=a?null:b.getDomain(this.getSource());throw Error("SecurityRestriction:\nBrowser-Widget can not access "+(null!==a?'"'+a+'"':"unkown domain")+(' from "'+c+'".'));},_eval:function(a){var b=this.getContentWindow();!b.eval&&b.execScript&&b.execScript("null;","JScript");return b.eval(a)},_parseEvalResult:function(a){var b=null,c=this.getContentWindow();a instanceof c.Function||a instanceof Function?b=this.toJSON([[]]):a instanceof c.Array||a instanceof Array?b=this.toJSON([a]):"object"!==typeof a&&"function"!==typeof a&&(b=this.toJSON([a]));return b},createFunction:function(a){this._browserFunctions[a]=!0;this._checkIframeAccess();if(this.isLoaded())try{this._createFunctionImpl(a),this._createFunctionWrapper(a)}catch(b){a='Unable to create function: "'+a+'".\n'+b;if(rwt.remote.EventUtil.getSuspended())throw a;rwt.runtime.ErrorHandler.processJavaScriptError(a)}},_attachBrowserFunctions:function(){for(var a in this._browserFunctions)this.createFunction(a)},_createFunctionImpl:function(a){var b=this.getContentWindow(),c=rwt.remote.Connection.getInstance(),d=rwt.remote.ObjectRegistry.getId(this),e=this;b[a+"_impl"]=function(){var b={};try{if(e.getExecutedFunctionPending())b.error='Unable to execute browser function "'+a+'". Another browser function is still pending.';else{var g={name:a,arguments:e.toJSON(arguments)};c.getMessageWriter().appendCall(d,"executeFunction",g);e.setExecutedFunctionResult(null);e.setExecutedFunctionError(null);e.setExecutedFunctionPending(!0);e.setAsynchronousResult(!1);c.sendImmediate(!1);if(e.getExecutedFunctionPending())e.setAsynchronousResult(!0);else{var h=e.getExecutedFunctionError();null!=h?b.error=h:b.result=e.getExecutedFunctionResult()}}}catch(k){rwt.runtime.ErrorHandler.processJavaScriptError(k)}return b}},_createFunctionWrapper:function(a){var b=[];b.push("window."+a+" \x3d function(){");b.push("  var result \x3d "+a+"_impl.apply( window, arguments );");b.push("  if( result.error ) {");b.push("    throw new Error( result.error );");b.push("  }");b.push("  return result.result;");b.push("}");this._eval(b.join(""))},destroyFunction:function(a){delete this._browserFunctions[a];if(null!=this.getContentWindow())try{var b=[];b.push("delete window."+a+";");b.push("delete window."+a+"_impl;");this._eval(b.join(""))}catch(c){throw Error("Unable to destroy function: "+a+" error: "+c);}},setFunctionResult:function(a,b,c){this.setExecutedFunctionResult(b);this.setExecutedFunctionError(c);this.setExecutedFunctionPending(!1)},toJSON:function(a){var b;b=typeof a;if(null===a)b=a;else if("object"===b){b=[];for(var c=0;c<a.length;c++)b.push(this.toJSON(a[c]))}else b="function"===b?String(a):a;return b},destroy:function(){this.base(arguments);this.syncSource()}}});rwt.remote.HandlerRegistry.add("rwt.widgets.Browser",{factory:function(a){var b=new rwt.widgets.Browser;rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);b.setUserData("isControl",!0);rwt.remote.HandlerUtil.setParent(b,a.parent);return b},destructor:rwt.remote.HandlerUtil.getControlDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:rwt.remote.HandlerUtil.extendControlProperties(["url","functionResult"]),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({url:function(a,b){a.setSource(b);a.isCreated()&&setTimeout(function(){a.syncSource()},0)},functionResult:function(a,b){a.setFunctionResult(b[0],b[1],b[2])}}),events:["Progress"],listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({}),methods:["evaluate","destroyFunctions","createFunctions"],methodHandler:{evaluate:function(a,b){a.execute(b.script)},createFunctions:function(a,b){for(var c=b.functions,d=0;d<c.length;d++)a.createFunction(c[d])},destroyFunctions:function(a,b){for(var c=b.functions,d=0;d<c.length;d++)a.destroyFunction(c[d])}}});rwt.qx.Class.define("rwt.widgets.ExternalBrowser",{extend:rwt.qx.Object,statics:{getInstance:function(){return rwt.runtime.Singletons.get(rwt.widgets.ExternalBrowser)}},members:{_map:{},open:function(a,b,c){a=this._escapeId(a);b=window.open(b,a,c,!0);null!=b&&(b.focus(),this._map[a]=b)},close:function(a){a=this._escapeId(a);var b=this._map[a];null!=b&&b.close();delete this._map[a]},_escapeId:function(a){a=a.replace(/_/g,"_0");a=a.replace(/-/g,"_1");a=a.replace(/\./g,"_");return a=a.replace(/ /g,"__")}}});rwt.remote.HandlerRegistry.add("rwt.widgets.ExternalBrowser",{factory:function(){return rwt.widgets.ExternalBrowser.getInstance()},destructor:rwt.util.Functions.returnTrue,methods:["open","close"],methodHandler:{open:function(a,b){var c=rwt.remote.HandlerUtil.createStyleMap(b.style),d="dependent\x3d1,scrollbars\x3d1,resizable\x3d1,",e="status\x3d".concat(c.STATUS?1:0,","),f="location\x3d".concat(c.LOCATION_BAR?1:0,","),g="toolbar\x3d".concat(c.NAVIGATION_BAR?1:0,","),c="menubar\x3d".concat(c.NAVIGATION_BAR?1:0),d=d.concat(e,f,g,c);a.open(b.id,b.url,d)},close:function(a,b){a.close(b.id)}}});rwt.qx.Class.define("rwt.widgets.util.FontSizeCalculation",{statics:{_wrapNode:null,_measureNode:null,_offset:rwt.client.Client.isZoomed()?1:0,measureItems:function(a){a=a.items;for(var b={},c=0;c<a.length;c++){var d=a[c],e=this._measureItem(d,!d[7]),d=d[0];b[d]=e}this._storeMeasurements(d,b)},_measureItem:function(a,b){var c=b?this._escapeText(a[1]):a[1],d={};rwt.html.Font.fromArray(a.slice(2,6)).renderStyle(d);return this.computeTextDimensions(c,d,0<a[6]?a[6]:null)},computeTextDimensions:function(a,b,c){var d=this._getMeasureNode(),e=this._getWrapNode(),f=d.style;f.fontFamily=b.fontFamily||"";f.fontSize=b.fontSize||"";f.fontWeight=b.fontWeight||"";f.fontStyle=b.fontStyle||"";d.innerHTML=a;c?(e.style.width=c+"px",e.style.whiteSpace="normal",f.whiteSpace="normal"):(e.style.width="auto",e.style.whiteSpace="nowrap",f.whiteSpace="nowrap");return this._measureElement(d)},_measureElement:rwt.util.Variant.select("qx.client",{"default":function(a){if(a.getBoundingClientRect){var b=a.getBoundingClientRect();a=null!=b.width&&null!=b.height?[Math.ceil(b.width),Math.round(b.height)]:[a.scrollWidth,a.scrollHeight]}else a=[a.scrollWidth,a.scrollHeight];return this._addOffset(a)},trident:function(a){a=window.getComputedStyle(a,null);a=[Math.ceil(parseFloat(a.width)),Math.round(parseFloat(a.height))];return this._addOffset(a)}}),_addOffset:function(a){return[0<a[0]?a[0]+this._offset:0,0<a[1]?a[1]+this._offset:0]},_getMeasureNode:function(){var a=this._measureNode;if(!a){var a=document.createElement("div"),b=a.style;b.width=b.height="auto";b.visibility="hidden";b.position="absolute";b.margin="0px";b.zIndex="-1";this._getWrapNode().appendChild(a);this._measureNode=a}return a},_getWrapNode:function(){var a=this._wrapNode;if(!a){var a=document.createElement("div"),b=a.style;b.width=b.height="auto";b.visibility="hidden";b.padding="0px";b.position="absolute";b.zIndex="-1";document.body.appendChild(a);this._wrapNode=a}return a},_storeMeasurements:function(a,b){rwt.remote.Connection.getInstance().getRemoteObject(this).call("storeMeasurements",{results:b})},_escapeText:function(a){var b=rwt.util.Encoding;a=b.escapeText(a,!0);a=b.replaceNewLines(a,"\x3cbr/\x3e");return a=b.replaceWhiteSpaces(a)}}});rwt.remote.HandlerRegistry.add("rwt.client.TextSizeMeasurement",{factory:function(){return rwt.widgets.util.FontSizeCalculation},service:!0,methods:["measureItems"]});rwt.qx.Class.define("rwt.widgets.Label",{extend:rwt.widgets.base.MultiCellWidget,include:rwt.widgets.util.OverStateMixin,construct:function(a){this.base(arguments,this._CELLORDER);this.setVerticalChildrenAlign("top");this.setAlignment("left");this.setAppearance("label-wrapper");a.WRAP&&(this.setFlexibleCell(1),this.setWordWrap(!0));this._markupEnabled=!0===a.MARKUP_ENABLED;this._mnemonicIndex=this._rawText=null},destruct:function(){this.setMnemonicIndex(null)},members:{_CELLORDER:["image","label"],setAlignment:function(a){this.setHorizontalChildrenAlign(a)},setImage:function(a){a?(this.setCellContent(0,a[0]),this.setCellDimension(0,a[1],a[2])):(this.setCellContent(0,null),this.setCellDimension(0,0,0))},setText:function(a){this._rawText=a;this._applyText(!1);this._mnemonicIndex=null;this.dispatchSimpleEvent("changeText",this)},setMnemonicIndex:function(a){this._mnemonicIndex=a;var b=rwt.widgets.util.MnemonicHandler.getInstance();"number"===typeof a&&0<=a?b.add(this,this._onMnemonic):b.remove(this)},getMnemonicIndex:function(){return this._mnemonicIndex},_applyText:function(a){var b=this._rawText;if(b){if(!this._markupEnabled)var c=rwt.util.Encoding,b=c.escapeText(this._rawText,a?this._mnemonicIndex:void 0),b=c.replaceNewLines(b,"\x3cbr/\x3e"),b=c.replaceWhiteSpaces(b);this.setCellContent(1,b)}else this.setCellContent(1,null)},_onMnemonic:function(a){switch(a.type){case "show":this._applyText(!0);break;case "hide":this._applyText(!1);break;case "trigger":var b=this._rawText.toUpperCase().charCodeAt(this._mnemonicIndex);a.charCode===b&&((b=this.getNextSibling())&&b.getVisibility()&&b.getEnabled()&&b.focus(),a.success=!0)}},setTopMargin:function(a){this.setPaddingTop(a)},setLeftMargin:function(a){this.setPaddingLeft(a)},setRightMargin:function(a){this.setPaddingRight(a)},setBottomMargin:function(a){this.setPaddingBottom(a)}}});rwt.qx.Class.define("rwt.widgets.base.BasicButton",{extend:rwt.widgets.base.MultiCellWidget,construct:function(a,b){this.base(arguments,this._CELLORDER);this._selected=!1;this._image=[null,null,null];this._hotImage=[null,null,null];this.addEventListener("mouseover",this._onMouseOver);this.addEventListener("mouseout",this._onMouseOut);this.addEventListener("mousedown",this._onMouseDown);this.addEventListener("mouseup",this._onMouseUp);b||(this.addEventListener("keydown",this._onKeyDown),this.addEventListener("keyup",this._onKeyUp),this.addEventListener("keypress",this._onKeyPress));this.addState(a);switch(a){case "arrow":case "push":this._isDeselectable=this._isSelectable=!1;break;case "toggle":case "check":this._isDeselectable=this._isSelectable=!0;break;case "radio":this._isSelectable=!0,this.setNoRadioGroup(!1),rwt.widgets.util.RadioButtonUtil.registerExecute(this),rwt.widgets.util.RadioButtonUtil.registerKeypress(this)}},destruct:function(){null!=this._animation&&this._animation.dispose();this._animation=null},events:{stateOverChanged:"rwt.event.Event"},properties:{selectionIndicator:{apply:"_applySelectionIndicator",nullable:!0,themeable:!0},icon:{apply:"_applyIcon",nullable:!0,themeable:!0},animation:{check:"Object",nullable:!1,init:null,apply:"_applyAnimation",themeable:!0}},members:{_CELLORDER:["image","image","label"],_applyIcon:function(a){this.setImage.apply(this,a)},setImage:function(a,b,c){this._image=[a,b,c];this._updateButtonImage()},getImage:function(){return this._image},setHotImage:function(a,b,c){this._hotImage=[a,b,c];this._updateButtonImage()},_updateButtonImage:function(){var a=null!=this._hotImage[0]&&this.hasState("over")?this._hotImage:this._image;this.getCellContent(1)!=a[0]&&(this.setCellContent(1,a[0]),this.setCellDimension(1,a[1],a[2]))},setText:function(a){this.setCellContent(2,a)},_applySelectionIndicator:function(a){var b=a?a[1]:0,c=a?a[2]:0;this.setCellContent(0,a?a[0]:null);this.setCellDimension(0,b,c)},setGrayed:function(a){this.toggleState("grayed",a)},setNoRadioGroup:function(a){this.hasState("radio")&&(this._isDeselectable=this._noRadioGroup=a)},getNoRadioGroup:function(){return this._noRadioGroup},execute:function(){this.base(arguments);this._isSelectable?this.setSelection(!(this._selected&&this._isDeselectable)):this._notifySelected()},setSelection:function(a){var b=this._selected,c=this._selected!=a;c&&(this._selected=a,this.toggleState("selected",a),rwt.remote.EventUtil.getSuspended()||rwt.remote.Connection.getInstance().getRemoteObject(this).set("selection",this._selected));(c||b)&&this._notifySelected()},_notifySelected:function(){},_onMouseOver:function(a){a.getTarget()!=this||this.hasState("over")||(this.hasState("abandoned")&&(this.removeState("abandoned"),this.addState("pressed")),this.addState("over"),this._updateButtonImage(),this.createDispatchEvent("stateOverChanged"))},_onMouseOut:function(a){a.getTarget()==this&&(this.removeState("over"),this._updateButtonImage(),this.hasState("pressed")&&(this.setCapture(!0),this.removeState("pressed"),this.addState("abandoned")),this.createDispatchEvent("stateOverChanged"))},_onMouseDown:function(a){a.getTarget()==this&&a.isLeftButtonPressed()&&(this.removeState("abandoned"),this.addState("pressed"))},_onMouseUp:function(){this.setCapture(!1);var a=this.hasState("pressed"),b=this.hasState("abandoned");a&&this.removeState("pressed");b&&this.removeState("abandoned");b||(this.addState("over"),this._updateButtonImage(),a&&this.execute())},_onKeyDown:function(a){switch(a.getKeyIdentifier()){case "Enter":case "Space":this.removeState("abandoned"),this.addState("pressed"),a.stopPropagation()}},_onKeyUp:function(a){switch(a.getKeyIdentifier()){case "Enter":case "Space":this.hasState("pressed")&&(this.removeState("abandoned"),this.removeState("pressed"),this.execute(),a.preventDefault(),a.stopPropagation())}},_onKeyPress:function(a){switch(a.getKeyIdentifier()){case "Left":case "Up":case "Right":case "Down":case "PageUp":case "PageDown":case "End":case "Home":case "Enter":case "Space":a.preventDefault(),a.stopPropagation()}},_applyAnimation:function(a){a.hoverIn||a.hoverOut?(null==this._animation&&(this._animation=new rwt.animation.Animation,this._animation.addEventListener("init",this._initAnimation,this)),this.addEventListener("stateOverChanged",this._animation.activateRendererOnce,this._animation),this.addEventListener("changeBackgroundGradient",this._configureRenderer,this),this._configureRenderer()):null!=this._animation&&(this.removeEventListener("stateOverChanged",this._animation.activateRendererOnce,this._animation),this.removeEventListener("changeBackgroundGradient",this._configureRenderer,this))},_configureRenderer:function(a){if(!a||null==a.getValue()||null==a.getOldValue()){this._animation.skip();a=this._animation.getDefaultRenderer(!1);var b=null!=this.getBackgroundGradient()?"backgroundGradient":"backgroundColor";a.animate(this,b,rwt.animation.AnimationRenderer.ANIMATION_CHANGE)}},_initAnimation:function(){if(this.hasState("pressed"))this._animation.cancel();else{var a=this.getAnimation();this.hasState("over")&&a.hoverIn?this._animation.setProperties(a.hoverIn):!this.hasState("over")&&a.hoverOut?this._animation.setProperties(a.hoverOut):this._animation.cancel()}},_renderAppearance:function(){this.base(arguments);null==this._animation||this._animation.isStarted()||this._animation.getDefaultRenderer().cancelActivateOnce()}}});(function(a){rwt.qx.Class.define("rwt.widgets.ToolItem",{extend:rwt.widgets.base.BasicButton,construct:function(b,c){this.base(arguments,b);this._isDropDown=!1;this.setAppearance("toolbar-button");"dropDown"==b&&(this._isDropDown=!0,this._isDeselectable=this._isSelectable=!1,this._sendEvent=!0,this.$dropDownArrow=a("\x3cdiv\x3e").css({position:"absolute"}),this.$separator=a("\x3cdiv\x3e").css({position:"absolute",top:0,right:0,left:"auto",width:1,height:"100%"}));c&&this.addState("rwt_VERTICAL");this._mnemonicIndex=this._rawText=null;this.removeEventListener("keydown",this._onKeyDown);this.removeEventListener("keyup",this._onKeyUp);this.addEventListener("changeParent",this._onChangeParent,this)},destruct:function(){this.setMnemonicIndex(null)},properties:{dropDownArrow:{apply:"_applyDropDownArrow",nullable:!0,themeable:!0},separatorBorder:{nullable:!0,init:null,apply:"_applySeparatorBorder",themeable:!0}},members:{_onKeyPress:function(a){this.getParent().dispatchEvent(a);this.base(arguments,a)},setText:function(a){this._rawText=a;this._mnemonicIndex=null;this._applyText(!1);this.dispatchSimpleEvent("changeText")},computeBadgePosition:function(){return[3,3,"auto","auto"]},setMnemonicIndex:function(a){this._mnemonicIndex=a;var b=rwt.widgets.util.MnemonicHandler.getInstance();"number"===typeof a&&0<=a?b.add(this,this._onMnemonic):b.remove(this)},getMnemonicIndex:function(){return this._mnemonicIndex},_applyText:function(a){this._rawText?(a=rwt.util.Encoding.escapeText(this._rawText,a?this._mnemonicIndex:void 0),this.setCellContent(2,a)):this.setCellContent(2,null)},_onMnemonic:function(a){switch(a.type){case "show":this._applyText(!0);break;case "hide":this._applyText(!1);break;case "trigger":var b=this._rawText.toUpperCase().charCodeAt(this._mnemonicIndex);a.charCode===b&&(this.execute(),a.success=!0)}},_onMouseDown:function(a){a.getTarget()==this&&a.isLeftButtonPressed()&&(this.removeState("abandoned"),this._isDropDownClick(a)?this._onDropDownClick():this.addState("pressed"))},_isDropDownClick:function(a){return this.$separator?"rtl"===this.getDirection()?a.getClientX()<this.$separator.offset().left:a.getClientX()>this.$separator.offset().left:!1},_onDropDownClick:function(){this._sendEvent&&rwt.remote.EventUtil.notifySelected(this,0,0,0,0,"arrow");this.dispatchSimpleEvent("dropDownClicked")},_applyDropDownArrow:function(a){if(this._isDropDown){var b="rtl"===this.getDirection(),d=a?a[1]:0;this.$dropDownArrow.css({backgroundImage:a?a[0]:null,width:d,height:a?a[2]:0,right:b?"":this.getSpacing(),left:b?this.getSpacing():""});a=d+2*this.getSpacing();this.$separator.css({right:b?"":a,left:b?a:""})}},_applySeparatorBorder:function(){if(this._isDropDown){var a=this.getSeparatorBorder();this.$separator.css({borderLeftWidth:(a.getWidthLeft()||0)+"px",borderLeftStyle:a.getStyleLeft()||"none",borderLeftColor:a.getColorLeft()||""})}},_createSubElements:function(){this.base(arguments);this._isDropDown&&(this.$dropDownArrow.appendTo(this),this.$separator.appendTo(this))},_afterRenderLayout:function(a){if(this._isDropDown&&a.layoutY){a=this.getInnerHeight();var b=(this.getDropDownArrow()||[null,0,0])[2];this.$dropDownArrow.css("top",Math.round(this.getPaddingTop()+a/2-b/2))}},_getAvailableInnerWidth:function(){if(!this._isDropDown)return this.getInnerWidth();var a=(this.getDropDownArrow()||[null,0,0])[1];return Math.max(0,this.getInnerWidth()-a-1-2*this.getSpacing())},_notifySelected:function(){rwt.remote.EventUtil.notifySelected(this)},_onChangeParent:function(a){var b=a.getOldValue();a=a.getValue();b?this._toggleFirstLastState(b):this._toggleFirstLastState(a);a&&(this.setDirection(a.getDirection()),this.toggleState("rwt_RIGHT",a.hasState("rwt_RIGHT")),this.toggleState("rwt_FLAT",a.hasState("rwt_FLAT")))},_toggleFirstLastState:function(a){var b,d;a.forEachVisibleChild(function(){this instanceof rwt.widgets.ToolItem&&(this.toggleState("first",!1),this.toggleState("last",!1),b||(b=this),d=this)});b&&(b.toggleState("first",!0),d.toggleState("last",!0))}}})})(rwt.util._RWTQuery);rwt.qx.Class.define("rwt.widgets.Group",{extend:rwt.widgets.base.Parent,construct:function(){this.base(arguments);this._frame=new rwt.widgets.base.Parent;this._frame.setAppearance("group-box-frame");this.add(this._frame);this._legend=new rwt.widgets.base.MultiCellWidget(["label"]);this._legend.setAppearance("group-box-legend");this.add(this._legend);this.setOverflow("hidden");this.setEnableElementFocus(!1);var a=new rwt.theme.ThemeValues({});this._themeBackgroundColor=a.getCssColor("Group-Label","background-color");a.dispose();this._legend.addEventListener("mouseover",this._onMouseOver,this);this._legend.addEventListener("mouseout",this._onMouseOut,this);this._legend.setTop(0);this._legend.setLeft(0);rwt.widgets.base.Widget.disableScrolling(this)},destruct:function(){this._disposeObjects("_legend","_frame");this.setMnemonicIndex(null)},properties:{appearance:{refine:!0,init:"group-box"}},members:{setText:function(a){this._rawText=a;this._mnemonicIndex=null;this._applyText(!1)},setMnemonicIndex:function(a){this._mnemonicIndex=a;var b=rwt.widgets.util.MnemonicHandler.getInstance();"number"===typeof a&&0<=a?b.add(this,this._onMnemonic):b.remove(this)},getMnemonicIndex:function(){return this._mnemonicIndex},_onMnemonic:function(a){switch(a.type){case "show":this._applyText(!0);break;case "hide":this._applyText(!1);break;case "trigger":var b=this._rawText.toUpperCase().charCodeAt(this._mnemonicIndex);a.charCode===b&&(b=this._findFirstFocusableChild(this),null!=b&&b.focus(),a.success=!0)}},_applyText:function(a){var b=rwt.util.Encoding;this._rawText?(a=b.escapeText(this._rawText,a?this._mnemonicIndex:void 0),this.hasState("rwt_WRAP")&&(a=b.replaceNewLines(a,"\x3cbr/\x3e")),this._setLegend(a)):this._setLegend(null)},_getSubWidgets:function(){return[this._legend,this._frame]},_applyBackgroundColor:function(a,b){this.base(arguments,a,b);"undefined"===this._themeBackgroundColor&&this._legend.setBackgroundColor(a)},_applyFont:function(a,b){this.base(arguments,a,b);this._legend.setFont(a)},_onMouseOver:function(){this._legend.addState("over");this._frame.addState("over")},_onMouseOut:function(){this._legend.removeState("over");this._frame.removeState("over")},_applyDirection:function(a){this.base(arguments,a);this.getLayoutImpl().setMirror("rtl"===a)},_layoutPost:function(a){this.base(arguments,a);this._frame._layoutPost(a)},applyObjectId:function(a){this.base(arguments,a);this._legend.applyObjectId(a+"-label")},_setLegend:function(a){""!==a&&null!==a?(this._legend.setCellContent(0,a),this._legend.setDisplay(!0)):this._legend.setDisplay(!1)},_findFirstFocusableChild:function(a){var b=rwt.remote.ObjectRegistry,c=rwt.widgets.util.WidgetUtil,d=null;a=c.getChildIds(a);for(var e=0;e<a.length&&null===d;e++){var f=b.getObject(a[e]);c.getChildIds(f)?d=this._findFirstFocusableChild(f):f.isSeeable()&&f.isEnabled()&&(d=f)}return d}}});rwt.remote.HandlerRegistry.add("rwt.widgets.Group",{factory:function(a){var b=new rwt.widgets.Group;rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);b.setUserData("isControl",!0);rwt.remote.HandlerUtil.setParent(b,a.parent);return b},destructor:rwt.remote.HandlerUtil.getControlDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:rwt.remote.HandlerUtil.extendControlProperties(["text","mnemonicIndex"]),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({}),listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({})});rwt.qx.Class.define("rwt.widgets.Shell",{extend:rwt.widgets.base.Window,include:rwt.animation.VisibilityAnimationMixin,construct:function(a){this.base(arguments);this.setShowMinimize(!0===a.MIN);this.setAllowMinimize(!0===a.MIN);this.setShowMaximize(!0===a.MAX);this.setAllowMaximize(!0===a.MAX);this.setShowClose(!0===a.CLOSE);this.setAllowClose(!0===a.CLOSE);this.setResizableWest(!0===a.RESIZE);this.setResizableNorth(!0===a.RESIZE);this.setResizableEast(!0===a.RESIZE);this.setResizableSouth(!0===a.RESIZE);this.setOverflow("hidden");this.setRestrictToPageOnOpen(!1);this._captionTitle.setMode("html");this._parentShell=this._focusControl=this._activeControl=null;this._renderZIndex=!0;this._sendBoundsTimer=new rwt.client.Timer(0);this._sendBoundsTimer.addEventListener("interval",this._sendBounds,this);this._sendResizeDelayed=this._sendResizeFlag=this._sendMoveFlag=!1;this.addEventListener("changeActiveChild",this._onChangeActiveChild);this.addEventListener("changeFocusedChild",this._onChangeFocusedChild);this.addEventListener("changeActive",this._onChangeActive);this.addEventListener("changeLeft",this._onChangeLocation,this);this.addEventListener("changeTop",this._onChangeLocation,this);this.addEventListener("changeWidth",this._onChangeSize,this);this.addEventListener("changeHeight",this._onChangeSize,this);this.addEventListener("keydown",this._onKeydown);rwt.remote.Connection.getInstance().addEventListener("send",this._onSend,this);this.getCaptionBar().setWidth("100%");this.removeEventListener("mousedown",this._onwindowmousedown);this.addEventListener("create",this._onCreate,this);this.__onwindowmousedown=rwt.util.Functions.bind(this._onwindowmousedown,this);this.addToDocument()},statics:{TOP_LEFT:"topLeft",TOP_RIGHT:"topRight",BOTTOM_LEFT:"bottomLeft",BOTTOM_RIGHT:"bottomRight",CORNER_NAMES:["topLeft","topRight","bottomLeft","bottomRight"],_onParentClose:function(){rwt.remote.EventUtil.getSuspended()||this.doClose()},reorderShells:function(a){a=rwt.util.Objects.getValues(a.getAll());a=a.sort(rwt.widgets.Shell._compareShells);var b=a.length,c=null;if(0<b){for(var d=a[0].getTopLevelWidget(),e=rwt.widgets.Shell.MIN_ZINDEX,f=0;f<b;f++)e+=10,a[f].setZIndex(e),a[f]._appModal&&a[f].getVisibility()&&a[f].getDisplay()&&(c=a[f]);null!=c?(this._copyStates(c,d._getBlocker()),d._getBlocker().show(),d._getBlocker().setZIndex(c.getZIndex()-1)):d._getBlocker().hide()}rwt.widgets.Shell._upperModalShell=c},_copyStates:function(a,b){b.__states={};for(var c in a.__states)a._isRelevantState(c)&&b.addState(c);b._renderAppearance();rwt.widgets.base.Widget.removeFromGlobalLayoutQueue(b)},_compareShells:function(a,b){var c=0;a.isDialogOf(b)?c=1:b.isDialogOf(a)&&(c=-1);0===c&&(c=(a._onTop?1:0)-(b._onTop?1:0));0===c&&(c=(a._appModal?1:0)-(b._appModal?1:0));if(0===c)var c=a.getTopLevelShell(),d=b.getTopLevelShell(),c=c.getZIndex()-d.getZIndex();0===c&&(c=a.getZIndex()-b.getZIndex());return c},MIN_ZINDEX:1E5,MAX_ZINDEX:1E7},destruct:function(){this.setParentShell(null);rwt.remote.Connection.getInstance().removeEventListener("send",this._onSend,this);rwt.widgets.base.ClientDocument.getInstance().removeEventListener("windowresize",this._onWindowResize,this);this.isCreated()&&this.getElement().removeEventListener("mousedown",this.__onwindowmousedown,!1);this._disposeObjects("_sendBoundsTimer")},members:{destroy:function(){this.doClose();this.getWindowManager().remove(this);this.base(arguments)},_onCreate:function(){this.getElement().addEventListener("mousedown",this.__onwindowmousedown,!1);this.removeEventListener("create",this._onCreate,this)},_beforeAppear:function(){rwt.widgets.base.Parent.prototype._beforeAppear.call(this);rwt.widgets.util.PopupManager.getInstance().update();var a=this.getWindowManager().getActiveWindow();this.getWindowManager().add(this);this.getWindowManager().setActiveWindow(a)},setDefaultButton:function(a){this._defaultButton=a;this._renderHighlightButton()},_renderHighlightButton:function(){var a=this._defaultButton,b=this.getFocusedChild();b instanceof rwt.widgets.Button&&b.hasState("push")&&(a=b);null!=this._highlightButton&&this._highlightButton.removeState("default");this._highlightButton=a;null!=this._highlightButton&&this._highlightButton.addState("default")},getDefaultButton:function(){return this._defaultButton},setParentShell:function(a){var b=this._parentShell;this._parentShell=a;var c=rwt.widgets.Shell._onParentClose;null!=b&&b.removeEventListener("close",c,this);null!=a&&a.addEventListener("close",c,this);this.dispatchSimpleEvent("parentShellChanged")},isDisableResize:function(){return this._disableResize?!0:!1},setActiveControl:function(a){this._activeControl=a},initialize:function(){this.setShowCaption(this.hasState("rwt_TITLE"));this._onTop=null!=this._parentShell&&this._parentShell._onTop||this.hasState("rwt_ON_TOP");(this._appModal=this.hasState("rwt_APPLICATION_MODAL")||this.hasState("rwt_PRIMARY_MODAL")||this.hasState("rwt_SYSTEM_MODAL"))&&this.setStyleProperty("position","fixed")},addState:function(a){this.base(arguments,a);if(this._isRelevantState(a)){this._captionBar.addState(a);this._captionTitle.addState(a);this._minimizeButton.addState(a);this._maximizeButton.addState(a);this._restoreButton.addState(a);this._closeButton.addState(a);var b=this._getClientDocumentBlocker();null!=b&&b.addState(a)}},removeState:function(a){this.base(arguments,a);if(this._isRelevantState(a)){this._captionBar.removeState(a);this._captionTitle.removeState(a);this._minimizeButton.removeState(a);this._maximizeButton.removeState(a);this._restoreButton.removeState(a);this._closeButton.removeState(a);var b=this._getClientDocumentBlocker();null!=b&&b.removeState(a)}},_getClientDocumentBlocker:function(){var a=null;this._appModal&&rwt.widgets.Shell._upperModalShell==this&&(a=this.getTopLevelWidget()._getBlocker());return a},_isRelevantState:function(a){return"active"==a||"maximized"==a||"minimized"==a||"variant_"==a.substr(0,8)||"rwt_"==a.substr(0,4)},close:function(){rwt.remote.EventUtil.getSuspended()||rwt.remote.Connection.getInstance().getRemoteObject(this).notify("Close")},doClose:function(){if(!this.isDisposed()){this.hide();if(this.hasEventListeners("close")){var a=new rwt.event.DataEvent("close",this);this.dispatchEvent(a,!0)}a=this.getWindowManager();rwt.widgets.Shell.reorderShells(a)}},_onChangeActiveChild:function(a){a=this._getParentControl(a.getValue());if(!rwt.remote.EventUtil.getSuspended()&&null!=a&&a!==this._activeControl){this._notifyDeactivate(this._activeControl,a);var b=rwt.remote.WidgetManager.getInstance().findIdByWidget(a);rwt.remote.Connection.getInstance().getRemoteObject(this).set("activeControl",b);this._notifyActivate(this._activeControl,a);this._activeControl=a}},_notifyDeactivate:function(a,b){for(var c=a;null!=c&&!this._hasDeactivateListener(c);)c=c.getParent?c.getParent():null;null==c||c.contains(b)||rwt.remote.Connection.getInstance().getRemoteObject(c).notify("Deactivate")},_notifyActivate:function(a,b){for(var c=b;null!=c&&!this._hasActivateListener(c);)c=c.getParent?c.getParent():null;null==c||c.contains(a)||rwt.remote.Connection.getInstance().getRemoteObject(c).notify("Activate")},_hasDeactivateListener:function(a){return!0===a.getUserData("deactivateListener")},_hasActivateListener:function(a){return!0===a.getUserData("activateListener")},_onChangeFocusedChild:function(){rwt.remote.EventUtil.getSuspended()&&(this._focusControl=this.getFocusedChild());this._renderHighlightButton()},_onChangeActive:function(a){this.getActive()||isFinite(this.getZIndex())||this.setZIndex(1E8);!rwt.remote.EventUtil.getSuspended()&&this.getActive()&&rwt.remote.Connection.getInstance().getRemoteObject(this).notify("Activate");a.getValue()&&(a=rwt.widgets.Shell._upperModalShell,null!=a&&a.getZIndex()>this.getZIndex()&&(this.setActive(!1),a.setActive(!0)))},_applyMode:function(a,b){var c=null==a?"normal":a;rwt.remote.Connection.getInstance().getRemoteObject(this).set("mode",c);c=rwt.widgets.base.ClientDocument.getInstance();"maximized"==a?(this._sendBoundsTimer.start(),c.addEventListener("windowresize",this._onWindowResize,this)):c.removeEventListener("windowresize",this._onWindowResize,this);this.base(arguments,a,b)},_onWindowResize:function(){this._sendResizeFlag=this._sendResizeDelayed=!0;this._sendBounds()},_onChangeSize:function(){rwt.remote.EventUtil.getSuspended()||(this._sendResizeFlag=!0,this._sendBoundsTimer.start())},_onChangeLocation:function(){rwt.remote.EventUtil.getSuspended()||(this._sendMoveFlag=!0,this._sendBoundsTimer.start())},_sendBounds:function(){this._sendBoundsTimer.stop();var a=this._parseNumber(this.getLeft()),b=this._parseNumber(this.getTop()),c=this._parseNumber(this.getHeightValue()),d=this._parseNumber(this.getWidthValue()),e=rwt.remote.Connection.getInstance().getRemoteObject(this);e.set("bounds",[a,b,d,c]);this._sendMoveFlag&&e.notify("Move",{});this._sendResizeFlag&&e.notify("Resize",{},this._sendResizeDelayed?500:void 0);this._sendResizeDelayed=this._sendResizeFlag=this._sendMoveFlag=!1},_parseNumber:function(a){a=parseInt(a,10);return isNaN(a)?0:a},_onKeydown:function(a){var b=a.getKeyIdentifier();"Enter"!=b||a.isShiftPressed()||a.isAltPressed()||a.isCtrlPressed()||a.isMetaPressed()?"Escape"==b&&null!=this._parentShell&&this.close():(a=this.getDefaultButton(),null!=a&&a.isSeeable()&&a.getEnabled()&&(a.setFocused(!0),a.execute()))},_onSend:function(){if(this.getActive()){var a=this.getFocusedChild();null!=a&&a!=this._focusControl&&(this._focusControl=a,a=rwt.remote.WidgetManager.getInstance().findIdByWidget(a),rwt.remote.Connection.getInstance().getRemoteObject(rwt.widgets.Display.getCurrent()).set("focusControl",a))}},_getParentControl:function(a){for(var b=rwt.remote.WidgetManager.getInstance();null!=a&&!b.isControl(a);)a=a.getParent?a.getParent():null;return a},isDialogOf:function(a){for(var b=!1,c=this._parentShell;!b&&null!=c;)b=a===c,c=c._parentShell;return b},getTopLevelShell:function(){for(var a=this;null!=a._parentShell;)a=a._parentShell;return a},_sendTo:function(){rwt.widgets.Shell.reorderShells(this.getWindowManager())},bringToFront:function(){for(var a=this;null!=a._parentShell;)a=a._parentShell;this._setRenderZIndex(!1);this.setZIndex(rwt.widgets.Shell.MAX_ZINDEX+1);a.setZIndex(rwt.widgets.Shell.MAX_ZINDEX+1);rwt.widgets.Shell.reorderShells(this.getWindowManager());this._setRenderZIndex(!0)},_applyZIndex:function(a,b){this._renderZIndex&&this.base(arguments,a,b)},_setRenderZIndex:function(a){(this._renderZIndex=a)&&this._applyZIndex(this.getZIndex())},_applyDirection:function(a){this.base(arguments,a);var b="rtl"===a;this.getCaptionBar().setReverseChildrenOrder(b);this.getCaptionBar().setHorizontalChildrenAlign(b?"right":"left");this.getLayoutImpl().setMirror(b)},setBlocked:function(a){a?(this._blocker||(this._blocker=new rwt.widgets.base.Parent,this._blocker.setAppearance("client-document-blocker"),this.add(this._blocker)),this._blocker.setSpace(0,0,1E4,1E4),this._blocker.setZIndex(1E3)):this._blocker&&(this.remove(this._blocker),this._blocker.destroy(),this._blocker=null)},setFullScreen:function(a){a?this._captionBar.setDisplay(!1):this._captionBar.setDisplay(this.hasState("rwt_TITLE"))}}});rwt.remote.HandlerRegistry.add("rwt.widgets.Shell",{factory:function(a){var b=rwt.remote.HandlerUtil,c=b.createStyleMap(a.style),d=new rwt.widgets.Shell(c);b.addStatesForStyles(d,a.style);d.setUserData("isControl",!0);b.callWithTarget(a.parentShell,function(a){a&&d.setParentShell(a);d.initialize()});return d},destructor:rwt.remote.HandlerUtil.getControlDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:rwt.remote.HandlerUtil.extendControlProperties("showMinimize allowMinimize showMaximize allowMaximize showClose allowClose resizable image text alpha active mode hasShellListener minimumSize defaultButton activeControl".split(" ")),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({bounds:function(a,b){a.isDisableResize()||(a.setLeft(b[0]),a.setTop(b[1]),a.setWidth(b[2]),a.setHeight(b[3]))},alpha:function(a,b){a.setOpacity(b/255)},defaultButton:function(a,b){rwt.remote.HandlerUtil.callWithTarget(b,function(b){a.setDefaultButton(b)})},activeControl:function(a,b){rwt.remote.HandlerUtil.callWithTarget(b,function(b){a.setActiveControl(b)})},mode:function(a,b){var c="fullscreen"===b;a.setMode(c?"maximized":b);a.setFullScreen(c)},minimumSize:function(a,b){a.setMinWidth(b[0]);a.setMinHeight(b[1])},text:function(a,b){var c=rwt.util.Encoding.escapeText(b,!1);a.setCaption(c)},image:function(a,b){null===b?a.setIcon(b):a.setIcon(b[0])},visibility:function(a,b){b?a.show():a.hide();rwt.widgets.Shell.reorderShells(a.getWindowManager())}}),events:["Activate","Close","Resize","Move"],listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({})});(function(){var a=rwt.util.RWTQuery;rwt.qx.Class.define("rwt.widgets.ProgressBar",{extend:rwt.widgets.base.Parent,construct:function(b,c){this.base(arguments);this.$el=a(this);this._indet=c||!1;this._vertical=b||!1;this._minimum=0;this._maximum=100;this._selection=0;this._createIndicator();this._createTimer();this.setOverflow("hidden");this.setState("normal");this.setAppearance("progressbar")},destruct:function(){null!=this._timer&&this._timer.dispose();this._timer=null},statics:{UNDETERMINED_SIZE:40},properties:{indicatorColor:{nullable:!0,init:null,apply:"_applyIndicatorColor",themeable:!0},indicatorImage:{nullable:!0,init:null,apply:"_applyIndicatorImage",themeable:!0},indicatorGradient:{nullable:!0,init:null,apply:"_applyIndicatorGradient",themeable:!0},indicatorOpacity:{nullable:!0,init:1,apply:"_applyIndicatorOpacity",themeable:!0}},members:{setMinimum:function(a){this._minimum=a;this.addToQueue("indicatorSelection");this.dispatchSimpleEvent("minimumChanged")},setMaximum:function(a){this._maximum=a;this.addToQueue("indicatorSelection");this.dispatchSimpleEvent("maximumChanged")},setSelection:function(a){this._selection=a;this.addToQueue("indicatorSelection");this.dispatchSimpleEvent("selectionChanged",this);this.dispatchSimpleEvent("updateToolTip",this)},getMinimum:function(){return this._minimum},getMaximum:function(){return this._maximum},getSelection:function(){return this._selection},setState:function(a){"error"==a?(this.removeState("normal"),this.removeState("paused"),this.addState("error")):"paused"==a?(this.removeState("normal"),this.removeState("error"),this.addState("paused")):(this.removeState("error"),this.removeState("paused"),this.addState("normal"))},getToolTipTargetBounds:function(){return this.isVertical()?{top:this.getBoxHeight()-this._cachedBorderLeft-this._indicator.offsetHeight,left:0,width:this.getBoxWidth(),height:1}:this.isIndeterminate()?{left:0,top:0,width:this.getBoxWidth(),height:this.getBoxHeight()}:{left:this._cachedBorderLeft+this._indicator.offsetWidth,top:0,width:1,height:this.getBoxHeight()}},isIndeterminate:function(){return this._indet},isHorizontal:function(){return!this._vertical},isVertical:function(){return this._vertical},_applyIndicatorColor:function(a){this.$indicator.css("backgroundColor",a||"")},_applyIndicatorImage:function(a){this.$indicator.css("backgroundImage",a||"")},_applyIndicatorGradient:function(a){this.$indicator.css("backgroundGradient",a||"")},_applyIndicatorOpacity:function(a){this.$indicator.css("opacity",a||"")},_onInterval:function(){if(this.isSeeable()){this._animPosition+=1;var a=this._vertical?this.getHeight():this.getWidth();this._animPosition>a&&(this._animPosition=-1*rwt.widgets.ProgressBar.UNDETERMINED_SIZE);this._renderIndicatorSelection()}},_layoutPost:function(a){(a.indicatorSelection||a.initial)&&this._renderIndicatorSelection()},_createIndicator:function(){this._indicator=document.createElement("div");this.$el.append(this._indicator);this.$indicator=a(this._indicator);this.$indicator.css("position","absolute");this._vertical?this.$indicator.css({left:0,top:"auto",width:"100%"}):this.$indicator.css({top:0,height:"100%",bottom:"auto"})},_createTimer:function(){this._indet&&(this._animPosition=-1*rwt.widgets.ProgressBar.UNDETERMINED_SIZE,this._timer=new rwt.client.Timer(30),this._timer.addEventListener("interval",this._onInterval,this),this._timer.start())},_renderIndicatorSelection:function(){var a=this._computeIndicatorCssLength(),c=this._computeIndicatorCssOffset();if(this._vertical)this.$indicator.css({height:a,bottom:c});else{var d={};d.width=a;d["rtl"===this.getDirection()?"right":"left"]=c;this.$indicator.css(d)}},_computeIndicatorCssLength:function(){return this.isIndeterminate()?rwt.widgets.ProgressBar.UNDETERMINED_SIZE:Math.floor(100*(this._selection-this._minimum)/(this._maximum-this._minimum))+"%"},_computeIndicatorCssOffset:function(){return this.isIndeterminate()?this._animPosition:0}}})})();rwt.remote.HandlerRegistry.add("rwt.widgets.ProgressBar",{factory:function(a){var b=new rwt.widgets.ProgressBar(a.style&&-1!==a.style.indexOf("VERTICAL"),a.style&&-1!==a.style.indexOf("INDETERMINATE"));rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);b.setUserData("isControl",!0);rwt.remote.HandlerUtil.setParent(b,a.parent);return b},destructor:rwt.remote.HandlerUtil.getControlDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:rwt.remote.HandlerUtil.extendControlProperties(["minimum","maximum","selection","state"]),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({}),listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({}),methods:["addListener","removeListener"],methodHandler:rwt.remote.HandlerUtil.extendListenerMethodHandler({}),scriptingMethods:rwt.remote.HandlerUtil.extendControlScriptingMethods({getSelection:function(){return this._selection},getMaximum:function(){return this._maximum},getMinimum:function(){return this._minimum}})});rwt.qx.Class.define("rwt.widgets.Link",{extend:rwt.widgets.base.Terminator,construct:function(){this.base(arguments);this.setAppearance("link");this._text="";this._hyperlinksHaveListeners=!1;this._readyToSendChanges=!0;this._focusedLinkIndex=-1;this._linksCount=0;this.setSelectable(!1);this.setHideFocus(!0);this.__onMouseDown=rwt.util.Functions.bind(this._onMouseDown,this);this.__onMouseOver=rwt.util.Functions.bind(this._onMouseOver,this);this.__onMouseOut=rwt.util.Functions.bind(this._onMouseOut,this);this.__onKeyDown=rwt.util.Functions.bind(this._onKeyDown,this);this.addEventListener("create",this._onCreate,this);this.addEventListener("changeEnabled",this._onChangeEnabled,this);this.addEventListener("keypress",this._onKeyPress);this.addEventListener("focusout",this._onFocusOut)},destruct:function(){this._removeEventListeners();delete this.__onMouseDown;delete this.__onMouseOver;delete this.__onMouseOut;delete this.__onKeyDown},members:{_onCreate:function(){this._renderText()},_applyTextColor:function(a,b){this.base(arguments,a,b);this._applyHyperlinksStyleProperties()},_onChangeEnabled:function(){this._applyHyperlinksStyleProperties();this._changeHyperlinksTabIndexProperty()},_getStates:function(){this.__states||(this.__states={});return this.__states},addText:function(a){this._text+=a},addLink:function(a,b){var c=rwt.remote.WidgetManager.getInstance().findIdByWidget(this)+"#"+b;this._text+='\x3cspan tabIndex\x3d"1" ';this._text+='id\x3d"'+c+'"';this._text+="\x3e";this._text+=a;this._text+="\x3c/span\x3e";this._linksCount++},applyText:function(){this._renderText();0===this._linksCount?this.setTabIndex(null):this.setTabIndex(1)},clear:function(){this._removeEventListeners();this._text="";this._linksCount=0;this._focusedLinkIndex=-1},_renderText:function(){this._isCreated&&(this._getTargetNode().innerHTML=this._text,this._applyHyperlinksStyleProperties(),this._addEventListeners())},_applyFont:function(a){a?a.render(this):rwt.html.Font.reset(this)},_applyHyperlinksStyleProperties:function(){for(var a=this._getHyperlinkStyle(!1),b=this._getHyperlinkElements(),c=0;c<b.length;c++)rwt.html.Style.setStyleProperty(b[c],"color",a.textColor),rwt.html.Style.setTextShadow(b[c],a.textShadow),rwt.html.Style.setStyleProperty(b[c],"cursor",a.cursor),rwt.html.Style.setStyleProperty(b[c],"textDecoration",a.textDecoration)},_changeHyperlinksTabIndexProperty:function(){for(var a=this._getHyperlinkElements(),b=0;b<a.length;b++)this.isEnabled()?a[b].tabIndex="1":a[b].tabIndex="-1"},_addEventListeners:function(){var a=this._getHyperlinkElements();if(0<a.length&&!this._hyperlinksHaveListeners){for(var b=0;b<a.length;b++)a[b].addEventListener("mousedown",this.__onMouseDown,!1),a[b].addEventListener("mouseover",this.__onMouseOver,!1),a[b].addEventListener("mouseout",this.__onMouseOut,!1),a[b].addEventListener("keydown",this.__onKeyDown,!1);this._hyperlinksHaveListeners=!0}},_removeEventListeners:function(){var a=this._getHyperlinkElements();if(0<a.length&&this._hyperlinksHaveListeners){for(var b=0;b<a.length;b++)a[b].removeEventListener("mousedown",this.__onMouseDown,!1),a[b].removeEventListener("mouseover",this.__onMouseOver,!1),a[b].removeEventListener("mouseout",this.__onMouseOut,!1),a[b].removeEventListener("keydown",this.__onKeyDown,!1);this._hyperlinksHaveListeners=!1}},_onMouseDown:function(a){try{if(this.isEnabled()&&this._isLeftMouseButtonPressed(a)){var b=this._getLinkIndex(a.target);this._setFocusedLink(b);this._readyToSendChanges&&(this._readyToSendChanges=!1,rwt.client.Timer.once(function(){this._sendChanges(b)},this,rwt.remote.EventUtil.DOUBLE_CLICK_TIME))}}catch(c){rwt.runtime.ErrorHandler.processJavaScriptError(c)}},_onMouseOver:function(a){try{var b=this._getHyperlinkStyle(!0);rwt.html.Style.setStyleProperty(a.target,"textDecoration",b.textDecoration)}catch(c){rwt.runtime.ErrorHandler.processJavaScriptError(c)}},_onMouseOut:function(a){try{var b=this._getHyperlinkStyle(!1);rwt.html.Style.setStyleProperty(a.target,"textDecoration",b.textDecoration)}catch(c){rwt.runtime.ErrorHandler.processJavaScriptError(c)}},_isLeftMouseButtonPressed:function(a){var b=!1;a.which?b=1===a.which:a.button&&(b=0===a.button);return b},_onKeyDown:function(a){try{if(this.isEnabled()&&13===a.keyCode){var b=this._getLinkIndex(a.target);this._sendChanges(b)}}catch(c){rwt.runtime.ErrorHandler.processJavaScriptError(c)}},_getLinkIndex:function(a){a=a.id;a=a.substr(a.lastIndexOf("#")+1);return parseInt(a,10)},_getHyperlinkStyle:function(a){var b=this._getStates();a?b.over=!0:delete b.over;return rwt.theme.AppearanceManager.getInstance().styleFrom("link-hyperlink",b)},_ontabfocus:function(){-1===this._focusedLinkIndex&&0<this._linksCount&&this._setFocusedLink(0)},_onKeyPress:function(a){if(this.isFocused()&&"Tab"===a.getKeyIdentifier()&&0<this._linksCount){var b=this._focusedLinkIndex;!a.isShiftPressed()&&0<=b&&b<this._linksCount-1?(a.stopPropagation(),a.preventDefault(),this._setFocusedLink(b+1)):a.isShiftPressed()||-1!==b?a.isShiftPressed()&&0<b&&b<=this._linksCount-1&&(a.stopPropagation(),a.preventDefault(),this._setFocusedLink(b-1)):(a.stopPropagation(),a.preventDefault(),this._setFocusedLink(0))}},_onFocusOut:function(){this._setFocusedLink(-1)},_setFocusedLink:function(a){var b=this._getFocusedHyperlinkElement();null!==b&&(b.blur(),b.style.outline="none");this._focusedLinkIndex=a;b=this._getFocusedHyperlinkElement();null!==b&&(b.focus(),b.style.outline="1px dotted")},_getFocusedHyperlinkElement:function(){var a=null,b=this._getHyperlinkElements(),c=this._focusedLinkIndex;0<=c&&c<b.length&&(a=b[c]);return a},_getHyperlinkElements:function(){var a=this.getElement();return a?a.getElementsByTagName("span"):[]},_sendChanges:function(a){rwt.remote.EventUtil.notifySelected(this,{index:a});this._readyToSendChanges=!0}}});rwt.remote.HandlerRegistry.add("rwt.widgets.Link",{factory:function(a){var b=new rwt.widgets.Link;rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);b.setUserData("isControl",!0);rwt.remote.HandlerUtil.setParent(b,a.parent);return b},destructor:rwt.remote.HandlerUtil.getControlDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:rwt.remote.HandlerUtil.extendControlProperties(["text"]),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({text:function(a,b){var c=rwt.util.Encoding;a.clear();for(var d=0;d<b.length;d++){var e=c.escapeText(b[d][0],!1),e=c.replaceNewLines(e,"\x3cbr/\x3e"),f=b[d][1];null!==f?a.addLink(e,f):a.addText(e)}a.applyText()}}),events:["Selection"],listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({})});(function(a){rwt.qx.Class.define("rwt.widgets.base.Scrollable",{extend:rwt.widgets.base.Parent,construct:function(b){this.base(arguments);this._ignoreScrollTo=[-1,-1];this._clientArea=b;this._horzScrollBar=new rwt.widgets.base.ScrollBar(!0);this._vertScrollBar=new rwt.widgets.base.ScrollBar(!1);this.$spacer=a("\x3cdiv\x3e").css({position:"absolute",visibility:"hidden",width:"1px",height:"1px"});this._internalChangeFlag=this._blockScrolling=!1;this.add(this._clientArea);this.add(this._horzScrollBar);this.add(this._vertScrollBar);rwt.widgets.util.ScrollBarsActivator.install(this);this._configureScrollBars();this._configureClientArea();this.__onscroll=rwt.util.Functions.bind(this._onscroll,this)},destruct:function(){var a=this._clientArea._getTargetNode();a&&(a.removeEventListener("scroll",this.__onscroll,!1),delete this.__onscroll);this.$spacer=this._vertScrollBar=this._horzScrollBar=this._clientArea=null},statics:{_nativeWidth:null,getNativeScrollBarWidth:function(){if(null===this._nativeWidth){var a=document.createElement("div");a.style.width="100px";a.style.height="100px";a.style.overflow="scroll";a.style.visibility="hidden";document.body.appendChild(a);this._nativeWidth=a.offsetWidth-a.clientWidth;document.body.removeChild(a)}return this._nativeWidth},adjustScrollLeft:function(a,c){var b=rwt.client.Client,e=a.getHorizontalBar();if("rtl"===a.getDirection()){if(b.isGecko())return-c;if(e&&(b.isWebkit()||b.isBlink()))return e.getMaximum()-e.getThumb()-c}return c}},members:{setScrollBarsVisible:function(a,c){this._horzScrollBar.setDisplay(a);this._vertScrollBar.setDisplay(c);this._clientArea.setStyleProperty("overflowX",a?"scroll":"hidden");this._clientArea.setStyleProperty("overflowY",c?"scroll":"hidden");this._clientArea.addToQueue("layout");this._syncSpacer();this._layoutX();this._layoutY()},setHBarSelection:function(a){this._internalChangeFlag=!0;this._horzScrollBar.setValue(a);this._internalChangeFlag=!1},setVBarSelection:function(a){this._internalChangeFlag=!0;this._vertScrollBar.setValue(a);this._internalChangeFlag=!1},setBlockScrolling:function(a){this._blockScrolling=a},getVerticalBar:function(){return this._vertScrollBar},getHorizontalBar:function(){return this._horzScrollBar},isVerticalBarVisible:function(){return this._vertScrollBar.getDisplay()},isHorizontalBarVisible:function(){return this._horzScrollBar.getDisplay()},getHorizontalBarHeight:function(){return this._horzScrollBar.getDisplay()?this._horzScrollBar.getHeight():0},getVerticalBarWidth:function(){return this._vertScrollBar.getDisplay()?this._vertScrollBar.getWidth():0},_configureClientArea:function(){this._clientArea.setStyleProperty("overflowX","scroll");this._clientArea.setStyleProperty("overflowY","scroll");this._clientArea.addEventListener("create",this._onClientCreate,this);this._clientArea.addEventListener("appear",this._onClientAppear,this);this._clientArea._layoutPost=rwt.util.Functions.bind(this._onClientLayout,this)},_configureScrollBars:function(){var a=function(a){a.stopPropagation()};this._horzScrollBar.setZIndex(1E8);this._horzScrollBar.addEventListener("dragstart",a);this._horzScrollBar.addEventListener("changeValue",this._onHorzScrollBarChangeValue,this);this._horzScrollBar.addEventListener("changeMaximum",this._syncSpacer,this);this._vertScrollBar.setZIndex(1E8);this._vertScrollBar.addEventListener("dragstart",a);this._vertScrollBar.addEventListener("changeValue",this._onVertScrollBarChangeValue,this);this._vertScrollBar.addEventListener("changeMaximum",this._syncSpacer,this)},_applyDirection:function(a){this.base(arguments,a);this.getLayoutImpl().setMirror("rtl"===a);this._horzScrollBar.setDirection(a);this._syncSpacer();this._isCreated&&this._syncClientArea(!0,!1)},_layoutX:function(){var a=this.getWidth()-this.getFrameWidth();this._clientArea.setWidth(a);this._clientArea.setLeft(0);this._vertScrollBar.setLeft(a-this._vertScrollBar.getWidth());this._horzScrollBar.setLeft(0);this._horzScrollBar.setWidth(a-this.getVerticalBarWidth())},_layoutY:function(){var a=this.getHeight()-this.getFrameHeight();this._clientArea.setTop(0);this._clientArea.setHeight(a);this._horzScrollBar.setTop(a-this._horzScrollBar.getHeight());this._vertScrollBar.setTop(0);this._vertScrollBar.setHeight(a-this.getHorizontalBarHeight())},_onClientCreate:function(){this._clientArea.prepareEnhancedBorder();this._clientArea.setContainerOverflow(!1);var b=this._clientArea._getTargetNode();b.addEventListener("scroll",this.__onscroll,!1);this.$spacer.appendTo(b);a(b).prop("rwtScrollable",this);rwt.html.Scroll.disableScrolling(this._clientArea.getElement())},_onClientLayout:function(){return rwt.client.Client.isTrident()&&9===rwt.client.Client.getMajor()?function(){var a=rwt.widgets.base.Scrollable.getNativeScrollBarWidth(),c=this._clientArea._getTargetNode(),d=this._clientArea.getElement(),e=parseInt(d.style.width,10),d=parseInt(d.style.height,10);this._vertScrollBar.getDisplay()&&(e+=2*a);this._horzScrollBar.getDisplay()&&(d+=2*a);c.style.width=e+"px";c.style.height=d+"px"}:function(){var a=rwt.widgets.base.Scrollable.getNativeScrollBarWidth(),c=this._clientArea._getTargetNode(),d=this._clientArea.getElement(),e=parseInt(d.style.width,10),d=parseInt(d.style.height,10);this._vertScrollBar.getDisplay()&&(e+=a);this._horzScrollBar.getDisplay()&&(d+=a);c.style.width=e+"px";c.style.height=d+"px"}}(),_onHorzScrollBarChangeValue:function(){this._isCreated&&this._syncClientArea(!0,!1);this._internalChangeFlag||this.dispatchSimpleEvent("userScroll",!0)},_onVertScrollBarChangeValue:function(){this._isCreated&&this._syncClientArea(!1,!0);this._internalChangeFlag||this.dispatchSimpleEvent("userScroll",!1)},_onClientAppear:function(){this._internalChangeFlag=!0;this._syncClientArea(!0,!0);this._internalChangeFlag=!1},_onscroll:function(a){try{var b=this._ignoreScrollTo[0]!==this._clientArea.getScrollLeft()||this._ignoreScrollTo[1]!==this._clientArea.getScrollTop();if(!this._internalChangeFlag&&b){this._ignoreScrollTo=[-1,-1];rwt.event.EventHandlerUtil.stopDomEvent(a);var d=this._blockScrolling||!this._horzScrollBar.getDisplay(),e=this._blockScrolling||!this._vertScrollBar.getDisplay();this._internalChangeFlag=!0;this._syncClientArea(d,e);this._internalChangeFlag=!1;this._syncScrollBars();this._blockScrolling||this.dispatchSimpleEvent("scroll")}}catch(f){rwt.runtime.ErrorHandler.processJavaScriptError(f)}},_syncClientArea:function(a,c){if(a&&null!=this._horzScrollBar){var b=this._adjustScrollLeft(this._horzScrollBar.getValue());this._clientArea.getScrollLeft()!==b&&this._clientArea.setScrollLeft(b);var e=this._clientArea.getScrollLeft();this._ignoreScrollTo[0]=e;e!==b&&this.addToQueue("hSync")}c&&null!=this._vertScrollBar&&(b=this._vertScrollBar.getValue(),this._clientArea.getScrollTop()!==b&&this._clientArea.setScrollTop(b),e=this._clientArea.getScrollTop(),this._ignoreScrollTo[1]=e,e!==b&&this.addToQueue("vSync"))},_layoutPost:function(a){this.base(arguments,a);if(a.hSync||a.vSync)rwt.client.Timer.once(function(){this._internalChangeFlag=!0;this._syncClientArea(a.hSync,a.vSync);this._internalChangeFlag=!1},this,0)},_syncScrollBars:function(){var a=this._adjustScrollLeft(this._clientArea.getScrollLeft());this._horzScrollBar.setValue(a);a=this._clientArea.getScrollTop();this._vertScrollBar.setValue(a)},_syncSpacer:function(){var a="rtl"===this.getDirection(),c=this._horzScrollBar.getMaximum()+this.getVerticalBarWidth();this.$spacer.css({top:this._vertScrollBar.getMaximum()+this.getHorizontalBarHeight(),left:a?"":c,right:a?c:""})},_adjustScrollLeft:function(a){return rwt.widgets.base.Scrollable.adjustScrollLeft(this,a)}}})})(rwt.util._RWTQuery);rwt.qx.Class.define("rwt.widgets.ScrolledComposite",{extend:rwt.widgets.base.Scrollable,construct:function(){this.base(arguments,new rwt.widgets.base.Parent);this.setScrollBarsVisible(!1,!1);this._clientArea.addEventListener("mousewheel",this._onMouseWheel,this);this._clientArea.addEventListener("keypress",this._onKeyPress,this);rwt.client.Client.supportsTouch()&&this._clientArea.addEventListener("mousedown",this._onTouch,this);this.addEventListener("userScroll",this._onUserScroll);this._content=null;this._showFocusedControl=this._requestTimerRunning=!1;this._focusRoot=null;this.addEventListener("changeParent",this._onChangeParent,this);this.setAppearance("scrolledcomposite");this.setEnableElementFocus(!1)},members:{setShowFocusedControl:function(a){this._showFocusedControl=a},setContent:function(a){null!=this._content&&(this._content.removeEventListener("changeParent",this._onContentRemove,this),this._content.removeEventListener("changeWidth",this._onContentResize,this),this._content.removeEventListener("changeHeight",this._onContentResize,this),this._clientArea.remove(this._content));this._content=a;this._onContentResize();null!=this._content&&(this._clientArea.add(this._content),this._content.addEventListener("changeParent",this._onContentRemove,this),this._content.addEventListener("changeWidth",this._onContentResize,this),this._content.addEventListener("changeHeight",this._onContentResize,this))},_onContentRemove:function(){this.setContent(null)},_onContentResize:function(){if(null!==this._content&&"number"===typeof this._content.getWidth()&&"number"===typeof this._content.getHeight()){var a=this._content.getWidth(),b=this._content.getHeight();this._horzScrollBar.setMaximum(a);this._vertScrollBar.setMaximum(b)}},_onChangeParent:function(){null!=this._focusRoot&&this._focusRoot.removeEventListener("changeFocusedChild",this._onChangeFocusedChild,this);this._focusRoot=this.getFocusRoot();null!=this._focusRoot&&this._focusRoot.addEventListener("changeFocusedChild",this._onChangeFocusedChild,this)},_onMouseWheel:function(){this.setBlockScrolling(!1)},_onTouch:function(){this.setBlockScrolling(!1)},_onKeyPress:function(a){switch(a.getKeyIdentifier()){case "Left":case "Up":case "Right":case "Down":case "PageUp":case "PageDown":case "End":case "Home":this.setBlockScrolling(!1),a.stopPropagation()}},_onUserScroll:function(a){var b=rwt.remote.Connection.getInstance(),c=a?this._horzScrollBar:this._vertScrollBar;b.getRemoteObject(this).set(a?"horizontalBar.selection":"verticalBar.selection",c.getValue());if(c.getHasSelectionListener()){if(a)b.onNextSend(this._sendHorizontalScrolled,this);else b.onNextSend(this._sendVerticalScrolled,this);b.sendDelayed(500)}},_sendVerticalScrolled:function(){rwt.remote.Connection.getInstance().getRemoteObject(this._vertScrollBar).notify("Selection")},_sendHorizontalScrolled:function(){rwt.remote.Connection.getInstance().getRemoteObject(this._horzScrollBar).notify("Selection")},_onChangeFocusedChild:function(a){a=a.getValue();this.setBlockScrolling(!this._showFocusedControl&&a!==this)}}});rwt.remote.HandlerRegistry.add("rwt.widgets.ScrolledComposite",{factory:function(a){var b=new rwt.widgets.ScrolledComposite;rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);b.setUserData("isControl",!0);rwt.remote.HandlerUtil.setParent(b,a.parent);return b},destructor:rwt.remote.HandlerUtil.getControlDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:rwt.remote.HandlerUtil.extendControlProperties(["origin","content","showFocusedControl"]),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({bounds:function(a,b){rwt.remote.HandlerUtil.getControlPropertyHandler("bounds")(a,b);a.setClipWidth(b[2]);a.setClipHeight(b[3])},origin:function(a,b){a.setHBarSelection(b[0]);a.setVBarSelection(b[1])},content:function(a,b){rwt.remote.HandlerUtil.callWithTarget(b,function(b){a.setContent(b)})},scrollBarsVisible:function(a,b){a.setScrollBarsVisible(b[0],b[1])}}),listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({}),scriptingMethods:rwt.remote.HandlerUtil.extendControlScriptingMethods({setOrigin:function(a,b){this.setHBarSelection(a);this.setVBarSelection(b)},getOrigin:function(){return[this.getHorizontalBar().getValue(),this.getVerticalBar().getValue()]}})});rwt.qx.Class.define("rwt.widgets.ToolBar",{extend:rwt.widgets.base.Parent,construct:function(){this.base(arguments);this._hoverItem=null;this.setAppearance("toolbar");this.setOverflow("hidden");this.initTabIndex();this.addEventListener("focus",this._onFocus);this.addEventListener("blur",this._onBlur);this.addEventListener("mouseover",this._onMouseOver);this.addEventListener("keypress",this._onKeyPress);this.addEventListener("keydown",this._onKeyDown);this.addEventListener("keyup",this._onKeyUp)},members:{_applyDirection:function(a){this.base(arguments,a);this.getLayoutImpl().setMirror("rtl"===a);this.forEachChild(function(){this.setDirection(a)})},_isRelevantEvent:function(a){a=a.getTarget();return this._isToolItem(a)||a===this},_isToolItem:function(a){return a instanceof rwt.widgets.ToolItem&&a.getParent()===this},_onMouseOver:function(a){a=a.getTarget();null!=this._hoverItem&&this._hoverItem!=a&&(this._hoverItem=null);this._isToolItem(a)&&(this._hoverItem=a)},_onFocus:function(){if(null==this._hoverItem){for(var a=this.getFirstChild();null!=a&&!this._isToolItem(a);)a=a.getNextSibling();this._hoverItem=a}null!=this._hoverItem&&this._hoverItem.addState("over")},_onBlur:function(){null!=this._hoverItem&&this._hoverItem.removeState("over")},_onKeyPress:function(a){if(this._isRelevantEvent(a))switch(a.getKeyIdentifier()){case "Left":this._hoverNext(!0);break;case "Right":this._hoverNext(!1)}},_onKeyDown:function(a){null!=this._hoverItem&&this._isRelevantEvent(a)&&this._hoverItem._onKeyDown(a)},_onKeyUp:function(a){null!=this._hoverItem&&this._isRelevantEvent(a)&&this._hoverItem._onKeyUp(a)},_hoverNext:function(a){if(null!=this._hoverItem){var b=this._hoverItem;this._hoverItem.removeState("over");do a?(this._hoverItem=this._hoverItem.getPreviousSibling(),null==this._hoverItem&&(this._hoverItem=this.getLastChild())):(this._hoverItem=this._hoverItem.getNextSibling(),null==this._hoverItem&&(this._hoverItem=this.getFirstChild()));while(!(this._isToolItem(this._hoverItem)&&this._hoverItem.isEnabled()||this._hoverItem===b));this._hoverItem.addState("over")}}}});rwt.remote.HandlerRegistry.add("rwt.widgets.ToolBar",{factory:function(a){var b=new rwt.widgets.ToolBar;rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);b.setUserData("isControl",!0);rwt.remote.HandlerUtil.setParent(b,a.parent);return b},destructor:rwt.remote.HandlerUtil.getControlDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:rwt.remote.HandlerUtil.extendControlProperties([]),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({}),listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({})});rwt.remote.HandlerRegistry.add("rwt.widgets.ToolItem",{factory:function(a){var b=rwt.remote.HandlerUtil.createStyleMap(a.style),c="separator";b.PUSH?c="push":b.CHECK?c="check":b.RADIO?c="radio":b.DROP_DOWN&&(c="dropDown");var d;rwt.remote.HandlerUtil.callWithTarget(a.parent,function(b){var e=b.hasState("rwt_VERTICAL");"separator"===c?d=new rwt.widgets.ToolItemSeparator(b.hasState("rwt_FLAT"),e):(d=new rwt.widgets.ToolItem(c,e),d.setNoRadioGroup(b.hasState("rwt_NO_RADIO_GROUP")));b.addAt(d,a.index);rwt.remote.HandlerUtil.addDestroyableChild(b,d);d.setUserData("protocolParent",b)});rwt.remote.HandlerUtil.addStatesForStyles(d,a.style);return d},destructor:rwt.remote.HandlerUtil.getWidgetDestructor(),properties:"bounds visible enabled customVariant toolTipMarkupEnabled toolTip text mnemonicIndex image hotImage control selection badge data".split(" "),propertyHandler:{data:rwt.remote.HandlerUtil.getControlPropertyHandler("data"),bounds:rwt.remote.HandlerUtil.getControlPropertyHandler("bounds"),visible:function(a,b){a.setVisibility(b)},toolTipMarkupEnabled:rwt.remote.HandlerUtil.getControlPropertyHandler("toolTipMarkupEnabled"),toolTip:rwt.remote.HandlerUtil.getControlPropertyHandler("toolTip"),image:function(a,b){null===b?a.setImage(null):a.setImage(b[0],b[1],b[2])},hotImage:function(a,b){null===b?a.setHotImage(null):a.setHotImage(b[0],b[1],b[2])},control:function(a,b){a.setLineVisible(null===b)},badge:function(a,b){rwt.widgets.util.Badges.setBadge(a,b)}},events:["Selection"]});rwt.qx.Class.define("rwt.widgets.Scale",{extend:rwt.widgets.base.Parent,construct:function(a){this.base(arguments);this._horizontal=a;this._readyToSendChanges=!0;this._minimum=this._selection=0;this._maximum=100;this._increment=1;this._pageIncrement=10;this._pxStep=1.34;this._line=new rwt.widgets.base.Image;this._line.addState(this._horizontal?"rwt_HORIZONTAL":"rwt_VERTICAL");this._line.setAppearance("scale-line");this._line.setResizeToInner(!0);this._line.addEventListener("mousedown",this._onLineMouseDown,this);this.add(this._line);this._thumb=new rwt.widgets.base.BasicButton("push",!0);this._thumb.addState(this._horizontal?"rwt_HORIZONTAL":"rwt_VERTICAL");this._thumb.setAppearance("scale-thumb");this._thumb.addEventListener("mousedown",this._onThumbMouseDown,this);this._thumb.addEventListener("mousemove",this._onThumbMouseMove,this);this._thumb.addEventListener("mouseup",this._onThumbMouseUp,this);this.add(this._thumb);this._thumbOffset=0;this._horizontal?this.addEventListener("changeWidth",this._onChangeWidth,this):this.addEventListener("changeHeight",this._onChangeHeight,this);this.addEventListener("contextmenu",this._onContextMenu,this);this.addEventListener("keypress",this._onKeyPress,this);this.addEventListener("mousewheel",this._onMouseWheel,this);this.setAppearance("scale")},destruct:function(){this._line.removeEventListener("mousedown",this._onLineMouseDown,this);this._thumb.removeEventListener("mousedown",this._onThumbMouseDown,this);this._thumb.removeEventListener("mousemove",this._onThumbMouseMove,this);this._thumb.removeEventListener("mouseup",this._onThumbMouseUp,this);this._horizontal?this.removeEventListener("changeWidth",this._onChangeWidth,this):this.removeEventListener("changeHeight",this._onChangeHeight,this);this.removeEventListener("contextmenu",this._onContextMenu,this);this.removeEventListener("keypress",this._onKeyPress,this);this.removeEventListener("mousewheel",this._onMouseWheel,this);this._disposeObjects("_line","_thumb");this._thumb=null},statics:{PADDING:8,SCALE_LINE_OFFSET:9,THUMB_OFFSET:9,HALF_THUMB:5,_isNoModifierPressed:function(a){return!a.isCtrlPressed()&&!a.isShiftPressed()&&!a.isAltPressed()&&!a.isMetaPressed()}},members:{_onChangeWidth:function(){this._line.setWidth(this.getWidth()-2*rwt.widgets.Scale.PADDING);this._updateStep();this._updateThumbPosition()},_onChangeHeight:function(){this._line.setHeight(this.getHeight()-2*rwt.widgets.Scale.PADDING);this._updateStep();this._updateThumbPosition()},_onContextMenu:function(a){var b=this.getContextMenu();null!=b&&(b.setLocation(a.getPageX(),a.getPageY()),b.setOpener(this),b.show(),a.stopPropagation())},_onKeyPress:function(a){var b=a.getKeyIdentifier(),c=null;if(rwt.widgets.Scale._isNoModifierPressed(a)){switch(b){case "Left":c=this._selection-this._increment;a.preventDefault();a.stopPropagation();break;case "Down":c=this._horizontal?this._selection-this._increment:this._selection+this._increment;a.preventDefault();a.stopPropagation();break;case "Right":c=this._selection+this._increment;a.preventDefault();a.stopPropagation();break;case "Up":c=this._horizontal?this._selection+this._increment:this._selection-this._increment;a.preventDefault();a.stopPropagation();break;case "Home":c=this._minimum;a.preventDefault();a.stopPropagation();break;case "End":c=this._maximum;a.preventDefault();a.stopPropagation();break;case "PageDown":c=this._horizontal?this._selection-this._pageIncrement:this._selection+this._pageIncrement;a.preventDefault();a.stopPropagation();break;case "PageUp":c=this._horizontal?this._selection+this._pageIncrement:this._selection-this._pageIncrement,a.preventDefault(),a.stopPropagation()}null!=c&&(this.setSelection(c),this._scheduleSendChanges())}},_onMouseWheel:function(a){this.getFocused()&&(a.preventDefault(),a.stopPropagation(),a=Math.round(a.getWheelDelta()),this.setSelection(this._selection-a),this._scheduleSendChanges())},_onLineMouseDown:function(a){if(a.isLeftButtonPressed()){a=this._getMouseOffset(a);var b=this._getThumbPosition()+rwt.widgets.Scale.HALF_THUMB;a>b?this.setSelection(this._selection+this._pageIncrement):this.setSelection(this._selection-this._pageIncrement);this._scheduleSendChanges()}},_onThumbMouseDown:function(a){a.isLeftButtonPressed()&&(this._thumbOffset=this._getMouseOffset(a)-this._getThumbPosition(),this._thumb.setCapture(!0))},_onThumbMouseMove:function(a){this._thumb.getCapture()&&(a=this._getMouseOffset(a),a=this._getSelectionFromThumbPosition(a-this._thumbOffset),this._selection!=a&&(this.setSelection(a),this._scheduleSendChanges()))},_onThumbMouseUp:function(){this._thumb.setCapture(!1)},_getMouseOffset:function(a){var b=rwt.html.Location;return this._horizontal?(a=a.getPageX()-b.getLeft(this.getElement()),"rtl"===this.getDirection()?this.getWidth()-a:a):a.getPageY()-b.getTop(this.getElement())},_updateStep:function(){var a=rwt.widgets.Scale.PADDING+rwt.widgets.Scale.HALF_THUMB;this._pxStep=this._horizontal?(this.getWidth()-2*a)/(this._maximum-this._minimum):(this.getHeight()-2*a)/(this._maximum-this._minimum)},_updateThumbPosition:function(){this._setThumbPosition(Math.round(rwt.widgets.Scale.PADDING+this._pxStep*(this._selection-this._minimum)));this.dispatchSimpleEvent("updateToolTip",this)},_getThumbPosition:function(){return this._horizontal?"rtl"===this.getDirection()?this._thumb.getRight():this._thumb.getLeft():this._thumb.getTop()},_setThumbPosition:function(a){this._horizontal?"rtl"===this.getDirection()?(this._thumb.setLeft(null),this._thumb.setRight(a)):(this._thumb.setLeft(a),this._thumb.setRight(null)):this._thumb.setTop(a)},_getSelectionFromThumbPosition:function(a){return this._normalizeSelection(Math.round((a-rwt.widgets.Scale.PADDING)/this._pxStep+this._minimum))},_normalizeSelection:function(a){var b=a;a<this._minimum&&(b=this._minimum);a>this._maximum&&(b=this._maximum);return b},_scheduleSendChanges:function(){this._readyToSendChanges&&(this._readyToSendChanges=!1,rwt.client.Timer.once(this._sendChanges,this,500))},_sendChanges:function(){rwt.remote.EventUtil.getSuspended()||(rwt.remote.Connection.getInstance().getRemoteObject(this).set("selection",this._selection),rwt.remote.EventUtil.notifySelected(this),this._readyToSendChanges=!0)},setSelection:function(a){this._selection=this._normalizeSelection(a);this._updateThumbPosition();this.dispatchSimpleEvent("selectionChanged")},setMinimum:function(a){this._minimum=a;this._updateStep();this._updateThumbPosition();this.dispatchSimpleEvent("minimumChanged")},setMaximum:function(a){this._maximum=a;this._updateStep();this._updateThumbPosition();this.dispatchSimpleEvent("maximumChanged")},setIncrement:function(a){this._increment=a},setPageIncrement:function(a){this._pageIncrement=a},getToolTipTargetBounds:function(){var a=this._horizontal&&"rtl"===this.getDirection()?this.getWidth()-this._thumb.getRight()-this._thumb.getWidth():this._thumb.getLeft();return{left:this._cachedBorderLeft+(a||0),top:this._cachedBorderLeft+(this._thumb.getTop()||0),width:this._thumb.getBoxWidth(),height:this._thumb.getBoxHeight()}},_visualizeFocus:function(){this.base(arguments);this._thumb.addState("focused")},_visualizeBlur:function(){this.base(arguments);this._thumb.removeState("focused")},_layoutX:function(){this._updateThumbPosition()}}});rwt.remote.HandlerRegistry.add("rwt.widgets.Scale",{factory:function(a){var b=-1!=a.style.indexOf("HORIZONTAL"),b=new rwt.widgets.Scale(b);rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);b.setUserData("isControl",!0);rwt.remote.HandlerUtil.setParent(b,a.parent);return b},destructor:rwt.remote.HandlerUtil.getControlDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:rwt.remote.HandlerUtil.extendControlProperties(["minimum","maximum","selection","increment","pageIncrement"]),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({}),events:["Selection"],listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({}),methods:["addListener","removeListener"],methodHandler:rwt.remote.HandlerUtil.extendListenerMethodHandler({}),scriptingMethods:rwt.remote.HandlerUtil.extendControlScriptingMethods({getSelection:function(){return this._selection},getMaximum:function(){return this._maximum},getMinimum:function(){return this._minimum}})});rwt.qx.Class.define("rwt.widgets.ToolItemSeparator",{extend:rwt.widgets.base.Parent,construct:function(a,b){this.base(arguments);this._control=this._line=null;this._vertical=b;a&&(this._line=new rwt.widgets.base.Terminator,b&&this._line.addState("vertical"),this._line.setAppearance("toolbar-separator-line"),this.add(this._line));this.setStyleProperty("fontSize","0px");this.setStyleProperty("lineHeight","0px")},properties:{appearance:{refine:!0,init:"toolbar-separator"}},members:{_applyWidth:function(a,b){this.base(arguments,a,b);if(this._line&&!this._vertical){var c=this._line.getWidth();this._line.setLeft(Math.floor(.5*a-.5*c))}},_applyHeight:function(a,b){this.base(arguments,a,b);if(this._line&&this._vertical){var c=this._line.getHeight();this._line.setTop(Math.floor(.5*a-.5*c))}},setLineVisible:function(a){this._line&&this._line.setVisibility(a)}}});namespace("rwt.theme.BorderDefinitions");rwt.theme.BorderDefinitions={getDefinition:function(a){return this._definitions[a]},_definitions:{inset:{color:["shadow","highlight","highlight","shadow"],innerColor:["darkshadow","lightshadow","lightshadow","darkshadow"],width:2},thinInset:{color:["shadow","highlight","highlight","shadow"],width:1},outset:{color:["lightshadow","darkshadow","darkshadow","lightshadow"],innerColor:["highlight","shadow","shadow","highlight"],width:2},thinOutset:{color:["highlight","shadow","shadow","highlight"],width:1},groove:{color:["shadow","highlight","highlight","shadow"],innerColor:["highlight","shadow","shadow","highlight"],width:2},ridge:{color:["highlight","shadow","shadow","highlight"],innerColor:["shadow","highlight","highlight","shadow"],width:2},shadow:{width:1,color:["shadow","shadow","shadow","shadow"]},verticalDivider:{width:[1,0,1,0],color:["shadow",null,"highlight",null]},horizontalDivider:{width:[0,1,0,1],color:[null,"shadow",null,"highlight"]},"separator.shadowin.horizontal.border":{width:[1,0,1,0],color:["lightshadow",null,"highlight"]},"separator.shadowin.vertical.border":{width:[0,1,0,1],color:[null,"highlight",null,"lightshadow"]},"separator.shadowout.horizontal.border":{width:[1,0,1,0],color:["highlight",null,"shadow",null]},"separator.shadowout.vertical.border":{width:[0,1,0,1],color:[null,"shadow",null,"highlight"]}}};rwt.qx.Class.define("rwt.widgets.Combo",{extend:rwt.widgets.base.HorizontalBoxLayout,construct:function(a){this.base(arguments);this._userSelection=this._editable=!0;this._listMinWidth=-1;this._field=new rwt.widgets.base.BasicText;this._field.setTabIndex(null);this._field.setAllowStretchY(!0);this._field.setTop(0);this._field.setWidth("1*");this._field.setHeight("100%");this.add(this._field);this._button=new rwt.widgets.base.BasicButton("push",!0);this._button.setTabIndex(null);this._button.setTop(0);this._button.setHeight("100%");this.add(this._button);this.setHideFocus(!0);var b=a?"ccombo":"combo";this.setAppearance(b);this._field.setAppearance(b+"-field");this._button.setAppearance(b+"-button");this._registerListeners()},destruct:function(){this._list.destroy();this._disposeObjects("_field","_button")},members:{setItems:function(a){this._listMinWidth=-1;this._userSelection=!1;this._list.setItems(a);this._userSelection=!0;this.dispatchSimpleEvent("itemsChanged");this._list.getVisible()&&this._list.setMinWidth(this._getListMinWidth())},setVisibleItemCount:function(a){this._list.setVisibleItemCount(a)},select:function(a){this._userSelection=!1;this._list.setSelectionIndex(a);this._userSelection=!0},setEditable:function(a){this._editable=a;this._field.setReadOnly(!a)},setListVisible:function(a){a&&this._list.setMinWidth(this._getListMinWidth());this._list.setVisible(a)},setText:function(a){this._editable&&this._field.setValue(a)},setTextSelection:function(a){this._field.setSelection(a)},setTextLimit:function(a){this._field.setMaxLength(a)},addState:function(a){this.base(arguments,a);if("rwt_FLAT"===a||"rwt_RIGHT_TO_LEFT"===a)this._field.addState(a),this._button.addState(a)},removeState:function(a){this.base(arguments,a);"rwt_RIGHT_TO_LEFT"===a&&(this._field.removeState(a),this._button.removeState(a))},_getSubWidgets:function(){return[this._field,this._button,this._list]},_applyDirection:function(a){this.base(arguments,a);this.setReverseChildrenOrder("rtl"===a);this.setHorizontalChildrenAlign("rtl"===a?"right":"left");this._list&&this._list.setDirection(a)},_registerListeners:function(){this.addEventListener("changeParent",this._onChangeParent,this);this.addEventListener("mousedown",this._onMouseDown,this);this.addEventListener("mousewheel",this._onMouseWheel,this);this.addEventListener("keypress",this._onKeyPress,this);this._field.addEventListener("input",this._onTextInput,this);this._field.addEventListener("keypress",this._onTextKeyPress,this);this._field.addEventListener("selectionChanged",this._onTextSelectionChange,this)},_onChangeParent:function(){if(!this._list){var a=this.getAppearance()+"-list";this._list=new rwt.widgets.DropDown({parent:this,appearance:a});this._list.setSelectionWrapping(!1);this._list.setDirection(this.getDirection());var b=this;this._list.addListener("Show",function(a){b._onListVisibleChanged(a)});this._list.addListener("Hide",function(a){b._onListVisibleChanged(a)});this._list.addListener("Selection",function(a){b._onListSelectionChanged(a)})}},_applyFont:function(a,b){this.base(arguments,a,b);this._field.setFont(a)},_applyTextColor:function(a,b){this.base(arguments,a,b);this._field.setTextColor(a)},_applyCursor:function(a,b){this.base(arguments,a,b);this._field.setCursor(a);this._button.setCursor(a)},_ontabfocus:function(){this._showFocusIndicator();this._field.isCreated()&&this._field.selectAll()},_showFocusIndicator:function(){if(!this._editable){var a=("combo"===this.getAppearance()?"":"C")+"Combo-FocusIndicator";rwt.widgets.util.FocusIndicator.getInstance().show(this,a,null)}},_visualizeFocus:function(){this._field.isCreated()&&(this._field._visualizeFocus(),this._field._renderSelection());this.addState("focused")},_visualizeBlur:function(){this._field.isCreated()&&(this._field._setSelectionLength(0),this._field._visualizeBlur());this._editable||rwt.widgets.util.FocusIndicator.getInstance().hide(this);this.removeState("focused")},_toggleListVisibility:function(){this._list.getVisible()?this._list.hide():(this._list.setMinWidth(this._getListMinWidth()),this._list.show())},_getListMinWidth:function(){if(-1===this._listMinWidth){var a={};this.getFont().renderStyle(a);for(var b=rwt.widgets.util.FontSizeCalculation,c=this._list.getItems(),d=0;d<this._list.getItemCount();d++){var e=this._escapeText(c[d]),e=b.computeTextDimensions(e,a);this._listMinWidth=Math.max(this._listMinWidth,e[0])}}return this._listMinWidth},_escapeText:function(a){var b=rwt.util.Encoding;a=b.escapeText(a,!1);a=b.replaceNewLines(a,"");return a=b.replaceWhiteSpaces(a)},_onMouseDown:function(a){var b=a.getTarget();a.isLeftButtonPressed()&&(b===this._field&&this._field.getReadOnly()||b===this._button)&&(this.setFocused(!0),this._toggleListVisibility(),a.preventDefault())},_onMouseWheel:function(a){!this._list.getVisible()&&this.getFocused()&&0<this._list.getItemCount()&&(this._scrollSelection(0>a.getWheelDelta()),a.preventDefault(),a.stopPropagation())},_onTextKeyPress:function(a){this.dispatchEvent(a)},_onKeyPress:function(a){var b=a.getKeyIdentifier();"Enter"===b?this._handleKeyEnter(a):"Up"!==b&&"Down"!==b&&"PageUp"!==b&&"PageDown"!==b||this._handleKeyUpDown(a);this._selectByFirstLetter(a);this._stopKeyEvent(a)},_handleKeyEnter:function(a){this._list.getVisible()||0!==a.getModifiers()||rwt.remote.EventUtil.notifyDefaultSelected(this)},_handleKeyUpDown:function(a){if(a.isAltPressed())this._toggleListVisibility();else if(!this._list.getVisible()&&0<this._list.getItemCount())switch(a.getKeyIdentifier()){case "Up":this._scrollSelection(!1);break;case "Down":this._scrollSelection(!0);break;case "PageUp":this._scrollSelection(!1,!0);break;case "PageDown":this._scrollSelection(!0,!0)}},_selectByFirstLetter:function(a){var b=a.getCharCode();if(!(0===b||a.isAltPressed()||a.isCtrlPressed()||!this._list.getVisible()&&this._editable)){a=this._list.getSelectionIndex()+1;var c=this._list.getItemCount()-1,b=String.fromCharCode(b),c=this._findIndexByFirstLetter(a,c,b);-1===c&&(c=this._findIndexByFirstLetter(0,a-1,b));-1!==c&&this._list.setSelectionIndex(c)}},_findIndexByFirstLetter:function(a,b,c){for(var d=this._list.getItems();a<=b;a++)if(d[a].slice(0,1).toLowerCase()===c.toLowerCase())return a;return-1},_stopKeyEvent:function(a){switch(a.getKeyIdentifier()){case "Enter":case "Up":case "Down":case "PageUp":case "PageDown":a.preventDefault(),a.stopPropagation()}},_scrollSelection:function(a,b){var c=this._list.getSelectionIndex(),d=this._list.getItemCount(),e=this._list.getVisibleItemCount(),c=-1===c?0:a?Math.min(d-1,b?c+e-1:c+1):Math.max(0,b?c-e+1:c-1);c!==this._list.getSelectionIndex()&&this._list.setSelectionIndex(c)},_onTextInput:function(){this._editable&&(rwt.remote.Connection.getInstance().getRemoteObject(this).set("text",this._field.getComputedValue()),this._notifyModify(!0),this._internalSelectionChanged=!0,this._list.setSelectionIndex(-1),this._internalSelectionChanged=!1)},_onListVisibleChanged:function(){var a=this._list.getVisible();this._editable&&this._field.setReadOnly(a);this.getFocused()&&(a?this._field._visualizeBlur():this._editable&&this._field._visualizeFocus());rwt.remote.EventUtil.getSuspended()||rwt.remote.Connection.getInstance().getRemoteObject(this).set("listVisible",a)},_onListSelectionChanged:function(a){this._internalSelectionChanged||(this._userSelection&&this.setFocused(!0),this._field.setValue(-1===a.index?"":a.text),this._field.isCreated()&&this._userSelection&&this._field.selectAll(),this._sendSelectionChanged(a),this.dispatchSimpleEvent("selectionChanged"))},_onTextSelectionChange:function(){rwt.remote.EventUtil.getSuspended()||rwt.remote.Connection.getInstance().getRemoteObject(this).set("selection",this._field.getSelection())},_sendSelectionChanged:function(a){if(!rwt.remote.EventUtil.getSuspended()){var b=rwt.remote.Connection.getInstance().getRemoteObject(this);this._editable&&b.set("text",a.text);b.set("selectionIndex",a.index);rwt.remote.EventUtil.notifySelected(this);this._notifyModify()}},_notifyModify:function(a){var b=rwt.remote.Connection.getInstance();b.getRemoteObject(this).isListening("Modify")&&(b.onNextSend(this._onSend,this),a?b.sendDelayed(500):b.send())},_onSend:function(){this.isDisposed()||rwt.remote.Connection.getInstance().getRemoteObject(this).notify("Modify",null,!0)},applyObjectId:function(a){this.base(arguments,a);this._list.applyObjectId(a+"-listbox")}}});rwt.remote.HandlerRegistry.add("rwt.widgets.Combo",{factory:function(a){var b=new rwt.widgets.Combo(a.ccombo);rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);b.setUserData("isControl",!0);rwt.remote.HandlerUtil.setParent(b,a.parent);return b},destructor:rwt.remote.HandlerUtil.getControlDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:rwt.remote.HandlerUtil.extendControlProperties("itemHeight visibleItemCount items listVisible selectionIndex editable text selection textLimit".split(" ")),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({selectionIndex:function(a,b){a.select(b)},selection:function(a,b){a.setTextSelection(b)}}),events:["Selection","DefaultSelection","Modify"],listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({}),methods:["addListener","removeListener"],methodHandler:rwt.remote.HandlerUtil.extendListenerMethodHandler({}),scriptingMethods:rwt.remote.HandlerUtil.extendControlScriptingMethods({getText:function(){return this._field.getValue()},getSelection:function(){return this._field.getSelection()}})});rwt.qx.Class.define("rwt.widgets.util.FocusIndicator",{extend:rwt.qx.Object,statics:{getInstance:function(){return rwt.runtime.Singletons.get(rwt.widgets.util.FocusIndicator)}},construct:function(){this.base(arguments);this._frame=null},members:{_createFrame:function(){this._frame=document.createElement("div");this._frame.setAttribute("id","focusIndicator");this._frame.style.position="absolute";this._frame.style.fontSize=0;this._frame.style.lineHeight=0;this._frame.style.zIndex=0},_createTheme:function(a,b,c){var d=null,e=new rwt.theme.ThemeValues("undefined"!=typeof a.__states?a.__states:{});a=e.getCssBorder(b,"border");var f=e.getCssFloat(b,"opacity"),g=a instanceof rwt.html.Border,h=e.getCssBoxDimensions(b,"margin"),k=e.getCssBoxDimensions(b,"padding");k||(k=[0,0,0,0]);c=!(0===k[0]&&0===k[1]&&0===k[2]&&0===k[3])&&null!=c;g&&(null!=h||c)&&(b=e.getCssColor(b,"background-color"),d={backgroundColor:"undefined"!=b?b:"",opacity:f,border:a,margin:h,padding:c?k:null});return d},show:function(a,b,c){this.hide();if(a.isCreated()&&(b=this._createTheme(a,b,c),null!=b)){var d=a._getTargetNode();null==this._frame&&this._createFrame();this._frame.parentNode!=d&&(d.hasChildNodes()?d.insertBefore(this._frame,d.firstChild):d.appendChild(this._frame));this._styleFocusIndicator(b);this._layoutFocusIndicator(a,b,c)}},hide:function(){null!=this._frame&&null!=this._frame.parentNode&&this._frame.parentNode.removeChild(this._frame)},_styleFocusIndicator:function(a){for(var b=a.border,c=this._frame.style,d=["Left","Top","Bottom","Right"],e=0;4>e;e++){var f=d[e],g=b["getColor"+f](),h=b["getStyle"+f](),k=b["getWidth"+f]();c["border"+f+"Width"]=null==k?"0px":k+"px";c["border"+f+"Style"]=null==h?"none":h;c["border"+f+"Color"]=null==g?"":g}c.backgroundColor=a.backgroundColor;this._styleFocusIndiactorOpacity(a.opacity)},_styleFocusIndiactorOpacity:function(a){var b=this._frame.style;a=1==a?"":a;b.opacity=a;b.KhtmlOpacity=a;b.MozOpacity=a},_layoutFocusIndicator:function(a,b,c){var d=[];if(null!=b.padding)a=b.padding,d[0]=c.offsetLeft-a[3],d[1]=parseInt(c.style.top,10)-a[0],d[2]=parseInt(c.style.width,10)+a[1]+a[3],d[3]=parseInt(c.style.height,10)+a[2]+a[0];else{c=b.margin;a._invalidateBoxWidth();a._invalidateBoxHeight();b=a.getBoxWidth()-a._cachedBorderLeft-a._cachedBorderRight;var e=a.getBoxHeight()-a._cachedBorderTop-a._cachedBorderBottom;a._invalidateBoxWidth();a._invalidateBoxHeight();d[0]=c[3];d[1]=c[0];d[2]=b-(c[3]+c[1]);d[3]=e-(c[0]+c[2]);d[2]=Math.max(0,d[2]);d[3]=Math.max(0,d[3])}this._frame.style.left=d[0]+"px";this._frame.style.top=d[1]+"px";this._frame.style.width=d[2]+"px";this._frame.style.height=d[3]+"px"}}});rwt.remote.HandlerRegistry.add("rwt.widgets.GC",{factory:function(a){a=rwt.remote.ObjectRegistry.getObject(a.parent);var b=rwt.widgets.util.WidgetUtil.getGC(a);rwt.remote.HandlerUtil.addDestroyableChild(a,b);return b},destructor:function(a){rwt.remote.HandlerUtil.removeDestroyableChild(a._control,a);a.dispose()},methods:["init","draw"],methodHandler:{init:function(a,b){a.init(b.x,b.y,b.width,b.height,b.font,b.fillStyle,b.strokeStyle)},draw:function(a,b){a.draw(b.operations)}}});rwt.qx.Class.define("rwt.widgets.GC",{extend:rwt.qx.Object,construct:function(a){this.base(arguments);this._control=a;this._control.addEventListener("create",this._onControlCreate,this);this._control.addEventListener("changeWidth",this._onControlChangeWidth,this);this._control.addEventListener("changeHeight",this._onControlChangeHeight,this);this._context=this._canvas=null;this._createCanvas();this._canvas.rwtObject=this;this._control.isCreated()&&this._addCanvasToDOM();this._linearGradient=null;this._currentGCState={}},destruct:function(){this._control.removeEventListener("create",this._onControlCreate,this);this._control.removeEventListener("changeWidth",this._onControlChangeWidth,this);this._control.removeEventListener("changeHeight",this._onControlChangeHeight,this);this._control.isCreated()&&!this._control.isDisposed()&&this._removeCanvasFromDOM();this._control=null;this._canvas=this._canvas.rwtObject=null;this._context.dispose&&this._context.dispose();this._context=null},members:{init:function(a,b,c,d,e,f,g){this._initClipping(a,b,c,d);this._initFields(e,f,g);this._control.dispatchSimpleEvent("paint")},draw:function(a){for(var b=0;b<a.length;b++)try{var c=a[b][0];switch(c){case "fillStyle":case "strokeStyle":case "globalAlpha":case "lineWidth":case "lineCap":case "lineJoin":case "font":this._setProperty(a[b]);break;case "createLinearGradient":case "addColorStop":case "fillText":case "strokeText":case "ellipse":case "drawImage":case "setTransform":case "resetClip":this["_"+c](a[b]);break;default:this._context[c].apply(this._context,a[b].slice(1))}}catch(d){throw a="[ "+a[b].join(", ")+" ]",Error("Drawing operation failed: "+a+" :"+d.message);}},getNativeContext:function(){return this._context},_createCanvas:function(){this._canvas=document.createElement("canvas");this._context=this._canvas.getContext("2d")},_applyCurrentState:function(a){var b=Object.keys(a).map(function(b){return[b,a[b]]});this.draw(b)},_onControlCreate:function(){this._addCanvasToDOM()},_addCanvasToDOM:function(){var a=this._control._getTargetNode(),b=a.firstChild;b?a.insertBefore(this._canvas,b):a.appendChild(this._canvas)},_removeCanvasFromDOM:function(){this._canvas.parentNode.removeChild(this._canvas)},_onControlChangeWidth:function(a){a=a.getValue();this._canvas.width=a;this._canvas.style.width=a+"px"},_onControlChangeHeight:function(a){a=a.getValue();this._canvas.height=a;this._canvas.style.height=a+"px"},_initClipping:function(a,b,c,d){this._context.clearRect(a,b,c,d);this._context.beginPath();this._context.rect(a,b,c,d);this._context.clip()},_initFields:function(a,b,c){this._context.strokeStyle=rwt.util.Colors.rgbToRgbString(c);this._context.fillStyle=rwt.util.Colors.rgbToRgbString(b);this._context.globalAlpha=1;this._context.lineWidth=1;this._context.lineCap="butt";this._context.lineJoin="miter";this._context.font=this._toCssFont(a);this._context.textBaseline="top";this._context.textAlign="left";this._currentGCState={}},_ellipse:function(a){var b=a[1],c=a[2],d=a[3],e=a[4],f=a[6],g=a[7];a=a[8];0<d&&0<e&&(this._context.translate(b,c),this._context.scale(1,e/d),this._context.arc(0,0,d,f,g,a))},_resetClip:function(){this._context.restore();this._applyCurrentState(this._currentGCState)},_setProperty:function(a){var b=a[0];a=a[1];this._currentGCState[b]=a;"linearGradient"===a?a=this._linearGradient:"fillStyle"===b||"strokeStyle"===b?a=rwt.util.Colors.rgbToRgbString(a):"font"===b&&(a=this._toCssFont(a));this._context[b]=a},_strokeText:function(a){var b=a[5],c=a[6],d=this._prepareText.apply(this,a.slice(1,5)),e=d.split("\n");1<e.length?(a=this._getTextBounds.apply(this,a.slice(1,7)),this._drawText(e,a,!1)):(this._context.save(),this._context.fillStyle=this._context.strokeStyle,this._context.fillText(d,b,c),this._context.restore())},_fillText:function(a){var b=this._prepareText.apply(this,a.slice(1,5)).split("\n");a=this._getTextBounds.apply(this,a.slice(1,7));this._drawText(b,a,!0)},_drawText:function(a,b,c){this._context.save();c&&this._context.fillRect.apply(this._context,b);this._context.fillStyle=this._context.strokeStyle;c=b[3]/a.length;for(var d=0;d<a.length;d++)this._context.fillText(a[d],b[0],d*c+b[1]);this._context.restore()},_drawImage:function(a){var b=a.slice(1);a=new Image;a.src=b[0];b[0]=a;if(a.complete)this._context.drawImage.apply(this._context,b);else{var c=this._context.globalAlpha,d=this._context;a.onload=function(){d.save();d.globalAlpha=c;d.drawImage.apply(d,b);d.restore()}}},_setTransform:function(a){var b=a[0];a=2==a.length?a[1]:a.slice(1);this._currentGCState[b]=a;this._context.setTransform.apply(this._context,a)},_createLinearGradient:function(a){this._linearGradient=this._context.createLinearGradient.apply(this._context,a.slice(1))},_addColorStop:function(a){this._linearGradient.addColorStop(a[1],rwt.util.Colors.rgbToRgbString(a[2]))},_prepareText:function(a,b,c,d){var e=rwt.util.Encoding;a=b?e.removeAmpersandControlCharacters(a):a;a=e.replaceNewLines(a,c?"\n":"");return a=a.replace(/\t/g,d?"    ":"")},_getTextBounds:function(a,b,c,d,e,f){a=this._escapeText(a,b,c,d);b={};rwt.html.Font.fromString(this._context.font).renderStyle(b);a=rwt.widgets.util.FontSizeCalculation.computeTextDimensions(a,b);return[e,f,a[0],a[1]]},_escapeText:function(a,b,c,d){var e=rwt.util.Encoding;a=e.escapeText(a,b);a=e.replaceNewLines(a,c?"\x3cbr/\x3e":"");return a=a.replace(/\t/g,d?"\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;":"")},_toCssFont:function(a){return null===a?"":rwt.html.Font.fromArray(a).toCss()}}});rwt.remote.HandlerRegistry.add("rwt.widgets.Composite",{factory:function(a){var b=new rwt.widgets.Composite;rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);b.setUserData("isControl",!0);rwt.remote.HandlerUtil.setParent(b,a.parent);return b},destructor:rwt.remote.HandlerUtil.getControlDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:rwt.remote.HandlerUtil.extendControlProperties(["backgroundGradient","roundedBorder","clientArea"]),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({backgroundGradient:rwt.remote.HandlerUtil.getBackgroundGradientHandler(),roundedBorder:rwt.remote.HandlerUtil.getRoundedBorderHandler()}),listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({}),methods:["addListener","removeListener"],methodHandler:rwt.remote.HandlerUtil.extendListenerMethodHandler({}),scriptingMethods:rwt.remote.HandlerUtil.extendControlScriptingMethods({})});rwt.qx.Class.define("rwt.widgets.Composite",{extend:rwt.widgets.base.Parent,include:[rwt.animation.VisibilityAnimationMixin,rwt.widgets.util.OverStateMixin],construct:function(){this.base(arguments);this.setAppearance("composite");this.setOverflow("hidden");this.setHideFocus(!0);this.setEnableElementFocus(!1);rwt.widgets.base.Widget.disableScrolling(this);this._clientArea=[0,0,0,0]},destruct:function(){this._clientArea=null},members:{setClientArea:function(a){this._clientArea=a;this.dispatchSimpleEvent("clientAreaChanged")},getClientArea:function(){return this._clientArea.concat()},_applyDirection:function(a){this.base(arguments,a);this.getLayoutImpl().setMirror("rtl"===a)}}});rwt.qx.Class.define("rwt.widgets.Sash",{extend:rwt.widgets.base.Parent,include:rwt.widgets.util.OverStateMixin,construct:function(){this.base(arguments);this.setOverflow(null);this.setHtmlProperty("unselectable","on");this.addEventListener("changeWidth",this._onChangeSize,this);this.addEventListener("changeHeight",this._onChangeSize,this);this._slider=new rwt.widgets.base.Parent;this._slider.setAppearance("sash-slider");this._slider.setVisibility(!1);this.add(this._slider);this._sliderHandle=new rwt.widgets.base.Parent;rwt.html.Style.setBackgroundPosition(this._sliderHandle,"center center");this._sliderHandle.setAppearance("sash-handle");this._sliderHandle.setVisibility(!1);this.add(this._sliderHandle);this._handle=new rwt.widgets.base.Parent;rwt.html.Style.setBackgroundPosition(this._handle,"center center");this._handle.setAppearance("sash-handle");this.add(this._handle);this.initOrientation();this._bufferZIndex=null},destruct:function(){this.removeEventListener("changeWidth",this._onChangeSize,this);this.removeEventListener("changeHeight",this._onChangeSize,this);this._removeStyle(this.getOrientation());this._disposeObjects("_slider","_handle","_sliderHandle")},properties:{appearance:{refine:!0,init:"sash"},orientation:{check:["horizontal","vertical"],apply:"_applyOrientation",init:"horizontal",nullable:!0}},members:{_onChangeSize:function(){this._handle.setWidth(this.getWidth());this._handle.setHeight(this.getHeight())},_onMouseDownX:function(a){if(a.isLeftButtonPressed()&&this.getEnabled()){this._commonMouseDown();this._dragOffset=a.getPageX();a="rtl"===this.getDirection();var b=-this.getLeft()-this._frameOffset,c=this.getParent().getWidth()-this.getLeft()-this.getWidth()-this._frameOffset;this._minMove=a?-c:b;this._maxMove=a?-b:c}},_onMouseDownY:function(a){a.isLeftButtonPressed()&&this.getEnabled()&&(this._commonMouseDown(),this._dragOffset=a.getPageY(),this._minMove=-this.getTop()-this._frameOffset,this._maxMove=this.getParent().getHeight()-this.getTop()-this.getHeight()-this._frameOffset)},_commonMouseDown:function(){this.setCapture(!0);this.getTopLevelWidget().setGlobalCursor(this.getCursor());this._frameOffset=this.getFrameWidth()/2;this._slider.setLeft(0-this._frameOffset);this._slider.setTop(0-this._frameOffset);this._slider.setWidth(this.getWidth());this._slider.setHeight(this.getHeight());this._sliderHandle.setLeft(0);this._sliderHandle.setTop(0);this._sliderHandle.setWidth(this.getWidth());this._sliderHandle.setHeight(this.getHeight());this._bufferZIndex=this.getZIndex();this.setZIndex(1E7);this._slider.show();this._sliderHandle.show();this._sendWidgetSelected()},_onMouseUpX:function(){this.getCapture()&&this._commonMouseUp()},_onMouseUpY:function(){this.getCapture()&&this._commonMouseUp()},_commonMouseUp:function(){this._slider.hide();this._sliderHandle.hide();this.setCapture(!1);this.getTopLevelWidget().setGlobalCursor(null);null!=this._bufferZIndex&&this.setZIndex(this._bufferZIndex);rwt.widgets.util.WidgetUtil._fakeMouseEvent(this,"mouseout");this._sendWidgetSelected()},_onMouseMoveX:function(a){this.getCapture()&&(this.getTopLevelWidget().getGlobalCursor()!=this.getCursor()&&this.getTopLevelWidget().setGlobalCursor(this.getCursor()),a=this._limitMove(a.getPageX()-this._dragOffset),this._slider.setLeft(a),this._sliderHandle.setLeft(a))},_onMouseMoveY:function(a){this.getCapture()&&(this.getTopLevelWidget().getGlobalCursor()!=this.getCursor()&&this.getTopLevelWidget().setGlobalCursor(this.getCursor()),a=this._limitMove(a.getPageY()-this._dragOffset),this._slider.setTop(a),this._sliderHandle.setTop(a))},_limitMove:function(a){return a<this._minMove?this._minMove:a>this._maxMove?this._maxMove:a},_applyOrientation:function(a,b){this._removeStyle(b);this._setStyle(a)},_setStyle:function(a){"horizontal"==a?(this.addEventListener("mousedown",this._onMouseDownY,this),this.addEventListener("mousemove",this._onMouseMoveY,this),this.addEventListener("mouseup",this._onMouseUpY,this),this.addState("horizontal"),this._handle.addState("horizontal"),this._sliderHandle.addState("horizontal")):"vertical"==a&&(this.addEventListener("mousemove",this._onMouseMoveX,this),this.addEventListener("mousedown",this._onMouseDownX,this),this.addEventListener("mouseup",this._onMouseUpX,this),this.addState("vertical"),this._handle.addState("vertical"),this._sliderHandle.addState("vertical"))},_removeStyle:function(a){"horizontal"==a?(this.removeEventListener("mousedown",this._onMouseDownY,this),this.removeEventListener("mousemove",this._onMouseMoveY,this),this.removeEventListener("mouseup",this._onMouseUpY,this),this.removeState("horizontal"),this._handle.removeState("horizontal"),this._sliderHandle.removeState("horizontal")):"vertical"==a&&(this.removeEventListener("mousedown",this._onMouseDownX,this),this.removeEventListener("mousemove",this._onMouseMoveX,this),this.removeEventListener("mouseup",this._onMouseUpX,this),this.removeState("vertical"),this._handle.removeState("vertical"),this._sliderHandle.removeState("vertical"))},_sendWidgetSelected:function(){var a=this._slider.getLeft()+this._frameOffset;"rtl"===this.getDirection()&&(a=-a);var b=this._slider.getTop()+this._frameOffset;rwt.remote.EventUtil.notifySelected(this,this.getLeft()+a,this.getTop()+b,this.getWidth(),this.getHeight(),this.getCapture()?"drag":null)}}});rwt.remote.HandlerRegistry.add("rwt.widgets.Sash",{factory:function(a){var b=new rwt.widgets.Sash;rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);b.setUserData("isControl",!0);rwt.remote.HandlerUtil.setParent(b,a.parent);var c=rwt.widgets.util.Layout.ORIENTATION_VERTICAL;-1!=a.style.indexOf("HORIZONTAL")&&(c=rwt.widgets.util.Layout.ORIENTATION_HORIZONTAL);b.setOrientation(c);return b},destructor:rwt.remote.HandlerUtil.getControlDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:rwt.remote.HandlerUtil.extendControlProperties([]),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({}),events:["Selection"],listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({})});rwt.remote.HandlerRegistry.add("rwt.widgets.Canvas",{factory:function(a){var b=new rwt.widgets.Composite;rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);b.setUserData("isControl",!0);rwt.remote.HandlerUtil.setParent(b,a.parent);return b},destructor:rwt.remote.HandlerUtil.getControlDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:rwt.remote.HandlerUtil.extendControlProperties(["backgroundGradient","roundedBorder","clientArea"]),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({backgroundGradient:rwt.remote.HandlerUtil.getBackgroundGradientHandler(),roundedBorder:rwt.remote.HandlerUtil.getRoundedBorderHandler()}),listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({}),methods:["addListener","removeListener"],methodHandler:rwt.remote.HandlerUtil.extendListenerMethodHandler({}),scriptingMethods:rwt.remote.HandlerUtil.extendControlScriptingMethods({redraw:function(){var a=rwt.widgets.util.WidgetUtil.getGC(this),b=this.getInnerWidth(),c=this.getInnerHeight(),d=this.getBackgroundColor(),e=this.getTextColor(),f=null;this.getFont()&&(f=[this.getFont().getFamily(),this.getFont().getSize(),this.getFont().getBold(),this.getFont().getItalic()]);a.init(0,0,b,c,f,rwt.util.Colors.stringToRgb(d?d:"#000000"),rwt.util.Colors.stringToRgb(e?e:"#000000"))}})});rwt.qx.Class.define("rwt.widgets.List",{extend:rwt.widgets.base.Scrollable,construct:function(a){this.base(arguments,new rwt.widgets.base.VerticalBoxLayout);this.setAppearance("list");this.setScrollBarsVisible(!1,!1);this.setEnableElementFocus(!1);this._manager=new rwt.widgets.util.SelectionManager(this._clientArea);this._manager.setMultiSelection(a);this._manager.setDragSelection(!1);this._manager.addEventListener("changeLeadItem",this._onChangeLeadItem,this);this._manager.addEventListener("changeSelection",this._onSelectionChange,this);this.addEventListener("focus",this._onFocusChange,this);this.addEventListener("blur",this._onFocusChange,this);this.addEventListener("mouseover",this._onMouseOver,this);this.addEventListener("mousedown",this._onMouseDown,this);this.addEventListener("mouseup",this._onMouseUp,this);this.addEventListener("click",this._onClick,this);this.addEventListener("dblclick",this._onDblClick,this);this.addEventListener("keypress",this._onKeyPress,this);this.addEventListener("appear",this._onAppear,this);this.addEventListener("userScroll",this._onUserScroll);this.initOverflow();this.initTabIndex();this._pressedString="";this._topIndex=this._itemHeight=this._itemWidth=this._lastKeyPress=0;this._markupEnabled=!1},destruct:function(){this._disposeObjects("_manager")},members:{setMarkupEnabled:function(a){this._markupEnabled=a},getSelectedItem:function(){return this._manager.getSelectedItems()[0]||null},getSelectedItems:function(){return this._manager.getSelectedItems()},_onAppear:function(){this._applyTopIndex(this._topIndex)},setTopIndex:function(a){this._topIndex=a;this._applyTopIndex(a)},_applyTopIndex:function(a){var b=this._manager.getItems();0<b.length&&b[0].isCreated()&&0<this._itemHeight&&this.setVBarSelection(a*this._itemHeight)},_getTopIndex:function(){var a=0,b=this._clientArea.getScrollTop(),c=this._manager.getItems();0<c.length&&(c=this._manager.getItemHeight(c[0]),0<c&&(a=Math.round(b/c)));return a},_onChangeLeadItem:function(){if(!rwt.remote.EventUtil.getSuspended()){var a=this._clientArea.indexOf(this._manager.getLeadItem());rwt.remote.Connection.getInstance().getRemoteObject(this).set("focusIndex",a)}},_onSelectionChange:function(){rwt.remote.EventUtil.getSuspended()||(this._sendSelectionChange(),rwt.remote.EventUtil.notifySelected(this));this._updateSelectedItemState()},_sendSelectionChange:function(){for(var a=[],b=this._manager.getSelectedItems(),c=0;c<b.length;c++){var d=this._clientArea.indexOf(b[c]);a.push(d)}rwt.remote.Connection.getInstance().getRemoteObject(this).set("selection",a)},_onFocusChange:function(){this._updateSelectedItemState()},_updateSelectedItemState:function(){for(var a=this._manager.getSelectedItems(),b=0;b<a.length;b++)a[b].toggleState("parent_unfocused",!this.getFocused())},_onUserScroll:function(){this._topIndex=this._isCreated?this._getTopIndex():0;rwt.remote.Connection.getInstance().getRemoteObject(this).set("topIndex",this._topIndex)},_onDblClick:function(){rwt.remote.EventUtil.notifyDefaultSelected(this)},_onMouseOver:function(a){var b=this.getListItemTarget(a.getTarget());b&&this._manager.handleMouseOver(b,a)},_onMouseDown:function(a){if(!this._checkAndProcessHyperlink(a)){var b=this.getListItemTarget(a.getTarget());b&&this._manager.handleMouseDown(b,a)}},_onMouseUp:function(a){if(!this._checkAndProcessHyperlink(a)){var b=this.getListItemTarget(a.getTarget());b&&this._manager.handleMouseUp(b,a)}},_onClick:function(a){if(!this._checkAndProcessHyperlink(a)){var b=this.getListItemTarget(a.getTarget());b&&this._manager.handleClick(b,a)}},getListItemTarget:function(a){for(;null!=a&&a.getParent()!=this._clientArea;)a=a.getParent();return a},_onKeyPress:function(a){this._manager.handleKeyPress(a);if(!a.isAltPressed()&&!a.isCtrlPressed()&&0!==a.getCharCode()){1E3<(new Date).valueOf()-this._lastKeyPress&&(this._pressedString="");this._pressedString+=String.fromCharCode(a.getCharCode());var b=this.findString(this._pressedString,null);if(b){var c=this._manager._getChangeValue(),d=this._manager.getFireChange();this._manager.setFireChange(!1);this._manager._deselectAll();this._manager.setItemSelected(b,!0);this._manager.setAnchorItem(b);this._manager.setLeadItem(b);b.scrollIntoView();this._manager.setFireChange(d);d&&this._manager._hasChanged(c)&&this._manager._dispatchChange()}this._lastKeyPress=(new Date).valueOf();a.preventDefault()}},findString:function(a,b){return this._findItem(a,b||0)},_findItem:function(a,b){var c=this.getItems();null==b&&(b=c.indexOf(this.getSelectedItem()),-1==b&&(b=0));for(var d=b;d<c.length;d++)if(c[d].matchesString(a))return c[d];for(d=0;d<b;d++)if(c[d].matchesString(a))return c[d];return null},setItems:function(a){a=this._escapeItems(a);for(var b=this._manager.getLeadItem(),c=this._manager.getAnchorItem(),d=this._manager.getSelectedItems(),e=this.getItems(),f=0;f<a.length;f++)if(f<e.length)e[f].setLabel(a[f]);else{var g=new rwt.widgets.ListItem;g.setDirection(this.getDirection());g.addEventListener("mouseover",this._onListItemMouseOver,this);g.addEventListener("mouseout",this._onListItemMouseOut,this);this._renderItemDimension(g);g.setTabIndex(null);g.setLabel(a[f]);0===f%2&&g.addState("even");null!==this._customVariant&&g.addState(this._customVariant);this._clientArea.add(g)}for(;this._clientArea.getChildrenLength()>a.length;)e=this._clientArea.getLastChild(),e.removeEventListener("mouseover",this._onListItemMouseOver,this),e.removeEventListener("mouseout",this._onListItemMouseOut,this),e._isDisplayable=!0,e.destroy();this._manager.setSelectedItems(d);this._manager.setLeadItem(b);this._manager.getMultiSelection()&&this._manager.setAnchorItem(c);this._updateScrollDimension();this._applyTopIndex(this._topIndex)},_escapeItems:function(a){if(!this._markupEnabled)for(var b=rwt.util.Encoding,c=0;c<a.length;c++)a[c]=b.replaceNewLines(a[c]," "),a[c]=b.escapeText(a[c],!1),a[c]=b.replaceWhiteSpaces(a[c]);return a},getItems:function(){return this._manager.getItems()},getItemsCount:function(){return this.getItems().length},getItemIndex:function(a){return this._clientArea.indexOf(a)},selectItem:function(a){-1==a?this._manager.deselectAll():(a=this.getItems()[a],this._manager.setSelectedItem(a),this._clientArea.isCreated()&&this._clientArea.isDisplayable()&&this._manager.scrollItemIntoView(a))},selectItems:function(a){this._manager.deselectAll();for(var b=0;b<a.length;b++){var c=this.getItems()[a[b]];this._manager.setItemSelected(c,!0)}},focusItem:function(a){if(-1==a)this._manager.setLeadItem(null);else{var b=this.getItems();this._manager.setLeadItem(b[a])}},selectAll:function(){!0===this._manager.getMultiSelection()&&this._manager.selectAll()},setItemDimensions:function(a,b){this._itemWidth=a;this._itemHeight=b;for(var c=this.getItems(),d=0;d<c.length;d++)this._renderItemDimension(c[d]);this._vertScrollBar.setIncrement(b);this._updateScrollDimension();this._applyTopIndex(this._topIndex)},_updateScrollDimension:function(){var a=this.getItems().length;this._horzScrollBar.setMaximum(this._itemWidth);this._vertScrollBar.setMaximum(this._itemHeight*a)},setCustomVariant:function(a){if(null!==this._customVariant){var b=this._customVariant;this._clientArea.forEachChild(function(){this.removeState(b)})}this._clientArea.forEachChild(function(){this.addState(a)});this.base(arguments,a)},_renderItemDimension:function(a){a.setWidth(this._itemWidth);a.setHeight(this._itemHeight)},_onListItemMouseOver:function(a){a.getTarget().addState("over")},_onListItemMouseOut:function(a){a.getTarget().removeState("over")},_checkAndProcessHyperlink:function(a){var b=null,c=a.getOriginalTarget();this._markupEnabled&&c instanceof rwt.widgets.ListItem&&(b=this._findHyperlink(a),null!==b&&this._isRWTHyperlink(b)&&(a.setDefaultPrevented(!0),"click"===a.getType()&&this._activateHyperlink(b)));return null!==b},_activateHyperlink:function(a){var b=a.getAttribute("href");b||(b=a.innerHTML);rwt.remote.EventUtil.notifySelected(this,{detail:"hyperlink",text:b})},_findHyperlink:function(a){a=a.getDomTarget();for(var b=a.tagName.toLowerCase();"a"!==b&&"div"!==b;)a=a.parentNode,b=a.tagName.toLowerCase();return"a"===b?a:null},_isRWTHyperlink:function(a){return"_rwt"===a.getAttribute("target")},_applyDirection:function(a){this.base(arguments,a);this._clientArea.setHorizontalChildrenAlign("rtl"===a?"right":"left");this._clientArea.forEachChild(function(){this.setDirection(a)})}}});rwt.remote.HandlerRegistry.add("rwt.widgets.List",{factory:function(a){var b=-1!=a.style.indexOf("MULTI"),b=new rwt.widgets.List(b);b.setMarkupEnabled(!0===a.markupEnabled);rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);b.setUserData("isControl",!0);rwt.remote.HandlerUtil.setParent(b,a.parent);return b},destructor:rwt.remote.HandlerUtil.getControlDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:rwt.remote.HandlerUtil.extendControlProperties(["items","selectionIndices","topIndex","focusIndex","itemDimensions"]),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({selectionIndices:function(a,b){a.hasState("rwt_MULTI")?a.getItemsCount()===b.length?a.selectAll():a.selectItems(b):a.selectItem(void 0!==b[0]?b[0]:-1)},focusIndex:function(a,b){a.focusItem(b)},scrollBarsVisible:function(a,b){a.setScrollBarsVisible(b[0],b[1])},itemDimensions:function(a,b){a.setItemDimensions(b[0],b[1])}}),events:["Selection","DefaultSelection"],listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({}),scriptingMethods:rwt.remote.HandlerUtil.extendControlScriptingMethods({getSelection:function(){for(var a=this.getSelectedItems(),b=[],c=0;c<a.length;c++)b[c]=rwt.util.Encoding.unescape(a[c].getLabel());return b}})});rwt.qx.Class.define("rwt.widgets.util.TabUtil",{statics:{createTabItem:function(a,b,c){var d=rwt.remote.WidgetManager.getInstance(),e=d.findWidgetById(b),f=new rwt.widgets.TabItem;f.setTabIndex(null);f.setEnableElementFocus(!1);f.setDirection(e.getDirection());f.addEventListener("changeFocused",rwt.widgets.util.TabUtil._onTabItemChangeFocus);f.addEventListener("changeChecked",rwt.widgets.util.TabUtil._onTabItemSelected);f.addEventListener("click",rwt.widgets.util.TabUtil._onTabItemClick);e.addEventListener("changeDirection",function(){f.setDirection(e.getDirection())});e.getBar().addAt(f,c);b=new rwt.widgets.base.TabFolderPage(f);e.getPane().add(b);d.add(b,a+"pg");return f},releaseTabItem:function(a){a.removeEventListener("changeFocused",rwt.widgets.util.TabUtil._onTabItemChangeFocus);a.removeEventListener("changeChecked",rwt.widgets.util.TabUtil._onTabItemSelected);a.removeEventListener("click",rwt.widgets.util.TabUtil._onTabItemClick);var b=rwt.remote.WidgetManager.getInstance();a=b.findIdByWidget(a);b.dispose(a+"pg");b.dispose(a)},_onTabItemChangeFocus:function(a){a.getTarget().getFocused()&&a.getTarget().getParent().getParent().focus()},_onTabItemClick:function(a){a=a.getTarget().getParent().getParent();a.getFocused()||a.focus()},_onTabItemSelected:function(a){var b=a.getTarget();!rwt.remote.EventUtil.getSuspended()&&b.getChecked()&&(a=rwt.remote.WidgetManager.getInstance().findIdByWidget(b),b=b.getParent().getParent(),rwt.remote.Connection.getInstance().getRemoteObject(b).set("selection",a),rwt.remote.EventUtil.notifySelected(b,{item:a}))},onTabFolderKeyPress:function(a){var b=a.getTarget();if("rwt.widgets.TabFolder"==b.classname){var c=b.getBar().getManager(),d=c.getSelected();if(null!=d)switch(a.getKeyIdentifier()){case "Left":c.selectPrevious(d);rwt.widgets.util.TabUtil.markTabItemFocused(b,a.getTarget());a.stopPropagation();break;case "Right":c.selectNext(d),rwt.widgets.util.TabUtil.markTabItemFocused(b,a.getTarget()),a.stopPropagation()}}},onTabFolderChangeFocused:function(a){a=a.getTarget();var b=a.getBar().getManager().getSelected();rwt.widgets.util.TabUtil.markTabItemFocused(a,b)},markTabItemFocused:function(a,b){for(var c=a.getBar().getManager().getItems(),d=0;d<c.length;d++)c[d].removeState("focused");null!=b&&a.getFocused()&&b.addState("focused")}}});rwt.remote.HandlerRegistry.add("rwt.widgets.TabFolder",{factory:function(a){var b=new rwt.widgets.TabFolder;rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);b.setUserData("isControl",!0);rwt.remote.HandlerUtil.setParent(b,a.parent);b.setHideFocus(!0);b.setPlaceBarOnTop(-1===a.style.indexOf("BOTTOM"));return b},destructor:rwt.remote.HandlerUtil.getControlDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:rwt.remote.HandlerUtil.extendControlProperties(["selection"]),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({selection:function(a,b){rwt.remote.HandlerUtil.callWithTarget(b,function(b){for(var c=a.getBar().getChildren(),e=0;e<c.length;e++)c[e]===b?c[e].setChecked(!0):c[e].getChecked()&&c[e].setChecked(!1)})}}),events:["Selection"],listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({})});rwt.remote.HandlerRegistry.add("rwt.widgets.TabItem",{factory:function(a){var b=rwt.widgets.util.TabUtil.createTabItem(a.id,a.parent,a.index);rwt.remote.HandlerUtil.callWithTarget(a.parent,function(a){rwt.remote.HandlerUtil.addDestroyableChild(a,b);b.setUserData("protocolParent",a)});return b},destructor:function(a){var b=a.getUserData("control");b&&(b._isInGlobalDisposeQueue||b.setParent(null),a.setUserData("control",null));rwt.widgets.util.TabUtil.releaseTabItem(a);(b=a.getUserData("protocolParent"))&&rwt.remote.HandlerUtil.removeDestroyableChild(b,a)},properties:"text mnemonicIndex image control toolTipMarkupEnabled toolTip customVariant badge data".split(" "),propertyHandler:{data:rwt.remote.HandlerUtil.getControlPropertyHandler("data"),control:function(a,b){null!==b&&rwt.remote.HandlerUtil.callWithTarget(b,function(b){var c=rwt.remote.WidgetManager.getInstance().findIdByWidget(a)+"pg";rwt.remote.HandlerUtil.callWithTarget(c,function(c){b.setParent(c);a.setUserData("control",b)})})},toolTipMarkupEnabled:rwt.remote.HandlerUtil.getControlPropertyHandler("toolTipMarkupEnabled"),toolTip:rwt.remote.HandlerUtil.getControlPropertyHandler("toolTip"),badge:function(a,b){rwt.widgets.util.Badges.setBadge(a,b)}}});rwt.qx.Class.define("rwt.widgets.base.Calendar",{extend:rwt.widgets.base.BoxLayout,construct:function(a){this.base(arguments);this.setOrientation("vertical");var b=new rwt.widgets.base.BoxLayout;b.setAppearance("calendar-navBar");b.set({height:"auto",spacing:1});var c=new rwt.widgets.base.BasicButton("push",!0),d=new rwt.widgets.base.BasicButton("push",!0),e=new rwt.widgets.base.Label,f=new rwt.widgets.base.BasicButton("push",!0),g=new rwt.widgets.base.BasicButton("push",!0),h=rwt.remote.WidgetManager.getInstance();h.setToolTip(c,"Previous year");h.setToolTip(d,"Previous month");h.setToolTip(f,"Next month");h.setToolTip(g,"Next year");c.setTabIndex(null);c.setUserData("calendar-button",!0);d.setTabIndex(null);d.setUserData("calendar-button",!0);f.setTabIndex(null);f.setUserData("calendar-button",!0);g.setTabIndex(null);g.setUserData("calendar-button",!0);c.setAppearance("calendar-toolbar-previous-year-button");d.setAppearance("calendar-toolbar-previous-month-button");f.setAppearance("calendar-toolbar-next-month-button");g.setAppearance("calendar-toolbar-next-year-button");c.addEventListener("click",this._onNavButtonClicked,this);d.addEventListener("click",this._onNavButtonClicked,this);f.addEventListener("click",this._onNavButtonClicked,this);g.addEventListener("click",this._onNavButtonClicked,this);this._lastYearBt=c;this._lastMonthBt=d;this._nextMonthBt=f;this._nextYearBt=g;e.setAppearance("calendar-monthyear");e.set({width:"1*"});b.add(c,d,e,f,g);this._monthYearLabel=e;c=new rwt.widgets.base.Parent;c.setAppearance("calendar-datepane");c.set({width:8*rwt.widgets.base.Calendar.CELL_WIDTH,height:7*rwt.widgets.base.Calendar.CELL_HEIGHT});d=new rwt.widgets.base.Label;d.setAppearance("calendar-week");d.set({width:rwt.widgets.base.Calendar.CELL_WIDTH,height:rwt.widgets.base.Calendar.CELL_HEIGHT,left:0});d.addState("header");c.add(d);this._weekdayLabelArr=[];for(e=1;8>e;e++)d=new rwt.widgets.base.Label,d.setAppearance("calendar-weekday"),d.setSelectable(!1),d.setCursor("default"),d.set({width:rwt.widgets.base.Calendar.CELL_WIDTH,height:rwt.widgets.base.Calendar.CELL_HEIGHT,left:e*rwt.widgets.base.Calendar.CELL_WIDTH}),c.add(d),this._weekdayLabelArr.push(d);this._dayLabelArr=[];this._weekLabelArr=[];for(e=0;6>e;e++)for(d=new rwt.widgets.base.Label,d.setAppearance("calendar-week"),d.setSelectable(!1),d.setCursor("default"),d.set({width:rwt.widgets.base.Calendar.CELL_WIDTH,height:rwt.widgets.base.Calendar.CELL_HEIGHT,left:0,top:(e+1)*rwt.widgets.base.Calendar.CELL_HEIGHT}),c.add(d),this._weekLabelArr.push(d),f=1;8>f;f++)d=new rwt.widgets.base.Label,d.setAppearance("calendar-day"),d.setSelectable(!1),d.setCursor("default"),d.set({width:rwt.widgets.base.Calendar.CELL_WIDTH,height:rwt.widgets.base.Calendar.CELL_HEIGHT,left:f*rwt.widgets.base.Calendar.CELL_WIDTH,top:(e+1)*rwt.widgets.base.Calendar.CELL_HEIGHT}),d.addEventListener("mousedown",this._onDayClicked,this),d.addEventListener("dblclick",this._onDayDblClicked,this),d.addEventListener("mouseover",this._onDayMouseOver,this),d.addEventListener("mouseout",this._onDayMouseOut,this),d.setUserData("calendar-day",!0),c.add(d),this._dayLabelArr.push(d);d=null!=a?a:new Date;this.showMonth(d.getMonth(),d.getFullYear());this.add(b);this.add(c);this._navBar=b;this._datePane=c;this.initWidth();this.initHeight()},events:{select:"rwt.event.DataEvent"},statics:{CELL_WIDTH:24,CELL_HEIGHT:16,MONTH_NAMES:[],WEEKDAY_NAMES:[]},properties:{width:{refine:!0,init:"auto"},height:{refine:!0,init:"auto"},shownMonth:{check:"Integer",init:null,nullable:!0,event:"changeShownMonth"},shownYear:{check:"Integer",init:null,nullable:!0,event:"changeShownYear"},date:{check:"Date",init:null,nullable:!0,apply:"_applyDate",event:"changeDate",transform:"_checkDate"},minimum:{check:"Date",init:null,nullable:!0,apply:"_applyMinimum"},maximum:{check:"Date",init:null,nullable:!0,apply:"_applyMaximum"}},members:{_getSubWidgets:function(){var a=[this._monthYearLabel];a.concat(this._weekdayLabelArr,this._dayLabelArr,this._weekLabelArr);return a},_applyDirection:function(a){this.base(arguments,a);var b="rtl"===a;this._lastYearBt.setDirection(a);this._lastMonthBt.setDirection(a);this._nextMonthBt.setDirection(a);this._nextYearBt.setDirection(a);this._navBar.setReverseChildrenOrder(b);this._navBar.setHorizontalChildrenAlign(b?"right":"left");this._datePane.getLayoutImpl().setMirror(b);this._datePane.forEachChild(function(){this.setDirection(a)})},_checkDate:function(a){return null==a?null:new Date(a.getTime())},_applyDate:function(a){if(null==a||this.getShownMonth()==a.getMonth()&&this.getShownYear()==a.getFullYear()){a=null==a?-1:a.getDate();for(var b=0;42>b;b++){var c=this._dayLabelArr[b];c.hasState("otherMonth")?c.hasState("selected")&&c.removeState("selected"):parseInt(c.getText(),10)==a?c.addState("selected"):c.hasState("selected")&&c.removeState("selected")}}else this.showMonth(a.getMonth(),a.getFullYear())},_onNavButtonClicked:function(a){var b=this.getShownYear(),c=this.getShownMonth();switch(a.getTarget()){case this._lastYearBt:b--;break;case this._lastMonthBt:c--;0>c&&(c=11,b--);break;case this._nextMonthBt:c++;12<=c&&(c=0,b++);break;case this._nextYearBt:b++}this.showMonth(c,b);this.setDate(new Date(b,c,1))},_onDayClicked:function(a){a.isLeftButtonPressed()&&!a.getTarget().hasState("disabled")&&(a=a.getTarget().dateTime,this.setDate(new Date(a)))},_onDayDblClicked:function(){this.createDispatchDataEvent("select",this.getDate())},_onDayMouseOver:function(a){a.getTarget().addState("over")},_onDayMouseOut:function(a){a.getTarget().removeState("over")},_onkeypress:function(a){var b=null,c=null,d=null,e="rtl"===this.getDirection();if(0===a.getModifiers())switch(a.getKeyIdentifier()){case "Left":b=e?1:-1;a.preventDefault();a.stopPropagation();break;case "Right":b=e?-1:1;a.preventDefault();a.stopPropagation();break;case "Up":b=-7;a.preventDefault();a.stopPropagation();break;case "Down":b=7;a.preventDefault();a.stopPropagation();break;case "PageUp":c=-1;a.preventDefault();a.stopPropagation();break;case "PageDown":c=1;a.preventDefault();a.stopPropagation();break;case "Home":case "End":a.preventDefault();a.stopPropagation();break;case "Enter":null!=this.getDate()&&this.createDispatchDataEvent("select",this.getDate());a.preventDefault();a.stopPropagation();return}else if(a.isShiftPressed())switch(a.getKeyIdentifier()){case "PageUp":d=-1;a.preventDefault();a.stopPropagation();break;case "PageDown":d=1,a.preventDefault(),a.stopPropagation()}if(null!=b||null!=c||null!=d)a=this.getDate(),null!=a&&(a=new Date(a.getTime())),null==a?a=new Date:(null!=b&&a.setDate(a.getDate()+b),null!=c&&a.setMonth(a.getMonth()+c),null!=d&&a.setFullYear(a.getFullYear()+d)),this.setDate(a)},showMonth:function(a,b){if(null!=a&&a!=this.getShownMonth()||null!=b&&b!=this.getShownYear())null!=a&&this.setShownMonth(a),null!=b&&this.setShownYear(b),this._updateDatePane()},_updateDatePane:function(){var a=new Date,b=a.getFullYear(),c=a.getMonth(),a=a.getDate(),d=this.getDate(),e=null==d?-1:d.getFullYear(),f=null==d?-1:d.getMonth(),d=null==d?-1:d.getDate(),g=this.getShownMonth(),h=this.getShownYear(),k=this.__getWeekStart(),l=new Date(this.getShownYear(),this.getShownMonth(),1),m=this.getShownYear(),n=rwt.widgets.base.Calendar.MONTH_NAMES[this.getShownMonth()];this._monthYearLabel.setText(n+" "+m);for(var m=l.getDay(),n=(8-m)%7,p=0;7>p;p++){var r=(p+k)%7,q=this._weekdayLabelArr[p];l.setDate(n+r);var u=rwt.widgets.base.Calendar.WEEKDAY_NAMES[l.getDay()+1];q.setText(u);q.toggleState("weekend",this.__isWeekend(r))}l=new Date(h,g,1);p=(7+m-k)%7;l.setDate(l.getDate()-p);for(h=0;6>h;h++)for(this._weekLabelArr[h].setText(""+this.__getWeekInYear(l)),p=0;7>p;p++){var q=this._dayLabelArr[7*h+p],m=l.getFullYear(),n=l.getMonth(),k=l.getDate(),r=this.getMinimum(),u=this.getMaximum(),r=r&&l.getTime()<r.getTime(),u=u&&l.getTime()>u.getTime(),y=m==b&&n==c&&k==a;q.toggleState("selected",e==m&&f==n&&d==k);q.toggleState("otherMonth",n!=g);q.toggleState("today",y);q.toggleState("disabled",r||u);q.setText(""+k);q.dateTime=l.getTime();l.setDate(l.getDate()+1)}},__thursdayOfSameWeek:function(a){return new Date(a.getTime()+864E5*(3-(a.getDay()+6)%7))},__getWeekInYear:function(a){a=this.__thursdayOfSameWeek(a);var b=a.getFullYear(),b=this.__thursdayOfSameWeek(new Date(b,0,4));return Math.floor(1.5+(a.getTime()-b.getTime())/864E5/7)},__getWeekStart:function(){var a={MV:5,AE:6,AF:6,BH:6,DJ:6,DZ:6,EG:6,ER:6,ET:6,IQ:6,IR:6,JO:6,KE:6,KW:6,LB:6,LY:6,MA:6,OM:6,QA:6,SA:6,SD:6,SO:6,TN:6,YE:6,AS:0,AU:0,AZ:0,BW:0,CA:0,CN:0,FO:0,GE:0,GL:0,GU:0,HK:0,IE:0,IL:0,IS:0,JM:0,JP:0,KG:0,KR:0,LA:0,MH:0,MN:0,MO:0,MP:0,MT:0,NZ:0,PH:0,PK:0,SG:0,TH:0,TT:0,TW:0,UM:0,US:0,UZ:0,VI:0,ZA:0,ZW:0,MW:0,NG:0,TJ:0},b=this.__getTerritory();return null!=a[b]?a[b]:1},__getWeekendStart:function(){var a={EG:5,IL:5,SY:5,IN:0,AE:4,BH:4,DZ:4,IQ:4,JO:4,KW:4,LB:4,LY:4,MA:4,OM:4,QA:4,SA:4,SD:4,TN:4,YE:4},b=this.__getTerritory();return null!=a[b]?a[b]:6},__getWeekendEnd:function(){var a={AE:5,BH:5,DZ:5,IQ:5,JO:5,KW:5,LB:5,LY:5,MA:5,OM:5,QA:5,SA:5,SD:5,TN:5,YE:5,AF:5,IR:5,EG:6,IL:6,SY:6},b=this.__getTerritory();return null!=a[b]?a[b]:0},__isWeekend:function(a){var b=this.__getWeekendStart(),c=this.__getWeekendEnd();return c>b?a>=b&&a<=c:a>=b||a<=c},__getTerritory:function(){return(rwt.client.Client.getTerritory()||rwt.client.Client.getLanguage()).toUpperCase()},_applyMinimum:function(){this._updateDatePane()},_applyMaximum:function(){this._updateDatePane()}},destruct:function(){this._disposeObjects("_lastYearBt","_lastMonthBt","_nextMonthBt","_nextYearBt","_monthYearLabel");this._disposeObjectDeep("_weekdayLabelArr",1);this._disposeObjectDeep("_dayLabelArr",1);this._disposeObjectDeep("_weekLabelArr",1)}});rwt.qx.Class.define("rwt.widgets.CoolItem",{extend:rwt.widgets.base.Parent,construct:function(a){this.base(arguments);this.setOverflow("hidden");this.setAppearance("coolitem");this._orientation=a;this._handle=new rwt.widgets.base.Terminator;this._handle.addState(a);this._handle.setAppearance("coolitem-handle");this._handle.addEventListener("mousedown",this._onHandleMouseDown,this);this._handle.addEventListener("mousemove",this._onHandleMouseMove,this);this._handle.addEventListener("mouseup",this._onHandleMouseUp,this);this.add(this._handle);this._control=this._bufferedControlZIndex=this._bufferedZIndex=null},destruct:function(){null!=this._handle&&(this._handle.removeEventListener("mousedown",this._onHandleMouseDown,this),this._handle.removeEventListener("mousemove",this._onHandleMouseMove,this),this._handle.removeEventListener("mouseup",this._onHandleMouseUp,this),this._handle.dispose())},statics:{DRAG_CURSOR:"col-resize",CONTROL_OFFSET:6},members:{setLocked:function(a){this._handle.setDisplay(!a)},setControl:function(a){null!=a&&(a.setLeft(this.getLeft()+rwt.widgets.CoolItem.CONTROL_OFFSET),a.setDisplay(!0));null!=this._control&&this._control.setDisplay(!1);this._control=a},updateHandleBounds:function(){"vertical"==this._orientation?this._handle.setWidth(this.getWidth()):this._handle.setHeight(this.getHeight())},_applyParent:function(a,b){this.base(arguments,a,b);null!=a&&(this.setLocked(a.getLocked()),this.setDirection(a.getDirection()))},_onHandleMouseDown:function(a){this._handle.setCapture(!0);this.getTopLevelWidget().setGlobalCursor(rwt.widgets.CoolItem.DRAG_CURSOR);this._initialLeft=this.getLeft();this._offsetX=a.getPageX();this._bufferedZIndex=this.getZIndex();this.setZIndex(9999999);null!=this._control&&(this._bufferedControlZIndex=this._control.getZIndex(),this._control.setZIndex(1E7));this.setBackgroundColor(this._findBackground())},_applyLeft:function(a,b){this.base(arguments,a,b);null!=this._control&&this._control.setLeft(a+rwt.widgets.CoolItem.CONTROL_OFFSET)},_applyWidth:function(a,b){this.base(arguments,a,b);null!=this._control&&this._control.setWidth(a-rwt.widgets.CoolItem.CONTROL_OFFSET)},_onHandleMouseMove:function(a){this._handle.getCapture()&&this.setLeft(this._initialLeft+this._getMouseOffset(a))},_onHandleMouseUp:function(){this._handle.setCapture(!1);this.setZIndex(this._bufferedZIndex);null!=this._control&&this._control.setZIndex(this._bufferedControlZIndex);this.resetBackgroundColor();this.getTopLevelWidget().setGlobalCursor(null);rwt.remote.EventUtil.getSuspended()||rwt.remote.Connection.getInstance().getRemoteObject(this).call("move",{left:this.getLeft()})},_getMouseOffset:function(a){return"rtl"===this.getDirection()?this._offsetX-a.getPageX():a.getPageX()-this._offsetX},_findBackground:function(){for(var a=!0,b=null,c=this.getParent();a&&null!=c&&null==b;)c.getBackgroundColor&&(b=c.getBackgroundColor()),c.getParent?c=c.getParent():a=!1;return b}}});rwt.remote.HandlerRegistry.add("rwt.widgets.CoolItem",{factory:function(a){var b=rwt.remote.HandlerUtil.createStyleMap(a.style).VERTICAL?"vertical":"horizontal",b=new rwt.widgets.CoolItem(b);rwt.remote.HandlerUtil.setParent(b,a.parent);b.setMinWidth(0);b.setMinHeight(0);return b},destructor:rwt.remote.HandlerUtil.getWidgetDestructor(),properties:["bounds","control","customVariant","data"],propertyHandler:{data:rwt.remote.HandlerUtil.getControlPropertyHandler("data"),bounds:function(a,b){a.setLeft(b[0]);a.setTop(b[1]);a.setWidth(b[2]);a.setHeight(b[3]);a.updateHandleBounds()},control:function(a,b){rwt.remote.HandlerUtil.callWithTarget(b,function(b){a.setControl(b)})}}});rwt.qx.Class.define("rwt.widgets.Button",{extend:rwt.widgets.base.BasicButton,construct:function(a){this.base(arguments,a);this._alignment="arrow"===a?"up":"center";switch(a){case "arrow":this.addState("rwt_UP");this.setAppearance("push-button");break;case "push":case "toggle":this.setAppearance("push-button");break;case "check":this.setAppearance("check-box");break;case "radio":this.setAppearance("radio-button")}this.initTabIndex();this._mnemonicIndex=this._rawText=null;this._markupEnabled=!1},destruct:function(){this.setMnemonicIndex(null)},properties:{tabIndex:{refine:!0,init:1}},members:{setMarkupEnabled:function(a){this._markupEnabled=a},setText:function(a){this._rawText=a;this._mnemonicIndex=null;this._applyText(!1);this.dispatchSimpleEvent("changeText",this)},setMnemonicIndex:function(a){this._mnemonicIndex=a;var b=rwt.widgets.util.MnemonicHandler.getInstance();"number"===typeof a&&0<=a?b.add(this,this._onMnemonic):b.remove(this)},getMnemonicIndex:function(){return this._mnemonicIndex},setAlignment:function(a){this.hasState("rwt_ARROW")?(this.removeState("rwt_"+this._alignment.toUpperCase()),this.addState("rwt_"+a.toUpperCase())):this.setHorizontalChildrenAlign(a);this._alignment=a},setWrap:function(a){a&&(this.setFlexibleCell(2),this.setWordWrap(!0))},getToolTipTargetBounds:function(){if(this.getSelectionIndicator()){var a=parseInt(this.getCellNode(0).style.top,10);return{left:this._cachedBorderLeft+this.getPaddingLeft(),top:this._cachedBorderTop+a,width:this.getSelectionIndicator()[1],height:this.getSelectionIndicator()[2]}}return{left:0,top:0,width:this.getBoxWidth(),height:this.getBoxHeight()}},computeBadgePosition:function(){return[-3,-5,"auto","auto"]},_onMnemonic:function(a){switch(a.type){case "show":this._applyText(!0);break;case "hide":this._applyText(!1);break;case "trigger":var b=this._rawText.toUpperCase().charCodeAt(this._mnemonicIndex);a.charCode===b&&(this.setFocused(!0),this.execute(),a.success=!0)}},_applyText:function(a){var b=rwt.util.Encoding;if(this._rawText){var c=this._rawText;this._markupEnabled||(c=b.escapeText(this._rawText,a?this._mnemonicIndex:void 0),c=b.replaceNewLines(c,"\x3cbr/\x3e"));this.setCellContent(2,c)}else this.setCellContent(2,null)},_applyEnabled:function(a){this.base(arguments,a);null===this._mnemonicIndex||a||this._applyText(!1)},_afterRenderLayout:function(){this.getFocused()&&this._showFocusIndicator()},_ontabfocus:function(){this._showFocusIndicator()},_showFocusIndicator:function(){if(!rwt.widgets.util.FocusHandler.mouseFocus){var a=rwt.widgets.util.FocusIndicator.getInstance(),b=null!=this.getCellNode(2)?this.getCellNode(2):this.getCellNode(1);a.show(this,"Button-FocusIndicator",b)}},_visualizeBlur:function(){this.base(arguments);rwt.widgets.util.FocusIndicator.getInstance().hide(this)},_notifySelected:function(){rwt.remote.EventUtil.notifySelected(this)}}});rwt.remote.HandlerRegistry.add("rwt.widgets.Button",{factory:function(a){var b=rwt.remote.HandlerUtil.createStyleMap(a.style),c="push";b.CHECK?c="check":b.TOGGLE?c="toggle":b.RADIO?c="radio":b.ARROW&&(c="arrow");var d=new rwt.widgets.Button(c);d.setMarkupEnabled(!0===a.markupEnabled);d.setWrap(b.WRAP);rwt.remote.HandlerUtil.addStatesForStyles(d,a.style);d.setUserData("isControl",!0);rwt.remote.HandlerUtil.setParent(d,a.parent);rwt.remote.HandlerUtil.callWithTarget(a.parent,function(a){d.setNoRadioGroup(a.hasState("rwt_NO_RADIO_GROUP"))});return d},destructor:rwt.remote.HandlerUtil.getControlDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:rwt.remote.HandlerUtil.extendControlProperties("text mnemonicIndex alignment image selection grayed badge".split(" ")),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({image:function(a,b){null===b?a.setImage(b):a.setImage.apply(a,b)},badge:function(a,b){rwt.widgets.util.Badges.setBadge(a,b)}}),events:["Selection"],listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({}),methods:["addListener","removeListener"],methodHandler:rwt.remote.HandlerUtil.extendListenerMethodHandler({}),scriptingMethods:rwt.remote.HandlerUtil.extendControlScriptingMethods({getText:function(){return this.getCellContent(2)},getSelection:function(){return this.hasState("selected")}})});rwt.qx.Class.define("rwt.widgets.FileUpload",{extend:rwt.widgets.Button,construct:function(a){this.base(arguments,"push");this.setAppearance("file-upload");this.addEventListener("insertDom",this._layoutInputElement,this);this.addEventListener("elementOver",this._onMouseOverElement,this);this._iframe=this._inputElement=this._formElement=null;this._multi=a;this._filterExtensions=null;this._cursor="";this.__onValueChange=rwt.util.Functions.bind(this._onValueChange,this);this.setEnableElementFocus(!1);this._createIframeWidget()},destruct:function(){this._inputElement=this._formElement=null},members:{setFilterExtensions:function(a){this._filterExtensions=a.filter(function(a){return null!=a}).join();this._inputElement&&this._inputElement.setAttribute("accept",this._filterExtensions)},submit:function(a){if("string"!==typeof a)throw Error("No url given!");if(0===this._getFileNames().length)throw Error("No file selected!");if(null===this._formElement)throw Error("Form element not created!");this._formElement.setAttribute("action",a);this._formElement.submit()},destroy:function(){this.base(arguments);this._iframe.destroy()},execute:function(){},_createSubElements:function(){null===this._formElement?(this.base(arguments),this._createFormElement(),this._createInputElement()):(this._formElement.removeChild(this._inputElement),this._getTargetNode().removeChild(this._formElement),this.base(arguments),this._getTargetNode().appendChild(this._formElement),this._formElement.appendChild(this._inputElement))},_createFormElement:function(){this._formElement=document.createElement("form");this._formElement.setAttribute("target",this._getFrameName());this._formElement.setAttribute("method","POST");this._formElement.setAttribute("enctype","multipart/form-data");this._getTargetNode().appendChild(this._formElement)},_createInputElement:function(){this._inputElement=document.createElement("input");this._inputElement.style.position="absolute";this._inputElement.setAttribute("type","file");this._inputElement.setAttribute("name","file");this._inputElement.setAttribute("size","1");this._inputElement.setAttribute("title",rwt.client.Client.isTrident()?"":" ");this._multi&&this._inputElement.setAttribute("multiple","multiple");this._filterExtensions&&this._inputElement.setAttribute("accept",this._filterExtensions);this._inputElement.style.cursor=this._cursor;this._inputElement.onchange=this.__onValueChange;this._inputElement.style.opacity=0;this._formElement.appendChild(this._inputElement)},_createIframeWidget:function(){this._iframe=new rwt.widgets.base.Iframe;this._iframe.setSource("about:blank");this._iframe.setVisibility(!1);this._iframe.setWidth(0);this._iframe.setHeight(0);this._iframe.setFrameName(this._getFrameName());this._iframe.addToDocument()},_onValueChange:function(){try{var a=this._formatFileNames(this._getFileNames());0<a.length&&(rwt.remote.Connection.getInstance().getRemoteObject(this).set("fileNames",a),this._notifySelected())}catch(b){rwt.runtime.ErrorHandler.processJavaScriptError(b)}},_getFileNames:function(){var a=this._inputElement,b=a.value?[a.value]:[];if(a.files)for(var c=0;c<a.files.length;c++)b[c]=a.files[c].name;return b},_layoutPost:function(a){this.base(arguments,a);(a.width||a.height)&&this._layoutInputElement()},_layoutInputElement:function(){this.getEnabled()&&this.isSeeable()&&!rwt.client.Client.isMobileSafari()&&(this._layoutInputElementHorizontal(10),this._layoutInputElementVertical(10))},_layoutInputElementHorizontal:function(a){var b=this.getBoxWidth(),c=(b+2*a)/.6,d=c/10;this._inputElement.style.fontSize=d;for(var e=0;this._inputElement.offsetWidth<=c;)if(d+=10,this._inputElement.style.font=d+"px monospace",e++,100<e)throw Error("Failed to force input-element width.");this._inputElement.style.left=b-this._inputElement.offsetWidth+a+"px"},_layoutInputElementVertical:function(a){var b=this.getBoxHeight();this._inputElement.style.height=b+2*a+"px";this._inputElement.style.top=-1*a+"px"},setStyleProperty:function(a,b){"cursor"===a?(this._cursor=b,null!=this._inputElement&&(this._inputElement.style.cursor=b)):this.base(arguments,a,b)},_applyEnabled:function(a,b){this.base(arguments,a,b);this._inputElement&&(this._inputElement.style.display=a?"":"none",this._layoutInputElement())},_afterAppear:function(){this.base(arguments);this._layoutInputElement()},_onMouseOver:function(a){a.getDomTarget()===this._inputElement&&this.base(arguments,a)},_onMouseOverElement:function(a){a.getDomTarget()===this._inputElement&&this._onMouseOver(a)},_onMouseDown:function(a){a.getDomTarget()===this._inputElement&&this.base(arguments,a);"chrome"===rwt.client.Client.getBrowser()&&this._visualizeBlur()},_onMouseUp:function(a){(a.getDomTarget()===this._inputElement||this.hasState("abandoned"))&&this.base(arguments,a)},_onFocus:function(a){this.base(arguments,a);this._inputElement.focus()},_onKeyDown:rwt.util.Functions.returnTrue,_onKeyUp:rwt.util.Functions.returnTrue,_showFocusIndicator:function(){var a=rwt.widgets.util.FocusIndicator.getInstance(),b=null!=this.getCellNode(2)?this.getCellNode(2):this.getCellNode(1);a.show(this,"FileUpload-FocusIndicator",b)},_formatFileNames:function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];-1!=d.indexOf("\\")?d=d.substr(d.lastIndexOf("\\")+1):-1!=d.indexOf("/")&&(d=d.substr(d.lastIndexOf("/")+1));b[c]=d}return b},_getFrameName:function(){return"FileUpload_"+this.toHashCode()}}});rwt.remote.HandlerRegistry.add("rwt.widgets.FileUpload",{factory:function(a){var b=-1!==a.style.indexOf("MULTI"),b=new rwt.widgets.FileUpload(b);rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);b.setUserData("isControl",!0);rwt.remote.HandlerUtil.setParent(b,a.parent);return b},destructor:rwt.remote.HandlerUtil.getControlDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:rwt.remote.HandlerUtil.extendControlProperties(["text","image","filterExtensions"]),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({image:function(a,b){null===b?a.setImage(b):a.setImage.apply(a,b)}}),events:["Selection"],listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({}),methods:["submit"],methodHandler:{submit:function(a,b){a.submit(b.url)}}});rwt.qx.Class.define("rwt.widgets.Slider",{extend:rwt.widgets.base.AbstractSlider,construct:function(a){this.base(arguments,a);this._requestScheduled=!1;this.addEventListener("contextmenu",this._onContextMenu,this);this.addEventListener("keypress",this._onKeyPress,this)},statics:{SEND_DELAY:50,_isNoModifierPressed:function(a){return!a.isCtrlPressed()&&!a.isShiftPressed()&&!a.isAltPressed()&&!a.isMetaPressed()}},members:{_configureAppearance:function(){this.setAppearance("slider");this._thumb.setAppearance("slider-thumb");this._minButton.setAppearance("slider-min-button");this._maxButton.setAppearance("slider-max-button")},setSelection:function(a){this._setSelection(a)},setIncrement:function(a){this._setIncrement(a)},setPageIncrement:function(a){this._setPageIncrement(a)},getToolTipTargetBounds:function(){var a=this._horizontal&&"rtl"===this.getDirection()?this.getWidth()-this._thumb.getRight()-this._thumb.getWidth():this._thumb.getLeft();return{left:this._cachedBorderLeft+(a||0),top:this._cachedBorderLeft+(this._thumb.getTop()||0),width:this._thumb.getBoxWidth(),height:this._thumb.getBoxHeight()}},_setSelection:function(a){this.base(arguments,a);this._scheduleSendChanges()},_onContextMenu:function(a){var b=this.getContextMenu();null!=b&&(b.setLocation(a.getPageX(),a.getPageY()),b.setOpener(this),b.show(),a.stopPropagation())},_onKeyPress:function(a){var b=a.getKeyIdentifier(),c=null;if(rwt.widgets.Slider._isNoModifierPressed(a)){switch(b){case "Left":c=this._selection-this._increment;a.preventDefault();a.stopPropagation();break;case "Down":c=this._horizontal?this._selection-this._increment:this._selection+this._increment;a.preventDefault();a.stopPropagation();break;case "Right":c=this._selection+this._increment;a.preventDefault();a.stopPropagation();break;case "Up":c=this._horizontal?this._selection+this._increment:this._selection-this._increment;a.preventDefault();a.stopPropagation();break;case "Home":c=this._minimum;a.preventDefault();a.stopPropagation();break;case "End":c=this._maximum;a.preventDefault();a.stopPropagation();break;case "PageDown":c=this._horizontal?this._selection-this._pageIncrement:this._selection+this._pageIncrement;a.preventDefault();a.stopPropagation();break;case "PageUp":c=this._horizontal?this._selection+this._pageIncrement:this._selection-this._pageIncrement,a.preventDefault(),a.stopPropagation()}null!=c&&(c<this._minimum&&(c=this._minimum),c>this._maximum&&(c=this._maximum),this.setSelection(c),this._readyToSendChanges&&(this._readyToSendChanges=!1,rwt.client.Timer.once(this._sendChanges,this,rwt.widgets.Slider.SEND_DELAY)))}},_onMouseWheel:function(a){this.getFocused()&&(this.base(arguments,a),this._readyToSendChanges&&(this._readyToSendChanges=!1,rwt.client.Timer.once(this._sendChanges,this,500)))},_scheduleSendChanges:function(){rwt.remote.EventUtil.getSuspended()||this._requestScheduled||(this._requestScheduled=!0,rwt.client.Timer.once(this._sendChanges,this,rwt.widgets.Slider.SEND_DELAY))},_sendChanges:function(){rwt.remote.Connection.getInstance().getRemoteObject(this).set("selection",this._selection);rwt.remote.EventUtil.notifySelected(this);this._requestScheduled=!1}}});rwt.remote.HandlerRegistry.add("rwt.widgets.Slider",{factory:function(a){var b=-1!=a.style.indexOf("HORIZONTAL"),b=new rwt.widgets.Slider(b);rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);b.setUserData("isControl",!0);rwt.remote.HandlerUtil.setParent(b,a.parent);return b},destructor:rwt.remote.HandlerUtil.getControlDestructor(),properties:rwt.remote.HandlerUtil.extendControlProperties("minimum maximum selection increment pageIncrement thumb".split(" ")),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({}),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),events:["Selection"],listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({}),methods:["addListener","removeListener"],methodHandler:rwt.remote.HandlerUtil.extendListenerMethodHandler({}),scriptingMethods:rwt.remote.HandlerUtil.extendControlScriptingMethods({getSelection:function(){return this._selection},getMaximum:function(){return this._maximum},getMinimum:function(){return this._minimum}})});rwt.qx.Class.define("rwt.widgets.Spinner",{extend:rwt.widgets.base.Spinner,construct:function(){this.base(arguments);this.setWrap(!1);this._textfield.setFocused=function(){};this._textfield.addEventListener("changeValue",this._onChangeValue,this);this._textfield.addEventListener("keypress",this._onChangeValue,this);this._textfield.addEventListener("blur",this._onChangeValue,this);this._textfield.addEventListener("keydown",this._onKeyDown,this);this._textfield.setTabIndex(null);this.addEventListener("changeEnabled",this._onChangeEnabled,this);this.addEventListener("focusout",this._onFocusOut,this);this._checkValue=this.__checkValueWithDigits},destruct:function(){this._textfield.removeEventListener("changeValue",this._onChangeValue,this);this._textfield.removeEventListener("keypress",this._onChangeValue,this);this._textfield.removeEventListener("blur",this._onChangeValue,this);this._textfield.removeEventListener("keydown",this._onKeyDown,this);this.removeEventListener("changeEnabled",this._onChangeEnabled,this);this.removeEventListener("focusout",this._onFocusOut,this)},properties:{digits:{check:"Integer",init:0,apply:"_applyDigits"},decimalSeparator:{check:"String",init:".",apply:"_applyDecimalSeparator"}},members:{_applyTextColor:function(a,b){this.base(arguments,a,b);this._textfield.setTextColor(a)},setFont:function(a){this._textfield.setFont(a)},setMaxLength:function(a){this._textfield.setMaxLength(a)},setMinMaxSelection:function(a,b,c){this.setMin(Math.min(a,this.getMin()));this.setMax(Math.max(b,this.getMax()));this.setValue(c);this.setMin(a);this.setMax(b)},addState:function(a){this.base(arguments,a);"rwt_RIGHT_TO_LEFT"===a&&(this._upbutton.addState(a),this._downbutton.addState(a),this._textfield.addState(a))},removeState:function(a){this.base(arguments,a);"rwt_RIGHT_TO_LEFT"===a&&(this._upbutton.removeState(a),this._downbutton.removeState(a),this._textfield.removeState(a))},_applyDirection:function(a){this.base(arguments,a);this.setReverseChildrenOrder("rtl"===a);this.setHorizontalChildrenAlign("rtl"===a?"right":"left")},_applyCursor:function(a,b){this.base(arguments,a,b);a?(this._upbutton.setCursor(a),this._downbutton.setCursor(a),this._textfield.setCursor(a)):(this._upbutton.resetCursor(),this._downbutton.resetCursor(),this._textfield.resetCursor())},_visualizeFocus:function(){this._textfield._visualizeFocus();this._textfield.isCreated()&&this._textfield.selectAll();this.addState("focused")},_visualizeBlur:function(){this._textfield._setSelectionLength(0);this._textfield._visualizeBlur();this.removeState("focused")},_oninput:function(){this._suspendTextFieldUpdate=!0;this._checkValue(!0,!1);this._suspendTextFieldUpdate=!1},_onChangeValue:function(){if(!rwt.remote.EventUtil.getSuspended()){var a=rwt.remote.Connection.getInstance(),b=a.getRemoteObject(this);b.set("selection",this.getManager().getValue());if(b.isListening("Selection")||b.isListening("Modify"))a.onNextSend(this._onSend,this),a.sendDelayed(500)}},_onChangeEnabled:function(a){a=a.getValue();this._upbutton.setEnabled(a&&this.getValue()<this.getMax());this._downbutton.setEnabled(a&&this.getValue()>this.getMin())},_onKeyDown:function(a){"Enter"!=a.getKeyIdentifier()||a.isShiftPressed()||a.isAltPressed()||a.isCtrlPressed()||a.isMetaPressed()||(a.stopPropagation(),rwt.remote.EventUtil.notifyDefaultSelected(this))},_onmousewheel:function(a){this.getFocused()&&this.base(arguments,a)},_onSend:function(){rwt.remote.EventUtil.notifySelected(this);this.isDisposed()||rwt.remote.Connection.getInstance().getRemoteObject(this).notify("Modify",null,!0)},_applyDigits:function(){var a=this.getManager().getValue();0<this.getDigits()?this._textfield.setValue(this._format(a)):this._textfield.setValue(String(a))},_applyDecimalSeparator:function(){var a=this.getManager().getValue();0<this.getDigits()&&this._textfield.setValue(this._format(a))},_format:function(a){var b=this.getDigits();a=(a/Math.pow(10,b)).toFixed(b);b=this.getDecimalSeparator();if("."!=b){var c=rwt.util.Encoding.escapeRegexpChars(".");a=a.replace(new RegExp(c),b)}return a},_limit:function(a){var b=this.getDigits();0<b&&(a*=Math.pow(10,b));a=Math.round(a);a>this.getMax()&&(a=this.getMax());a<this.getMin()&&(a=this.getMin());return a},_onFocusOut:function(){this._checkValue(!0,!1)},_onkeypress:function(a){var b=a.getKeyIdentifier(),c=this.getDecimalSeparator();0<this.getDigits()&&b==c||this.base(arguments,a)},_onchange:function(){var a=this.getManager().getValue();this._suspendTextFieldUpdate||(0<this.getDigits()?this._textfield.setValue(this._format(a)):this._textfield.setValue(String(a)));a!=this.getMin()||this.getWrap()?this._downbutton.resetEnabled():(this._downbutton.removeState("pressed"),this._downbutton.setEnabled(!1),this._timer.stop());a!=this.getMax()||this.getWrap()?this._upbutton.resetEnabled():(this._upbutton.removeState("pressed"),this._upbutton.setEnabled(!1),this._timer.stop());this.createDispatchDataEvent("change",a)},__checkValueWithDigits:function(a,b){var c=this._textfield.getInputElement();if(c)if(""!==c.value||a){var d=c=c.value,e=this.getDecimalSeparator();0<this.getDigits()&&"."!=e&&(e=rwt.util.Encoding.escapeRegexpChars(e),d=c.replace(new RegExp(e),"."));var f=parseFloat(d),g=this._limit(f),e=this.getManager().getValue(),h=g;if(isNaN(f)||f!=g||f!=d)b?this._textfield.setValue(this._last_value):isNaN(g)&&(h=e);b||(d=String(h),0<this.getDigits()&&(d=this._format(h)),h!==e||c===d||this._suspendTextFieldUpdate||this._textfield.setValue(d),this.getManager().setValue(h))}else this.resetValue()}}});rwt.remote.HandlerRegistry.add("rwt.widgets.Spinner",{factory:function(a){var b=new rwt.widgets.Spinner;rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);b.setUserData("isControl",!0);rwt.remote.HandlerUtil.setParent(b,a.parent);a=rwt.remote.HandlerUtil.createStyleMap(a.style);a.READ_ONLY&&b.setEditable(!1);a.WRAP&&b.setWrap(!0);return b},destructor:rwt.remote.HandlerUtil.getControlDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:rwt.remote.HandlerUtil.extendControlProperties("minimum maximum selection digits increment pageIncrement textLimit decimalSeparator".split(" ")),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({minimum:function(a,b){var c=a.getMax();b>c&&a.setMax(b+1);a.setMin(b)},maximum:function(a,b){a.setMax(b)},selection:function(a,b){a.setValue(b)},increment:function(a,b){a.setIncrementAmount(b);a.setWheelIncrementAmount(b)},pageIncrement:function(a,b){a.setPageIncrementAmount(b)},textLimit:function(a,b){a.setMaxLength(b)}}),events:["Selection","DefaultSelection","Modify"],listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({}),methods:["addListener","removeListener"],methodHandler:rwt.remote.HandlerUtil.extendListenerMethodHandler({}),scriptingMethods:rwt.remote.HandlerUtil.extendControlScriptingMethods({getSelection:function(){return this.getValue()},getText:function(){return this._textfield.getValue()},getMaximum:function(){return this.getMax()},getMinimum:function(){return this.getMin()}})});rwt.qx.Class.define("rwt.widgets.DateTimeTime",{extend:rwt.widgets.base.Parent,construct:function(a){this.base(arguments);this.setOverflow("hidden");this._short=rwt.util.Strings.contains(a,"short");this._medium=rwt.util.Strings.contains(a,"medium");this._long=rwt.util.Strings.contains(a,"long");this.addEventListener("keypress",this._onKeyPress,this);this.addEventListener("keyup",this._onKeyUp,this);this.addEventListener("mousewheel",this._onMouseWheel,this);this.addEventListener("focus",this._onFocusIn,this);this.addEventListener("blur",this._onFocusOut,this);this._timePane=new rwt.widgets.base.Parent;this._timePane.setLeft(0);this._timePane.setHeight("100%");this.add(this._timePane);this._hoursTextField=new rwt.widgets.base.Label("00");this._hoursTextField.setAppearance("datetime-field");this._hoursTextField.setUserData("maxLength",2);this._hoursTextField.addEventListener("mousedown",this._onTextFieldMouseDown,this);this._timePane.add(this._hoursTextField);this._separator3=new rwt.widgets.base.Label(":");this._separator3.setAppearance("datetime-separator");this._timePane.add(this._separator3);this._minutesTextField=new rwt.widgets.base.Label("00");this._minutesTextField.setAppearance("datetime-field");this._minutesTextField.setUserData("maxLength",2);this._minutesTextField.addEventListener("mousedown",this._onTextFieldMouseDown,this);this._timePane.add(this._minutesTextField);this._separator4=new rwt.widgets.base.Label(":");this._separator4.setAppearance("datetime-separator");(this._medium||this._long)&&this._timePane.add(this._separator4);this._secondsTextField=new rwt.widgets.base.Label("00");this._secondsTextField.setAppearance("datetime-field");this._secondsTextField.setUserData("maxLength",2);this._secondsTextField.addEventListener("mousedown",this._onTextFieldMouseDown,this);(this._medium||this._long)&&this._timePane.add(this._secondsTextField);this._spinner=this._createSpinner();this.add(this._spinner);this._focusedTextField=this._hoursTextField;this.setAppearance("datetime-time")},destruct:function(){this._disposeObjects("_timePane","_hoursTextField","_minutesTextField","_secondsTextField","_focusedTextField","_spinner","_separator3","_separator4")},members:{_getSubWidgets:function(){return[this._hoursTextField,this._minutesTextField,this._secondsTextField,this._spinner,this._separator3,this._separator4]},_applyDirection:function(a){this.base(arguments,a);this.getLayoutImpl().setMirror("rtl"===a);this._spinner._upbutton.setDirection(a);this._spinner._downbutton.setDirection(a)},_layoutX:function(){this._timePane.setWidth(this.getWidth()-this._spinner.getWidth())},_createSpinner:function(){var a=new rwt.widgets.base.Spinner;a.set({wrap:!0,border:null,backgroundColor:null,selectTextOnInteract:!1});a.setMin(0);a.setMax(23);a.setValue(0);a.addEventListener("change",this._onSpinnerChange,this);a.addEventListener("changeWidth",this._layoutX,this);a._textfield.setTabIndex(null);a._textfield.setFocused=rwt.util.Functions.returnTrue;a._textfield.setDisplay(!1);a._upbutton.setAppearance("datetime-button-up");a._downbutton.setAppearance("datetime-button-down");a.removeEventListener("keypress",a._onkeypress,a);a.removeEventListener("keydown",a._onkeydown,a);a.removeEventListener("keyup",a._onkeyup,a);a.removeEventListener("mousewheel",a._onmousewheel,a);return a},_applyFont:function(a,b){this.base(arguments,a,b);this._hoursTextField.setFont(a);this._minutesTextField.setFont(a);this._secondsTextField.setFont(a);this._separator3.setFont(a);this._separator4.setFont(a)},_onFocusIn:function(){this._focusedTextField.addState("selected");this._initialEditing=!0},_onFocusOut:function(){this._focusedTextField.removeState("selected")},_onTextFieldMouseDown:function(a){this._setFocusedTextField(a.getTarget())},_setFocusedTextField:function(a){this._focusedTextField!==a&&(this._focusedTextField.removeState("selected"),this._focusedTextField=null,this._applySpinnerValue(a),this._focusedTextField=a,this._focusedTextField.addState("selected"),this._initialEditing=!0)},_applySpinnerValue:function(a){a===this._hoursTextField?this._applyHourSpinnerValue():a===this._minutesTextField?this._applyMinuteSpinnerValue():a===this._secondsTextField&&this._applySecondSpinnerValue()},_applySecondSpinnerValue:function(){this._spinner.setMin(0);this._spinner.setMax(59);var a=parseInt(this._removeLeadingZero(this._hoursTextField.getText())),b=parseInt(this._removeLeadingZero(this._minutesTextField.getText()));this._minimum&&this._minimum.getHours()===a&&this._minimum.getMinutes()===b&&this._spinner.setMin(this._minimum.getSeconds());this._maximum&&this._maximum.getHours()===a&&this._maximum.getMinutes()===b&&this._spinner.setMax(this._maximum.getSeconds());a=this._removeLeadingZero(this._secondsTextField.getText());this._spinner.setValue(parseInt(a,10))},_applyMinuteSpinnerValue:function(){this._spinner.setMin(0);this._spinner.setMax(59);var a=parseInt(this._removeLeadingZero(this._hoursTextField.getText()));this._minimum&&this._minimum.getHours()===a&&this._spinner.setMin(this._minimum.getMinutes());this._maximum&&this._maximum.getHours()===a&&this._spinner.setMax(this._maximum.getMinutes());a=this._removeLeadingZero(this._minutesTextField.getText());this._spinner.setValue(parseInt(a,10))},_applyHourSpinnerValue:function(){this._spinner.setMin(0);this._spinner.setMax(23);this._minimum&&this._spinner.setMin(this._minimum.getHours());this._maximum&&this._spinner.setMax(this._maximum.getHours());var a=this._removeLeadingZero(this._hoursTextField.getText());this._spinner.setValue(parseInt(a,10))},_onSpinnerChange:function(){if(null!=this._focusedTextField){var a=this._focusedTextField.getText(),b=this._addLeadingZero(this._spinner.getValue());this._focusedTextField.setText(b);a!=b&&this._sendChanges();this._applyLimitRestriction()}},_applyLimitRestriction:function(){var a=parseInt(this._removeLeadingZero(this._hoursTextField.getText())),b=parseInt(this._removeLeadingZero(this._minutesTextField.getText())),c=parseInt(this._removeLeadingZero(this._secondsTextField.getText())),a=new Date(1970,0,1,a,b,c);this._minimum&&a.getTime()<this._minimum.getTime()&&(this.setHours(this._minimum.getHours()),this.setMinutes(this._minimum.getMinutes()),this.setSeconds(this._minimum.getSeconds()));this._maximum&&a.getTime()>this._maximum.getTime()&&(this.setHours(this._maximum.getHours()),this.setMinutes(this._maximum.getMinutes()),this.setSeconds(this._maximum.getSeconds()))},_onKeyPress:function(a){if(0===a.getModifiers())switch(a.getKeyIdentifier()){case "Enter":this._handleKeyEnter(a);break;case "Left":this._handleKeyLeft(a);break;case "Right":this._handleKeyRight(a);break;case "Up":this._handleKeyUp(a);break;case "Down":this._handleKeyDown(a);break;case "PageUp":case "PageDown":case "Home":case "End":this._stopEvent(a)}},_onKeyUp:function(a){if(0===a.getModifiers())switch(a.getKeyIdentifier()){case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":this._handleKeyNumber(a);break;case "Home":this._handleKeyHome(a);break;case "End":this._handleKeyEnd(a)}},_handleKeyEnter:function(){rwt.remote.EventUtil.notifyDefaultSelected(this)},_handleKeyLeft:function(a){this._focusedTextField===this._hoursTextField?this._short?this._setFocusedTextField(this._minutesTextField):this._setFocusedTextField(this._secondsTextField):this._focusedTextField===this._minutesTextField?this._setFocusedTextField(this._hoursTextField):this._focusedTextField===this._secondsTextField&&this._setFocusedTextField(this._minutesTextField);this._stopEvent(a)},_handleKeyRight:function(a){this._focusedTextField===this._hoursTextField?this._setFocusedTextField(this._minutesTextField):this._focusedTextField===this._minutesTextField?this._short?this._setFocusedTextField(this._hoursTextField):this._setFocusedTextField(this._secondsTextField):this._focusedTextField===this._secondsTextField&&this._setFocusedTextField(this._hoursTextField);this._stopEvent(a)},_handleKeyDown:function(a){var b=this._spinner.getValue();b==this._spinner.getMin()?this._spinner.setValue(this._spinner.getMax()):this._spinner.setValue(b-1);this._stopEvent(a)},_handleKeyUp:function(a){var b=this._spinner.getValue();b==this._spinner.getMax()?this._spinner.setValue(this._spinner.getMin()):this._spinner.setValue(b+1);this._stopEvent(a)},_handleKeyNumber:function(a){var b=a.getKeyIdentifier(),c=this._removeLeadingZero(this._focusedTextField.getText()),d=this._focusedTextField.getUserData("maxLength"),c=parseInt(c.length<d&&!this._initialEditing?c+b:b,10);c>=this._spinner.getMin()&&c<=this._spinner.getMax()?this._spinner.setValue(c):(c=parseInt(b,10),c>=this._spinner.getMin()&&c<=this._spinner.getMax()&&this._spinner.setValue(c));this._initialEditing=!1;this._stopEvent(a)},_handleKeyHome:function(a){this._spinner.setValue(this._spinner.getMin());this._initialEditing=!0;this._stopEvent(a)},_handleKeyEnd:function(a){this._spinner.setValue(this._spinner.getMax());this._initialEditing=!0;this._stopEvent(a)},_onMouseWheel:function(a){this.getFocused()&&(this._stopEvent(a),this._spinner._onmousewheel(a))},_stopEvent:function(a){a.preventDefault();a.stopPropagation()},_addLeadingZero:function(a){return 10>a?"0"+a:""+a},_removeLeadingZero:function(a){var b=a;2==a.length&&"0"==a.substring(0,1)&&(b=a.substring(1));return b},_sendChanges:function(){if(!rwt.remote.EventUtil.getSuspended()){var a=rwt.remote.Connection.getInstance(),b=a.getRemoteObject(this),c=parseInt(this._removeLeadingZero(this._hoursTextField.getText()),10);b.set("hours",c);c=parseInt(this._removeLeadingZero(this._minutesTextField.getText()),10);b.set("minutes",c);c=parseInt(this._removeLeadingZero(this._secondsTextField.getText()),10);b.set("seconds",c);b.isListening("Selection")&&(a.onNextSend(this._onSend,this),a.sendDelayed(200))}},_onSend:function(){rwt.remote.EventUtil.notifySelected(this)},setHours:function(a){this._hoursTextField.setText(this._addLeadingZero(a));this._focusedTextField===this._hoursTextField&&this._spinner.setValue(a)},setMinutes:function(a){this._minutesTextField.setText(this._addLeadingZero(a));this._focusedTextField===this._minutesTextField&&this._spinner.setValue(a)},setSeconds:function(a){this._secondsTextField.setText(this._addLeadingZero(a));this._focusedTextField===this._secondsTextField&&this._spinner.setValue(a)},setMinimum:function(a){if(this._minimum=null===a?null:new Date(a))this._minimum.setYear(1970),this._minimum.setMonth(0),this._minimum.setDate(1);this._applyLimitRestriction()},setMaximum:function(a){if(this._maximum=null===a?null:new Date(a))this._maximum.setYear(1970),this._maximum.setMonth(0),this._maximum.setDate(1);this._applyLimitRestriction()},setBounds:function(a,b,c,d,e){var f;switch(a){case 7:f=this._spinner;break;case 8:f=this._hoursTextField;break;case 9:f=this._minutesTextField;break;case 10:f=this._secondsTextField;break;case 11:f=this._separator3;break;case 12:f=this._separator4}f.set({left:b,top:c,width:d,height:e})}}});rwt.qx.Class.define("rwt.widgets.DateTimeDate",{extend:rwt.widgets.base.Parent,construct:function(a,b,c,d,e,f){this.base(arguments);this.setOverflow("hidden");this._short=rwt.util.Strings.contains(a,"short");this._medium=rwt.util.Strings.contains(a,"medium");this._long=rwt.util.Strings.contains(a,"long");this._drop_down=rwt.util.Strings.contains(a,"drop_down");this._internalDateChanged=!1;this._weekday=c;this._monthname=b;this._datePattern=f;this.addEventListener("keypress",this._onKeyPress,this);this.addEventListener("keyup",this._onKeyUp,this);this.addEventListener("mousewheel",this._onMouseWheel,this);this.addEventListener("focus",this._onFocusIn,this);this.addEventListener("blur",this._onFocusOut,this);this._datePane=new rwt.widgets.base.Parent;this._datePane.setLeft(0);this._datePane.setHeight("100%");this.add(this._datePane);this._weekdayTextField=new rwt.widgets.base.Label;this._weekdayTextField.setAppearance("datetime-field");this._long&&this._datePane.add(this._weekdayTextField);this._separator0=new rwt.widgets.base.Label(",");this._separator0.setAppearance("datetime-separator");this._long&&this._datePane.add(this._separator0);this._monthTextField=new rwt.widgets.base.Label;this._monthTextField.setAppearance("datetime-field");this._monthTextField.setTextAlign(this._medium?"right":"center");this._monthInt=1;this._medium?this._monthTextField.setText("1"):this._monthTextField.setText(this._monthname[this._monthInt-1]);this._monthTextField.addEventListener("mousedown",this._onTextFieldMouseDown,this);this._datePane.add(this._monthTextField);this._separator1=new rwt.widgets.base.Label(e);this._separator1.setAppearance("datetime-separator");this._medium&&this._datePane.add(this._separator1);this._dayTextField=new rwt.widgets.base.Label("1");this._dayTextField.setAppearance("datetime-field");this._dayTextField.setUserData("maxLength",2);this._dayTextField.setTextAlign("right");this._dayTextField.addEventListener("mousedown",this._onTextFieldMouseDown,this);this._short||this._datePane.add(this._dayTextField);this._separator2=new rwt.widgets.base.Label(",");this._separator2.setAppearance("datetime-separator");this._medium&&this._separator2.setText(e);this._datePane.add(this._separator2);this._yearTextField=new rwt.widgets.base.Label("1970");this._yearTextField.setAppearance("datetime-field");this._yearTextField.setUserData("maxLength",4);this._yearTextField.setTextAlign("right");this._lastValidYear=1970;this._yearTextField.addEventListener("mousedown",this._onTextFieldMouseDown,this);this._datePane.add(this._yearTextField);this._spinner=this._createSpinner();this._spinner.setDisplay(!this._drop_down);this.add(this._spinner);this._dropped=!1;this._calendar=this._dropDownButton=null;this._drop_down&&(rwt.widgets.base.ClientDocument.getInstance().addEventListener("windowblur",this._onWindowBlur,this),this.addEventListener("appear",this._onAppear,this),this.addEventListener("changeVisibility",this._onChangeVisibility,this),this.addEventListener("mousedown",this._onMouseDown,this),this.addEventListener("click",this._onMouseClick,this),this.addEventListener("mouseover",this._onMouseOver,this),this.addEventListener("mouseout",this._onMouseOut,this),this._dropDownButton=new rwt.widgets.base.BasicButton("push",!0),this._dropDownButton.setAppearance("datetime-drop-down-button"),this._dropDownButton.setTabIndex(null),this._dropDownButton.setAllowStretchY(!0),this.add(this._dropDownButton),rwt.widgets.base.Calendar.MONTH_NAMES=b,rwt.widgets.base.Calendar.WEEKDAY_NAMES=d,this._calendar=new rwt.widgets.base.Calendar,this._calendar.setAppearance("datetime-drop-down-calendar"),this._calendar.setDate(new Date(70,0,1)),this._calendar.setTabIndex(null),this._calendar.setVisibility(!1),this._calendar.addEventListener("changeDate",this._onCalendarDateChange,this),this._calendar._lastYearBt.setToolTipText(null),this._calendar._lastMonthBt.setToolTipText(null),this._calendar._nextMonthBt.setToolTipText(null),this._calendar._nextYearBt.setToolTipText(null));this._focusedTextField=this._monthTextField;this._setWeekday();this.setAppearance("datetime-date")},destruct:function(){this._disposeObjects("_datePane","_weekdayTextField","_monthTextField","_dayTextField","_yearTextField","_focusedTextField","_spinner","_separator0","_separator1","_separator2");this._drop_down&&(rwt.widgets.base.ClientDocument.getInstance().removeEventListener("windowblur",this._onWindowBlur,this),this._dropDownButton.dispose(),this._dropDownButton=null,rwt.qx.Object.inGlobalDispose()||this._calendar.setParent(null),this._calendar.dispose(),this._calendar=null)},members:{_getSubWidgets:function(){var a=[this._weekdayTextField,this._monthTextField,this._dayTextField,this._yearTextField,this._spinner,this._separator0,this._separator1,this._separator2];this._drop_down&&a.push(this._dropDownButton,this._calendar);return a},_applyDirection:function(a){this.base(arguments,a);this.getLayoutImpl().setMirror("rtl"===a);this._spinner._upbutton.setDirection(a);this._spinner._downbutton.setDirection(a);this._drop_down&&(this._dropDownButton.setDirection(a),this._calendar.setDirection(a))},_layoutX:function(){this._datePane.setWidth(this.getWidth()-this._spinner.getWidth())},_createSpinner:function(){var a=new rwt.widgets.base.Spinner;a.set({wrap:!0,border:null,backgroundColor:null,selectTextOnInteract:!1});a.setMin(1);a.setMax(12);a.setValue(this._monthInt);a.addEventListener("change",this._onSpinnerChange,this);a.addEventListener("changeWidth",this._layoutX,this);a._textfield.setTabIndex(null);a._textfield.setFocused=rwt.util.Functions.returnTrue;a._textfield.setDisplay(!1);a._upbutton.setAppearance("datetime-button-up");a._downbutton.setAppearance("datetime-button-down");a.removeEventListener("keypress",a._onkeypress,a);a.removeEventListener("keydown",a._onkeydown,a);a.removeEventListener("keyup",a._onkeyup,a);a.removeEventListener("mousewheel",a._onmousewheel,a);return a},_applyFont:function(a,b){this.base(arguments,a,b);this._weekdayTextField.setFont(a);this._dayTextField.setFont(a);this._monthTextField.setFont(a);this._yearTextField.setFont(a);this._separator0.setFont(a);this._separator1.setFont(a);this._separator2.setFont(a)},_onFocusIn:function(){this._focusedTextField.addState("selected");this._initialEditing=!0},_onFocusOut:function(){this._focusedTextField===this._yearTextField&&this._checkAndApplyYearValue();this._focusedTextField.removeState("selected");this._hideCalendar()},_onTextFieldMouseDown:function(a){this._focusedTextField===this._yearTextField&&this._checkAndApplyYearValue();this._setFocusedTextField(a.getTarget())},_setFocusedTextField:function(a){this._focusedTextField!==a&&(this._focusedTextField.removeState("selected"),this._focusedTextField=null,this._applySpinnerValue(a),this._focusedTextField=a,this._focusedTextField.addState("selected"),this._initialEditing=!0)},_applySpinnerValue:function(a){a===this._dayTextField?this._applyDaySpinnerValue():a===this._monthTextField?this._applyMonthSpinnerValue():a===this._yearTextField&&this._applyYearSpinnerValue()},_applyDaySpinnerValue:function(){this._spinner.setMin(1);this._spinner.setMax(this._getDaysInMonth());this._minimum&&this._minimum.getFullYear()===this._lastValidYear&&this._minimum.getMonth()===this._monthInt-1&&this._spinner.setMin(this._minimum.getDate());this._maximum&&this._maximum.getFullYear()===this._lastValidYear&&this._maximum.getMonth()===this._monthInt-1&&this._spinner.setMax(this._maximum.getDate());var a=this._removeLeadingZero(this._dayTextField.getText());this._spinner.setValue(parseInt(a,10))},_applyMonthSpinnerValue:function(){this._spinner.setMin(1);this._spinner.setMax(12);this._minimum&&this._minimum.getFullYear()===this._lastValidYear&&this._spinner.setMin(this._minimum.getMonth()+1);this._maximum&&this._maximum.getFullYear()===this._lastValidYear&&this._spinner.setMax(this._maximum.getMonth()+1);this._spinner.setValue(this._monthInt)},_applyYearSpinnerValue:function(){this._spinner.setMax(9999);this._spinner.setMin(1752);this._minimum&&this._spinner.setMin(this._minimum.getFullYear());this._maximum&&this._spinner.setMax(this._maximum.getFullYear());this._spinner.setValue(this._lastValidYear)},_onSpinnerChange:function(){if(null!=this._focusedTextField){var a=this._focusedTextField.getText();this._focusedTextField===this._monthTextField?(this._monthInt=this._spinner.getValue(),this._medium?this._focusedTextField.setText(this._addLeadingZero(this._monthInt)):this._focusedTextField.setText(this._monthname[this._monthInt-1])):this._focusedTextField===this._yearTextField?(this._lastValidYear=this._spinner.getValue(),this._focusedTextField.setText(""+this._spinner.getValue())):this._focusedTextField.setText(this._addLeadingZero(this._spinner.getValue()));(this._focusedTextField==this._monthTextField||this._focusedTextField==this._yearTextField)&&this._dayTextField.getText()>this._getDaysInMonth()&&this._dayTextField.setText(""+this._getDaysInMonth());this._setWeekday();var b=this._focusedTextField.getText();a!=b&&this._sendChanges();this._applyLimitRestriction()}},_applyLimitRestriction:function(){var a=parseInt(this._removeLeadingZero(this._dayTextField.getText())),a=new Date(this._lastValidYear,this._monthInt-1,a);this._minimum&&a.getTime()<this._minimum.getTime()&&(this.setYear(this._minimum.getFullYear()),this.setMonth(this._minimum.getMonth()),this.setDay(this._minimum.getDate()));this._maximum&&a.getTime()>this._maximum.getTime()&&(this.setYear(this._maximum.getFullYear()),this.setMonth(this._maximum.getMonth()),this.setDay(this._maximum.getDate()))},_onKeyPress:function(a){var b=a.getKeyIdentifier();if(this._drop_down&&("Up"===b||"Down"===b)&&a.isAltPressed())this._toggleCalendarVisibility();else if(this._dropped)this._calendar._onkeypress(a),0===a.getModifiers()&&("Enter"===b?(this._hideCalendar(),this._handleKeyEnter(a)):"Escape"!==b&&"Space"!==b||this._hideCalendar());else if(0===a.getModifiers())switch(b){case "Enter":this._handleKeyEnter(a);break;case "Left":this._handleKeyLeft(a);break;case "Right":this._handleKeyRight(a);break;case "Up":this._handleKeyUp(a);break;case "Down":this._handleKeyDown(a);break;case "PageUp":case "PageDown":case "Home":case "End":this._stopEvent(a)}},_onKeyUp:function(a){if(!this._dropped&&0===a.getModifiers())switch(a.getKeyIdentifier()){case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":this._handleKeyNumber(a);break;case "Home":this._handleKeyHome(a);break;case "End":this._handleKeyEnd(a)}},_handleKeyEnter:function(){rwt.remote.EventUtil.notifyDefaultSelected(this)},_handleKeyLeft:function(a){this._focusedTextField===this._yearTextField&&this._checkAndApplyYearValue();"MDY"==this._datePattern?this._rollLeft(this._monthTextField,this._dayTextField,this._yearTextField):"DMY"==this._datePattern?this._rollLeft(this._dayTextField,this._monthTextField,this._yearTextField):this._medium?this._rollLeft(this._yearTextField,this._monthTextField,this._dayTextField):this._rollLeft(this._monthTextField,this._dayTextField,this._yearTextField);this._stopEvent(a)},_handleKeyRight:function(a){this._focusedTextField===this._yearTextField&&this._checkAndApplyYearValue();"MDY"==this._datePattern?this._rollRight(this._monthTextField,this._dayTextField,this._yearTextField):"DMY"==this._datePattern?this._rollRight(this._dayTextField,this._monthTextField,this._yearTextField):this._medium?this._rollRight(this._yearTextField,this._monthTextField,this._dayTextField):this._rollRight(this._monthTextField,this._dayTextField,this._yearTextField);this._stopEvent(a)},_rollRight:function(a,b,c){this._focusedTextField===a?b.isSeeable()?this._setFocusedTextField(b):this._setFocusedTextField(c):this._focusedTextField===b?c.isSeeable()?this._setFocusedTextField(c):this._setFocusedTextField(a):this._focusedTextField===c&&(a.isSeeable()?this._setFocusedTextField(a):this._setFocusedTextField(b))},_rollLeft:function(a,b,c){this._focusedTextField===a?c.isSeeable()?this._setFocusedTextField(c):this._setFocusedTextField(b):this._focusedTextField===b?a.isSeeable()?this._setFocusedTextField(a):this._setFocusedTextField(c):this._focusedTextField===c&&(b.isSeeable()?this._setFocusedTextField(b):this._setFocusedTextField(a))},_handleKeyDown:function(a){this._focusedTextField===this._yearTextField&&this._checkAndApplyYearValue();var b=this._spinner.getValue();b==this._spinner.getMin()?this._spinner.setValue(this._spinner.getMax()):this._spinner.setValue(b-1);this._stopEvent(a)},_handleKeyUp:function(a){this._focusedTextField===this._yearTextField&&this._checkAndApplyYearValue();var b=this._spinner.getValue();b==this._spinner.getMax()?this._spinner.setValue(this._spinner.getMin()):this._spinner.setValue(b+1);this._stopEvent(a)},_handleKeyNumber:function(a){var b=a.getKeyIdentifier(),c=this._removeLeadingZero(this._focusedTextField.getText()),d=this._focusedTextField.getUserData("maxLength");this._focusedTextField===this._monthTextField&&(c=""+this._monthInt,d=2);c=c.length<d&&!this._initialEditing?c+b:b;d=parseInt(c,10);this._focusedTextField===this._dayTextField||this._focusedTextField===this._monthTextField?d>=this._spinner.getMin()&&d<=this._spinner.getMax()?this._spinner.setValue(d):(d=parseInt(b,10),d>=this._spinner.getMin()&&d<=this._spinner.getMax()&&this._spinner.setValue(d)):this._focusedTextField==this._yearTextField&&(this._focusedTextField.setText(c),4==c.length&&this._checkAndApplyYearValue());this._initialEditing=!1;this._stopEvent(a)},_handleKeyHome:function(a){this._spinner.setValue(this._spinner.getMin());this._initialEditing=!0;this._stopEvent(a)},_handleKeyEnd:function(a){this._spinner.setValue(this._spinner.getMax());this._initialEditing=!0;this._stopEvent(a)},_onMouseWheel:function(a){this.getFocused()&&(this._stopEvent(a),this._dropped||this._spinner._onmousewheel(a))},_stopEvent:function(a){a.preventDefault();a.stopPropagation()},_getDaysInMonth:function(){var a=31,b=this._monthInt-1,c=parseInt(this._yearTextField.getText(),10),d=new Date(c,b,1);for(d.setDate(a);d.getMonth()!==b;)a--,d=new Date(c,b,1),d.setDate(a);return a},_setWeekday:function(){var a=this._monthInt-1,b=parseInt(this._yearTextField.getText(),10),c=parseInt(this._dayTextField.getText(),10);this._weekdayTextField.setText(this._weekday[(new Date(b,a,c)).getDay()+1])},_checkAndApplyYearValue:function(){var a=this._lastValidYear,b=parseInt(this._yearTextField.getText(),10);0<=b&&29>=b?this._lastValidYear=2E3+b:30<=b&&99>=b?this._lastValidYear=1900+b:1752<=b&&(this._lastValidYear=b);this._yearTextField.setText(""+a);a!=this._lastValidYear&&this._spinner.setValue(this._lastValidYear)},_addLeadingZero:function(a){return 10>a?"0"+a:""+a},_removeLeadingZero:function(a){var b=a;2==a.length&&"0"==a.substring(0,1)&&(b=a.substring(1));return b},_sendChanges:function(){if(!rwt.remote.EventUtil.getSuspended()){var a=rwt.remote.Connection.getInstance(),b=a.getRemoteObject(this),c=parseInt(this._removeLeadingZero(this._dayTextField.getText()),10);b.set("day",c);b.set("month",this._monthInt-1);b.set("year",this._lastValidYear);b.isListening("Selection")&&(a.onNextSend(this._onSend,this),a.sendDelayed(200))}},_onSend:function(){rwt.remote.EventUtil.notifySelected(this)},setDate:function(a,b,c){this._setDate(new Date(a,b,c))},setMonth:function(a){this._monthInt=a+1;this._medium?this._monthTextField.setText(this._addLeadingZero(this._monthInt)):this._monthTextField.setText(this._monthname[this._monthInt-1]);this._focusedTextField===this._monthTextField&&this._spinner.setValue(this._monthInt);this._setWeekday()},setDay:function(a){this._dayTextField.setText(this._addLeadingZero(a));this._focusedTextField===this._dayTextField&&this._spinner.setValue(a);this._setWeekday()},setYear:function(a){this._lastValidYear=a;this._yearTextField.setText(""+a);this._focusedTextField===this._yearTextField&&this._spinner.setValue(a);this._setWeekday()},setMinimum:function(a){(this._minimum=null===a?null:new Date(a))&&this._minimum.setHours(0,0,0,0);this._applySpinnerValue(this._focusedTextField);this._applyLimitRestriction();this._calendar&&this._calendar.setMinimum(this._minimum)},setMaximum:function(a){(this._maximum=null===a?null:new Date(a))&&this._maximum.setHours(0,0,0,0);this._applySpinnerValue(this._focusedTextField);this._applyLimitRestriction();this._calendar&&this._calendar.setMaximum(this._maximum)},_setDate:function(a){this.setYear(a.getFullYear());this.setMonth(a.getMonth());this.setDay(a.getDate())},setBounds:function(a,b,c,d,e){var f;switch(a){case 0:f=this._weekdayTextField;break;case 1:f=this._dayTextField;break;case 2:f=this._monthTextField;break;case 3:f=this._yearTextField;break;case 4:f=this._separator0;break;case 5:f=this._separator1;break;case 6:f=this._separator2;break;case 7:f=this._spinner;break;case 13:f=this._dropDownButton}f&&f.set({left:b,top:c,width:d,height:e})},_onAppear:function(){this._drop_down&&(this.getTopLevelWidget().add(this._calendar),this._setCalendarLocation())},_onWindowBlur:function(){this._hideCalendar()},_onChangeVisibility:function(a){a.getValue()||this._hideCalendar()},_onCalendarDateChange:function(){this._internalDateChanged||(this._setDate(this._calendar.getDate()),this._sendChanges())},_onMouseDown:function(a){var b=a.getTarget();b.getUserData("calendar-day")?a.stopPropagation():b.getUserData("calendar-button")?a.stopPropagation():this._dropped&&b!==this._dropDownButton&&this._hideCalendar()},_onMouseClick:function(a){if(a.isLeftButtonPressed()){var b=a.getTarget();b.getUserData("calendar-day")?b.hasState("disabled")||(this._calendar._onDayClicked(a),this._hideCalendar(),this.setFocused(!0)):b.getUserData("calendar-button")?this._calendar._onNavButtonClicked(a):b===this._dropDownButton&&this._toggleCalendarVisibility()}},_onMouseOver:function(a){var b=a.getTarget();b==this._dropDownButton?this._dropDownButton.addState("over"):b.getUserData("calendar-day")&&this._calendar._onDayMouseOver(a)},_onMouseOut:function(a){var b=a.getTarget();b==this._dropDownButton?this._dropDownButton.removeState("over"):b.getUserData("calendar-day")&&this._calendar._onDayMouseOut(a)},_toggleCalendarVisibility:function(){this._dropped?this._hideCalendar():this._showCalendar()},_showCalendar:function(){if(this._drop_down&&!this._dropped){this._dropped=!0;this._calendar.setVisibility(!0);this.setCapture(!0);this._bringToFront();this._setCalendarLocation();var a=parseInt(this._yearTextField.getText(),10),b=parseInt(this._dayTextField.getText(),10),a=new Date(a,this._monthInt-1,b);this._internalDateChanged=!0;this._calendar.setDate(a);this._internalDateChanged=!1;this._focusedTextField.removeState("selected")}},_hideCalendar:function(){this._drop_down&&this._dropped&&(this._dropped=!1,this._calendar.setVisibility(!1),this.setCapture(!1),this.getFocused()&&this._focusedTextField.addState("selected"))},_setCalendarLocation:function(){if(this.getElement()&&null!=this._calendar){var a=window.innerWidth,b=window.innerHeight,c=rwt.html.Location.get(this.getElement()),d=c.left,e=c.top+this.getHeight(),f=this._calendar.getWidthValue(),g=this._calendar.getHeightValue();e+g>b&&0<c.top-g&&(e=c.top-g);d+f>a&&(d=Math.max(0,a-f));this._calendar.setLocation(d,e)}},_bringToFront:function(){var a=this.getTopLevelWidget().getChildren(),b=this._calendar.getZIndex(),c;for(c in a){var d=a[c];d.getZIndex&&b<d.getZIndex()&&(b=d.getZIndex())}b>this._calendar.getZIndex()&&this._calendar.setZIndex(b+1)}}});rwt.qx.Class.define("rwt.widgets.DateTimeCalendar",{extend:rwt.widgets.base.Parent,construct:function(a,b,c){this.base(arguments);this.setOverflow("hidden");this.setAppearance("datetime-calendar");rwt.widgets.base.Calendar.MONTH_NAMES=b;rwt.widgets.base.Calendar.WEEKDAY_NAMES=c;this._calendar=new rwt.widgets.base.Calendar;this._calendar.setDate(new Date(74,5,6));this._calendar.setTabIndex(null);this._calendar.addEventListener("changeDate",this._onChangeDate,this);this._calendar.addEventListener("select",this._onSelect,this);this.add(this._calendar);this.addEventListener("keypress",this._onKeyPress,this);this.addEventListener("mousewheel",this._onMouseWheel,this);this.addEventListener("focus",this._onFocusChange,this);this.addEventListener("blur",this._onFocusChange,this);this._updateSelectedDayState()},destruct:function(){this._disposeObjects("_calendar")},members:{_getSubWidgets:function(){return[this._calendar]},_applyDirection:function(a){this.base(arguments,a);this._calendar.setDirection(a)},_onKeyPress:function(a){this._calendar._onkeypress(a)},_onMouseWheel:function(a){a.preventDefault();a.stopPropagation()},_onFocusChange:function(){this._updateSelectedDayState()},_updateSelectedDayState:function(){for(var a=0;42>a;a++)this._calendar._dayLabelArr[a].toggleState("parent_unfocused",!this.getFocused())},_onChangeDate:function(){if(!rwt.remote.EventUtil.getSuspended()){var a=rwt.remote.Connection.getInstance(),b=a.getRemoteObject(this),c=this._calendar.getDate();b.set("day",c.getDate());b.set("month",c.getMonth());b.set("year",c.getFullYear());b.isListening("Selection")&&(a.onNextSend(this._onSend,this),a.sendDelayed(200))}},_onSend:function(){rwt.remote.EventUtil.notifySelected(this)},_onSelect:function(){rwt.remote.EventUtil.notifyDefaultSelected(this)},setDate:function(a,b,c){this._calendar.setDate(new Date(a,b,c))},setMonth:function(a){var b=this._calendar.getDate();b.setMonth(a);this._calendar.setDate(b)},setDay:function(a){var b=this._calendar.getDate();b.setDate(a);this._calendar.setDate(b)},setYear:function(a){var b=this._calendar.getDate();b.setYear(a);this._calendar.setDate(b)},setMinimum:function(a){(a=null===a?null:new Date(a))&&a.setHours(0,0,0,0);this._calendar.setMinimum(a)},setMaximum:function(a){(a=null===a?null:new Date(a))&&a.setHours(0,0,0,0);this._calendar.setMaximum(a)},setFont:function(){}}});rwt.remote.HandlerRegistry.add("rwt.widgets.DateTime",{factory:function(a){var b;b=rwt.remote.HandlerUtil.createStyleMap(a.style);var c;c=b.SHORT?"short":b.LONG?"long":"medium";b.DROP_DOWN&&(c+="|drop_down");b.TIME?b=new rwt.widgets.DateTimeTime(c):b.CALENDAR?(rwt.widgets.base.Calendar.CELL_WIDTH=a.cellSize[0],rwt.widgets.base.Calendar.CELL_HEIGHT=a.cellSize[1],b=new rwt.widgets.DateTimeCalendar(c,a.monthNames,a.weekdayShortNames)):(rwt.widgets.base.Calendar.CELL_WIDTH=a.cellSize[0],rwt.widgets.base.Calendar.CELL_HEIGHT=a.cellSize[1],b=new rwt.widgets.DateTimeDate(c,a.monthNames,a.weekdayNames,a.weekdayShortNames,a.dateSeparator,a.datePattern));rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);b.setUserData("isControl",!0);rwt.remote.HandlerUtil.setParent(b,a.parent);return b},destructor:rwt.remote.HandlerUtil.getControlDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:rwt.remote.HandlerUtil.extendControlProperties("date hours minutes seconds subWidgetsBounds minimum maximum".split(" ")),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({date:function(a,b){a.setDate.apply(a,b)},subWidgetsBounds:function(a,b){for(var c=0;c<b.length;c++)a.setBounds.apply(a,b[c])}}),events:["Selection","DefaultSelection"],listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({})});rwt.qx.Class.define("rwt.widgets.ExpandItem",{extend:rwt.widgets.base.Parent,construct:function(a){this.base(arguments);this._expandBar=a;this._expanded=!1;this._header=new rwt.widgets.base.MultiCellWidget(["image","label","image"]);this._header.setAppearance("expand-item-header");this._header.setFlexibleCell(1);this._header.expandFlexCell(!0);this._header.setTextOverflow("ellipsis");this._header.setHeight(24);this._header.addEventListener("click",this._onClick,this);this._header.addEventListener("mouseover",this._onMouseOver,this);this._header.addEventListener("mouseout",this._onMouseOut,this);this.add(this._header);this.setAppearance("expand-item");this.setDirection(a.getDirection())},destruct:function(){this._disposeObjects("_header")},properties:{chevronIcon:{themeable:!0,apply:"_applyChevronIcon"}},members:{_getSubWidgets:function(){return[this._header]},_applyChevronIcon:function(a){a?(this._header.setCellContent(2,a[0]),this._header.setCellDimension(2,a[1],a[2])):this._header.setCellContent(2,null)},_applyDirection:function(a){this.base(arguments,a);this._header.setDirection(a);this._header.setHorizontalChildrenAlign("rtl"===a?"right":"left")},setExpanded:function(a){this._expanded=a;this.toggleState("expanded",a);this._header.toggleState("expanded",a)},getExpanded:function(){return this._expanded},setImage:function(a){a?(this._header.setCellContent(0,a[0]),this._header.setCellDimension(0,a[1],a[2])):this._header.setCellContent(0,null)},setText:function(a){var b=rwt.util.Encoding;this._expandBar.isMarkupEnabled()||(a=b.escapeText(a,!1),a=b.replaceNewLines(a,"\x3cbr/\x3e"));this._header.setCellContent(1,a)},setHeaderHeight:function(a){this._header.setHeight(a)},_onClick:function(){if(!rwt.remote.EventUtil.getSuspended()){this.setExpanded(!this._expanded);var a=rwt.remote.Connection.getInstance();a.getRemoteObject(this).set("expanded",this._expanded);var b=this._expanded?"Expand":"Collapse",c=rwt.remote.ObjectRegistry.getId(this);a.getRemoteObject(this._expandBar).notify(b,{item:c})}},_onMouseOver:function(){this.addState("over")},_onMouseOut:function(){this.removeState("over")}}});rwt.remote.HandlerRegistry.add("rwt.widgets.ExpandItem",{factory:function(a){var b;rwt.remote.HandlerUtil.callWithTarget(a.parent,function(a){b=new rwt.widgets.ExpandItem(a);a.addWidget(b);rwt.remote.HandlerUtil.addDestroyableChild(a,b);b.setUserData("protocolParent",a)});return b},destructor:rwt.remote.HandlerUtil.getWidgetDestructor(),properties:"customVariant bounds text image expanded headerHeight data".split(" "),propertyHandler:{data:rwt.remote.HandlerUtil.getControlPropertyHandler("data"),bounds:function(a,b){a.setLeft(b[0]);a.setTop(b[1]);a.setWidth(b[2]);a.setHeight(b[3])}}});rwt.qx.Class.define("rwt.widgets.ExpandBar",{extend:rwt.widgets.base.Scrollable,construct:function(){this.base(arguments,new rwt.widgets.base.Parent);this.setAppearance("expand-bar");this.setHideFocus(!0);this.setScrollBarsVisible(!1,!1);this._bottomSpacing=new rwt.widgets.base.Parent;this._markupEnabled=!1;this._clientArea.add(this._bottomSpacing)},destruct:function(){this._disposeObjects("_bottomSpacing")},members:{_applyDirection:function(a){this.base(arguments,a);this._clientArea.forEachChild(function(){this instanceof rwt.widgets.ExpandItem&&this.setDirection(a)})},addWidget:function(a){this._clientArea.add(a)},setBottomSpacingBounds:function(a,b,c,d){this._bottomSpacing.setLeft(a);this._bottomSpacing.setTop(b);this._bottomSpacing.setWidth(c);this._bottomSpacing.setHeight(d)},setVScrollBarVisible:function(a){this.setScrollBarsVisible(!1,a);a||this.setVBarSelection(0)},setVScrollBarMax:function(a){this._vertScrollBar.setMaximum(a)},setMarkupEnabled:function(a){this._markupEnabled=a},isMarkupEnabled:function(){return this._markupEnabled}}});rwt.remote.HandlerRegistry.add("rwt.widgets.ExpandBar",{factory:function(a){var b=new rwt.widgets.ExpandBar;b.setMarkupEnabled(!0===a.markupEnabled);rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);b.setUserData("isControl",!0);rwt.remote.HandlerUtil.setParent(b,a.parent);return b},destructor:rwt.remote.HandlerUtil.getControlDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:rwt.remote.HandlerUtil.extendControlProperties(["bottomSpacingBounds","vScrollBarMax"]),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({bottomSpacingBounds:function(a,b){a.setBottomSpacingBounds.apply(a,b)}}),events:["Expand","Collapse"],listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({})});(function(){rwt.qx.Class.define("rwt.widgets.Text",{extend:rwt.widgets.base.BasicText,construct:function(a){this.base(arguments);a&&(this._inputTag="textarea",this._inputType=null,this._inputOverflow="auto",this.setAppearance("text-area"),this.setAllowStretchY(!0),this.__oninput=rwt.util.Functions.bind(this._oninputDomTextarea,this));this._cancelIconElement=this._searchIconElement=this._messageElement=this._message=null},destruct:function(){this.__oninput=this._cancelIconElement=this._searchIconElement=this._messageElement=null},properties:{wrap:{check:"Boolean",init:!0,apply:"_applyWrap"}},members:{setMessage:function(a){this._message=a?rwt.util.Encoding.escapeText(a,!1):null;this._updateMessage()},getMessage:function(){return this._message},setPasswordMode:function(a){a=a?"password":"text";this._isTextArea()||this._inputType==a||(this._inputType=a,this._isCreated&&(this._inputElement.type=this._inputType))},_ontabfocus:function(){this._isTextArea()?this._renderSelection():this.selectAll()},_onkeydown:function(a){this.base(arguments,a);"Enter"!=a.getKeyIdentifier()||a.isShiftPressed()||a.isAltPressed()||a.isCtrlPressed()||a.isMetaPressed()||(this._isTextArea()&&a.stopPropagation(),this._shouldNotifyDefaultSelection()&&rwt.remote.EventUtil.notifyDefaultSelected(this))},_shouldNotifyDefaultSelection:function(){var a=rwt.widgets.util.WidgetUtil.getShell(this),a=a?a.getDefaultButton():null;return!(null!=a&&a.isSeeable()&&a.getEnabled())&&!this._isTextArea()},_onMouseDownUp:function(a){this.base(arguments,a);if("mousedown"===a.getType()){var b=a.getDomTarget(),c=null;b===this._searchIconElement?c="search":b===this._cancelIconElement&&(this.setValue(""),c="cancel");null!=c&&rwt.remote.EventUtil.notifyDefaultSelected(this,0,0,0,0,c)}},_handleSelectionChange:function(a,b){this.base(arguments,a,b);rwt.remote.EventUtil.getSuspended()||rwt.remote.Connection.getInstance().getRemoteObject(this).set("selection",[a,a+b])},_handleModification:function(){rwt.remote.Connection.getInstance().getRemoteObject(this).set("text",this.getComputedValue());this._notifyModify();this._detectSelectionChange()},_notifyModify:function(){var a=rwt.remote.Connection.getInstance();a.getRemoteObject(this).isListening("Modify")&&(a.onNextSend(this._onSend,this),a.sendDelayed(500))},_onSend:function(){this.isDisposed()||rwt.remote.Connection.getInstance().getRemoteObject(this).notify("Modify",null,!0)},_applyElement:function(a,b){this.base(arguments,a,b);this._isTextArea()&&this._styleWrap();var c=rwt.client.Client;c.isTrident()&&9===c.getVersion()&&this._isTextArea()&&rwt.html.Style.setBackgroundImage(this._inputElement,rwt.remote.Connection.RESOURCE_PATH+"static/image/blank.gif");this._inputElement.style.paddingRight="1px";this._updateAllIcons();this._updateMessage()},_webkitMultilineFix:function(){this._isTextArea()||this.base(arguments)},_applyWrap:function(){this._isTextArea()&&this._styleWrap()},_styleWrap:rwt.util.Variant.select("qx.client",{gecko:function(){if(this._inputElement){var a=this.getWrap()?"soft":"off",b=this.getWrap()?"":"auto";this._inputElement.setAttribute("wrap",a);this._inputElement.style.overflow=b}},"default":function(){if(this._inputElement){var a=this.getWrap()?"soft":"off";this._inputElement.setAttribute("wrap",a)}}}),_applyMaxLength:function(a,b){this._isTextArea()||this.base(arguments,a,b)},_oninputDomTextarea:function(a){try{var b=!0;if(null!=this.getMaxLength()){var c=this._inputElement.value;if(c.length>this.getMaxLength()){var d=this.getValue(),e=this._getSelectionStart();d.length==c.length-1?(this._inputElement.value=d,this._setSelectionStart(e-1),this._setSelectionLength(0)):c.length>=d.length&&c!=d&&(this._inputElement.value=c.slice(0,this.getMaxLength()),this._setSelectionStart(Math.min(e,this.getMaxLength())),this._setSelectionLength(0));this._inputElement.value==d&&(b=!1)}}b&&this._oninput(a)}catch(f){rwt.runtime.ErrorHandler.processJavaScriptError(f)}},_isTextArea:function(){return"textarea"===this._inputTag},_syncFieldWidth:function(){if(this._inputElement){var a=this.getInnerWidth()-this._getIconOuterWidth("search")-this._getIconOuterWidth("cancel");this._inputElement.style.width=Math.max(2,a)+"px"}},_syncFieldLeft:function(){if(this._inputElement){var a=this._inputElement.style;"rtl"===this.getDirection()?(a.marginLeft="0",a.marginRight=this._getIconOuterWidth("search")+"px"):(a.marginLeft=this._getIconOuterWidth("search")+"px",a.marginRight="0")}},_updateAllIcons:function(){this._isCreated&&(this._updateIcon("search"),this._updateIcon("cancel"))},_updateIcon:function(a){var b=this._getIconElement(a);this._hasIcon(a)&&null==b&&(b=document.createElement("div"),b.style.position="absolute",b.style.cursor="pointer",this._getTargetNode().insertBefore(b,this._inputElement),this._setIconElement(a,b));if(b){var c=this._getIconImage(a);rwt.html.Style.setBackgroundImage(b,c?c[0]:null)}this._layoutIcon(a)},_layoutAllIcons:function(){this._layoutIcon("search");this._layoutIcon("cancel")},_layoutIcon:function(a){var b=this._getIconElement(a);if(b){var b=b.style,c=this._getIconImage(a),d=c?c[1]:0,c=c?c[2]:0,e=this._getMessageStyle();b.width=d+"px";b.height=c+"px";b.top=Math.round(this.getInnerHeight()/2-c/2)+"px";"right"===this._getIconPosition(a)?(b.left="",b.right=e.paddingRight+"px"):(b.left=e.paddingLeft+"px",b.right="")}},_getIconElement:function(a){return"search"===a?this._searchIconElement:this._cancelIconElement},_setIconElement:function(a,b){"search"===a?this._searchIconElement=b:this._cancelIconElement=b},_getIconOuterWidth:function(a){var b=this._getIconImage(a);return this._hasIcon(a)&&null!=b?b[1]+this._getIconSpacing(a):0},_hasIcon:function(a){return this.hasState("search"===a?"rwt_ICON_SEARCH":"rwt_ICON_CANCEL")},_getIconImage:function(a){return this._hasIcon(a)?this._getIconStyle(a).icon:null},_getIconPosition:function(a){var b="rtl"===this.getDirection();return"search"===a?b?"right":"left":b?"left":"right"},_getIconSpacing:function(a){return this._hasIcon(a)?this._getIconStyle(a).spacing:0},_getIconStyle:function(a){var b=rwt.theme.AppearanceManager.getInstance(),c={};"search"===a&&(c.search=!0);null!==this._customVariant&&(c[this._customVariant]=!0);return b.styleFrom("text-field-icon",c)},_reCreateInputField:function(){var a=this._getSelectionStart(),b=this._getSelectionLength();this._inputElement.parentNode.removeChild(this._inputElement);this._inputElement=this._inputElement.onpropertychange=null;this._firstInputFixApplied=!1;this._textColor=null;this._applyElement(this.getElement(),null);this._afterAppear();this._postApply();this._applyFocused(this.getFocused());this._setSelectionStart(a);this._setSelectionLength(b)},_postApply:function(){this.base(arguments);this._syncFieldLeft();this._layoutAllIcons();this._layoutMessageX()},_applyValue:function(a,b){this.base(arguments,a,b);this._updateMessageVisibility();rwt.remote.EventUtil.getSuspended()||this._handleModification()},_applyFocused:function(a,b){this.base(arguments,a,b);this._updateMessageVisibility();!a||""!==this.getValue()&&null!=this.getValue()||this._forceFocus()},_forceFocus:rwt.util.Variant.select("qx.client",{"webkit|blink":function(){rwt.client.Timer.once(function(){this._inputElement&&this._inputElement.focus()},this,1)},"default":function(){}}),_applyCursor:function(a,b){this.base(arguments,a,b);this._updateMessageCursor()},_applyFont:function(a,b){this.base(arguments,a,b);this._updateMessageFont()},_applyDirection:function(a){this.base(arguments,a);this._applyTextAlign();this._syncFieldLeft();this._layoutAllIcons();this._layoutMessageX()},_preventEnter:function(a){this._isTextArea()||this.base(arguments,a)},_updateMessage:function(){if(this._isCreated){if(null!=this._message&&""!==this._message&&null==this._messageElement){this._messageElement=document.createElement("div");var a=this._messageElement.style;a.position="absolute";a.outline="none";a.overflow="hidden";a.whiteSpace="nowrap";var b=this._getMessageStyle();a.color=b.textColor||"";rwt.html.Style.setTextShadow(this._messageElement,b.textShadow);this._getTargetNode().insertBefore(this._messageElement,this._inputElement)}this._messageElement&&(this._messageElement.innerHTML=this._message?this._message:"");this._updateMessageCursor();this._updateMessageVisibility();this._updateMessageFont();this._layoutMessageX()}},_centerFieldVertically:function(){this.base(arguments);this._layoutMessageY()},_layoutMessageX:function(){if(this._messageElement){var a=this._getMessageStyle(),b=this._messageElement.style,c=this.getBoxWidth()-this._cachedBorderLeft-this._cachedBorderRight-a.paddingLeft-a.paddingRight-this._getIconOuterWidth("search")-this._getIconOuterWidth("cancel");b.width=Math.max(0,c)+"px";this._isTextArea()?b.left="3px":(c="rtl"===this.getDirection()?"cancel":"search",b.left=this._getIconOuterWidth(c)+a.paddingLeft+"px")}},_layoutMessageY:function(){this._messageElement&&(this._isTextArea()?this._messageElement.style.top="0px":this._messageElement.style.top=this.getInputElement().style.top)},_getMessageStyle:function(){return rwt.theme.AppearanceManager.getInstance().styleFrom("text-field-message",{})},_updateMessageVisibility:function(){if(this._messageElement){var a=(null==this.getValue()||""===this.getValue())&&!this.getFocused();this._messageElement.style.display=a?"":"none"}},_updateMessageFont:function(){this._messageElement&&this.getFont().renderElement(this._messageElement)},_updateMessageCursor:function(){if(this._messageElement){var a=this._inputElement.style.cursor;if(null==a||""===a)a="text";this._messageElement.style.cursor=a}}}})})();rwt.remote.HandlerRegistry.add("rwt.widgets.Text",{factory:function(a){var b=rwt.remote.HandlerUtil.createStyleMap(a.style),c=new rwt.widgets.Text(b.MULTI);rwt.remote.HandlerUtil.addStatesForStyles(c,a.style);c.setUserData("isControl",!0);rwt.remote.HandlerUtil.setParent(c,a.parent);b.RIGHT?c.setTextAlign("right"):b.CENTER&&c.setTextAlign("center");c.setWrap(void 0!==b.WRAP);return c},destructor:rwt.remote.HandlerUtil.getControlDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:rwt.remote.HandlerUtil.extendControlProperties("text message echoChar editable selection textLimit".split(" ")),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({text:function(a,b){var c=rwt.util.Encoding,d=c.truncateAtZero(b);a.hasState("rwt_MULTI")||(d=c.replaceNewLines(d," "));a.setValue(d)},echoChar:function(a,b){a.hasState("rwt_MULTI")||a.setPasswordMode(null!==b)},editable:function(a,b){a.setReadOnly(!b)},textLimit:function(a,b){a.setMaxLength(b)}}),events:["DefaultSelection","Modify"],listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({}),methods:["addListener","removeListener"],methodHandler:rwt.remote.HandlerUtil.extendListenerMethodHandler({}),scriptingMethods:rwt.remote.HandlerUtil.extendControlScriptingMethods({getText:function(){return this.getValue()},getSelection:function(){return this.getSelection()},getEditable:function(){return!this.getReadOnly()}})});rwt.qx.Class.define("rwt.widgets.Separator",{extend:rwt.widgets.base.BoxLayout,construct:function(){this.base(arguments);this._line=new rwt.widgets.base.Parent;this._line.setAnonymous(!0);this._line.setAppearance("separator-line");this.add(this._line)},properties:{appearance:{refine:!0,init:"separator"}},destruct:function(){this._line.dispose();this._line=null},members:{_getSubWidgets:function(){return[this._line]},setLineStyle:function(a){this._line.addState(a)},setLineOrientation:function(a){"vertical"==a?(this.setHorizontalChildrenAlign("center"),this._line.setHeight("100%")):(this.setVerticalChildrenAlign("middle"),this._line.setWidth("100%"));this._line.toggleState("rwt_VERTICAL","vertical"==a)}}});rwt.remote.HandlerRegistry.add("rwt.widgets.Separator",{factory:function(a){var b=new rwt.widgets.Separator;rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);b.setUserData("isControl",!0);rwt.remote.HandlerUtil.setParent(b,a.parent);a=rwt.remote.HandlerUtil.createStyleMap(a.style);b.setLineOrientation(a.VERTICAL?"vertical":"horizontal");var c="rwt_SHADOW_NONE";a.SHADOW_IN?c="rwt_SHADOW_IN":a.SHADOW_OUT&&(c="rwt_SHADOW_OUT");b.setLineStyle(c);return b},destructor:rwt.remote.HandlerUtil.getControlDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:rwt.remote.HandlerUtil.extendControlProperties([]),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({}),listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({})});rwt.qx.Class.define("rwt.widgets.ControlDecorator",{extend:rwt.widgets.base.Image,construct:function(){this.base(arguments);this.setZIndex(1E3);this.setVisibility(!1);this._showHover=!0;this._text=null},members:{setText:function(a){this._text=a;this._updateToolTip()},setShowHover:function(a){this._showHover=a;this._updateToolTip()},_updateToolTip:function(){var a=rwt.remote.WidgetManager.getInstance();null!==this._text&&""!==this._text&&this._showHover?a.setToolTip(this,this._text):a.setToolTip(this,null)},setHasSelectionListener:function(a){var b=rwt.remote.EventUtil;a?this.addEventListener("mousedown",b.widgetSelected,this):this.removeEventListener("mousedown",b.widgetSelected,this)},setHasDefaultSelectionListener:function(a){var b=rwt.remote.EventUtil;a?this.addEventListener("dblclick",b.widgetDefaultSelected,this):this.removeEventListener("dblclick",b.widgetDefaultSelected,this)}}});rwt.remote.HandlerRegistry.add("rwt.widgets.ControlDecorator",{factory:function(a){var b=new rwt.widgets.ControlDecorator;rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);rwt.remote.HandlerUtil.setParent(b,a.parent);rwt.remote.HandlerUtil.callWithTarget(a.parent,function(a){rwt.remote.HandlerUtil.removeDestroyableChild(a,b);b.setUserData("protocolParent",null)});return b},destructor:rwt.remote.HandlerUtil.getWidgetDestructor(),properties:["bounds","text","image","visible","showHover"],propertyHandler:{bounds:function(a,b){a.setLeft(b[0]);a.setTop(b[1]);a.setWidth(b[2]);a.setHeight(b[3])},image:function(a,b){null===b?a.setSource(null):a.setSource(b[0])},visible:function(a,b){a.setVisibility(b)}},listeners:["Selection","DefaultSelection"]});namespace("rwt.runtime");rwt.runtime.MobileWebkitSupport={_draggableTypes:{"rwt.widgets.Shell":null,"rwt.widgets.Sash":null,"rwt.widgets.Scale":["scale-thumb"],"rwt.widgets.Slider":["slider-thumb"],"rwt.widgets.base.ScrollBar":null,"rwt.widgets.ScrolledComposite":["scrollbar-thumb"],"rwt.widgets.base.BasicButton":["scrollbar-thumb"],"rwt.widgets.base.Parent":["coolitem-handle"],"rwt.widgets.List":["scrollbar-thumb"],"rwt.widgets.Grid":["tree-column","label","image","scrollbar-thumb"]},_lastMouseOverTarget:null,_lastMouseClickTarget:null,_lastMouseClickTime:null,_mouseEnabled:!0,_fullscreen:window.navigator.standalone,_touchListener:null,_gestureListener:null,_touchSession:null,_allowNativeScroll:!1,_allowedMouseEvents:{INPUT:{mousedown:!0,mouseup:!0},TEXTAREA:{mousedown:!0,mouseup:!0},SELECT:{mousedown:!0,mouseup:!0},"*":{mousewheel:!0}},init:function(){rwt.client.Client.supportsTouch()&&(this._configureToolTip(),this._hideTabHighlight(),this._bindListeners(),this._registerListeners(),this._registerFilter(),this.setTouchScrolling(!rwt.client.Client.isAndroidBrowser()))},addDraggableType:function(a){a in this._draggableTypes||(this._draggableTypes[a]=null)},setTouchListener:function(a,b){this._touchListener=[a,b]},setGestureListener:function(a,b){this._gestureListener=[a,b]},setTouchScrolling:function(a){this._allowNativeScroll=a},_isZoomed:function(){return window.innerWidth!==(0===window.orientation%180?screen.width:screen.height)},_configureToolTip:function(){var a=rwt.widgets.base.WidgetToolTip.getInstance();a.setMousePointerOffsetX(-35);a.setMousePointerOffsetY(-100);rwt.widgets.util.ToolTipManager.getInstance().handleMouseEvent=function(a){var b=a.getType();"mousedown"===b?this._handleMouseOver(a):"mouseup"===b&&this.setCurrentToolTipTarget(null)}},_hideTabHighlight:function(){rwt.html.StyleSheet.createElement(" * { -webkit-tap-highlight-color: rgba(0,0,0,0); }")},_bindListeners:function(){this.__onTouchEvent=rwt.util.Functions.bind(this._onTouchEvent,this);this.__onGestureEvent=rwt.util.Functions.bind(this._onGestureEvent,this);this.__onOrientationEvent=rwt.util.Functions.bind(this._onOrientationEvent,this)},_registerListeners:function(){var a=document.body;rwt.client.Client.isGecko()?(a.addEventListener("touchstart",this.__onTouchEvent,!1),a.addEventListener("touchmove",this.__onTouchEvent,!1),a.addEventListener("touchend",this.__onTouchEvent,!1),a.addEventListener("touchcancel",this.__onTouchEvent,!1),a.addEventListener("deviceorientation",this.__onOrientationEvent,!1)):(a.ontouchstart=this.__onTouchEvent,a.ontouchmove=this.__onTouchEvent,a.ontouchend=this.__onTouchEvent,a.ontouchcancel=this.__onTouchEvent,a.addEventListener("gesturestart",this.__onGestureEvent),a.addEventListener("gesturechange",this.__onGestureEvent),a.addEventListener("gestureend",this.__onGestureEvent),a.onorientationchange=this.__onOrientationEvent)},_removeListeners:function(){var a=document.body;rwt.client.Client.isGecko()?(a.removeEventListener("touchstart",this.__onTouchEvent,!1),a.removeEventListener("touchmove",this.__onTouchEvent,!1),a.removeEventListener("touchend",this.__onTouchEvent,!1),a.removeEventListener("touchcancel",this.__onTouchEvent,!1),a.removeEventListener("deviceorientation",this.__onOrientationEvent,!1)):(a.ontouchstart=null,a.ontouchmove=null,a.ontouchend=null,a.ontouchcancel=null,a.removeEventListener("gesturestart",this.__onGestureEvent),a.removeEventListener("gesturechange",this.__onGestureEvent),a.removeEventListener("gestureend",this.__onGestureEvent),a.onorientationchange=null)},_registerFilter:function(){rwt.event.EventHandler.setMouseDomEventFilter(this._filterMouseEvents,this)},_filterMouseEvents:function(a){var b=this._allowedMouseEvents,c="object"===typeof a.originalEvent;c||(c=!0===b["*"][a.type]);c||"object"!==typeof b[a.target.tagName]||(c=!0===b[a.target.tagName][a.type]);c||(a.preventDefault(),a.returnValue=!1);return c},_onTouchEvent:function(a){try{if(rwt.remote.EventUtil.getSuspended())a.preventDefault();else{var b=a.type;if(this._mouseEnabled)switch(b){case "touchstart":this._handleTouchStart(a);break;case "touchend":this._handleTouchEnd(a);break;case "touchmove":this._handleTouchMove(a)}else null!==this._touchListener&&this._touchListener[0].call(this._touchListener[1],a)}}catch(c){alert("Error in touch event handling:"+c),"object"===typeof console&&(console.log(c),c.stack&&console.log(c.stack))}},_getTouch:function(a){var b=a.touches.item(0);null===b&&(b=a.changedTouches.item(0));return b},_handleTouchStart:function(a){var b=this._getTouch(a),c=a.target,d=rwt.event.EventHandlerUtil.getOriginalTargetObject(c),b=[b.clientX,b.clientY];this._touchSession={type:this._getSessionType(d),initialTarget:c,widgetTarget:d,initialPosition:b};this._touchSession.type.scroll||this._touchSession.type.outerScroll||this._touchSession.type.focus||this._allowTouch(c)||a.preventDefault();this._moveMouseTo(c,a);this._touchSession.type.click&&this._fireMouseEvent("mousedown",c,a,b);this._touchSession.type.virtualScroll&&this._initVirtualScroll(d)},_handleTouchMove:function(a){if(null!==this._touchSession){var b=this._getTouch(a),b=[b.clientX,b.clientY];this._touchSession.type.virtualScroll&&this._handleVirtualScroll(b);this._touchSession.type.scroll||a.preventDefault();if(this._touchSession.type.drag)a.preventDefault(),this._fireMouseEvent("mousemove",a.target,a,b);else{var c=this._touchSession.initialPosition;(15<=Math.abs(c[0]-b[0])||15<=Math.abs(c[1]-b[1]))&&this._cancelMouseSession(a)}}},_handleTouchEnd:function(a){this._allowTouch(a.target)||a.preventDefault();var b=this._getTouch(a),b=[b.clientX,b.clientY],c=a.target;if(null!==this._touchSession){var d=this._touchSession.type;d.delayedClick&&this._fireMouseEvent("mousedown",c,a,b);(d.click||d.delayedClick)&&this._fireMouseEvent("mouseup",c,a,b);this._touchSession.type.virtualScroll&&this._finishVirtualScroll();(d.click||d.delayedClick)&&this._touchSession.initialTarget===c&&(this._fireMouseEvent("click",c,a,b),this._touchSession=null,this._isDoubleClick(a)?(this._lastMouseClickTime=this._lastMouseClickTarget=null,this._fireMouseEvent("dblclick",c,a,b)):(this._lastMouseClickTarget=c,this._lastMouseClickTime=(new Date).getTime()))}},_getSessionType:function(a){var b={};this._isSelectableWidget(a)||this._isFocusable(a)?b.delayedClick=!0:b.click=!0;this._isDraggableWidget(a)?b.drag=!0:this._isGridRowContainer(a)?(b.virtualScroll=!0,a=this._isScrollableWidget(a)||this._isClientDocumentScrollingEnabled(),b.outerScroll=this._allowNativeScroll&&a):this._allowNativeScroll&&this._isScrollableWidget(a)?b.scroll=!0:this._isFocusable(a)?b.focus=!0:this._allowNativeScroll&&this._isClientDocumentScrollingEnabled()&&(b.scroll=!0);return b},_initVirtualScroll:function(a){var b;b=this._isGridRowContainer(a)?a.getParent():this._findScrollable(a);a=b._vertScrollBar;b=b._horzScrollBar;this._touchSession.scrollBarV=a;this._touchSession.initScrollY=this._getScrollYOffset(a);this._touchSession.scrollBarH=b;this._touchSession.initScrollX=b.getValue()},_handleVirtualScroll:function(a){var b=this._touchSession.initialPosition,c=this._touchSession.initScrollX+(b[0]-a[0]);a=this._touchSession.initScrollY+(b[1]-a[1]);var b=this._touchSession.scrollBarV.getMaximum()-this._touchSession.scrollBarV.getThumb(),d=this._adaptScrollYOffset(a);if(this._touchSession.type.outerScroll&&(0>a||d>b)){var e=this._findScrollable(this._touchSession.widgetTarget);if(null==e)delete this._touchSession.type.virtualScroll,this._touchSession.type.scroll=!0;else{var f=e._vertScrollBar.getValue(),e=e._vertScrollBar.getMaximum()-e._vertScrollBar.getThumb();if(0>a&&0<f||d>b&&f<e)delete this._touchSession.type.virtualScroll,this._touchSession.type.scroll=!0}}this._touchSession.scrollBarH.setValue(c);this._touchSession.scrollBarV.setValue(d)},_adaptScrollYOffset:function(a){return this._isGridRowContainer(this._touchSession.widgetTarget)?(a=this._touchSession.widgetTarget.getParent().getRootItem().findItemByOffset(a))?a.getFlatIndex():0:a},_getScrollYOffset:function(a){return this._isGridRowContainer(this._touchSession.widgetTarget)?(a=this._touchSession.widgetTarget.getParent()._getTopItem())?a.getOffset():0:a.getValue()},_finishVirtualScroll:function(){var a=this._touchSession.scrollBarV;a.setValue(a.getValue())},_allowTouch:function(a){return"SELECT"===a.tagName},_isFocusable:function(a){return a instanceof rwt.widgets.base.BasicText},_isScrollableWidget:function(a){return null!==this._findScrollable(a)},_isGridRowContainer:function(a){return a instanceof rwt.widgets.base.GridRowContainer},_isSelectableWidget:function(a){var b=!1;if(a instanceof rwt.widgets.ListItem||this._isGridRowContainer(a))b=!0;return b},_isClientDocumentScrollingEnabled:function(){var a=rwt.widgets.base.ClientDocument.getInstance().getOverflow();return a&&"hidden"!==a},_findScrollable:function(a){var b=null;do a instanceof rwt.widgets.base.Scrollable?b=a:a=a instanceof rwt.widgets.base.ClientDocument?null:a.getParent();while(a&&!b);return b},_isDraggableWidget:function(a){var b=rwt.remote.WidgetManager.getInstance().findControl(a),c=!1;null==b&&(b=a);if(null!=b&&b.classname in this._draggableTypes)if(b=this._draggableTypes[b.classname],null==b)c=!0;else for(var d=0;d<b.length&&!c;d++)a.getAppearance()===b[d]&&(c=!0);return c},_isDoubleClick:function(a){var b=!1;this._lastMouseClickTarget===a.target&&(b=(new Date).getTime()-this._lastMouseClickTime<rwt.remote.EventUtil.DOUBLE_CLICK_TIME);return b},_onGestureEvent:function(a){a.preventDefault();var b=a.type;null!==this._gestureListener&&this._gestureListener[0].call(this._gestureListener[1],a);switch(b){case "gesturestart":this._disableMouse(a);break;case "gestureend":this._enableMouse(a)}},_onOrientationEvent:function(){},_disableMouse:function(a){this._cancelMouseSession(a);this._mouseEnabled=!1},_cancelMouseSession:function(a){var b=this._getDummyTarget();this._moveMouseTo(b,a);null!==this._touchSession&&(this._fireMouseEvent("mouseup",b,a,[0,0]),delete this._touchSession.type.click,delete this._touchSession.type.delayedClick)},_getDummyTarget:function(){return rwt.widgets.base.ClientDocument.getInstance()._getTargetNode()},_enableMouse:function(){this._mouseEnabled=!0},_moveMouseTo:function(a,b){var c=this._lastMouseOverTarget;if(c!==a){var d=[0,0];null!==c&&this._fireMouseEvent("mouseout",c,b,d);this._lastMouseOverTarget=a;this._fireMouseEvent("mouseover",a,b,d)}},_fireMouseEvent:function(a,b,c,d){var e=document.createEvent("MouseEvent");e.initMouseEvent(a,!0,!0,window,0,d[0],d[1],d[0],d[1],!1,!1,!1,!1,rwt.event.MouseEvent.buttons.left,null);e.originalEvent=c;b.dispatchEvent(e)},_postMouseEvent:function(a){"mouseup"===a&&rwt.widgets.util.ToolTipManager.getInstance().setCurrentToolTipTarget(null)}};rwt.qx.Class.define("rwt.widgets.ToolTip",{extend:rwt.widgets.base.Popup,include:rwt.animation.VisibilityAnimationMixin,construct:function(a){this.base(arguments);this._style=a;this.setAutoHide(!1);this.setDisplay(!0);this.setVisibility(!1);this.setAppearance("tool-tip");var b=rwt.widgets.base.ClientDocument.getInstance();this.setMaxWidth(b.getClientWidth()/2);this.setMaxHeight(b.getClientHeight()/2);this.addToDocument();this.addEventListener("click",this._onClick,this);this.addEventListener("appear",this._update,this);this._hideAfterTimeout=!1;this._messageFont=this._getMessageFont();this._message=this._text=this._image=this._textArea=this._contentArea=null;this._markupEnabled=!1;this._createControls()},destruct:function(){this.removeEventListener("click",this._onClick,this);this._contentArea.dispose();this._textArea.dispose();this._image.dispose();this._text.dispose();this._message.dispose();this._messageFont=null},members:{setText:function(a){this._markupEnabled||(a=rwt.util.Encoding.escapeText(a,!1));this._text.setText(a);this.getVisibility()&&this._update()},setMessage:function(a){if(!this._markupEnabled){var b=rwt.util.Encoding;a=b.escapeText(a,!1);a=b.replaceNewLines(a,"\x3cbr/\x3e")}this._message.setText(a);this.getVisibility()&&this._update()},setMarkupEnabled:function(a){this._markupEnabled=a},setLocation:function(a,b){this.setLeft(a);this.setTop(b)},setHideAfterTimeout:function(a){this._hideAfterTimeout=a},setVisible:function(a){this.setVisibility(a);if(a&&(this.bringToFront(),this._hideAfterTimeout))rwt.client.Timer.once(this._hide,this,5E3)},addState:function(a){this.base(arguments,a);this._image.addState(a)},removeState:function(a){this.base(arguments,a);this._image.removeState(a)},_createControls:function(){this._contentArea=new rwt.widgets.base.BoxLayout("horizontal");this._contentArea.setWidth("100%");this._contentArea.setHeight("100%");this._contentArea.setSpacing(5);this._contentArea.setOverflow("hidden");this._contentArea.setParent(this);this._image=new rwt.widgets.base.Image;this._image.setAppearance("tool-tip-image");this._image.setParent(this._contentArea);this._image.addEventListener("changeLoaded",this._update,this);this._textArea=new rwt.widgets.base.BoxLayout("vertical");this._textArea.setParent(this._contentArea);this._textArea.setHeight("100%");this._textArea.setSpacing(5);this._text=new rwt.widgets.base.Label;this._text.setAppearance("tool-tip-text");this._text.setParent(this._textArea);this._message=new rwt.widgets.base.Label;this._message.setAppearance("tool-tip-message");this._message.setHeight("auto");this._message.setWrap(!0);this._message.setParent(this._textArea)},_update:function(){var a=this.getWidth();if("auto"===a){var a=this._message.getText(),b=this._getTextSize(this._text.getText(),-1),c=this._getTextSize(a,-1);if(!this._markupEnabled)for(var d=c.x;0<d&&!this._matchesWidthToHeightRatio(c);)d-=10,c=this._getTextSize(a,d);c.x=this._max(c.x,b.x);this._message.setWidth(c.x);this._message.setHeight(c.y)}else a=a-this.getPaddingLeft()-this.getPaddingRight(),a-=this._image._computePreferredInnerWidth(),a-=this._contentArea.getSpacing(),this._message.setWidth(a),this._message.setHeight("auto")},_matchesWidthToHeightRatio:function(a){return 6>=a.x/a.y},_max:function(a,b){return a>b?a:b},_getTextSize:function(a,b){var c=[""];c[1]=a;c[2]=this._messageFont.getFamily();c[3]=this._messageFont.getSize();c[4]=this._messageFont.getBold();c[5]=this._messageFont.getItalic();c[6]=b;c=rwt.widgets.util.FontSizeCalculation._measureItem(c);return{x:c[0],y:c[1]}},_onClick:function(){this._hide();rwt.remote.EventUtil.notifySelected(this)},_hide:function(){this.getVisibility()&&(this.setVisible(!1),rwt.widgets.base.Widget.flushGlobalQueues(),rwt.remote.Connection.getInstance().getRemoteObject(this).set("visible",!1))},_getMessageFont:function(){return(new rwt.theme.ThemeValues({})).getCssFont("ToolTip-Message","font")}}});rwt.remote.HandlerRegistry.add("rwt.widgets.ToolTip",{factory:function(a){var b=rwt.remote.HandlerUtil.createStyleMap(a.style),c=null;b.ICON_ERROR?c="error":b.ICON_WARNING?c="warning":b.ICON_INFORMATION&&(c="information");var d=new rwt.widgets.ToolTip(c);d.setMarkupEnabled(!0===a.markupEnabled);rwt.remote.HandlerUtil.addStatesForStyles(d,a.style);rwt.remote.HandlerUtil.callWithTarget(a.parent,function(a){rwt.remote.HandlerUtil.addDestroyableChild(a,d);d.setUserData("protocolParent",a)});return d},destructor:rwt.remote.HandlerUtil.getWidgetDestructor(),properties:"customVariant roundedBorder backgroundGradient autoHide text message location visible".split(" "),propertyHandler:{roundedBorder:rwt.remote.HandlerUtil.getRoundedBorderHandler(),backgroundGradient:rwt.remote.HandlerUtil.getBackgroundGradientHandler(),autoHide:function(a,b){a.setHideAfterTimeout(b)},location:function(a,b){a.setLocation(b[0],b[1])}},events:["Selection"]});rwt.qx.Class.define("rwt.remote.WidgetManager",{extend:rwt.qx.Object,statics:{getInstance:function(){return rwt.runtime.Singletons.get(rwt.remote.WidgetManager)}},construct:function(){this.base(arguments)},members:{dispose:function(a){a=this.findWidgetById(a);null!=a&&(this.remove(a),a.getDisposed()||(this._removeToolTipPopup(a),a.destroy()))},add:function(a,b,c,d){!0===c&&a.setUserData("isControl",!0);rwt.remote.ObjectRegistry.add(b,a,d)},remove:function(a){a=this.findIdByWidget(a);rwt.remote.ObjectRegistry.remove(a)},findWidgetById:function(a){return rwt.remote.ObjectRegistry.getObject(a)},findIdByWidget:function(a){return rwt.remote.ObjectRegistry.getId(a)},isControl:function(a){var b=null;null!=a&&(b=a.getUserData("isControl"));return!0===b},findControl:function(a){for(;null!=a&&!this.isControl(a);)a=a.getParent?a.getParent():null;return a},findEnabledControl:function(a){for(;!(null==a||this.isControl(a)&&a.getEnabled());)a=a.getParent?a.getParent():null;return a},setToolTip:function(a,b){rwt.widgets.base.WidgetToolTip.setToolTipText(a,b)},_removeToolTipPopup:function(a){a.setToolTipText(null)}}});(function(){namespace("rwt.remote");var a=!1,b=null;rwt.remote.MessageProcessor={processMessage:function(b,d,e){var c=0;"undefined"!==typeof e&&(c=e);0===c&&(rap._.notify("receive",b),this.processHead(b.head));for(e=b.operations||[];c<e.length;)if(this.processOperationArray(e[c]),c++,a){this._suspendMessageProcessing(b,d,c);return}rap._.notify("process",b);d&&d()},processHead:function(a){var b=rwt.remote.Connection.getInstance();a.url&&b.setUrl(a.url);a.cid&&b.setConnectionId(a.cid);a.redirect&&(rwt.widgets.Display.getCurrent().setExitConfirmation(null),document.location=a.redirect)},processOperationArray:function(a){var b=a[0];try{switch(b){case "create":this._processCreate(a[1],a[2],a[3]);break;case "set":this._processSet(a[1],a[2]);break;case "listen":this._processListen(a[1],a[2]);break;case "call":this._processCall(a[1],a[2],a[3]);break;case "destroy":this._processDestroy(a[1])}}catch(e){this._processError(e,a)}},processOperation:function(a){switch(a.action){case "create":this._processCreate(a.target,a.type,a.properties);break;case "set":this._processSet(a.target,a.properties);break;case "destroy":this._processDestroy(a.target);break;case "call":this._processCall(a.target,a.method,a.properties);break;case "listen":this._processListen(a.target,a.properties)}},pauseExecution:function(){a=!0},isPaused:function(){return a},continueExecution:function(){a=!1;var c=b;b=null;this.processMessage.apply(this,c)},_processCreate:function(a,b,e){var c=rwt.remote.HandlerRegistry.getHandler(b);if(!0===c.service)throw Error("Objects of type "+b+" can not be created");b=c.factory(e);this._addTarget(b,a,c);this._processSetImpl(b,c,e)},_processDestroy:function(a){var b=rwt.remote.ObjectRegistry.getEntry(a);if(b){var c=b.handler,f=b.object,b=c.getDestroyableChildren?c.getDestroyableChildren(f):null;if(c.destructor instanceof Function)c.destructor(f);else if("string"===typeof c.destructor)f[c.destructor]();rwt.remote.ObjectRegistry.remove(a);rwt.remote.RemoteObjectFactory.remove(a);for(a=0;null!=b&&a<b.length;a++)b[a]&&this._processDestroy(rwt.remote.ObjectRegistry.getId(b[a]))}},_processSet:function(a,b){var c=rwt.remote.ObjectRegistry.getEntry(a);this._processSetImpl(c.object,c.handler,b)},_processSetImpl:function(a,b,e){if(b.isGeneric&&!rwt.util.Objects.isEmpty(e))a.set(e,{nosync:!0});else if(e&&b.properties instanceof Array)for(var c=0;c<b.properties.length;c++){var d=b.properties[c],h=e[d];void 0!==h&&(b.propertyHandler&&b.propertyHandler[d]?b.propertyHandler[d].call(window,a,h):(d=this._getSetterName(d),a[d](h)))}},_processCall:function(a,b,e){var c=rwt.remote.ObjectRegistry.getEntry(a);a=c.handler;c=c.object;if(a.isGeneric)c[b](e);else if(a.methods instanceof Array&&-1!==a.methods.indexOf(b))if(a.methodHandler&&a.methodHandler[b])a.methodHandler[b](c,e);else c[b](e)},_processListen:function(a,b){var c=rwt.remote.ObjectRegistry.getEntry(a),d=c.handler,c=c.object;if(d.events instanceof Array||d.isGeneric)for(var g=rwt.remote.RemoteObjectFactory.getRemoteObject(c),h=d.isGeneric?rwt.util.Objects.getKeys(b):d.events,k=0;k<h.length;k++){var l=h[k];!0===b[l]&&(g._.listen[l]=!0);!1===b[l]&&(g._.listen[l]=!1)}if(d.listeners instanceof Array)for(k=0;k<d.listeners.length;k++)l=d.listeners[k],!0===b[l]&&this._addListener(d,c,l),!1===b[l]&&this._removeListener(d,c,l)},_processError:function(a,b){var c;c=a?a.message?a.message:a.toString():"No Error given!";var d='Operation "'+b[0]+'"',d=d+(' on target "'+b[1]+'"'),g=rwt.remote.ObjectRegistry.getEntry(b[1]),g=g?g.object:null,d=d+(' of type "'+(g&&g.classname?g.classname:g)+'"'),d=d+" failed:"+("\n"+c+"\n")+("Properties: \n"+this._getPropertiesString(b));throw Error(d);},_getPropertiesString:function(a){var b="";switch(a[0]){case "set":case "listen":a=a[2];break;case "create":case "call":a=a[3];break;default:a={}}for(var c in a)b+=c+" \x3d "+a[c]+"\n";return b},_addTarget:function(a,b,e){a instanceof rwt.widgets.base.Widget?rwt.remote.WidgetManager.getInstance().add(a,b,!1,e):rwt.remote.ObjectRegistry.add(b,a,e)},_addListener:function(a,b,e){if(a.listenerHandler&&a.listenerHandler[e])a.listenerHandler[e](b,!0);else a=this._getListenerSetterName(e),b[a](!0)},_removeListener:function(a,b,e){if(a.listenerHandler&&a.listenerHandler[e])a.listenerHandler[e](b,!1);else a=this._getListenerSetterName(e),b[a](!1)},_getSetterName:function(a){return"set"+rwt.util.Strings.toFirstUp(a)},_getListenerSetterName:function(a){return"setHas"+rwt.util.Strings.toFirstUp(a)+"Listener"},_suspendMessageProcessing:function(a,d,e){if(null!=b)throw Error("A message is already suspended");b=[a,d,e]}}})();namespace("rwt.remote");rwt.remote.MessageWriter=function(){this._head={};this._operations=[];this._currentSetOperation=null;this._disposed=!1};rwt.remote.MessageWriter.prototype={dispose:function(){this._head=this._operations=null;this._disposed=!0},hasOperations:function(){return 0<this._operations.length},createMessage:function(){if(this._disposed)throw Error("Protocol message writer already disposed!");return JSON.stringify({head:this._head,operations:this._operations})},appendHead:function(a,b){this._head[a]=b},getHead:function(a){return this._head[a]||null},appendSet:function(a,b,c){this._getPropertiesObjectFor(a)[b]=c},appendNotify:function(a,b,c){this._currentSetOperation=null;this._operations.push(["notify",a,b,c])},appendCall:function(a,b,c){this._currentSetOperation=null;this._operations.push(["call",a,b,c])},_getPropertiesObjectFor:function(a){if(null===this._currentSetOperation||this._currentSetOperation[1]!==a)this._currentSetOperation=["set",a,{}],this._operations.push(this._currentSetOperation);return this._currentSetOperation[2]}};namespace("rwt.client");rwt.client.ServerPush=function(){this._retryCount=0;this._running=this._active=!1};rwt.client.ServerPush.getInstance=function(){return rwt.runtime.Singletons.get(rwt.client.ServerPush)};rwt.client.ServerPush.prototype={setActive:function(a){this._active=a},sendServerPushRequest:function(){this._active&&!this._running&&(this._running=!0,this._createRequest().send())},_createRequest:function(){var a=rwt.remote.Connection.getInstance(),b=new rwt.remote.Request(a.getUrl(),"GET","application/javascript");b.setSuccessHandler(this._handleSuccess,this);b.setErrorHandler(this._handleError,this);b.setData("servicehandler\x3dorg.eclipse.rap.serverpush\x26cid\x3d"+a.getConnectionId());return b},_handleSuccess:function(){this._running=!1;this._retryCount=0;this._sendUIRequest()},_sendUIRequest:function(){rwt.remote.Connection.getInstance().sendImmediate(!0)},_handleError:function(a){this._running=!1;rwt.remote.Connection.getInstance()._isConnectionError(a.status)?3>this._retryCount?(a=1E3*this._retryCount++,rwt.client.Timer.once(this.sendServerPushRequest,this,a)):this._handleConnectionError():this._handleServerError(a)},_handleConnectionError:function(){rwt.remote.Connection.getInstance().sendImmediate(!0)},_handleServerError:function(a){(a=a.responseText)&&0<a.length?rwt.runtime.ErrorHandler.showErrorBox("server error",!0,a):rwt.runtime.ErrorHandler.showErrorBox("request failed")}};rwt.remote.HandlerRegistry.add("rwt.client.ServerPush",{factory:function(){return rwt.client.ServerPush.getInstance()},service:!0,properties:["active"]});(function(){var a=rwt.client.Client,b=rwt.client.Timer,c=rwt.remote.MessageProcessor,d=rwt.runtime.ErrorHandler,e=rwt.remote.EventUtil,f=rwt.client.ServerPush,g=rwt.widgets.base.ClientDocument,h=rwt.widgets.base.Widget;rwt.qx.Class.define("rwt.remote.Connection",{extend:rwt.qx.Target,statics:{getInstance:function(){return rwt.runtime.Singletons.get(rwt.remote.Connection)}},construct:function(){this.base(arguments);this._url="";this._event=this._writer=null;this._requestCounter=0;this._requestPending=!1;this._connectionId=null;this._sendTimer=new b(60);this._sendTimer.addEventListener("interval",function(){this.sendImmediate(!0)},this);this._delayTimer=new b;this._delayTimer.addEventListener("interval",function(){this._delayTimer.stop();this.send()},this);this._waitHintTimer=new b(1E3);this._waitHintTimer.addEventListener("interval",this._showWaitHint,this);this._retryHandler=null;this._sendListeners=[]},destruct:function(){this._retryHandler=null;this._sendTimer.dispose();this._sendTimer=null;this._waitHintTimer.dispose();this._waitHintTimer=null},members:{setUrl:function(a){this._url=a},getUrl:function(){return this._url},setConnectionId:function(a){this._connectionId=a},getConnectionId:function(){return this._connectionId},_flushEvent:function(){if(this._event){var a=this.getMessageWriter();this._event[1]=this._event[1].split(".").pop();a.appendNotify.apply(a,this._event);this._event=null}},sendDelayed:function(a){this._delayTimer.setInterval(a);this._delayTimer.start()},send:function(){this._sendTimer.start()},sendImmediate:function(a){this._delayTimer.stop();if(this._requestPending&&a)this._sendTimer.stop(),this.send();else{this._flushEvent();this.dispatchSimpleEvent("send");rap._.notify("send");this._flushEvent();this._sendTimer.stop();this.getMessageWriter().appendHead("requestCounter",this._requestCounter++);this._requestPending=!0;this._startWaitHintTimer();var b=this._createRequest();b.setAsynchronous(a);b.setData(this.getMessageWriter().createMessage());this._writer.dispose();this._writer=null;b.send();this._removeSendListeners()}},getMessageWriter:function(){null===this._writer&&(this._writer=new rwt.remote.MessageWriter);return this._writer},getRemoteObject:function(a){return rwt.remote.RemoteObjectFactory.getRemoteObject(a)},onNextSend:function(a,b){this._sendListeners.push([a,b]);this.addEventListener("send",a,b)},getWaitHintTimer:function(){return this._waitHintTimer},_startWaitHintTimer:function(){0!==this._requestCounter&&this._waitHintTimer.start()},_removeSendListeners:function(){for(var a=0;a<this._sendListeners.length;a++){var b=this._sendListeners[a];this.removeEventListener("send",b[0],b[1])}this._sendListeners=[]},_createRequest:function(){var a="";this._connectionId&&(a=(-1===this._url.indexOf("?")?"?cid\x3d":"\x26cid\x3d")+this._connectionId);a=new rwt.remote.Request(this._url+a,"POST","application/json");a.setSuccessHandler(this._handleSuccess,this);a.setErrorHandler(this._handleError,this);return a},_handleError:function(a){this._hideWaitHint();if(this._isConnectionError(a.status))this._handleConnectionError(a);else{var b=a.responseText;b&&0<b.length?this._isJsonResponse(a)?(a=JSON.parse(b),d.showErrorBox(a.head.error,!0)):d.showErrorBox("server error",!0,b):d.showErrorBox("request failed")}},_handleSuccess:function(a){try{var b=JSON.parse(a.responseText);rwt.remote.EventUtil.setSuspended(!0);var g=this;c.processMessage(b,function(){g._requestPending=!1;h.flushGlobalQueues();rap._.notify("render");e.setSuspended(!1);f.getInstance().sendServerPushRequest();g.dispatchSimpleEvent("received");g._hideWaitHint()})}catch(n){this._hideWaitHint(),d.processJavaScriptErrorInResponse(a.responseText,n,a.target)}},_handleConnectionError:function(a){g.getInstance().setGlobalCursor(null);rwt.runtime.ErrorHandler.showErrorBox("connection error",!1);this._retryHandler=function(){var b=this._createRequest(),c=a.target;b.setAsynchronous(c.getAsynchronous());b.setData(c.getData());b.send()}},_retry:function(){try{d.hideErrorBox(),this._showWaitHint(),this._retryHandler()}catch(k){rwt.runtime.ErrorHandler.processJavaScriptError(k)}},_isConnectionError:rwt.util.Variant.select("qx.client",{trident:function(a){return 12007===a||12029===a||12030===a||12031===a||12152===a||0===a},gecko:function(b){return 19<=10*a.getMajor()+a.getMinor()?0===b:-1===b},"default":function(a){return 0===a}}),_isJsonResponse:function(a){return-1!==a.responseHeaders["content-type"].indexOf("application/json")},_showWaitHint:function(){this._waitHintTimer.stop();g.getInstance().setGlobalCursor("progress");d.showWaitHint()},_hideWaitHint:function(){this._waitHintTimer.stop();d.hideErrorBox();g.getInstance().setGlobalCursor(null)}}})})();rwt.remote.Connection.RESOURCE_PATH="./rwt-resources/resource/";rwt.qx.Class.define("rwt.widgets.CTabItem",{extend:rwt.widgets.base.MultiCellWidget,construct:function(a,b){this.base(arguments,["image","label","image"]);this._parent=a;a.hasState("rwt_BORDER")&&this.addState("rwt_BORDER");this.setAppearance("ctab-item");this.setVerticalChildrenAlign(rwt.widgets.util.Layout.ALIGN_MIDDLE);this.setHorizontalChildrenAlign(rwt.widgets.util.Layout.ALIGN_LEFT);this.setOverflow("hidden");this.setTabIndex(null);this._showClose=this._selected=!1;this._mnemonicIndex=this._rawText=null;this._canClose=b;this.updateForeground();this.updateBackground();this.updateBackgroundImage();this.updateBackgroundGradient();this.setTabPosition(a.getTabPosition());this.setDirection(a.getDirection());this.updateCloseButton(!1);this.addEventListener("elementOver",this._onElementOver,this);this.addEventListener("elementOut",this._onElementOut,this);this.addEventListener("click",this._onClick,this);this.addEventListener("dblclick",this._onDblClick,this);this.addEventListener("changeParent",this._onChangeParent,this);this.addEventListener("changeLeft",this._onChangeLeft,this)},destruct:function(){this.setMnemonicIndex(null)},statics:{IMG_CLOSE:rwt.remote.Connection.RESOURCE_PATH+"widget/rap/ctabfolder/close.gif",IMG_CLOSE_HOVER:rwt.remote.Connection.RESOURCE_PATH+"widget/rap/ctabfolder/close_hover.gif"},members:{setText:function(a){this._rawText=a;this._mnemonicIndex=null;this._applyText(!1);this.dispatchSimpleEvent("changeText")},setImage:function(a){null===a?(this.setCellContent(0,null),this.setCellDimension(0,0,0)):(this.setCellContent(0,a[0]),this.setCellDimension(0,a[1],a[2]))},setMnemonicIndex:function(a){this._mnemonicIndex=a;var b=rwt.widgets.util.MnemonicHandler.getInstance();"number"===typeof a&&0<=a?b.add(this,this._onMnemonic):b.remove(this)},getMnemonicIndex:function(){return this._mnemonicIndex},_applyText:function(a){this._rawText?(a=rwt.util.Encoding.escapeText(this._rawText,a?this._mnemonicIndex:void 0),this.setCellContent(1,a)):this.setCellContent(1,null)},setTabPosition:function(a){this.toggleState("barTop","top"===a)},setSelected:function(a){this._selected!==a&&(this._selected=a,this.toggleState("selected",a),this._updateNextSelected(),this.updateForeground(),this.updateBackground(),this.updateBackgroundImage(),this.updateBackgroundGradient(),this.updateCloseButton(!1))},_onMnemonic:function(a){switch(a.type){case "show":this._applyText(!0);break;case "hide":this._applyText(!1);break;case "trigger":var b=this._rawText.toUpperCase().charCodeAt(this._mnemonicIndex);a.charCode===b&&(this._parent._notifySelection(this),a.success=!0)}},_updateNextSelected:function(){for(var a=null,b=this._parent.getChildren(),c=0;c<b.length;c++)"rwt.widgets.CTabItem"===b[c].classname&&(b[c].removeState("nextSelected"),null!=a&&b[c].isSelected()&&a.addState("nextSelected"),a=b[c])},isSelected:function(){return this._selected},setShowClose:function(a){this._showClose=a;this.updateCloseButton(!1)},computeBadgePosition:function(){return[0,0,"auto","auto"]},updateForeground:function(){var a=this.isSelected()?this._parent.getSelectionForeground():this._parent.getTextColor();null!=a?this.setTextColor(a):this.resetTextColor()},updateBackground:function(){var a=this.isSelected()?this._parent.getSelectionBackground():null;null!=a?this.setBackgroundColor(a):this.resetBackgroundColor()},updateBackgroundImage:function(){var a=this.isSelected()?this._parent.getSelectionBackgroundImage():null;null!=a?(this.setUserData("backgroundImageSize",a.slice(1)),this.setBackgroundImage(a[0])):this.resetBackgroundImage()},updateBackgroundGradient:function(){var a=this.isSelected()?this._parent.getSelectionBackgroundGradient():null;null!=a?this.setBackgroundGradient(a):this.resetBackgroundGradient()},_onElementOver:function(a){this.addState("over");this.updateCloseButton(this._isCloseButtonTarget(a))},_onElementOut:function(a){a.getDomTarget()===this.getElement()&&this.removeState("over");this.updateCloseButton(!1)},updateCloseButton:function(a){var b=!1;if(this._canClose||this._showClose)b=this._parent.getUnselectedCloseVisible()&&this.hasState("over"),b=this.isSelected()||b;b?(this.setCellContent(2,a?rwt.widgets.CTabItem.IMG_CLOSE_HOVER:rwt.widgets.CTabItem.IMG_CLOSE),this.setCellDimension(2,16,16)):(this.setCellContent(2,null),this.setCellDimension(2,0,0))},_onClick:function(a){this._isCloseButtonTarget(a)?rwt.remote.Connection.getInstance().getRemoteObject(this._parent).notify("Folder",{detail:"close",item:rwt.remote.ObjectRegistry.getId(this)}):this._parent._notifySelection(this)},_onDblClick:function(a){this._isCloseButtonTarget(a)||this._parent._notifyDefaultSelection(this)},_isCloseButtonTarget:function(a){return a.getDomTarget()===this.getCellNode(2)},_onChangeParent:function(){this._parent._isInGlobalDisposeQueue||this._updateNextSelected()},_onChangeLeft:function(){this.toggleState("firstItem",0===this.getLeft())}}});rwt.remote.HandlerRegistry.add("rwt.widgets.CTabItem",{factory:function(a){var b;rwt.remote.HandlerUtil.callWithTarget(a.parent,function(c){b=new rwt.widgets.CTabItem(c,c.hasState("rwt_CLOSE"));c.addAt(b,a.index);rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);rwt.remote.HandlerUtil.addDestroyableChild(c,b);b.setUserData("protocolParent",c)});return b},destructor:rwt.remote.HandlerUtil.getWidgetDestructor(),properties:"bounds font text mnemonicIndex image toolTipMarkupEnabled toolTip customVariant showing showClose badge data".split(" "),propertyHandler:{data:rwt.remote.HandlerUtil.getControlPropertyHandler("data"),bounds:function(a,b){"bottom"===a.getParent().getTabPosition()&&--b[1];b[3]+=1;a.setLeft(b[0]);a.setTop(b[1]);a.setWidth(b[2]);a.setHeight(b[3])},font:rwt.remote.HandlerUtil.getControlPropertyHandler("font"),toolTipMarkupEnabled:rwt.remote.HandlerUtil.getControlPropertyHandler("toolTipMarkupEnabled"),toolTip:rwt.remote.HandlerUtil.getControlPropertyHandler("toolTip"),showing:function(a,b){a.setVisibility(b)},badge:function(a,b){rwt.widgets.util.Badges.setBadge(a,b)}}});rwt.qx.Class.define("rwt.widgets.CTabFolder",{extend:rwt.widgets.base.Parent,construct:function(){this.base(arguments);this.setTabIndex(1);this.setHideFocus(!0);this.setAppearance("ctabfolder");this.setOverflow("hidden");this.setEnableElementFocus(!1);this._tabPosition="top";this._tabHeight=0;this._chevron=this._selectionBackgroundGradient=this._selectionBackgroundImage=this._selectionBackground=this._selectionForeground=null;this._chevronBounds=[0,0,0,0];this._chevronMenu=null;this._unselectedCloseVisible=!0;this._minMaxState="normal";this._maxButton=null;this._maxButtonBounds=[0,0,0,0];this._minButton=null;this._minButtonBounds=[0,0,0,0];this._body=new rwt.widgets.base.Parent;this._body.addState("barTop");this._body.setAppearance("ctabfolder-body");this.add(this._body);this._separator=new rwt.widgets.base.Parent;this._separator.setAppearance("ctabfolder-separator");this.add(this._separator);this._frame=new rwt.widgets.base.Parent;this._frame.setAppearance("ctabfolder-frame");this.add(this._frame);this._frameBorder=new rwt.html.Border(2,"solid","black");this.addEventListener("changeWidth",this._updateLayout,this);this.addEventListener("changeHeight",this._updateLayout,this);this.addEventListener("keypress",this._onKeyPress,this);this.addEventListener("contextmenu",this._onContextMenu,this)},destruct:function(){this.hideMinButton();this.hideMaxButton();this.removeEventListener("changeWidth",this._updateLayout,this);this.removeEventListener("changeHeight",this._updateLayout,this);this.removeEventListener("keypress",this._onKeyPress,this);this.removeEventListener("contextmenu",this._onContextMenu,this);this._disposeObjects("_frame","_separator");this._frameBorder.dispose()},statics:{BUTTON_SIZE:18,MIN_TOOLTIP:"Minimize",MAX_TOOLTIP:"Maximize",RESTORE_TOOLTIP:"Restore",CHEVRON_TOOLTIP:"Show List",CLOSE_TOOLTIP:"Close",setToolTipTexts:function(a,b,c,d,e){rwt.widgets.CTabFolder.MIN_TOOLTIP=a;rwt.widgets.CTabFolder.MAX_TOOLTIP=b;rwt.widgets.CTabFolder.RESTORE_TOOLTIP=c;rwt.widgets.CTabFolder.CHEVRON_TOOLTIP=d;rwt.widgets.CTabFolder.CLOSE_TOOLTIP=e}},members:{addState:function(a){this.base(arguments,a);if("variant_"==a.substr(0,8)||"rwt_"==a.substr(0,4))this._body.addState(a),this._frame.addState(a),this._mapItems(function(b){b.addState(a)})},removeState:function(a){this.base(arguments,a);if("variant_"==a.substr(0,8)||"rwt_"==a.substr(0,4))this._body.removeState(a),this._frame.removeState(a),this._mapItems(function(b){b.removeState(a)})},setTabPosition:function(a){this._tabPosition=a;this._mapItems(function(b){b.setTabPosition(a)});this._body.toggleState("barTop","top"==a);this._updateLayout()},getTabPosition:function(){return this._tabPosition},setTabHeight:function(a){this._tabHeight=a;a=this._getButtonTop();null!=this._minButton&&this._minButton.setTop(a);null!=this._maxButton&&this._maxButton.setTop(a);null!=this._chevron&&this._chevron.setTop(a);this._updateLayout()},_applyDirection:function(a){this.base(arguments,a);this.getLayoutImpl().setMirror("rtl"===a);null!=this._chevron&&this._chevron.setDirection(a);this._mapItems(function(b){b.setDirection(a)})},_applyTextColor:function(a,b){this.base(arguments,a,b);this._mapItems(function(a){a.updateForeground()})},_applyBackgroundColor:function(a){this._body.setBackgroundColor(a)},_applyBackgroundImage:function(a){this._body.setUserData("backgroundImageSize",this.getUserData("backgroundImageSize"));this._body.setBackgroundImage(a)},setSelectionForeground:function(a){this._selectionForeground=a;this._mapItems(function(a){a.updateForeground()})},setSelectionBackground:function(a){this._selectionBackground=a;this._mapItems(function(a){a.updateBackground()});null==a||this.hasState("rwt_FLAT")?this._frame.resetBorder():(this._frame.setBorder(null),this._frameBorder.dispose(),this._frameBorder=new rwt.html.Border(2,"solid",a),this._frame.setBorder(this._frameBorder))},setSelectionBackgroundImage:function(a){this._selectionBackgroundImage=a;this._mapItems(function(a){a.updateBackgroundImage()})},setSelectionBackgroundGradient:function(a){this._selectionBackgroundGradient=a;this._mapItems(function(a){a.updateBackgroundGradient()})},setUnselectedCloseVisible:function(a){this._unselectedCloseVisible=a;this._mapItems(function(a){a.updateCloseButton()})},setBorderVisible:function(a){this.toggleState("rwt_BORDER",a);this._updateLayout()},getSelectionForeground:function(){return this._selectionForeground},getSelectionBackground:function(){return this._selectionBackground},getSelectionBackgroundImage:function(){return this._selectionBackgroundImage},getSelectionBackgroundGradient:function(){return this._selectionBackgroundGradient},getUnselectedCloseVisible:function(){return this._unselectedCloseVisible},_mapItems:function(a){for(var b=this.getChildren(),c=0;c<b.length;c++)"rwt.widgets.CTabItem"===b[c].classname&&a(b[c])},_getButtonTop:function(){return this._tabHeight/2-rwt.widgets.CTabFolder.BUTTON_SIZE/2},setChevronBounds:function(a,b,c,d){this._chevronBounds=[a,b,c,d];null!=this._chevron&&this._chevron.setSpace(a,c,b,d)},showChevron:function(){null==this._chevron&&(this._chevron=new rwt.widgets.base.BasicButton("push",!0),this._chevron.setAppearance("ctabfolder-drop-down-button"),this._chevron.addEventListener("execute",this._onChevronExecute,this),this._chevron.setDirection(this.getDirection()),rwt.remote.WidgetManager.getInstance().setToolTip(this._chevron,rwt.widgets.CTabFolder.CHEVRON_TOOLTIP),this.add(this._chevron));this._chevron.setLeft(this._chevronBounds[0]);this._chevron.setTop(this._chevronBounds[1]);this._chevron.setWidth(this._chevronBounds[2]);this._chevron.setHeight(this._chevronBounds[3])},hideChevron:function(){null!=this._chevron&&(rwt.remote.WidgetManager.getInstance().setToolTip(this._chevron,null),this._chevron.removeEventListener("execute",this._onChevronExecute,this),this.remove(this._chevron),this._chevron.dispose(),this._chevron=null)},setMinMaxState:function(a){this._minMaxState=a;var b=[null,10,10],c=[null,10,10],d="",e="",f=rwt.remote.Connection.RESOURCE_PATH+"widget/rap/ctabfolder/";switch(a){case "min":b[0]=f+"restore.gif";c[0]=f+"maximize.gif";d=rwt.widgets.CTabFolder.RESTORE_TOOLTIP;e=rwt.widgets.CTabFolder.MAX_TOOLTIP;break;case "max":b[0]=f+"minimize.gif";c[0]=f+"restore.gif";d=rwt.widgets.CTabFolder.MIN_TOOLTIP;e=rwt.widgets.CTabFolder.RESTORE_TOOLTIP;break;case "normal":b[0]=f+"minimize.gif",c[0]=f+"maximize.gif",d=rwt.widgets.CTabFolder.MIN_TOOLTIP,e=rwt.widgets.CTabFolder.MAX_TOOLTIP}a=rwt.remote.WidgetManager.getInstance();null!=this._minButton&&(this._minButton.setIcon(b),a.setToolTip(this._minButton,d));null!=this._maxButton&&(this._maxButton.setIcon(c),a.setToolTip(this._maxButton,e))},setMaxButtonBounds:function(a,b,c,d){this._maxButtonBounds=[a,b,c,d];null!=this._maxButton&&this._maxButton.setSpace(a,c,b,d)},showMaxButton:function(){null==this._maxButton&&(this._maxButton=new rwt.widgets.base.BasicButton("push",!0),this._maxButton.setAppearance("ctabfolder-button"),this.setMinMaxState(this._minMaxState),this._maxButton.addEventListener("mousedown",this._onMinMaxExecute,this),this.add(this._maxButton));this._maxButton.setLeft(this._maxButtonBounds[0]);this._maxButton.setTop(this._maxButtonBounds[1]);this._maxButton.setWidth(this._maxButtonBounds[2]);this._maxButton.setHeight(this._maxButtonBounds[3])},hideMaxButton:function(){null!=this._maxButton&&(this._maxButton.removeEventListener("mousedown",this._onMinMaxExecute,this),rwt.remote.WidgetManager.getInstance().setToolTip(this._maxButton,null),this.remove(this._maxButton),this._maxButton.dispose(),this._maxButton=null)},setMinButtonBounds:function(a,b,c,d){this._minButtonBounds=[a,b,c,d];null!=this._minButton&&this._minButton.setSpace(a,c,b,d)},showMinButton:function(){null==this._minButton&&(this._minButton=new rwt.widgets.base.BasicButton("push",!0),this._minButton.setAppearance("ctabfolder-button"),this.setMinMaxState(this._minMaxState),this._minButton.addEventListener("mousedown",this._onMinMaxExecute,this),this.add(this._minButton));this._minButton.setLeft(this._minButtonBounds[0]);this._minButton.setTop(this._minButtonBounds[1]);this._minButton.setWidth(this._minButtonBounds[2]);this._minButton.setHeight(this._minButtonBounds[3])},hideMinButton:function(){null!=this._minButton&&(this._minButton.removeEventListener("mousedown",this._onMinMaxExecute,this),rwt.remote.WidgetManager.getInstance().setToolTip(this._minButton,null),this.remove(this._minButton),this._minButton.dispose(),this._minButton=null)},deselectAll:function(){this._mapItems(function(a){a.setSelected(!1)})},_updateLayout:function(){var a=this.hasState("rwt_BORDER")?1:0,b=this.getWidth()-2*a,c=this._tabHeight+1;this._body.setLeft(0);this._body.setTop(0);this._body.setWidth(this.getWidth());this._body.setHeight(this.getHeight());this._separator.setLeft(a);this._separator.setWidth(b);this._separator.setHeight(10);this._frame.setLeft(a);this._frame.setWidth(b);this._frame.setHeight(this.getHeight()-a-1-c);"top"==this._tabPosition?(this._separator.setTop(c),this._frame.setTop(c+1)):(this._separator.setTop(this.getHeight()-c-1),this._frame.setTop(a))},_onChevronExecute:function(){null!=this._chevronMenu&&this._chevronMenu.isSeeable()||rwt.remote.EventUtil.getSuspended()||rwt.remote.Connection.getInstance().getRemoteObject(this).notify("Folder",{detail:"showList"})},_onMinMaxExecute:function(a){if(!rwt.remote.EventUtil.getSuspended()){a.getTarget()==this._minButton?"min"==this._minMaxState?(this.setMinMaxState("normal"),a="restore"):(this.setMinMaxState("min"),a="minimize"):"normal"==this._minMaxState||"min"==this._minMaxState?(this.setMinMaxState("max"),a="maximize"):(this.setMinMaxState("normal"),a="restore");var b=rwt.remote.Connection.getInstance().getRemoteObject(this);b.set("minimized","min"==this._minMaxState);b.set("maximized","max"==this._minMaxState);b.notify("Folder",{detail:a})}},_onKeyPress:function(a){switch(a.getKeyIdentifier()){case "Left":a.stopPropagation();break;case "Right":a.stopPropagation()}},_onContextMenu:function(a){var b=this.getContextMenu();null!=b&&(b.setLocation(a.getPageX(),a.getPageY()),b.setOpener(this),b.show(),a.stopPropagation())},_notifySelection:function(a){rwt.remote.EventUtil.getSuspended()||a.isSelected()||(this.deselectAll(),a.setSelected(!0),a=rwt.remote.ObjectRegistry.getId(a),rwt.remote.Connection.getInstance().getRemoteObject(this).set("selection",a),rwt.remote.EventUtil.notifySelected(this,{item:a}))},_notifyDefaultSelection:function(a){rwt.remote.EventUtil.getSuspended()||(a=rwt.remote.ObjectRegistry.getId(a),rwt.remote.EventUtil.notifyDefaultSelected(this,{item:a}))}}});rwt.remote.HandlerRegistry.add("rwt.widgets.CTabFolder",{factory:function(a){var b=new rwt.widgets.CTabFolder;rwt.remote.HandlerUtil.addStatesForStyles(b,a.style);b.setUserData("isControl",!0);rwt.widgets.CTabFolder.setToolTipTexts.apply(b,a.toolTipTexts);rwt.remote.HandlerUtil.setParent(b,a.parent);return b},destructor:rwt.remote.HandlerUtil.getControlDestructor(),getDestroyableChildren:rwt.remote.HandlerUtil.getDestroyableChildrenFinder(),properties:rwt.remote.HandlerUtil.extendControlProperties("tabPosition tabHeight minMaxState minimizeBounds minimizeVisible maximizeBounds maximizeVisible chevronBounds chevronVisible unselectedCloseVisible selection selectionBackground selectionForeground selectionBackgroundImage selectionBackgroundGradient borderVisible".split(" ")),propertyHandler:rwt.remote.HandlerUtil.extendControlPropertyHandler({minimizeBounds:function(a,b){a.setMinButtonBounds.apply(a,b)},minimizeVisible:function(a,b){b?a.showMinButton():a.hideMinButton()},maximizeBounds:function(a,b){a.setMaxButtonBounds.apply(a,b)},maximizeVisible:function(a,b){b?a.showMaxButton():a.hideMaxButton()},chevronBounds:function(a,b){a.setChevronBounds.apply(a,b)},chevronVisible:function(a,b){b?a.showChevron():a.hideChevron()},selection:function(a,b){a.deselectAll();rwt.remote.HandlerUtil.callWithTarget(b,function(a){null!=a&&a.setSelected(!0)})},selectionBackground:function(a,b){null===b?a.setSelectionBackground(null):a.setSelectionBackground(rwt.util.Colors.rgbToRgbString(b))},selectionForeground:function(a,b){null===b?a.setSelectionForeground(null):a.setSelectionForeground(rwt.util.Colors.rgbToRgbString(b))},selectionBackgroundGradient:function(a,b){var c=null;if(b){for(var d=b[0],e=b[1],f=b[2],c=[],g=0;g<d.length;g++)c[g]=[e[g]/100,rwt.util.Colors.rgbToRgbString(d[g])];c.horizontal=!f}a.setSelectionBackgroundGradient(c)}}),events:["Folder","Selection","DefaultSelection"],listeners:rwt.remote.HandlerUtil.extendControlListeners([]),listenerHandler:rwt.remote.HandlerUtil.extendControlListenerHandler({})});(function(){var a=rwt.remote.Connection;rwt.remote.RemoteObject=function(a){this._={id:a,listen:{}}};rwt.remote.RemoteObject.prototype={set:function(b,c){a.getInstance().getMessageWriter().appendSet(this._.id,b,c)},notify:function(b,c,d){c=c?c:{};if(this.isListening(b)){var e=a.getInstance();e.getMessageWriter().appendNotify(this._.id,b,c);!0!==d&&("number"===typeof d?e.sendDelayed(d):e.send())}},call:function(b,c){var d=c?c:{};a.getInstance().getMessageWriter().appendCall(this._.id,b,d);a.getInstance().send()},isListening:function(a){return!0===this._.listen[a]}}})();(function(){var a=rwt.remote.ObjectRegistry;rwt.remote.RemoteObjectFactory={_db:{},getRemoteObject:function(b){b=a.getId(b);if(null==b)throw Error("Invalid target for ServerObject, or target not in ObjectManager");return this._getRemoteObject(b)},remove:function(a){delete this._db[a]},_getRemoteObject:function(a){null==this._db[a]&&(this._db[a]=new rwt.remote.RemoteObject(a),this._initRemoteObject(a));return this._db[a]},_initRemoteObject:function(b){var c=this._db[b];if((b=a.getEntry(b).handler)&&b.listeners)for(var d=0;d<b.listeners.length;d++)c._.listen[b.listeners[d]]=!0}}})();rwt.qx.Class.define("rwt.remote.KeyEventSupport",{extend:rwt.qx.Object,statics:{getInstance:function(){return rwt.runtime.Singletons.get(rwt.remote.KeyEventSupport)}},construct:function(){this.base(arguments);rwt.event.EventHandler.setKeyDomEventFilter(this._onKeyDomEvent,this);rwt.event.EventHandler.setKeyEventFilter(this._onKeyEvent,this);this._keyBindings={};this._cancelKeys={};this._currentKeyCode=-1;this._bufferedEvents=[];this._ignoreNextKeypress=this._keyEventRequestRunning=!1;rwt.remote.Connection.getInstance().addEventListener("received",this._onRequestReceived,this)},destruct:function(){rwt.remote.Connection.getInstance().removeEventListener("received",this._onRequestReceived,this);rwt.event.EventHandler.setKeyDomEventFilter(function(){},null);rwt.event.EventHandler.setKeyEventFilter(function(){},null)},members:{setKeyBindings:function(a){this._keyBindings=a},setCancelKeys:function(a){this._cancelKeys=a},_onKeyDomEvent:function(a,b,c,d){"keydown"===a&&(this._currentKeyCode=b);var e=this._getTargetControl();if((a=rwt.widgets.util.MnemonicHandler.getInstance().handleKeyEvent(a,b,c,d))||this._shouldCancel(this._currentKeyCode,c,d,e))rwt.event.EventHandlerUtil.stopDomEvent(d),d._noProcess=!0,d._mnemonic=a;a&&(this._ignoreNextKeypress=!0)},_onKeyEvent:function(a,b,c,d){b=this._getTargetControl();!d._mnemonic&&this._shouldSend(a,this._currentKeyCode,c,d,b)&&this._sendKeyEvent(b,this._currentKeyCode,c,d);d._mnemonic||"keypress"!==a&&"keyup"!==a||(this._ignoreNextKeypress=!1);return!d._noProcess},_shouldSend:function(a,b,c,d,e){var f=!1;this._isRelevant(b,a,d)&&(f=this._shouldSendTraverse(b,c,d,e)||this._shouldSendKeyDown(b,c,d,e));return f},_shouldSendTraverse:function(a,b,c,d){return this._hasTraverseListener(d)&&this._isTraverseKey(a)},_shouldSendKeyDown:function(a,b,c,d){var e=!1;this._hasKeyListener(d)&&(e=(d=d.getUserData("activeKeys"))&&!rwt.util.Objects.isEmpty(d)?this._isActive(d,c,a,b):!0);e||(e=this._isActive(this._keyBindings,c,a,b));return e},_isRelevant:function(a,b,c){var d;"keypress"===b?d=!this._isModifier(a)&&!this._ignoreNextKeypress:"keydown"===b&&(b=rwt.event.EventHandlerUtil,(d=b.isNonPrintableKeyCode(a)||b.isSpecialKeyCode(a))||!c.altKey&&!c.ctrlKey||(d=this._isAlphaNumeric(a)),d&&(this._ignoreNextKeypress=!0));c.ctrlKey&&9===a&&(d=!1);return d},_onRequestReceived:function(){this._keyEventRequestRunning&&(this._keyEventRequestRunning=!1,this._checkBufferedEvents())},_checkBufferedEvents:function(){for(;0<this._bufferedEvents.length&&!this._keyEventRequestRunning;){var a=this._bufferedEvents.shift();this._sendKeyEvent.apply(this,a)}},_sendKeyEvent:function(a,b,c,d){this._keyEventRequestRunning?this._bufferedEvents.push([a,b,c,d]):null!=a&&a.isDisposed()||(this._attachKeyEvent(a,b,c,d),this._keyEventRequestRunning=!0,this._sendRequestAsync())},_sendRequestAsync:function(){window.setTimeout(function(){rwt.remote.Connection.getInstance().sendImmediate(!0)},0)},_attachKeyEvent:function(a,b,c,d){var e=rwt.remote.Connection.getInstance(),e=null===a?e.getRemoteObject(rwt.widgets.Display.getCurrent()):e.getRemoteObject(a),f=this._getCharCode(b,c,d),f={keyCode:b,charCode:f};rwt.remote.EventUtil.addModifierToProperties(f,d);this._shouldSendTraverse(b,c,d,a)&&e.notify("Traverse",f,!0);this._shouldSendKeyDown(b,c,d,a)&&e.notify("KeyDown",f,!0)},_shouldCancel:function(a,b,c,d){var e=this._isActive(this._cancelKeys,c,a,b);e||(d=d?d.getUserData("cancelKeys"):null)&&!rwt.util.Objects.isEmpty(d)&&(e=this._isActive(d,c,a,b));return e},_getTargetControl:function(){var a=rwt.event.EventHandler.getCaptureWidget();a||(a=rwt.event.EventHandler.getFocusRoot(),a=null===a?null:a.getActiveChild());for(var b=rwt.remote.WidgetManager.getInstance();null!==a&&!b.isControl(a);)a=a.getParent?a.getParent():null;return a},_isActive:function(a,b,c,d){var e;e=this._getKeyBindingIdentifier(b,"keydown",c,d);e=!0===a[e];e||(e=this._getKeyBindingIdentifier(b,"keypress",c,d),e=!0===a[e]);return e},_getKeyBindingIdentifier:function(a,b,c,d){var e=[];"keydown"===b&&!isNaN(c)&&0<c?(a.altKey&&e.push("ALT"),a.ctrlKey&&e.push("CTRL"),a.shiftKey&&e.push("SHIFT"),e.push("#"+c.toString())):"keypress"===b&&!isNaN(d)&&0<d&&e.push(String.fromCharCode(d));return e.join("+")},_getCharCode:function(a,b,c){0===b&&this._isAlphaNumeric(a)&&(b=c.shiftKey&&!this._isNumeric(a)?a:String.fromCharCode(a).toLowerCase().charCodeAt(0));return b},_isModifier:function(a){return 16<=a&&20>=a&&19!==a},_isAlphaNumeric:function(a){return 65<=a&&90>=a||this._isNumeric(a)},_isNumeric:function(a){return 48<=a&&57>=a},_hasKeyListener:function(a){return null!==a&&!0===a.getUserData("keyListener")},_hasTraverseListener:function(a){return null!==a&&!0===a.getUserData("traverseListener")},_isTraverseKey:function(a){var b=!1;if(27===a||13===a||9===a)b=!0;return b}}});rwt.remote.KeyEventSupport.getInstance();namespace("rwt.client");rwt.client.JavaScriptExecutor=function(){this.execute=function(a){eval(a)}};rwt.client.JavaScriptExecutor.getInstance=function(){return rwt.runtime.Singletons.get(rwt.client.JavaScriptExecutor)};rwt.remote.HandlerRegistry.add("rwt.client.ConnectionMessages",{factory:function(){return rwt.remote.Connection.getInstance()},service:!0,properties:["waitHintTimeout"],propertyHandler:{waitHintTimeout:function(a,b){a.getWaitHintTimer().setInterval(b)}}});namespace("rwt.client");rwt.client.ClientMessages=function(){this._messages={ServerError:"Server Error",ServerErrorDescription:"The application terminated unexpectedly.",ConnectionError:"Network Error",ConnectionErrorDescription:"The server seems to be temporarily unavailable.",SessionTimeout:"Session Timeout",SessionTimeoutDescription:"The server session timed out.",ClientError:"Client Error",ClientErrorDescription:"The application terminated unexpectedly.",Retry:"Retry",Restart:"Restart",Details:"Details"}};rwt.client.ClientMessages.getInstance=function(){return rwt.runtime.Singletons.get(rwt.client.ClientMessages)};rwt.client.ClientMessages.prototype={setMessages:function(a){for(var b in a)this._messages[b]=a[b]},getMessage:function(a){return this._messages[a]?this._messages[a]:""}};rwt.remote.HandlerRegistry.add("rwt.client.ClientMessages",{factory:function(){return rwt.client.ClientMessages.getInstance()},service:!0,properties:["messages"]});rwt.remote.HandlerRegistry.add("rwt.client.JavaScriptExecutor",{factory:function(){return rwt.client.JavaScriptExecutor.getInstance()},service:!0,destructor:rwt.util.Functions.returnTrue,methods:["execute"],methodHandler:{execute:function(a,b){a.execute(b.content)}}});namespace("rwt.client");rwt.client.UrlLauncher=function(){this._window=window;var a=document.createElement("iframe");a.style.visibility="hidden";a.style.position="absolute";a.style.left="-1000px";a.style.top="-1000px";a.src=rwt.remote.Connection.RESOURCE_PATH+"static/html/blank.html";document.body.appendChild(a);this._iframe=a};rwt.client.UrlLauncher.getInstance=function(){return rwt.runtime.Singletons.get(rwt.client.UrlLauncher)};rwt.client.UrlLauncher.prototype={openURL:function(a){var b=this.getProtocol(a);try{-1!==["http:","https:","ftp:","ftps:"].indexOf(b)?this._window.open(a,"_blank"):this._iframe.src=a}catch(c){}},getProtocol:function(a){return(-1!==a.indexOf(":")?a.split(":")[0]+":":location.protocol).toLowerCase()}};rwt.remote.HandlerRegistry.add("rwt.client.UrlLauncher",{factory:function(){return rwt.client.UrlLauncher.getInstance()},service:!0,methods:["openURL"],methodHandler:{openURL:function(a,b){a.openURL(b.url)}}});namespace("rwt.client");rwt.client.JavaScriptLoader={load:function(a){if(1!==a.files.length)throw Error("JavaScriptLoader does not support parallel script loading");rwt.remote.MessageProcessor.pauseExecution();this._loadFile(a.files[0])},_loadFile:function(a){var b=document.createElement("script");b.type="text/javascript";b.src=a;this._attachLoadedCallback(b);document.getElementsByTagName("head")[0].appendChild(b)},_attachLoadedCallback:function(a){a.onload=function(){rwt.remote.MessageProcessor.continueExecution();a.onload=null}}};rwt.remote.HandlerRegistry.add("rwt.client.JavaScriptLoader",{factory:function(){return rwt.client.JavaScriptLoader},service:!0,methods:["load"]});namespace("rwt.client");(function(){function a(a,d){rwt.remote.MessageProcessor.pauseExecution();var c=b(a,d);c.onload=function(){rwt.remote.MessageProcessor.continueExecution();c.onload=null};document.getElementsByTagName("head")[0].appendChild(c)}function b(a,b){var c;"css"===b?(c=document.createElement("link"),c.rel="stylesheet",c.type="text/css",c.href=a):(c=document.createElement("script"),c.type="text/javascript",c.src=a);return c}rwt.client.ClientFileLoader={load:function(b){a(b.file,b.type)}}})();rwt.remote.HandlerRegistry.add("rwt.client.ClientFileLoader",{factory:function(){return rwt.client.ClientFileLoader},service:!0,methods:["load"]});rwt.qx.Class.define("rwt.runtime.System",{extend:rwt.qx.Target,statics:{getInstance:function(){return rwt.runtime.Singletons.get(rwt.runtime.System)}},construct:function(){this.isSupported()&&(this.base(arguments),this._startupTime=(new Date).getTime(),this._onloadWrapped=rwt.util.Functions.bind(this._onload,this),this._onbeforeunloadWrapped=rwt.util.Functions.bind(this._onbeforeunload,this),this._onunloadWrapped=rwt.util.Functions.bind(this._onunload,this),window.addEventListener("load",this._onloadWrapped,!1),window.addEventListener("beforeunload",this._onbeforeunloadWrapped,!1),window.addEventListener("unload",this._onunloadWrapped,!1),rwt.event.EventHandler.setAllowContextMenu(rwt.widgets.Menu.getAllowContextMenu))},members:{_autoDispose:!1,_onloadDone:!1,_uiReady:!1,setUiReady:function(a){(this._uiReady=a)&&this.createDispatchEvent("uiready")},getUiReady:function(){return this._uiReady},isSupported:function(){return this._isBrowserSupported()&&this._isModeSupported()&&this._isXHRSupported()},getStartupTime:function(){return this._startupTime},getStartupParameters:function(){var a=window.location.search;return""!==a?this._parseQueryString(a.substr(1)):null},_parseQueryString:function(a){var b={};a.split("\x26").forEach(function(a){var c=a.split("\x3d");a=decodeURIComponent(c[0]);c=1===c.length?"":decodeURIComponent(c[1]);b[a]?b[a].push(c):b[a]=[c]});return b},_onload:function(){try{this._onloadDone||(this._onloadDone=!0,rwt.widgets.base.ClientDocument.getInstance(),rwt.runtime.MobileWebkitSupport.init(),rwt.client.Timer.once(this._preload,this,0))}catch(a){rwt.runtime.ErrorHandler.processJavaScriptError(a)}},_preload:function(){var a=rwt.html.ImageManager.getInstance().getVisibleImages();this.__preloader=new rwt.html.ImagePreloaderSystem(a,this._preloaderDone,this);this.__preloader.start()},_preloaderDone:function(){this.__preloader.dispose();this.__preloader=null;rwt.event.EventHandler.init();rwt.event.EventHandler.attachEvents();this.setUiReady(!0);rwt.widgets.base.Widget.flushGlobalQueues();rwt.client.Timer.once(this._postload,this,100)},_postload:function(){var a=rwt.html.ImageManager.getInstance().getHiddenImages();this.__postloader=new rwt.html.ImagePreloaderSystem(a,this._postloaderDone,this);this.__postloader.start()},_postloaderDone:function(){this.__postloader.dispose();this.__postloader=null},_onbeforeunload:function(a){try{var b=new rwt.event.DomEvent("beforeunload",a,window,this);this.dispatchEvent(b,!1);var c=b.getUserData("returnValue");b.dispose();return null!==c?c:void 0}catch(d){rwt.runtime.ErrorHandler.processJavaScriptError(d)}},_onunload:function(){try{this.createDispatchEvent("unload"),rwt.event.EventHandler.detachEvents(),rwt.event.EventHandler.cleanUp(),rwt.qx.Object.dispose(!0)}catch(a){rwt.runtime.ErrorHandler.processJavaScriptError(a)}},_isBrowserSupported:function(){var a=!0,b=rwt.client.Client.getEngine(),c=rwt.client.Client.getMajor();"trident"===b&&9>c&&(a=!1);return a},_isModeSupported:function(){var a=!0;"trident"===rwt.client.Client.getEngine()&&9>document.documentMode&&(a=!1);return a},_isXHRSupported:function(){return"undefined"!==typeof window.XMLHttpRequest}},destruct:function(){window.removeEventListener("load",this._onloadWrapped,!1);window.removeEventListener("beforeunload",this._onbeforeunloadWrapped,!1);window.removeEventListener("unload",this._onunloadWrapped,!1)},defer:function(a){a.getInstance()}});(function(){var a=rwt.event.EventHandlerUtil,b=rwt.widgets.util.WidgetUtil;rwt.qx.Class.define("rwt.widgets.util.MnemonicHandler",{extend:rwt.qx.Object,statics:{getInstance:function(){return rwt.runtime.Singletons.get(rwt.widgets.util.MnemonicHandler)}},construct:function(){this.base(arguments);this._map={};this._activeMenu=this._active=this._activator=null;this._allowMenuActivate=!1},members:{add:function(a,d){var c=b.getShell(a);null!=c&&(this._registerFocusRoot(c),c=this._map[c.toHashCode()],a instanceof rwt.widgets.MenuItem?c.menu[a.toHashCode()]=[a,d]:c.controls[a.toHashCode()]=[a,d])},remove:function(a){var b=a.toHashCode();if(a instanceof rwt.widgets.MenuItem)for(var c in this._map){if(this._map[c].menu[a.toHashCode()]){delete this._map[c].menu[b];break}}else for(c in this._map)if(this._map[c].controls[a.toHashCode()]){delete this._map[c].controls[b];break}},setActivator:function(a){a?(this._activator={},this._activator.ctrlKey=-1!==a.indexOf("CTRL"),this._activator.altKey=-1!==a.indexOf("ALT"),this._activator.shiftKey=-1!==a.indexOf("SHIFT")):this._activator=null},isActive:function(){return null!=this._active},handleKeyEvent:function(a,b,e,f){var c=!1;this._checkActiveMenu();if("keydown"!==a||rwt.event.EventHandlerUtil.isFirstKeyDown(b))this._isActivation(a,b,e,f)?this.activate():this._isDeactivation(a,b,e,f)?this.deactivate(this._allowMenuActivate||this._activeMenu):this._isTrigger(a,b,e,f)?(c=this.trigger(b),this._allowMenuActivate=!1):this.isActive()&&!this._isActivatorCombo(f)&&(this._allowMenuActivate=!1);return c},activate:function(){if(this._noMenuOpen()){var a=rwt.widgets.base.Window.getDefaultWindowManager().getActiveWindow();null==a&&(a=rwt.widgets.base.ClientDocument.getInstance());this._active=a.toHashCode();this._allowMenuActivate=!0;this._fire({type:"show"})}},deactivate:function(a){this._activeMenu&&a&&(this._activeMenu.setActive(!1),this._activeMenu=null);this._active&&(this._fire({type:"hide"}),a&&this._activateMenuBar(),this._active=null)},trigger:function(a){a={type:"trigger",charCode:a,success:!1};this._fire(a,!0);return a.success},_registerFocusRoot:function(a){this._map[a.toHashCode()]||(this._map[a.toHashCode()]={menu:{},controls:{}},a.addEventListener("dispose",function(){this.deactivate();delete this._map[a.toHashCode()]},this),a.addEventListener("changeActive",this._onRootChangeActive,this))},_onRootChangeActive:function(a){!1===a.getValue()&&this.deactivate()},_fire:function(a,b){this._map[this._active]&&(this._doFire(a,b,this._map[this._active].controls),a.success||this._doFire(a,b,this._map[this._active].menu))},_doFire:function(a,b,e){for(var c in e){var d=e[c];if((!b||d[0].isSeeable())&&d[0].getEnabled())try{if(d[1].call(d[0],a),a.success)break}catch(h){throw a="Could not handle mnemonic "+a.type+". ",d[0].isDisposed()&&(a+=d[0].classname+" is disposed. "),a+=h.message,Error(a);}}},_activateMenuBar:function(){if(this._map[this._active]){var a=this._map[this._active].menu,b;for(b in a){a=a[b][0].getParentMenu();a.setMnemonics(!0);a.setActive(!0);this._activeMenu=a;break}}},_checkActiveMenu:function(){this._activeMenu&&!this._activeMenu.getActive()&&(this._activeMenu=null)},_isActivation:function(b,d,e,f){return this._activator&&null==this._active&&null==this._activeMenu&&"keydown"===b&&a.isModifier(d)&&this._isActivatorCombo(f)},_isDeactivation:function(a,b,e,f){return this._isGlobalDeactivation(a,b,e,f)||this._isMenuDeactivation(a,b,e,f)},_isMenuDeactivation:function(b,d,e,f){return null!=this._activator&&null!=this._activeMenu&&a.isModifier(d)&&this._isActivatorCombo(f)},_isGlobalDeactivation:function(a,b,e,f){return null!=this._activator&&null!=this._active&&"keypress"!=a&&!this._isActivatorCombo(f)},_isActivatorCombo:function(a){return this._activator.ctrlKey===a.ctrlKey&&this._activator.altKey===a.altKey&&this._activator.shiftKey===a.shiftKey},_isTrigger:function(a,b){var c=!isNaN(b)&&rwt.event.EventHandlerUtil.isAlphaNumericKeyCode(b);return null!=this._active&&"keydown"===a&&c},_noMenuOpen:function(){return rwt.util.Objects.isEmpty(rwt.widgets.util.MenuManager.getInstance().getAll())}}})})();(function(){rap={registerTypeHandler:function(a,b){b.isPublic=!0;rwt.remote.HandlerRegistry.add(a,b)},getObject:function(a){a=rwt.remote.ObjectRegistry.getEntry(a);var b;a&&a.handler.isPublic?b=a.object:a&&(b=rwt.scripting.WidgetProxyFactory.getWidgetProxy(a.object));return b},getRemoteObject:function(a){return rwt.remote.Connection.getInstance().getRemoteObject(a)},getClient:function(){return rwt.client.Client},on:function(a,b){if(this._.events[a])-1===this._.events[a].indexOf(b)&&this._.events[a].push(b);else throw Error("Unknown type "+a);},off:function(a,b){if(this._.events[a]){var c=this._.events[a].indexOf(b);-1!==c&&rwt.util.Arrays.removeAt(this._.events[a],c)}},_:{events:{send:[],render:[],receive:[],process:[]},notify:function(a){for(var b=this.events[a].concat(),c=0;c<b.length;c++)b[c].apply(window,Array.prototype.slice.call(arguments,1))}}}})();SWT={KeyDown:"KeyDown",KeyUp:"KeyUp",MouseDown:"MouseDown",MouseUp:"MouseUp",MouseMove:"MouseMove",MouseEnter:"MouseEnter",MouseExit:"MouseExit",MouseDoubleClick:"MouseDoubleClick",Paint:"Paint",Resize:"Resize",Selection:"Selection",DefaultSelection:"DefaultSelection",FocusIn:"FocusIn",FocusOut:"FocusOut",Show:"Show",Hide:"Hide",Dispose:"Dispose",Modify:"Modify",Verify:"Verify",MouseWheel:"MouseWheel",ARROW_UP:38,ARROW_DOWN:40,ARROW_LEFT:37,ARROW_RIGHT:39,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,INSERT:45,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,KEYPAD_MULTIPLY:106,KEYPAD_ADD:107,KEYPAD_SUBTRACT:109,KEYPAD_DECIMAL:110,KEYPAD_DIVIDE:111,KEYPAD_0:96,KEYPAD_1:97,KEYPAD_2:98,KEYPAD_3:99,KEYPAD_4:100,KEYPAD_5:101,KEYPAD_6:102,KEYPAD_7:103,KEYPAD_8:104,KEYPAD_9:105,KEYPAD_EQUAL:61,KEYPAD_CR:80,CAPS_LOCK:20,NUM_LOCK:144,SCROLL_LOCK:145,PAUSE:19,BREAK:19,PRINT_SCREEN:44,ALT:65536,SHIFT:131072,CTRL:262144,CONTROL:262144,COMMAND:4194304,DEL:46,ESC:27,BS:8,CR:13,TAB:9,CURSOR_ARROW:"default",CURSOR_WAIT:"wait",CURSOR_CROSS:"crosshair",CURSOR_APPSTARTING:"progress",CURSOR_HELP:"help",CURSOR_SIZEALL:"move",CURSOR_SIZENESW:"ne-resize",CURSOR_SIZENS:"row-resize",CURSOR_SIZENWSE:"nw-resize",CURSOR_SIZEWE:"col-resize",CURSOR_SIZEN:"n-resize",CURSOR_SIZES:"s-resize",CURSOR_SIZEE:"e-resize",CURSOR_SIZEW:"w-resize",CURSOR_SIZENE:"ne-resize",CURSOR_SIZESE:"se-resize",CURSOR_SIZESW:"sw-resize",CURSOR_SIZENW:"nw-resize",CURSOR_UPARROW:"rwt-resources/resource/widget/rap/cursors/up_arrow.cur",CURSOR_IBEAM:"text",CURSOR_NO:"not-allowed",CURSOR_HAND:"pointer"};(function(){rwt.define("rwt.scripting",{});rwt.scripting.EventBinding={addListener:function(a,b,c){this._checkEventType(b);var d=this._getWrapperList(a,b,c),e=this._getNativeEventType(a,b),f=this._getNativeEventSource(a,b);a=this._wrapListener(a,b,c);f.addEventListener(e,a,window);d.push(a)},removeListener:function(a,b,c){var d=this._getWrapperList(a,b,c);c=this._getNativeEventType(a,b);a=this._getNativeEventSource(a,b);b=d.pop();a.removeEventListener(c,b,window)},_wrapListener:function(a,b,c){return function(d){try{var e=new rwt.scripting.EventProxy(SWT[b],a,d),f=rwt.scripting.EventProxy.wrapAsProto(e);c(f);rwt.scripting.EventProxy.postProcessEvent(e,f,d);rwt.scripting.EventProxy.disposeEventProxy(e)}catch(g){throw Error("Error in scripting event type "+b+": "+(g.message?g.message:g));}}},_getWrapperList:function(a,b,c){var d=a.getUserData("rwt.scripting.EventBinding.WrapperRegistry");d||(d={},a.setUserData("rwt.scripting.EventBinding.WrapperRegistry",d));a=b+":"+rwt.qx.Object.toHashCode(c);null==d[a]&&(d[a]=[]);return d[a]},_getNativeEventSource:function(a,b){var c=a;switch(a.classname+":"+b){case "rwt.widgets.List:Selection":c=a.getManager();break;case "rwt.widgets.Spinner:Modify":c=a._textfield;break;case "rwt.widgets.Combo:Modify":case "rwt.widgets.Combo:Verify":c=a._field}return c},_getNativeEventType:function(a,b){var c=this._eventTypeMapping;return c[a.classname]&&c[a.classname][b]?c[a.classname][b]:c["*"][b]},_checkEventType:function(a){if("string"!==typeof SWT[a])throw Error("Unkown event type "+a);},_eventTypeMapping:{"*":{KeyDown:"keypress",KeyUp:"keyup",MouseDown:"mousedown",MouseUp:"mouseup",MouseMove:"mousemove",MouseEnter:"mouseover",MouseExit:"mouseout",MouseWheel:"mousewheel",MouseDoubleClick:"dblclick",Paint:"paint",FocusIn:"focus",FocusOut:"blur",Show:"appear",Hide:"disappear",Dispose:"beforeDispose"},"rwt.widgets.Scale":{Selection:"selectionChanged"},"rwt.widgets.Slider":{Selection:"selectionChanged"},"rwt.widgets.Composite":{Resize:"clientAreaChanged"},"rwt.widgets.Button":{Selection:"execute"},"rwt.widgets.Spinner":{Selection:"change",Modify:"changeValue"},"rwt.widgets.Text":{Verify:"input",Modify:"changeValue"},"rwt.widgets.Combo":{Verify:"input",Modify:"changeValue"}}}})();(function(){function a(a,b){a.stateMask|=b.isShiftPressed()?SWT.SHIFT:0;a.stateMask|=b.isCtrlPressed()?SWT.CTRL:0;a.stateMask|=b.isAltPressed()?SWT.ALT:0;a.stateMask|=b.isMetaPressed()?SWT.COMMAND:0}rwt.define("rwt.scripting",{});rwt.scripting.EventProxy=function(b,d,e){this.widget=rwt.scripting.WidgetProxyFactory.getWidgetProxy(d);this.type=b;switch(b){case SWT.KeyDown:case SWT.KeyUp:b=e.getCharCode();if(0!==b)this.character=String.fromCharCode(b),this.keyCode=this.character.toLowerCase().charCodeAt(0);else switch(b=rwt.remote.KeyEventSupport.getInstance()._currentKeyCode,b){case 16:this.keyCode=SWT.SHIFT;break;case 17:this.keyCode=SWT.CTRL;break;case 18:this.keyCode=SWT.ALT;break;case 224:this.keyCode=SWT.COMMAND;break;default:this.keyCode=b}a(this,e);break;case SWT.MouseDown:case SWT.MouseWheel:case SWT.MouseUp:case SWT.MouseMove:case SWT.MouseEnter:case SWT.MouseExit:case SWT.MouseDoubleClick:b=e.getTarget()._getTargetNode();b=rwt.html.Location.get(b,"scroll");this.x=e.getPageX()-b.left;this.y=e.getPageY()-b.top;e.isLeftButtonPressed()?this.button=1:e.isRightButtonPressed()&&(this.button=3);e.isMiddleButtonPressed()&&(this.button=2);a(this,e);break;case SWT.Verify:var c=e.getTarget();if(c instanceof rwt.widgets.base.BasicText){b=rwt.remote.KeyEventSupport.getInstance()._currentKeyCode;d=c.getComputedValue();var g=c.getValue(),c=c.getSelection(),h,k,l;d.length>=g.length||c[0]!==c[1]?(h=c[0],k=c[1],l=d.slice(h,d.length-(g.length-c[1]))):(l="",c[0]===c[1]&&8===b&&g.length-1===d.length?(h=c[0]-1,k=c[0]):(h=c[0],k=h+g.length-d.length));d=[l,h,k];1===d[0].length&&d[1]===d[2]&&d[0]===e.getData()&&(this.keyCode=b,this.character=d[0]);this.text=d[0];this.start=d[1];this.end=d[2]}break;case SWT.Paint:this.gc=rwt.widgets.util.WidgetUtil.getGC(d).getNativeContext()}};rwt.scripting.EventProxy.prototype={widget:null,doit:!0,character:"\x00",keyCode:0,type:0,stateMask:0,button:0,x:0,y:0,start:0,end:0,text:"",gc:null};rwt.scripting.EventProxy.disposeEventProxy=function(a){a.widget=null};var b=function(){};rwt.scripting.EventProxy.wrapAsProto=function(a){b.prototype=a;a=new b;b.prototype=null;return a};rwt.scripting.EventProxy.postProcessEvent=function(a,b,e){switch(a.type){case SWT.Verify:var c=e.getTarget();if(!1!==b.doit){if(a.text!==b.text&&""!==a.text){e.preventDefault();var d=c.getValue();e=d.slice(0,a.start);a=d.slice(a.end,d.length);d=e.length+b.text.length;c.setValue(e+b.text+a);c.setSelection([d,d])}}else e.preventDefault(),c._renderValue(),c._renderSelection();break;case SWT.MouseWheel:!1===b.doit&&e.preventDefault();break;case SWT.KeyDown:case SWT.KeyUp:!1===b.doit&&e.preventDefault()}}})();rwt.define("rwt.scripting",{});(function(){rwt.scripting.FunctionFactory={createFunction:function(a,b){var c,d=[a,"\n\n","typeof ",b,' \x3d\x3d\x3d "undefined" ? null : ',b,";"];try{c=this._secureEval.apply(window,[d.join("")])}catch(e){throw Error("Could not parse Script for "+b+":"+(e.message?e.message:e));}if("function"!==typeof c)throw Error("Script does not define a function "+b);return c},_secureEval:function(a){return eval(a)}}})();(function(){rwt.define("rwt.scripting",{});rwt.scripting.CompositeProxy=function(a){var b=null;a.isCreated()||(b=[],a.addEventListener("create",function(){for(var c=0;c<b.length;c++)a._getTargetNode().appendChild(b[c]);a.removeEventListener("create",arguments.callee);b=null}));this.append=function(c){b?b.push(c):a._getTargetNode().appendChild(c)};this.getClientArea=function(){return a.getClientArea()}}})();(function(){rwt.define("rwt.scripting",{});rwt.scripting.Synchronizer=function(a){a.addEventListener("changeBackgroundColor",this._onChangeBackgroundColor,this);a.addEventListener("changeTextColor",this._onChangeTextColor,this);a.addEventListener("changeVisibility",this._onChangeVisibility,this);a.addEventListener("changeEnabled",this._onChangeEnabled,this);a.addEventListener("changeToolTipText",this._onChangeToolTipText,this);a.addEventListener("changeCursor",this._onChangeCursor,this);switch(a.classname){case "rwt.widgets.Button":a.addEventListener("changeText",this._onChangeButtonText,this);break;case "rwt.widgets.ProgressBar":a.addEventListener("selectionChanged",this._onChangeProgressBarSelection,this);break;case "rwt.widgets.Label":a.addEventListener("changeText",this._onChangeLabelText,this)}};rwt.scripting.Synchronizer._ENABLE_KEY="rwt.scripting.Synchronizer.ENABLED";rwt.scripting.Synchronizer.enable=function(a){a.setUserData(this._ENABLE_KEY,!0)};rwt.scripting.Synchronizer.disable=function(a){a.setUserData(this._ENABLE_KEY,!1)};rwt.scripting.Synchronizer.prototype={_onChangeBackgroundColor:function(a){a=a.getTarget();this._sync(a,"background",this._convertColor(a.__user$backgroundColor))},_onChangeTextColor:function(a){a=a.getTarget();this._sync(a,"foreground",this._convertColor(a.__user$textColor))},_onChangeVisibility:function(a){a=a.getTarget();this._sync(a,"visibility",a.getVisibility())},_onChangeEnabled:function(a){a=a.getTarget();this._sync(a,"enabled",a.getEnabled())},_onChangeCursor:function(a){a=a.getTarget();this._sync(a,"cursor",a.__user$cursor||null)},_onChangeToolTipText:function(a){a=a.getTarget();this._sync(a,"toolTip",a.getToolTipText())},_onChangeButtonText:function(a){this._sync(a,"text",a.getCellContent(2))},_onChangeLabelText:function(a){this._sync(a,"text",a.getCellContent(1))},_onChangeProgressBarSelection:function(a){this._sync(a,"selection",a._selection)},_sync:function(a,b,c){a.getUserData(rwt.scripting.Synchronizer._ENABLE_KEY)&&rap.getRemoteObject(a).set(b,c)},_convertColor:function(a){var b=null;null!=a&&(b=rwt.util.Colors.stringToRgb(a));return b}}})();(function(){function a(a,b,c){for(var d in c)b[d]=rwt.util.Functions.bind(c[d],a)}var b=rwt.remote.ObjectRegistry,c=rwt.scripting.Synchronizer,d=rwt.remote.HandlerUtil,e=rwt.widgets.util.WidgetUtil;rwt.define("rwt.scripting",{});rwt.scripting.WidgetProxyFactory={_wrapperMap:{},_ALIAS:{visibility:"setVisible",toolTip:"setToolTipText"},getWidgetProxy:function(a){var b=null;if(a instanceof Object){var c=rwt.qx.Object.toHashCode(a);null==this._wrapperMap[c]&&(b=a instanceof rwt.widgets.Composite?new rwt.scripting.CompositeProxy(a):{},this._wrapperMap[c]=b,this._initWrapper(a,b));b=this._wrapperMap[c]}return b},_initWrapper:function(a,b){e.isWidget(a)&&new c(a);this._attachSetter(b,a);this._attachMethods(b,a);this._attach$el(b,a);a instanceof rwt.qx.Object&&a.addEventListener("dispose",function(){rwt.scripting.WidgetProxyFactory._disposeWidgetProxy(a)})},_disposeWidgetProxy:function(a){var b=rwt.qx.Object.toHashCode(a),c=this._wrapperMap[b];c&&(a=a.getUserData(d.SERVER_DATA),rwt.scripting.WidgetProxyFactory._disposeObject(c),rwt.scripting.WidgetProxyFactory._disposeObject(a),delete this._wrapperMap[b])},_disposeObject:function(a){for(var b in a)a.hasOwnProperty(b)&&(a[b]=null)},_attachSetter:function(a,c){var d=b.getId(c),e=d?b.getEntry(d).handler:null;if(e)for(var e=e.properties||[],f=0;f<e.length;f++){var g=e[f],n=this._ALIAS[g]||"set"+rwt.util.Strings.toFirstUp(g);a[n]=this._createSetter(d,g,c)}},_attachMethods:function(c,g){var f=b.getId(g),f=f?b.getEntry(f).handler:null;e.isWidget(g)&&a(g,c,d._widgetScriptingMethods);f&&a(g,c,f.scriptingMethods||{})},_attach$el:function(a,b){e.isWidget(b)&&(a.$el=new rwt.util.RWTQuery(b,!0),"rwt.widgets.Text"===b.classname&&(a.$input=new rwt.util.RWTQuery(b.getInputElement(),!0)))},_createSetter:function(a,b,d){var e=this._setProperty;return function(f){c.enable(d);e(a,b,f);c.disable(d)}},_setProperty:function(a,b,c){var d={};d[b]=c;rwt.remote.MessageProcessor.processOperation({target:a,action:"set",properties:d})}}})();rwt.remote.HandlerRegistry.add("rwt.scripting.Function",{factory:function(a){var b=a.scriptCode;b||(b=rap.getObject(a.scriptId).getText());return rwt.scripting.FunctionFactory.createFunction(b,a.name)},isPublic:!0});namespace("rwt.widgets.util");(function(){rwt.widgets.util.Template=function(a){this._cells=a;this._cellRenderer=[];this._parseCells()};rwt.widgets.util.Template.prototype={_createContainer:function(a){if(!a.element||"string"!==typeof a.element.nodeName)throw Error("Not a valid target for TemplateContainer:"+a.element);if("number"!==typeof a.zIndexOffset)throw Error("Not a valid z-index:"+a.zIndexOffset);return{element:a.element,template:this,zIndexOffset:a.zIndexOffset,cellElements:[],cellCache:[]}},_getCellElement:function(a,b){return a.cellElements[b]||null},_getCellByElement:function(a,b){return a.cellElements.indexOf(b)},_render:function(a){if(!a.container||a.container.template!==this)throw Error("No valid TemplateContainer: "+a.container);this._createElements(a);this._renderAllBounds(a);this._renderAllStyles(a);this._renderAllContent(a);this._updateCache(a)},getCellCount:function(){return this._cells.length},getCellType:function(a){return this._cells[a].type},getCellData:function(a){return this._cells[a]},isCellSelectable:function(a){return!0===this._cells[a].selectable},hasContent:function(a,b){switch(this._getContentType(b)){case "text":return this._hasText(a,b);case "image":return this._hasImage(a,b);default:return!1}},getCellName:function(a){return this._cells[a].name||null},getCellContent:function(a,b,c){if(!a)return null;switch(this._getContentType(b)){case "text":return this._getText(a,b,c||{});case "image":return this._getImage(a,b,c||{});default:return null}},_getText:function(a,b,c){return this._isBound(b)?a.getText(this._getIndex(b),c.escaped):this._cells[b].text||""},_getImage:function(a,b){return this._isBound(b)?a.getImage(this._getIndex(b)):this._cells[b].image||null},getCellForeground:function(a,b){var c=null;a&&(this._isBound(b)&&(c=a.getCellForeground(this._getIndex(b))),null!==c&&""!==c||!this._cells[b].foreground||(c=this._cells[b].foreground));return c},getCellBackground:function(a,b){var c=null;a&&(this._isBound(b)&&(c=a.getCellBackground(this._getIndex(b))),null!==c&&""!==c||!this._cells[b].background||(c=this._cells[b].background));return c},getCellFont:function(a,b){var c=null;a&&(this._isBound(b)&&(c=a.getCellFont(this._getIndex(b))),null!==c&&""!==c||!this._cells[b].font||(c=this._cells[b].font));return c},_createElements:function(a){for(var b=a.container.cellElements,c=a.item,d=0;d<this._cells.length;d++)if(!b[d]&&this._cellRenderer[d]&&(this.hasContent(c,d)||null!=this.getCellBackground(c,d))){var e=this._cellRenderer[d].createElement(this._cells[d]);e.style.zIndex=a.container.zIndexOffset+d;a.container.element.appendChild(e);a.container.cellElements[d]=e;a.container.cellCache[d]={initialized:!1}}},_renderAllContent:function(a){for(var b={markupEnabled:a.markupEnabled,enabled:a.enabled,seeable:a.seeable},c=a.container,d=0;d<this._cells.length;d++){var e=c.cellElements[d];if(e){var f=rwt.widgets.util.CellRendererRegistry.getInstance().getAll()[this._cells[d].type];b.width=c.cellCache[d].width;b.height=c.cellCache[d].height;f=f.renderContent;f(e,this.getCellContent(a.item,d,b),this._cells[d],b)}}},_renderAllStyles:function(a){for(var b=0;b<this._cells.length;b++){var c=a.container.cellElements[b];if(c){var d=a.container.cellCache[b],e=this.getCellBackground(a.item,b),f=this.getCellForeground(a.item,b),g=this.getCellFont(a.item,b);d.font!==g&&(d.font=g,this._renderFont(c,g));d.color!==f&&(d.color=f,this._renderForeground(c,f));d.backgroundColor!==e&&(d.backgroundColor=e,this._renderBackground(c,e))}}},_renderAllBounds:function(a){for(var b=a.container,c=b.lastBounds!==a.bounds.join(","),d=0;d<this._cells.length;d++){var e=a.container.cellElements[d];if(e&&(c||!b.cellCache[d].initialized)){var f=b.cellCache[d];e.style.left=this._getCellLeft(a,d)+"px";e.style.top=this._getCellTop(a,d)+"px";var g=this._getCellWidth(a,d),h=this._getCellHeight(a,d);e.style.width=g+"px";e.style.height=h+"px";f.width=g;f.height=h}}},_renderBackground:function(a,b){rwt.html.Style.setBackgroundColor(a,b)},_renderForeground:function(a,b){a.style.color=b||"inherit"},_renderFont:function(a,b){b?a.style.font=b:rwt.html.Font.resetElement(a)},_updateCache:function(a){for(var b=a.container,c=0;c<this._cells.length;c++)b.cellCache[c]&&(b.cellCache[c].initialized=!0);b.lastBounds=a.bounds.join(",");b.lastItem=a.item},_getContentType:function(a){return(a=this._cellRenderer[a])?a.contentType:null},_getCellWidth:function(a,b){return void 0!==this._cells[b].width?this._cells[b].width:a.bounds[2]-(this._getCellLeft(a,b)-a.bounds[0])-this._getCellRight(a,b)},_getCellHeight:function(a,b){return void 0!==this._cells[b].height?this._cells[b].height:a.bounds[3]-(this._getCellTop(a,b)-a.bounds[1])-this._getCellBottom(a,b)},_getCellLeft:function(a,b){var c=this._cells[b];if(void 0!==c.left)return a.bounds[0]+Math.round(c.left[0]*a.bounds[2]/100)+c.left[1];var d=this._getCellRight(a,b);return a.bounds[0]+a.bounds[2]-c.width-d},_getCellTop:function(a,b){var c=this._cells[b];if(void 0!==c.top)return a.bounds[1]+Math.round(c.top[0]*a.bounds[3]/100)+c.top[1];var d=this._getCellBottom(a,b);return a.bounds[1]+a.bounds[3]-c.height-d},_getCellRight:function(a,b){var c=this._cells[b];return void 0!==c.right?Math.round(c.right[0]*a.bounds[2]/100)+c.right[1]:0},_getCellBottom:function(a,b){var c=this._cells[b];return void 0!==c.bottom?Math.round(c.bottom[0]*a.bounds[3]/100)+c.bottom[1]:0},_hasText:function(a,b){return a?this._isBound(b)?a.hasText(this._getIndex(b)):null!=this._cells[b].text:!1},_hasImage:function(a,b){return a?this._isBound(b)?null!==a.getImage(this._getIndex(b)):null!=this._cells[b].image:!1},_isBound:function(a){return"number"===typeof this._cells[a].bindingIndex},_getIndex:function(a){return this._cells[a].bindingIndex},_parseCells:function(){for(var a=rwt.widgets.util.CellRendererRegistry.getInstance().getAll(),b=0;b<this._cells.length;b++)this._cellRenderer[b]=a[this._cells[b].type],this._cells[b].font&&(this._cells[b].font=rwt.html.Font.fromArray(this._cells[b].font).toCss()),this._cells[b].foreground&&(this._cells[b].foreground=rwt.util.Colors.rgbToRgbString(this._cells[b].foreground)),this._cells[b].background&&(this._cells[b].background=rwt.util.Colors.rgbToRgbString(this._cells[b].background))}}})();namespace("rwt.widgets.util");(function(){rwt.widgets.util.TemplateRenderer=function(a,b,c){this._template=a;this._container=a._createContainer({element:b,zIndexOffset:c})};rwt.widgets.util.TemplateRenderer.prototype={renderItem:function(a){this._template._render({container:this._container,item:a,bounds:this.targetBounds,enabled:this.targetIsEnabled,markupEnabled:this.markupEnabled,seeable:this.targetIsSeeable})},isCellSelectable:function(a){a=this._template._getCellByElement(this._container,a);return-1!==a&&this._template.isCellSelectable(a)},getCellName:function(a){a=this._template._getCellByElement(this._container,a);return-1===a?null:this._template.getCellName(a)}}})();(function(){function a(a){a?this._.popup.show():(this._.popup.setVisibility(!1),this._.popup.setDisplay(!1))}function b(){var a=this._.grid.getFont(),b=x.call(this).padding,a=Math.floor(1.3*a.getSize())+b[0]+b[2],h=Math.min(this._.visibleItemCount,this.getItemCount()),k=d.apply(this),h=e.apply(this,[h,a]),l=g.apply(this,[k,b]),m=2*x.call(this).border.getWidthLeft();this._.popup.setWidth(k+m);this._.popup.setHeight(h+m);c.call(this);this._.grid.setDimension(k,h);f.apply(this,[a,l,b]);N.apply(this,[k,l])}function c(){this._.popup.positionRelativeTo(this._.parent,0,this._.parent.getHeight());var a=rwt.html.Viewport.getHeight(),b=rwt.html.Viewport.getScrollTop();this._.popup.getTop()+this._.popup.getHeight()>a+b&&this._.popup.positionRelativeTo(this._.parent,0,-1*this._.popup.getHeight())}function d(){var a=2*x.call(this).border.getWidthLeft(),a=this._.parent.getWidth()-a;if(0<this._.minWidth){var b=x.call(this).padding,c=0;this._.visibleItemCount<this.getItemCount()&&(c=this._.grid.getVerticalBar().getWidth());a=Math.max(a,this._.minWidth+b[1]+b[3]+c)}if(this._.columns){for(c=b=0;c<this._.columns.length;c++)b+=this._.columns[c];b>a&&(a=b)}return a}function e(a,b){var c=a*b;this._.hScroll&&(c+=this._.grid.getHorizontalBar().getHeight());return c}function f(a,b,c){this._.grid.setItemHeight(a);if(null!=this._.columns)for(b=a=0;b<this._.columns.length;b++){var d=this._.columns[b];this._.grid.setItemMetrics(b,a,d,0,0,a+c[3],d-c[1]-c[3],0,0);a+=d}else this._.grid.setItemMetrics(0,0,b,0,0,c[3],b-c[1]-c[3],0,0)}function g(a,b){return Math.max(this._.hScroll?(this._.maxTextWidth||0)+b[1]+b[3]:0,a)}function h(){var a=this._.grid.getRootItem(),b=this._.items;a.setItemCount(0);a.setItemCount(b.length);for(var c=0;c<b.length;c++){var d=new rwt.widgets.GridItem(a,c,!1);d.applyObjectId(this._.id+"-listitem-"+c);this._.columns?d.setTexts(b[c].split(E)):d.setTexts([b[c]])}}function k(){this._.visibility&&(this._.parent.isSeeable()?this.show():a.call(this,!1))}function l(a){var b=a.getKeyIdentifier();!this._.visibility||"Enter"!==b&&"Escape"!==b||a.stopPropagation()}function m(a){var b=a.getKeyIdentifier();if(this._.visibility&&G[b]&&!a.isAltPressed())if(a.preventDefault(),this._.selectionWrapping)b=a.getKeyIdentifier(),"Down"===b&&-1===this.getSelectionIndex()&&0<this.getItemCount()?this.setSelectionIndex(0):"Up"===b&&0===this.getSelectionIndex()?this.setSelectionIndex(-1):"Down"===b&&this.getSelectionIndex()===this.getItemCount()-1?this.setSelectionIndex(-1):"Up"===b&&-1===this.getSelectionIndex()&&0<this.getItemCount()?this.setSelectionIndex(this.getItemCount()-1):this._.grid.dispatchEvent(a);else{var b=a.getKeyIdentifier(),c=-1===this.getSelectionIndex()&&0<this.getItemCount();"Down"!==b&&"PageDown"!==b||!c?"Up"!==b&&"PageUp"!==b||!c?this._.grid.dispatchEvent(a):this.setSelectionIndex(this.getItemCount()-1):this.setSelectionIndex(0)}}function n(a){a=a.getData();(a.top||a.left||a.width||a.height)&&this._.parent.isInDom()&&this._.visibility&&b.call(this)}function p(a){switch(a.getKeyIdentifier()){case "Enter":rwt.client.Timer.once(function(){w.call(this,"DefaultSelection")},this,0);break;case "Escape":this.hide()}}function r(a){"selection"===a.type&&w.call(this,"Selection")}function q(a){a.getOriginalTarget()instanceof rwt.widgets.base.GridRowContainer&&(this._.inMouseSelection=!0)}function u(a){this._.inMouseSelection&&a.getOriginalTarget()instanceof rwt.widgets.base.GridRowContainer&&(this._.inMouseSelection=!1,w.call(this,"DefaultSelection"))}function y(){var a=this._.grid.getSelection()[0];a&&this._.grid.scrollItemIntoView(a)}function J(){c.call(this)}function B(){this._.hideTimer.start()}function I(a){a=a._computeVisualTextWidth(0);a>(this._.maxTextWidth||0)&&(this._.maxTextWidth=a,b.call(this))}function w(a){var b={text:"",index:-1};if("Selection"===a||"DefaultSelection"===a){var c=this._.grid.getSelection();0<c.length&&(b.index=this.getSelectionIndex(),b.text=this._.items[b.index]);D.apply(this,[a,b]);rwt.remote.EventUtil.getSuspended()||"DefaultSelection"===a&&0<c.length&&this.hide()}else D.apply(this,[a,b])}function M(){this._.hideTimer.stop();var a;a=this._.parent;var b=a.getFocusRoot();a=b?a.getFocused()||a.contains&&a.contains(b.getFocusedChild()):!1;!a&&this._.visibility&&this.hide()}function N(a,b){var c=this._.visibleItemCount<this.getItemCount();this._.grid.setScrollBarsVisible(this._.hScroll&&a<b,c)}function D(a,b){for(var c=this._.events[a],d=rwt.util.Objects.mergeWith({widget:this,type:F[a]},b),e=0;e<c.length;e++)c[e](d)}function K(a,b,c){var d=new rwt.widgets.Grid({fullSelection:!0,appearance:c,markupEnabled:b});d.setLocation(0,0);d.setParent(a);d.setTreeColumn(-1);d.setScrollBarsVisible(!1,!1);d.getRenderConfig().focused=!0;d.addEventListener("changeFocused",function(){d.getRenderConfig().focused=!0});return d}function t(){this._.grid.setFont(this._.parent.getFont());this._.grid.setTextColor(this._.parent.getTextColor());this._.grid.setBackgroundColor(this._.parent.getBackgroundColor());this._.grid.setCursor(this._.parent.getCursor()||"default")}function C(a){if(a.isDisposed())throw Error("DropDown is disposed");}function L(a,b,c){var d=[];if("function"===typeof a.filter&&0===c)d=a.filter(b);else for(var e=0;e<a.length&&(!b(a[e],e)||(d.push(a[e]),0===c||d.length!==c));e++);return d}function x(){if(null==this._.styleMap){var a=rwt.theme.AppearanceManager.getInstance(),b={};this._.customVariant&&(b[this._.customVariant]=!0);this._.styleMap={border:a.styleFrom(this._.appearance+"-popup",b).border,padding:a.styleFrom(this._.appearance+"-cell",b).padding}}return this._.styleMap}function A(){var a=rwt.event.EventHandler.getMouseEventFilter();a&&a[0]===z&&a[1]===this&&rwt.event.EventHandler.setMouseEventFilter(null)}function z(a){if("mousedown"===a.getType())a=a.getTarget(),a===this._.popup||this._.popup.contains(a)||a===this._.parent||this._.parent.contains(a)||this.hide();else if("mousewheel"===a.getType())return a.preventDefault(),this._.grid.getRowContainer().dispatchEvent(a),!1;return!0}var E=String.fromCharCode(9),F={Selection:SWT.Selection,DefaultSelection:SWT.DefaultSelection,Show:SWT.Show,Hide:SWT.Hide},G={Enter:!0,Up:!0,Down:!0,PageUp:!0,PageDown:!0,Escape:!0};namespace("rwt.widgets");rwt.widgets.DropDown=function(a){this._={};this._.hScroll=!!a.hScroll;this._.hideTimer=new rwt.client.Timer(0);this._.hideTimer.addEventListener("interval",M,this);this._.parent=a.parent;this._.appearance=a.appearance;this._.customVariant=null;this._.styleMap=null;var b=this._,c=a.appearance,d=new rwt.widgets.base.Popup;d.addToDocument();d.setBackgroundColor("#ffffff");d.setDisplay(!1);d.setRestrictToPageOnOpen(!1);d.setAutoHide(!1);d.setAppearance(c+"-popup");b.popup=d;this._.grid=K(this._.popup,!!a.markupEnabled,a.appearance);t.call(this);this._.visibleItemCount=5;this._.items=[];this._.columns=null;this._.inMouseSelection=!1;this._.visibility=!1;this._.minWidth=0;this._.selectionWrapping=!0;var b=this._,c={},e;for(e in F)c[e]=[];b.events=c;this._.parent.addEventListener("appear",k,this);this._.parent.addEventListener("disappear",k,this);this._.parent.addEventListener("flush",n,this);this._.parent.addEventListener("keydown",l,this);this._.parent.addEventListener("keypress",m,this);this._.parent.addEventListener("changeFont",t,this);this._.parent.addEventListener("changeTextColor",t,this);this._.parent.addEventListener("changeBackgroundColor",t,this);this._.parent.addEventListener("changeCursor",t,this);this._.grid.addEventListener("create",y,this);this._.grid.addEventListener("selectionChanged",r,this);this._.grid.addEventListener("keypress",p,this);this._.grid.addEventListener("mousedown",q,this);this._.grid.addEventListener("mouseup",u,this);this._.hScroll&&!this._.columns&&this._.grid.getRowContainer().addEventListener("rowRendered",I,this);this._.popup.addEventListener("appear",J,this);this._.parentFocusRoot=a.parent.getFocusRoot();this._.parentFocusRoot.addEventListener("changeFocusedChild",B,this)};rwt.widgets.DropDown.prototype={classname:"rwt.widgets.DropDown",setItems:function(a){this.setSelectionIndex(-1);delete this._.maxTextWidth;this._.items=rwt.util.Arrays.copy(a);h.call(this);this._.grid.isSeeable()&&b.call(this);this._.visibility&&0<a.length?this.show():this._.visibility&&0===a.length&&this._.popup.hide()},getItems:function(){return rwt.util.Arrays.copy(this._.items)},getItemCount:function(){return this._.grid.getRootItem().getChildrenLength()},setVisibleItemCount:function(a){this._.visibleItemCount=a;this._.grid.isSeeable()&&b.call(this)},getVisibleItemCount:function(){return this._.visibleItemCount},setSelectionIndex:function(a){if(-1>a||a>=this.getItemCount()||isNaN(a))throw Error("Can not select item: Index "+a+" not valid");this.getSelectionIndex()!==a&&(this._.grid.deselectAll(),-1<a?(a=this._.grid.getRootItem().getChild(a),this._.grid.selectItem(a),this._.grid.setFocusItem(a),this._.grid.scrollItemIntoView(a)):(this._.grid.setFocusItem(null),this._.grid.setTopItemIndex(0)),this._.grid.dispatchSimpleEvent("selectionChanged",{type:"selection"}))},getSelectionIndex:function(){var a=this._.grid.getSelection(),b=-1;a[0]&&(b=this._.grid.getRootItem().indexOf(a[0]));return b},setVisible:function(a){a?this.show():this.hide()},getVisible:function(){return this._.visibility},setMinWidth:function(a){this._.minWidth=a;this._.grid.isSeeable()&&b.call(this)},setSelectionWrapping:function(a){this._.selectionWrapping=a},setCustomVariant:function(a){this._.customVariant=a;this._.styleMap=null;this._.popup.setCustomVariant(a);this._.grid.setCustomVariant(a)},setDirection:function(a){this._.grid.setDirection(a)},show:function(){C(this);this._.visibility||(this._.visibility=!0,rwt.event.EventHandler.setMouseEventFilter(z,this),w.call(this,"Show"));0<this._.items.length&&this._.parent.isSeeable()&&!this._.popup.isSeeable()&&(b.call(this),a.call(this,!0))},hide:function(){C(this);this._.visibility&&(this._.visibility=!1,A.call(this),w.call(this,"Hide"));a.call(this,!1)},setData:function(a,b){this._.widgetData||(this._.widgetData={});1===arguments.length&&a instanceof Object?rwt.util.Objects.mergeWith(this._.widgetData,a):this._.widgetData[a]=b},getData:function(a){if(!this._.widgetData)return null;a=this._.widgetData[a];return void 0===a?null:a},addListener:function(a,b){if(this._.events[a])-1===this._.events[a].indexOf(b)&&this._.events[a].push(b);else throw Error("Unkown type "+a);},removeListener:function(a,b){if(this._&&this._.events[a]){var c=this._.events[a].indexOf(b);rwt.util.Arrays.removeAt(this._.events[a],c)}},setColumns:function(a){this._.columns=a;this._.grid.setColumnCount(a.length);this._.grid.setColumnOrder=function(){};var c=this._.grid.getRenderConfig();c.cellOrder=Array(a.length);for(var d=0;d<a.length;d++)c.cellOrder[d]=d;h.call(this);this._.grid.isSeeable()&&b.call(this)},destroy:function(){if(!this.isDisposed()){var a=this._.parentFocusRoot;a&&!a.isDisposed()&&a.removeEventListener("changeFocusedChild",B,this);this._.grid.isDisposed()||this._.grid.getRootItem().setItemCount(0);this._.parent.isDisposed()||(this._.parent.removeEventListener("appear",k,this),this._.parent.removeEventListener("disappear",k,this),this._.parent.removeEventListener("flush",n,this),this._.parent.removeEventListener("keydown",l,this),this._.parent.removeEventListener("keypress",m,this),this._.parent.removeEventListener("changeFont",t,this),this._.parent.removeEventListener("changeTextColor",t,this),this._.parent.removeEventListener("changeBackgroundColor",t,this),this._.parent.removeEventListener("changeCursor",t,this));A.call(this);this._.popup.destroy();this._.hideTimer.dispose();if(this._.widgetData)for(var b in this._.widgetData)this._.widgetData[b]=null;for(b in this._)this._[b]=null;this._=null}},isDisposed:function(){return null===this._},toString:function(){return"DropDown"},applyObjectId:function(a){this._.id=a;this._.popup.applyObjectId(a)}};rwt.widgets.DropDown.searchItems=function(a,b,c){var d=[];c="number"===typeof c?c:0;return{items:L(a,function(a,c){return b.test(a)?(d.push(c),!0):!1},c),indicies:d,query:b,limit:c}};rwt.widgets.DropDown.createQuery=function(a,b,c){a=rwt.widgets.DropDown.escapeRegExp(a);return new RegExp((c?"":"^")+a,b?"":"i")};rwt.widgets.DropDown.escapeRegExp=function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$\x26")}})();namespace("rwt.widgets.util");rwt.widgets.util.DropDownSynchronizer=function(a){a.addListener("Show",this._onVisibleChanged);a.addListener("Hide",this._onVisibleChanged);a.addListener("Selection",this._onSelectionChanged);a.addListener("DefaultSelection",this._onSelectionChanged)};rwt.widgets.util.DropDownSynchronizer.prototype={_onVisibleChanged:function(a){rwt.remote.EventUtil.getSuspended()||(a=a.widget,rwt.remote.Connection.getInstance().getRemoteObject(a).set("visible",a.getVisible()))},_onSelectionChanged:function(a){if(!rwt.remote.EventUtil.getSuspended()){var b=a.widget,c=rwt.remote.Connection.getInstance().getRemoteObject(b);c.set("selectionIndex",b.getSelectionIndex());c.notify(a.type,{text:a.text,index:a.index})}}};(function(){rap.registerTypeHandler("rwt.widgets.DropDown",{factory:function(a){var b=rwt.remote.ObjectRegistry.getObject(a.parent);a=new rwt.widgets.DropDown({parent:b,markupEnabled:a.markupEnabled,appearance:"dropdown",hScroll:-1!==a.style.indexOf("H_SCROLL")});new rwt.widgets.util.DropDownSynchronizer(a);return a},properties:"items visible visibleItemCount columns data selectionIndex".split(" "),events:["Selection","DefaultSelection"],methods:["addListener","removeListener"],methodHandler:{addListener:function(a,b){rwt.remote.HandlerUtil.callWithTarget(b.listenerId,function(c){a.addListener(b.eventType,c)})},removeListener:function(a,b){rwt.remote.HandlerUtil.callWithTarget(b.listenerId,function(c){a.removeListener(b.eventType,c)})}},destructor:"destroy"})})();rwt.theme.AppearanceManager.getInstance().setCurrentTheme({name:"rwtAppearance",appearances:{empty:{},widget:{},image:{},"cursor-dnd-move":{style:function(){return{source:rwt.remote.Connection.RESOURCE_PATH+"widget/rap/cursors/move.gif"}}},"cursor-dnd-copy":{style:function(){return{source:rwt.remote.Connection.RESOURCE_PATH+"widget/rap/cursors/copy.gif"}}},"cursor-dnd-alias":{style:function(){return{source:rwt.remote.Connection.RESOURCE_PATH+"widget/rap/cursors/alias.gif"}}},"cursor-dnd-nodrop":{style:function(){return{source:rwt.remote.Connection.RESOURCE_PATH+"widget/rap/cursors/nodrop.gif"}}},"client-document":{style:function(a){a=new rwt.theme.ThemeValues(a);return{font:a.getCssFont("Display","font"),textColor:"black",backgroundColor:"white",backgroundImage:a.getCssImage("Display","background-image")}}},"client-document-blocker":{style:function(a){a=new rwt.theme.ThemeValues(a);a={cursor:"default",animation:a.getCssAnimation("Shell-DisplayOverlay","animation"),backgroundColor:a.getCssColor("Shell-DisplayOverlay","background-color"),backgroundImage:a.getCssImage("Shell-DisplayOverlay","background-image"),opacity:a.getCssFloat("Shell-DisplayOverlay","opacity")};null==a.backgroundImage&&"undefined"==a.backgroundColor&&(a.backgroundImage="static/image/blank.gif");return a}},atom:{style:function(){return{cursor:"default",spacing:4,width:"auto",height:"auto",horizontalChildrenAlign:"center",verticalChildrenAlign:"middle"}}},label:{},"label-graytext":{style:function(a){}},htmlcontainer:{include:"label"},popup:{},iframe:{style:function(){return{}}},resizer:{style:function(){return{}}},"resizer-frame":{style:function(a){return{border:(new rwt.theme.ThemeValues(a)).getCssNamedBorder("shadow")}}},"widget-tool-tip":{include:"popup",style:function(a){var b=new rwt.theme.ThemeValues(a);a={};a.border=b.getCssBorder("Widget-ToolTip","border");a.animation=b.getCssAnimation("Widget-ToolTip","animation");a.padding=b.getCssBoxDimensions("Widget-ToolTip","padding");a.textColor=b.getCssColor("Widget-ToolTip","color");a.font=b.getCssFont("Widget-ToolTip","font");a.backgroundColor=b.getCssColor("Widget-ToolTip","background-color");a.backgroundImage=b.getCssImage("Widget-ToolTip","background-image");a.backgroundGradient=b.getCssGradient("Widget-ToolTip","background-image");a.opacity=b.getCssFloat("Widget-ToolTip","opacity");a.shadow=b.getCssShadow("Widget-ToolTip","box-shadow");a.textAlign=b.getCssIdentifier("Widget-ToolTip","text-align");b=function(a){var b=rwt.theme.ThemeStore.getInstance(),c={};c[a]=!0;a=b.getSizedImage("Widget-ToolTip-Pointer",c,"background-image");return a[0]?a:null};a.pointers=[b("up"),b("right"),b("down"),b("left")];return a}},composite:{style:function(a){var b={};a=new rwt.theme.ThemeValues(a);b.backgroundColor=a.getCssColor("Composite","background-color");b.backgroundImage=a.getCssImage("Composite","background-image");b.backgroundRepeat=a.getCssIdentifier("Composite","background-repeat");b.backgroundPosition=a.getCssIdentifier("Composite","background-position");b.backgroundGradient=a.getCssGradient("Composite","background-image");b.border=a.getCssBorder("Composite","border");b.opacity=a.getCssFloat("Composite","opacity");b.shadow=a.getCssShadow("Composite","box-shadow");b.animation=a.getCssAnimation("Composite","animation");return b}},button:{include:"atom",style:function(a){var b={};a=new rwt.theme.ThemeValues(a);b.font=a.getCssFont("Button","font");var c=a.getCssIdentifier("Button","text-decoration");if(null!=c&&"none"!==c){var d=new rwt.html.Font;d.setSize(b.font.getSize());d.setFamily(b.font.getFamily());d.setBold(b.font.getBold());d.setItalic(b.font.getItalic());d.setDecoration(c);b.font=d}b.textColor=a.getCssColor("Button","color");b.backgroundColor=a.getCssColor("Button","background-color");b.backgroundImage=a.getCssImage("Button","background-image");b.backgroundRepeat=a.getCssIdentifier("Button","background-repeat");b.backgroundPosition=a.getCssIdentifier("Button","background-position");b.backgroundGradient=a.getCssGradient("Button","background-image");b.border=a.getCssBorder("Button","border");b.spacing=a.getCssDimension("Button","spacing");b.padding=a.getCssBoxDimensions("Button","padding");b.cursor=a.getCssCursor("Button","cursor");b.opacity=a.getCssFloat("Button","opacity");b.textShadow=a.getCssShadow("Button","text-shadow");b.shadow=a.getCssShadow("Button","box-shadow");return b}},"push-button":{include:"button",style:function(a){var b={},c=new rwt.theme.ThemeValues(a);b.animation=c.getCssAnimation("Button","animation");a.rwt_ARROW&&(b.icon=c.getCssSizedImage("Button-ArrowIcon","background-image"));return b}},"check-box":{include:"button",style:function(a){return{selectionIndicator:(new rwt.theme.ThemeValues(a)).getCssSizedImage("Button-CheckIcon","background-image")}}},"radio-button":{include:"button",style:function(a){return{selectionIndicator:(new rwt.theme.ThemeValues(a)).getCssSizedImage("Button-RadioIcon","background-image")}}},combo:{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.border=a.getCssBorder("Combo","border");b.backgroundColor=a.getCssColor("Combo","background-color");b.backgroundGradient=a.getCssGradient("Combo","background-image");b.textColor=a.getCssColor("Combo","color");b.font=a.getCssFont("Combo","font");b.shadow=a.getCssShadow("Combo","box-shadow");return b}},"combo-list":{style:function(){return{}}},"combo-list-popup":{style:function(a){a=new rwt.theme.ThemeValues(a);return{border:a.getCssBorder("Combo-List","border"),shadow:a.getCssShadow("Combo-List","box-shadow")}}},"combo-list-row":{style:function(a){a=new rwt.theme.ThemeValues(a);return{foreground:a.getCssColor("Combo-List-Item","color"),background:a.getCssColor("Combo-List-Item","background-color"),backgroundImage:a.getCssImage("Combo-List-Item","background-image"),backgroundGradient:a.getCssGradient("Combo-List-Item","background-image"),textDecoration:a.getCssIdentifier("Combo-List-Item","text-decoration"),textShadow:a.getCssShadow("Combo-List-Item","text-shadow")}}},"combo-list-row-overlay":{style:function(){return{foreground:"undefined",background:"undefined",backgroundImage:null,backgroundGradient:null}}},"combo-list-cell":{style:function(a){return{padding:(new rwt.theme.ThemeValues(a)).getCssBoxDimensions("Combo-List-Item","padding")}}},"combo-field":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.font=a.getCssFont("Combo","font");var c=a.getCssBoxDimensions("Combo-Field","padding");b.paddingRight=c[1];b.paddingLeft=c[3];b.textColor=a.getCssColor("Combo","color");b.textShadow=a.getCssShadow("Combo","text-shadow");return b}},"combo-button":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.border=a.getCssBorder("Combo-Button","border");b.width=a.getCssDimension("Combo-Button","width");b.icon=a.getCssSizedImage("Combo-Button-Icon","background-image");b.icon===rwt.theme.ThemeValues.NONE_IMAGE_SIZED?b.icon=a.getCssSizedImage("Combo-Button","background-image"):b.backgroundImage=a.getCssImage("Combo-Button","background-image");b.backgroundGradient=a.getCssGradient("Combo-Button","background-image");b.backgroundColor=a.getCssColor("Combo-Button","background-color");b.cursor=a.getCssCursor("Combo-Button","cursor");return b}},coolbar:{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.border=a.getCssBorder("*","border");b.backgroundGradient=a.getCssGradient("CoolBar","background-image");b.backgroundImage=a.getCssImage("CoolBar","background-image");return b}},coolitem:{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.border=a.getCssBorder("*","border");return b}},"coolitem-handle":{style:function(a){var b=new rwt.theme.ThemeValues(a),c={};a.vertical?c.height=b.getCssDimension("CoolItem-Handle","width"):c.width=b.getCssDimension("CoolItem-Handle","width");c.border=b.getCssBorder("CoolItem-Handle","border");c.margin=[1,2,1,0];c.cursor="col-resize";return c}},ctabfolder:{style:function(a){var b={};a=new rwt.theme.ThemeValues(a);b.font=a.getCssFont("CTabItem","font");b.textColor=a.getCssColor("CTabItem","color");return b}},"ctabfolder-body":{style:function(a){var b={},c=new rwt.theme.ThemeValues(a);b.backgroundColor=c.getCssColor("CTabItem","background-color");var d=a.rwt_BORDER?1:0,e=c.getCssColor("CTabFolder","border-color"),c=c.getCssBoxDimensions("CTabFolder","border-radius");"0000"!==c.join("")&&(c=a.barTop?[c[0],c[1],0,0]:[0,0,c[2],c[3]]);b.border=new rwt.html.Border(d,"solid",e,c);return b}},"ctabfolder-frame":{style:function(a){var b={};if(a.rwt_FLAT)b.border="undefined";else{var c={selected:!0},d;for(d in a)c[d]=a[d];a=(new rwt.theme.ThemeValues(c)).getCssColor("CTabItem","background-color");b.border=new rwt.html.Border(2,"solid",a)}b.backgroundColor="undefined";return b}},"ctabfolder-separator":{style:function(a){var b={},c=(new rwt.theme.ThemeValues(a)).getCssColor("CTabFolder","border-color");a=a.barTop?new rwt.html.Border([0,0,1,0],"solid",c):new rwt.html.Border([1,0,0,0],"solid",c);b.border=a;return b}},"ctab-item":{style:function(a){var b={},c=new rwt.theme.ThemeValues(a);b.font=c.getCssFont("CTabItem","font");var d=c.getCssIdentifier("CTabItem","text-decoration");if(null!=d&&"none"!==d){var e=new rwt.html.Font;e.setSize(b.font.getSize());e.setFamily(b.font.getFamily());e.setBold(b.font.getBold());e.setItalic(b.font.getItalic());e.setDecoration(d);b.font=e}d=c.getCssBoxDimensions("CTabItem","padding");b.paddingLeft=d[3];b.paddingRight=d[1];b.spacing=c.getCssDimension("CTabItem","spacing");b.textColor=c.getCssColor("CTabItem","color");b.textShadow=c.getCssShadow("CTabItem","text-shadow");d=c.getCssColor("CTabFolder","border-color");e=c.getCssBoxDimensions("CTabFolder","border-radius").slice(0);a.barTop?(e[2]=0,e[3]=0):(e[0]=0,e[1]=0);var f=0<e[0]||0<e[1]||0<e[2]||0<e[3],g=[0,0,0,0];a.nextSelected||(g[a.rwt_RIGHT_TO_LEFT?3:1]=1);a.selected&&(g[a.rwt_RIGHT_TO_LEFT?1:3]=1,a.barTop?g[0]=1:g[2]=1);a.firstItem&&a.rwt_BORDER&&!f&&(g[a.rwt_RIGHT_TO_LEFT?1:3]=1);f&&a.selected?(b.border=new rwt.html.Border(g,"solid",d,e),b.containerOverflow=!1):b.border=new rwt.html.Border(g,"solid",d);b.backgroundColor=c.getCssColor("CTabItem","background-color");b.backgroundImage=c.getCssImage("CTabItem","background-image");b.backgroundGradient=c.getCssGradient("CTabItem","background-image");b.cursor="default";return b}},"ctabfolder-button":{style:function(a){var b={},c=new rwt.theme.ThemeValues(a);a.over?(b.backgroundColor="white",a=c.getCssColor("CTabFolder","border-color"),b.border=new rwt.html.Border(1,"solid",a)):(b.backgroundColor="undefined",b.border="undefined");return b}},"ctabfolder-drop-down-button":{include:"ctabfolder-button",style:function(a){var b={};a=new rwt.theme.ThemeValues(a);b.icon=a.getCssSizedImage("CTabFolder-DropDownButton-Icon","background-image");return b}},"group-box":{style:function(a){a=new rwt.theme.ThemeValues(a);return{backgroundColor:a.getCssColor("Group","background-color"),border:a.getCssBorder("Group","border"),font:a.getCssFont("Group","font"),textColor:a.getCssColor("Group","color")}}},"group-box-legend":{include:"atom",style:function(a){a=new rwt.theme.ThemeValues(a);return{border:a.getCssBorder("Group-Label","border"),padding:a.getCssBoxDimensions("Group-Label","padding"),margin:a.getCssBoxDimensions("Group-Label","margin"),backgroundColor:a.getCssColor("Group-Label","background-color"),backgroundImage:a.getCssImage("Group-Label","background-image"),backgroundRepeat:a.getCssIdentifier("Group-Label","background-repeat"),backgroundPosition:a.getCssIdentifier("Group-Label","background-position"),backgroundGradient:a.getCssGradient("Group-Label","background-image"),font:a.getCssFont("Group","font"),textColor:a.getCssColor("Group-Label","color"),textShadow:a.getCssShadow("Group-Label","text-shadow")}}},"group-box-frame":{style:function(a){a=new rwt.theme.ThemeValues(a);var b=a.getCssBoxDimensions("Group-Frame","margin");return{top:b[0],right:b[1],bottom:b[2],left:b[3],border:a.getCssBorder("Group-Frame","border")}}},"label-wrapper":{style:function(a){var b={};a=new rwt.theme.ThemeValues(a);b.font=a.getCssFont("Label","font");var c=a.getCssIdentifier("Label","text-decoration");if(null!=c&&"none"!=c){var d=new rwt.html.Font;d.setSize(b.font.getSize());d.setFamily(b.font.getFamily());d.setBold(b.font.getBold());d.setItalic(b.font.getItalic());d.setDecoration(c);b.font=d}b.textColor=a.getCssColor("Label","color");b.backgroundColor=a.getCssColor("Label","background-color");b.backgroundImage=a.getCssImage("Label","background-image");b.backgroundRepeat=a.getCssIdentifier("Label","background-repeat");b.backgroundPosition=a.getCssIdentifier("Label","background-position");b.backgroundGradient=a.getCssGradient("Label","background-image");b.border=a.getCssBorder("Label","border");b.cursor=a.getCssCursor("Label","cursor");b.opacity=a.getCssFloat("Label","opacity");b.padding=a.getCssBoxDimensions("Label","padding");b.textShadow=a.getCssShadow("Label","text-shadow");return b}},"separator-line":{style:function(a){var b=new rwt.theme.ThemeValues(a),c={};a.rwt_VERTICAL?c.width=b.getCssDimension("Label-SeparatorLine","width"):c.height=b.getCssDimension("Label-SeparatorLine","width");c.border=b.getCssBorder("Label-SeparatorLine","border");c.backgroundColor=b.getCssColor("Label-SeparatorLine","background-color");c.backgroundImage=b.getCssImage("Label-SeparatorLine","background-image");c.backgroundGradient=b.getCssGradient("Label-SeparatorLine","background-image");return c}},separator:{style:function(a){a=new rwt.theme.ThemeValues(a);return{backgroundColor:a.getCssColor("Label","background-color"),backgroundImage:a.getCssImage("Label","background-image"),backgroundGradient:a.getCssGradient("Label","background-image"),border:a.getCssBorder("Label","border"),cursor:a.getCssCursor("Label","cursor"),opacity:a.getCssFloat("Label","opacity")}}},link:{style:function(a){a=new rwt.theme.ThemeValues(a);return{cursor:"default",padding:a.getCssBoxDimensions("Link","padding"),font:a.getCssFont("Link","font"),border:a.getCssBorder("Link","border"),textColor:a.getCssColor("Link","color"),backgroundColor:a.getCssColor("Link","background-color"),backgroundImage:a.getCssImage("Link","background-image"),backgroundRepeat:a.getCssIdentifier("Link","background-repeat"),backgroundPosition:a.getCssIdentifier("Link","background-position"),textShadow:a.getCssShadow("Link","text-shadow")}}},"link-hyperlink":{style:function(a){var b=new rwt.theme.ThemeValues(a);return{textColor:b.getCssColor("Link-Hyperlink","color"),textShadow:b.getCssShadow("Link-Hyperlink","text-shadow"),textDecoration:b.getCssIdentifier("Link-Hyperlink","text-decoration"),cursor:a.disabled?"default":"pointer"}}},list:{style:function(a){a=new rwt.theme.ThemeValues(a);var b={cursor:"default",overflow:"hidden"};b.font=a.getCssFont("List","font");b.textColor=a.getCssColor("List","color");b.backgroundColor=a.getCssColor("List","background-color");b.border=a.getCssBorder("List","border");return b}},"list-item":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={height:"auto",horizontalChildrenAlign:"left",verticalChildrenAlign:"top",spacing:4},c=a.getCssColor("List-GridLine","color");"undefined"!==c&&(b.border=new rwt.html.Border([0,0,1,0],"solid",c));c=a.getCssColor("List-Item","color");b.textColor="undefined"===c?"inherit":c;b.backgroundColor=a.getCssColor("List-Item","background-color");b.backgroundImage=a.getCssImage("List-Item","background-image");b.backgroundRepeat=a.getCssIdentifier("List-Item","background-repeat");b.backgroundPosition=a.getCssIdentifier("List-Item","background-position");b.backgroundGradient=a.getCssGradient("List-Item","background-image");b.textShadow=a.getCssShadow("List-Item","text-shadow");b.padding=a.getCssBoxDimensions("List-Item","padding");return b}},menu:{style:function(a){a=new rwt.theme.ThemeValues(a);return{width:"auto",height:"auto",textColor:a.getCssColor("Menu","color"),backgroundColor:a.getCssColor("Menu","background-color"),backgroundImage:a.getCssImage("Menu","background-image"),backgroundGradient:a.getCssGradient("Menu","background-image"),animation:a.getCssAnimation("Menu","animation"),font:a.getCssFont("Menu","font"),overflow:"hidden",border:a.getCssBorder("Menu","border"),padding:a.getCssBoxDimensions("Menu","padding"),opacity:a.getCssFloat("Menu","opacity"),shadow:a.getCssShadow("Menu","box-shadow")}}},"menu-item":{style:function(a){var b=new rwt.theme.ThemeValues(a),c={spacing:2,padding:b.getCssBoxDimensions("MenuItem","padding"),backgroundImage:b.getCssImage("MenuItem","background-image"),backgroundGradient:b.getCssGradient("MenuItem","background-image"),backgroundColor:b.getCssColor("MenuItem","background-color"),height:a.onMenuBar?"100%":"auto",opacity:b.getCssFloat("MenuItem","opacity"),textShadow:b.getCssShadow("MenuItem","text-shadow")};c.textColor=b.getCssColor("MenuItem","color");c.arrow=a.cascade?b.getCssSizedImage("MenuItem-CascadeIcon","background-image"):null;a.selected?a.check?c.selectionIndicator=b.getCssSizedImage("MenuItem-CheckIcon","background-image"):a.radio&&(c.selectionIndicator=b.getCssSizedImage("MenuItem-RadioIcon","background-image")):a.radio?(a=b.getCssSizedImage("MenuItem-RadioIcon","background-image")[1],c.selectionIndicator=[null,a,0]):a.check?(a=b.getCssSizedImage("MenuItem-CheckIcon","background-image")[1],c.selectionIndicator=[null,a,0]):c.selectionIndicator=null;return c}},"menu-separator":{style:function(a){a=new rwt.theme.ThemeValues(a);return{height:"auto",marginTop:3,marginBottom:2,padding:a.getCssBoxDimensions("MenuItem","padding"),backgroundImage:a.getCssImage("MenuItem","background-image"),backgroundGradient:a.getCssGradient("MenuItem","background-image"),backgroundColor:a.getCssColor("MenuItem","background-color"),opacity:a.getCssFloat("MenuItem","opacity")}}},"menu-separator-line":{style:function(a){return{right:0,left:0,height:0,border:(new rwt.theme.ThemeValues(a)).getCssNamedBorder("verticalDivider")}}},progressbar:{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.border=a.getCssBorder("ProgressBar","border");b.backgroundColor=a.getCssColor("ProgressBar","background-color");b.backgroundImage=a.getCssImage("ProgressBar","background-image");b.backgroundGradient=a.getCssGradient("ProgressBar","background-image");b.indicatorColor=a.getCssColor("ProgressBar-Indicator","background-color");b.indicatorImage=a.getCssImage("ProgressBar-Indicator","background-image");b.indicatorGradient=a.getCssGradient("ProgressBar-Indicator","background-image");b.indicatorOpacity=a.getCssFloat("ProgressBar-Indicator","opacity");return b}},"scrollbar-blocker":{style:function(){return{backgroundColor:"black",opacity:.2}}},window:{style:function(a){var b=new rwt.theme.ThemeValues(a),c={};c.backgroundColor=b.getCssColor("Shell","background-color");c.backgroundImage=b.getCssImage("Shell","background-image");c.backgroundGradient=b.getCssGradient("Shell","background-image");c.border=b.getCssBorder("Shell","border");c.minWidth=a.rwt_TITLE?80:5;c.minHeight=a.rwt_TITLE?25:5;c.opacity=b.getCssFloat("Shell","opacity");c.shadow=b.getCssShadow("Shell","box-shadow");c.animation=b.getCssAnimation("Shell","animation");return c}},"window-captionbar":{style:function(a){var b=new rwt.theme.ThemeValues(a),c={verticalChildrenAlign:"middle"};c.margin=b.getCssBoxDimensions("Shell-Titlebar","margin");c.padding=b.getCssBoxDimensions("Shell-Titlebar","padding");c.textColor=b.getCssColor("Shell-Titlebar","color");c.backgroundColor=b.getCssColor("Shell-Titlebar","background-color");c.backgroundImage=b.getCssImage("Shell-Titlebar","background-image");c.backgroundGradient=b.getCssGradient("Shell-Titlebar","background-image");c.border=b.getCssBorder("Shell-Titlebar","border");c.minHeight=a.rwt_TITLE?b.getCssDimension("Shell-Titlebar","height"):0;c.maxHeight=c.minHeight;c.textShadow=b.getCssShadow("Shell-Titlebar","text-shadow");return c}},"window-resize-frame":{style:function(a){return{border:(new rwt.theme.ThemeValues(a)).getCssNamedBorder("shadow")}}},"window-captionbar-icon":{style:function(){return{marginRight:2}}},"window-captionbar-title":{style:function(a){return{cursor:"default",font:(new rwt.theme.ThemeValues(a)).getCssFont("Shell-Titlebar","font"),marginRight:2}}},"window-captionbar-minimize-button":{style:function(a){var b={};a=new rwt.theme.ThemeValues(a);b.icon=a.getCssSizedImage("Shell-MinButton","background-image");b.margin=a.getCssBoxDimensions("Shell-MinButton","margin");return b}},"window-captionbar-maximize-button":{style:function(a){var b={};a=new rwt.theme.ThemeValues(a);b.icon=a.getCssSizedImage("Shell-MaxButton","background-image");b.margin=a.getCssBoxDimensions("Shell-MaxButton","margin");return b}},"window-captionbar-restore-button":{include:"window-captionbar-maximize-button"},"window-captionbar-close-button":{style:function(a){var b={};a=new rwt.theme.ThemeValues(a);b.icon=a.getCssSizedImage("Shell-CloseButton","background-image");b.margin=a.getCssBoxDimensions("Shell-CloseButton","margin");return b}},"window-statusbar":{style:function(){return{}}},"window-statusbar-text":{style:function(){return{}}},spinner:{style:function(a){var b={};a=new rwt.theme.ThemeValues(a);b.font=a.getCssFont("Spinner","font");b.textColor=a.getCssColor("Spinner","color");b.backgroundColor=a.getCssColor("Spinner","background-color");b.border=a.getCssBorder("Spinner","border");b.backgroundGradient=a.getCssGradient("Spinner","background-image");b.shadow=a.getCssShadow("Spinner","box-shadow");return b}},"spinner-text-field":{style:function(a){var b={};a=new rwt.theme.ThemeValues(a);var c=a.getCssBoxDimensions("Spinner-Field","padding");b.paddingRight=c[1];b.paddingLeft=c[3];b.textColor=a.getCssColor("Spinner","color");b.textShadow=a.getCssShadow("Spinner","text-shadow");return b}},"spinner-button-up":{style:function(a){var b={};a=new rwt.theme.ThemeValues(a);b.border=a.getCssBorder("Spinner-UpButton","border");b.width=a.getCssDimension("Spinner-UpButton","width");b.icon=a.getCssSizedImage("Spinner-UpButton-Icon","background-image");b.icon===rwt.theme.ThemeValues.NONE_IMAGE?b.icon=a.getCssSizedImage("Spinner-UpButton","background-image"):b.backgroundImage=a.getCssImage("Spinner-UpButton","background-image");b.backgroundGradient=a.getCssGradient("Spinner-UpButton","background-image");b.backgroundColor=a.getCssColor("Spinner-UpButton","background-color");b.cursor=a.getCssCursor("Spinner-UpButton","cursor");return b}},"spinner-button-down":{style:function(a){var b={};a=new rwt.theme.ThemeValues(a);b.border=a.getCssBorder("Spinner-DownButton","border");b.width=a.getCssDimension("Spinner-DownButton","width");b.icon=a.getCssSizedImage("Spinner-DownButton-Icon","background-image");b.icon===rwt.theme.ThemeValues.NONE_IMAGE?b.icon=a.getCssSizedImage("Spinner-DownButton","background-image"):b.backgroundImage=a.getCssImage("Spinner-DownButton","background-image");b.backgroundGradient=a.getCssGradient("Spinner-DownButton","background-image");b.backgroundColor=a.getCssColor("Spinner-DownButton","background-color");b.cursor=a.getCssCursor("Spinner-DownButton","cursor");return b}},"tab-view":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.textColor=a.getCssColor("*","color");b.font=a.getCssFont("TabFolder","font");b.spacing=-1;b.border=a.getCssBorder("TabFolder","border");return b}},"tab-view-bar":{style:function(){return{height:"auto"}}},"tab-view-pane":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={overflow:"hidden"};b.backgroundColor=a.getCssColor("*","background-color");b.border=a.getCssBorder("TabFolder-ContentContainer","border");return b}},"tab-item":{style:function(a){var b={},c=new rwt.theme.ThemeValues(a),d=c.getCssBorder("TabFolder-ContentContainer","border");b.padding=c.getCssBoxDimensions("TabItem","padding");a.checked?(b.zIndex=1,a.barTop?b.paddingBottom=b.padding[2]+d.getWidthTop()+1:b.paddingTop=b.padding[0]+d.getWidthTop()+1):b.zIndex=0;b.border=c.getCssBorder("TabItem","border");b.margin=c.getCssBoxDimensions("TabItem","margin");b.textColor=c.getCssColor("TabItem","color");b.backgroundColor=c.getCssColor("TabItem","background-color");b.backgroundImage=c.getCssImage("TabItem","background-image");b.backgroundRepeat=c.getCssIdentifier("TabItem","background-repeat");b.backgroundPosition=c.getCssIdentifier("TabItem","background-position");b.backgroundGradient=c.getCssGradient("TabItem","background-image");b.textShadow=c.getCssShadow("TabItem","text-shadow");return b}},table:{style:function(a){a=new rwt.theme.ThemeValues(a);return{textColor:a.getCssColor("Table","color"),font:a.getCssFont("Table","font"),border:a.getCssBorder("Table","border"),backgroundColor:a.getCssColor("Table","background-color"),backgroundImage:a.getCssImage("Table","background-image"),backgroundGradient:a.getCssGradient("Table","background-image")}}},"table-column":{style:function(a){var b=new rwt.theme.ThemeValues(a),c={cursor:"default",spacing:2,opacity:a.moving?.85:1};c.padding=b.getCssBoxDimensions("TableColumn","padding");c.textColor=b.getCssColor("TableColumn","color");c.font=b.getCssFont("TableColumn","font");c.backgroundColor=b.getCssColor("TableColumn","background-color");c.backgroundImage=b.getCssImage("TableColumn","background-image");c.backgroundGradient=b.getCssGradient("TableColumn","background-image");var d=[null,null,null,null],e=[0,0,0,0],f=["solid","solid","solid","solid"];if(!a.dummy){var g=rwt.util.Objects.copy(a);g.vertical=!0;g.header=!0;g=(new rwt.theme.ThemeValues(g)).getCssColor("Table-GridLine","color");g="undefined"==g?"transparent":g;d[a.rwt_RIGHT_TO_LEFT?3:1]=g;e[a.rwt_RIGHT_TO_LEFT?3:1]=1;a.moving&&(d[a.rwt_RIGHT_TO_LEFT?1:3]=g,e[a.rwt_RIGHT_TO_LEFT?1:3]=1)}a=b.getCssBorder("TableColumn","border-bottom");e[2]=a.getWidthBottom();f[2]=a.getStyleBottom();d[2]=a.getColorBottom();c.border=new rwt.html.Border(e,f,d);c.textShadow=b.getCssShadow("TableColumn","text-shadow");c.textOverflow=b.getCssIdentifier("TableColumn","text-overflow");return c}},"table-column-resizer":{style:function(){return{width:3,opacity:.3,backgroundColor:"black"}}},"table-column-sort-indicator":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.backgroundImage=a.getCssSizedImage("TableColumn-SortIndicator","background-image");return b}},"table-row":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.background=a.getCssColor("TableItem","background-color");b.backgroundImage=a.getCssImage("TableItem","background-image");b.backgroundGradient=a.getCssGradient("TableItem","background-image");b.foreground=a.getCssColor("TableItem","color");b.textDecoration=a.getCssIdentifier("TableItem","text-decoration");b.textShadow=a.getCssShadow("TableItem","text-shadow");b.textOverflow=a.getCssIdentifier("TableItem","text-overflow");return b}},"table-row-overlay":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.background=a.getCssColor("Table-RowOverlay","background-color");b.backgroundAlpha=a.getCssAlpha("Table-RowOverlay","background-color");b.backgroundImage=a.getCssImage("Table-RowOverlay","background-image");b.backgroundGradient=a.getCssGradient("Table-RowOverlay","background-image");b.foreground=a.getCssColor("Table-RowOverlay","color");return b}},"table-row-check-box":{style:function(a){return{backgroundImage:(new rwt.theme.ThemeValues(a)).getCssImage("Table-Checkbox","background-image")}}},"table-gridline-vertical":{style:function(){var a=(new rwt.theme.ThemeValues({vertical:!0})).getCssColor("Table-GridLine","color"),b={};b.border=new rwt.html.Border([0,0,0,1],"solid","undefined"==a?"transparent":a);return b}},"table-cell":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.spacing=a.getCssDimension("Table-Cell","spacing");b.padding=a.getCssBoxDimensions("Table-Cell","padding");return b}},"text-field":{style:function(a){var b={};a=new rwt.theme.ThemeValues(a);b.font=a.getCssFont("Text","font");b.textColor=a.getCssColor("Text","color");b.backgroundColor=a.getCssColor("Text","background-color");b.backgroundImage=a.getCssImage("Text","background-image");b.backgroundRepeat=a.getCssIdentifier("Text","background-repeat");b.backgroundPosition=a.getCssIdentifier("Text","background-position");b.backgroundGradient=a.getCssGradient("Text","background-image");b.border=a.getCssBorder("Text","border");var c=a.getCssBoxDimensions("Text","padding");b.paddingRight=c[1];b.paddingLeft=c[3];b.textShadow=a.getCssShadow("Text","text-shadow");b.shadow=a.getCssShadow("Text","box-shadow");return b}},"text-field-icon":{style:function(a){var b=new rwt.theme.ThemeValues(a);a=a.search?"Text-Search-Icon":"Text-Cancel-Icon";return{icon:b.getCssSizedImage(a,"background-image"),spacing:b.getCssDimension(a,"spacing")}}},"text-field-message":{style:function(a){var b={};a=new rwt.theme.ThemeValues(a);b.textColor=a.getCssColor("Text-Message","color");var c=a.getCssBoxDimensions("Text","padding");b.paddingRight=c[1];b.paddingLeft=c[3];b.textShadow=a.getCssShadow("Text-Message","text-shadow");return b}},"text-area":{include:"text-field",style:function(a){var b={};b.padding=a.rwt_RIGHT_TO_LEFT?[0,3,0,0]:[0,0,0,3];return b}},toolbar:{style:function(a){a=new rwt.theme.ThemeValues(a);return{font:a.getCssFont("ToolBar","font"),overflow:"hidden",border:a.getCssBorder("ToolBar","border"),textColor:a.getCssColor("ToolBar","color"),backgroundColor:a.getCssColor("ToolBar","background-color"),backgroundGradient:a.getCssGradient("ToolBar","background-image"),backgroundImage:a.getCssImage("ToolBar","background-image"),opacity:a.getCssFloat("ToolBar","opacity")}}},"toolbar-separator":{style:function(){return{}}},"toolbar-separator-line":{style:function(a){var b=new rwt.theme.ThemeValues(a);return a.vertical?{left:2,height:2,right:2,border:b.getCssNamedBorder("verticalDivider")}:{top:2,width:2,bottom:2,border:b.getCssNamedBorder("horizontalDivider")}}},"toolbar-button":{style:function(a){var b=new rwt.theme.ThemeValues(a),c={cursor:"default",overflow:"hidden",width:"auto",verticalChildrenAlign:"middle"};c.spacing=b.getCssDimension("ToolItem","spacing");c.animation=b.getCssAnimation("ToolItem","animation");var d=b.getCssColor("ToolItem","color");c.textColor="undefined"===d?"inherit":d;c.textShadow=b.getCssShadow("ToolItem","text-shadow");c.backgroundColor=b.getCssColor("ToolItem","background-color");c.opacity=b.getCssFloat("ToolItem","opacity");c.backgroundImage=b.getCssImage("ToolItem","background-image");c.backgroundGradient=b.getCssGradient("ToolItem","background-image");c.border=b.getCssBorder("ToolItem","border");c.padding=b.getCssBoxDimensions("ToolItem","padding");c.vertical=!a.rwt_RIGHT;c.horizontalChildrenAlign=a.rwt_VERTICAL&&a.rwt_RIGHT?"left":"center";a.dropDown?(c.dropDownArrow=b.getCssSizedImage("ToolItem-DropDownIcon","background-image"),c.separatorBorder=b.getCssBorder("ToolItem-DropDownIcon","border")):(c.dropDownArrow=null,c.separatorBorder=null);return c}},tree:{style:function(a){a=new rwt.theme.ThemeValues(a);return{backgroundColor:a.getCssColor("Tree","background-color"),textColor:a.getCssColor("Tree","color"),font:a.getCssFont("Tree","font"),border:a.getCssBorder("Tree","border")}}},"tree-row":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.background=a.getCssColor("TreeItem","background-color");b.backgroundImage=a.getCssImage("TreeItem","background-image");b.backgroundGradient=a.getCssGradient("TreeItem","background-image");b.foreground=a.getCssColor("TreeItem","color");b.textDecoration=a.getCssIdentifier("TreeItem","text-decoration");b.textShadow=a.getCssShadow("TreeItem","text-shadow");b.textOverflow=a.getCssIdentifier("TreeItem","text-overflow");return b}},"tree-row-overlay":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.background=a.getCssColor("Tree-RowOverlay","background-color");b.backgroundAlpha=a.getCssAlpha("Tree-RowOverlay","background-color");b.backgroundImage=a.getCssImage("Tree-RowOverlay","background-image");b.backgroundGradient=a.getCssGradient("Tree-RowOverlay","background-image");b.foreground=a.getCssColor("Tree-RowOverlay","color");return b}},"tree-row-check-box":{style:function(a){return{backgroundImage:(new rwt.theme.ThemeValues(a)).getCssImage("Tree-Checkbox","background-image")}}},"tree-row-indent":{style:function(a){return{backgroundImage:(new rwt.theme.ThemeValues(a)).getCssImage("Tree-Indent","background-image")}}},"tree-column":{style:function(a){var b=new rwt.theme.ThemeValues(a),c={cursor:"default",spacing:2};c.textColor=b.getCssColor("TreeColumn","color");c.font=b.getCssFont("TreeColumn","font");a.footer?(c.backgroundColor="#dddddd",c.backgroundImage=null,c.backgroundGradient=null):(c.backgroundColor=b.getCssColor("TreeColumn","background-color"),c.backgroundImage=b.getCssImage("TreeColumn","background-image"),c.backgroundGradient=b.getCssGradient("TreeColumn","background-image"));c.opacity=a.moving?.85:1;c.padding=b.getCssBoxDimensions("TreeColumn","padding");var d=[null,null,null,null],e=[0,0,0,0],f=["solid","solid","solid","solid"];if(!a.dummy&&!a.footer){var g=rwt.util.Objects.copy(a);g.vertical=!0;g.header=!0;g=(new rwt.theme.ThemeValues(g)).getCssColor("Tree-GridLine","color");g="undefined"==g?"transparent":g;d[a.rwt_RIGHT_TO_LEFT?3:1]=g;e[a.rwt_RIGHT_TO_LEFT?3:1]=1;a.moving&&(d[a.rwt_RIGHT_TO_LEFT?1:3]=g,e[a.rwt_RIGHT_TO_LEFT?1:3]=1)}g=b.getCssBorder("TreeColumn","border-bottom");a.footer?(e[0]=g.getWidthBottom(),f[0]="solid",d[0]="#000000"):(e[2]=g.getWidthBottom(),f[2]=g.getStyleBottom(),d[2]=g.getColorBottom());c.border=new rwt.html.Border(e,f,d);c.textShadow=b.getCssShadow("TreeColumn","text-shadow");c.textOverflow=b.getCssIdentifier("TreeColumn","text-overflow");return c}},"tree-column-sort-indicator":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.backgroundImage=a.getCssSizedImage("TreeColumn-SortIndicator","background-image");return b}},"tree-column-chevron":{style:function(a){var b={},c=rwt.remote.Connection.RESOURCE_PATH+"widget/rap/";a.loading?b.backgroundImage=[c+"tree/loading.gif",16,16]:(c=c+"arrows/chevron-"+(a.expanded?"left":"right"),c+=a.mouseover?"-hover":"",b.backgroundImage=[c+".png",10,7]);return b}},"tree-cell":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.spacing=a.getCssDimension("Tree-Cell","spacing");b.padding=a.getCssBoxDimensions("Tree-Cell","padding");return b}},scale:{style:function(a){a=new rwt.theme.ThemeValues(a);return{border:a.getCssBorder("Scale","border"),font:a.getCssFont("*","font"),textColor:a.getCssColor("*","color"),backgroundColor:a.getCssColor("Scale","background-color"),backgroundImage:a.getCssImage("Scale","background-image"),backgroundGradient:a.getCssGradient("Scale","background-image")}}},"scale-line":{include:"image",style:function(a){var b={},c=rwt.remote.Connection.RESOURCE_PATH+"widget/rap/scale/";a.rwt_HORIZONTAL?(b.left=rwt.widgets.Scale.PADDING,b.top=rwt.widgets.Scale.SCALE_LINE_OFFSET,b.source=c+"h_line.gif"):(b.left=rwt.widgets.Scale.SCALE_LINE_OFFSET,b.top=rwt.widgets.Scale.PADDING,b.source=c+"v_line.gif");return b}},"scale-thumb":{include:"atom",style:function(a){var b=new rwt.theme.ThemeValues(a),c={};a.rwt_HORIZONTAL?(c.left=rwt.widgets.Scale.PADDING,c.top=rwt.widgets.Scale.THUMB_OFFSET,c.width=11,c.height=21):(c.left=rwt.widgets.Scale.THUMB_OFFSET,c.top=rwt.widgets.Scale.PADDING,c.width=21,c.height=11);c.border=b.getCssBorder("Scale-Thumb","border");c.backgroundColor=b.getCssColor("Scale-Thumb","background-color");c.backgroundImage=b.getCssImage("Scale-Thumb","background-image");c.backgroundGradient=b.getCssGradient("Scale-Thumb","background-image");return c}},"datetime-date":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.border=a.getCssBorder("DateTime","border");b.font=a.getCssFont("DateTime","font");b.textColor=a.getCssColor("DateTime","color");b.backgroundColor=a.getCssColor("DateTime","background-color");b.backgroundGradient=a.getCssGradient("DateTime","background-image");b.textShadow=a.getCssShadow("DateTime","text-shadow");b.shadow=a.getCssShadow("DateTime","box-shadow");return b}},"datetime-time":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.border=a.getCssBorder("DateTime","border");b.font=a.getCssFont("DateTime","font");b.textColor=a.getCssColor("DateTime","color");b.backgroundColor=a.getCssColor("DateTime","background-color");b.backgroundGradient=a.getCssGradient("DateTime","background-image");b.textShadow=a.getCssShadow("DateTime","text-shadow");b.shadow=a.getCssShadow("DateTime","box-shadow");return b}},"datetime-calendar":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.border=a.getCssBorder("DateTime","border");b.font=a.getCssFont("DateTime","font");b.textColor=a.getCssColor("DateTime","color");b.backgroundColor=a.getCssColor("DateTime","background-color");b.textShadow=a.getCssShadow("DateTime","text-shadow");return b}},"datetime-field":{style:function(a){var b=new rwt.theme.ThemeValues(a),c={cursor:"default",textAlign:"center",padding:[0,3]};a.disabled?(c.textColor=b.getCssColor("*","color"),c.backgroundColor="undefined"):(c.textColor=b.getCssColor("DateTime-Field","color"),c.backgroundColor=b.getCssColor("DateTime-Field","background-color"));c.textShadow=b.getCssShadow("DateTime-Field","text-shadow");return c}},"datetime-separator":{style:function(){return{cursor:"default"}}},"datetime-button-up":{style:function(a){var b={};a=new rwt.theme.ThemeValues(a);b.border=a.getCssBorder("DateTime-UpButton","border");b.width=a.getCssDimension("DateTime-UpButton","width");b.icon=a.getCssSizedImage("DateTime-UpButton-Icon","background-image");b.icon===rwt.theme.ThemeValues.NONE_IMAGE?b.icon=a.getCssSizedImage("DateTime-UpButton","background-image"):b.backgroundImage=a.getCssImage("DateTime-UpButton","background-image");b.backgroundGradient=a.getCssGradient("DateTime-UpButton","background-image");b.backgroundColor=a.getCssColor("DateTime-UpButton","background-color");b.cursor=a.getCssCursor("DateTime-UpButton","cursor");return b}},"datetime-button-down":{style:function(a){var b={};a=new rwt.theme.ThemeValues(a);b.border=a.getCssBorder("DateTime-DownButton","border");b.width=a.getCssDimension("DateTime-DownButton","width");b.icon=a.getCssSizedImage("DateTime-DownButton-Icon","background-image");b.icon===rwt.theme.ThemeValues.NONE_IMAGE?b.icon=a.getCssSizedImage("DateTime-DownButton","background-image"):b.backgroundImage=a.getCssImage("DateTime-DownButton","background-image");b.backgroundGradient=a.getCssGradient("DateTime-DownButton","background-image");b.backgroundColor=a.getCssColor("DateTime-DownButton","background-color");b.cursor=a.getCssCursor("DateTime-DownButton","cursor");return b}},"datetime-drop-down-button":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.border=a.getCssBorder("DateTime-DropDownButton","border");b.icon=a.getCssSizedImage("DateTime-DropDownButton-Icon","background-image");b.icon===rwt.theme.ThemeValues.NONE_IMAGE?b.icon=a.getCssSizedImage("DateTime-DropDownButton","background-image"):b.backgroundImage=a.getCssImage("DateTime-DropDownButton","background-image");b.backgroundGradient=a.getCssGradient("DateTime-DropDownButton","background-image");b.backgroundColor=a.getCssColor("DateTime-DropDownButton","background-color");b.cursor=a.getCssCursor("DateTime-DropDownButton","cursor");return b}},"datetime-drop-down-calendar":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.border=a.getCssBorder("DateTime-DropDownCalendar","border");b.backgroundColor=a.getCssColor("DateTime","background-color");return b}},"calendar-navBar":{style:function(a){a=new rwt.theme.ThemeValues(a);return{border:a.getCssBorder("DateTime-Calendar-Navbar","border"),backgroundColor:a.getCssColor("DateTime-Calendar-Navbar","background-color"),backgroundImage:a.getCssImage("DateTime-Calendar-Navbar","background-image"),backgroundGradient:a.getCssGradient("DateTime-Calendar-Navbar","background-image"),padding:[4,4,4,4]}}},"calendar-toolbar-button":{style:function(a){var b={spacing:4,width:16,height:16,clipWidth:16,clipHeight:16,verticalChildrenAlign:"middle"};b.padding=a.pressed||a.checked||a.abandoned?[2,0,0,2]:2;return b}},"calendar-toolbar-previous-year-button":{include:"calendar-toolbar-button",style:function(a){a=new rwt.theme.ThemeValues(a);return{icon:a.getCssSizedImage("DateTime-Calendar-PreviousYearButton","background-image"),cursor:a.getCssCursor("DateTime-Calendar-PreviousYearButton","cursor")}}},"calendar-toolbar-previous-month-button":{include:"calendar-toolbar-button",style:function(a){a=new rwt.theme.ThemeValues(a);return{icon:a.getCssSizedImage("DateTime-Calendar-PreviousMonthButton","background-image"),cursor:a.getCssCursor("DateTime-Calendar-PreviousMonthButton","cursor")}}},"calendar-toolbar-next-month-button":{include:"calendar-toolbar-button",style:function(a){a=new rwt.theme.ThemeValues(a);return{icon:a.getCssSizedImage("DateTime-Calendar-NextMonthButton","background-image"),cursor:a.getCssCursor("DateTime-Calendar-NextMonthButton","cursor")}}},"calendar-toolbar-next-year-button":{include:"calendar-toolbar-button",style:function(a){a=new rwt.theme.ThemeValues(a);return{icon:a.getCssSizedImage("DateTime-Calendar-NextYearButton","background-image"),cursor:a.getCssCursor("DateTime-Calendar-NextYearButton","cursor")}}},"calendar-monthyear":{style:function(a){a=new rwt.theme.ThemeValues(a);return{font:a.getCssFont("DateTime-Calendar-Navbar","font"),textAlign:"center",textColor:a.getCssColor("DateTime-Calendar-Navbar","color"),textShadow:a.getCssShadow("DateTime-Calendar-Navbar","text-shadow"),verticalAlign:"middle",cursor:"default"}}},"calendar-datepane":{style:function(a){return{backgroundColor:"undefined"}}},"calendar-week":{style:function(a){return{textAlign:"center",verticalAlign:"middle",border:new rwt.html.Border(a.header?a.rwt_RIGHT_TO_LEFT?[0,0,1,1]:[0,1,1,0]:a.rwt_RIGHT_TO_LEFT?[0,0,0,1]:[0,1,0,0],"solid","gray")}}},"calendar-weekday":{style:function(a){var b=new rwt.theme.ThemeValues(a);a=new rwt.html.Border([0,0,1,0],"solid","gray");b=b.getCssFont("DateTime","font");b=rwt.html.Font.fromString(b.toCss());b.setSize(11);return{font:b,border:a,textAlign:"center"}}},"calendar-day":{style:function(a){var b=new rwt.theme.ThemeValues(a),c={textAlign:"center",verticalAlign:"middle"};a.disabled?(c.textColor=b.getCssColor("*","color"),c.backgroundColor="undefined"):(c.textColor=b.getCssColor("DateTime-Calendar-Day","color"),c.backgroundColor=b.getCssColor("DateTime-Calendar-Day","background-color"));c.border=b.getCssBorder("DateTime-Calendar-Day","border");c.textShadow=b.getCssShadow("DateTime-Calendar-Day","text-shadow");return c}},"expand-bar":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.border=a.getCssBorder("ExpandBar","border");b.font=a.getCssFont("ExpandBar","font");b.textColor=a.getCssColor("ExpandBar","color");return b}},"expand-item":{style:function(a){a=new rwt.theme.ThemeValues(a);return{overflow:"hidden",border:a.getCssBorder("ExpandItem","border"),chevronIcon:a.getCssSizedImage("ExpandItem-Button","background-image")}}},"expand-item-header":{style:function(a){a=new rwt.theme.ThemeValues(a);return{width:"100%",horizontalChildrenAlign:"left",padding:[0,4,0,4],border:a.getCssBorder("ExpandItem-Header","border"),backgroundColor:a.getCssColor("ExpandItem-Header","background-color"),cursor:a.getCssCursor("ExpandItem-Header","cursor"),backgroundImage:a.getCssImage("ExpandItem-Header","background-image"),backgroundGradient:a.getCssGradient("ExpandItem-Header","background-image"),textShadow:a.getCssShadow("ExpandItem-Header","text-shadow")}}},sash:{style:function(a){var b=new rwt.theme.ThemeValues(a);return{backgroundColor:b.getCssColor("Sash","background-color"),backgroundImage:b.getCssImage("Sash","background-image"),border:b.getCssBorder("Sash","border"),cursor:a.disabled?"undefined":a.horizontal?"row-resize":"col-resize"}}},"sash-slider":{style:function(){return{zIndex:1E7,opacity:.3,backgroundColor:"black"}}},"sash-handle":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.backgroundImage=a.getCssImage("Sash-Handle","background-image");b.backgroundGradient=a.getCssGradient("Sash-Handle","background-image");b.backgroundRepeat="no-repeat";return b}},slider:{style:function(a){a=new rwt.theme.ThemeValues(a);return{border:a.getCssBorder("Slider","border"),font:a.getCssFont("*","font"),textColor:a.getCssColor("*","color"),backgroundColor:a.getCssColor("Slider","background-color")}}},"slider-thumb":{include:"atom",style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.backgroundColor=a.getCssColor("Slider-Thumb","background-color");b.border=a.getCssBorder("Slider-Thumb","border");b.backgroundImage=a.getCssImage("Slider-Thumb","background-image");b.backgroundGradient=a.getCssGradient("Slider-Thumb","background-image");return b}},"slider-min-button":{include:"atom",style:function(a){var b=new rwt.theme.ThemeValues(a),c={};c.padding=b.getCssBoxDimensions("Slider-DownButton","padding");c.backgroundColor=b.getCssColor("Slider-DownButton","background-color");c.icon=b.getCssSizedImage("Slider-DownButton-Icon","background-image");c.icon===rwt.theme.ThemeValues.NONE_IMAGE_SIZED?c.icon=b.getCssSizedImage("Slider-DownButton","background-image"):c.backgroundImage=b.getCssImage("Slider-DownButton","background-image");c.backgroundGradient=b.getCssGradient("Slider-DownButton","background-image");c.border=b.getCssBorder("Slider-DownButton","border");a.rwt_HORIZONTAL?c.width=16:c.height=16;c.cursor=b.getCssCursor("Slider-DownButton","cursor");return c}},"slider-max-button":{include:"atom",style:function(a){var b=new rwt.theme.ThemeValues(a),c={};c.padding=b.getCssBoxDimensions("Slider-UpButton","padding");c.backgroundColor=b.getCssColor("Slider-UpButton","background-color");c.icon=b.getCssSizedImage("Slider-UpButton-Icon","background-image");c.icon===rwt.theme.ThemeValues.NONE_IMAGE_SIZED?c.icon=b.getCssSizedImage("Slider-UpButton","background-image"):c.backgroundImage=b.getCssImage("Slider-UpButton","background-image");c.backgroundGradient=b.getCssGradient("Slider-UpButton","background-image");c.border=b.getCssBorder("Slider-UpButton","border");a.rwt_HORIZONTAL?c.width=16:c.height=16;c.cursor=b.getCssCursor("Slider-UpButton","cursor");return c}},"tool-tip":{include:"popup",style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.width=a.getCssDimension("ToolTip","width");b.height=a.getCssDimension("ToolTip","height");b.minWidth=36;b.minHeight=36;b.cursor=a.getCssCursor("ToolTip","cursor");b.font=a.getCssFont("ToolTip","font");b.textColor=a.getCssColor("ToolTip","color");b.padding=a.getCssBoxDimensions("ToolTip","padding");b.border=a.getCssBorder("ToolTip","border");b.backgroundColor=a.getCssColor("ToolTip","background-color");b.backgroundImage=a.getCssImage("ToolTip","background-image");b.backgroundGradient=a.getCssGradient("ToolTip","background-image");b.animation=a.getCssAnimation("ToolTip","animation");b.opacity=a.getCssFloat("ToolTip","opacity");b.shadow=a.getCssShadow("ToolTip","box-shadow");return b}},"tool-tip-image":{include:"image",style:function(a){return{source:(new rwt.theme.ThemeValues(a)).getCssImage("ToolTip-Image","background-image")}}},"tool-tip-text":{style:function(a){a=new rwt.theme.ThemeValues(a);return{font:a.getCssFont("ToolTip-Text","font"),textColor:a.getCssColor("ToolTip-Text","color"),textShadow:a.getCssShadow("ToolTip-Text","text-shadow")}}},"tool-tip-message":{style:function(a){a=new rwt.theme.ThemeValues(a);return{font:a.getCssFont("ToolTip-Message","font"),textColor:a.getCssColor("ToolTip-Message","color"),textShadow:a.getCssShadow("ToolTip-Message","text-shadow")}}},ccombo:{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.border=a.getCssBorder("CCombo","border");b.backgroundColor=a.getCssColor("CCombo","background-color");b.backgroundGradient=a.getCssGradient("CCombo","background-image");b.textColor=a.getCssColor("CCombo","color");b.font=a.getCssFont("CCombo","font");b.shadow=a.getCssShadow("CCombo","box-shadow");return b}},"ccombo-list":{style:function(){return{}}},"ccombo-list-popup":{style:function(a){a=new rwt.theme.ThemeValues(a);return{border:a.getCssBorder("CCombo-List","border"),shadow:a.getCssShadow("CCombo-List","box-shadow")}}},"ccombo-list-row":{style:function(a){a=new rwt.theme.ThemeValues(a);return{foreground:a.getCssColor("CCombo-List-Item","color"),background:a.getCssColor("CCombo-List-Item","background-color"),backgroundImage:a.getCssImage("CCombo-List-Item","background-image"),backgroundGradient:a.getCssGradient("CCombo-List-Item","background-image"),textDecoration:a.getCssIdentifier("CCombo-List-Item","text-decoration"),textShadow:a.getCssShadow("CCombo-List-Item","text-shadow")}}},"ccombo-list-row-overlay":{style:function(){return{foreground:"undefined",background:"undefined",backgroundImage:null,backgroundGradient:null}}},"ccombo-list-cell":{style:function(a){return{padding:(new rwt.theme.ThemeValues(a)).getCssBoxDimensions("CCombo-List-Item","padding")}}},"ccombo-field":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.font=a.getCssFont("CCombo","font");var c=a.getCssBoxDimensions("CCombo-Field","padding");b.paddingRight=c[1];b.paddingLeft=c[3];b.textColor=a.getCssColor("CCombo","color");b.textShadow=a.getCssShadow("CCombo","text-shadow");return b}},"ccombo-button":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.border=a.getCssBorder("CCombo-Button","border");b.width=a.getCssDimension("CCombo-Button","width");b.icon=a.getCssSizedImage("CCombo-Button-Icon","background-image");b.icon===rwt.theme.ThemeValues.NONE_IMAGE_SIZED?b.icon=a.getCssSizedImage("CCombo-Button","background-image"):b.backgroundImage=a.getCssImage("CCombo-Button","background-image");b.backgroundGradient=a.getCssGradient("CCombo-Button","background-image");b.backgroundColor=a.getCssColor("CCombo-Button","background-color");b.cursor=a.getCssCursor("CCombo-Button","cursor");return b}},clabel:{style:function(a){var b=new rwt.theme.ThemeValues(a),c={};c.textColor=b.getCssColor("CLabel","color");c.backgroundColor=b.getCssColor("CLabel","background-color");c.font=b.getCssFont("CLabel","font");c.border=a.rwt_SHADOW_IN?b.getCssNamedBorder("thinInset"):a.rwt_SHADOW_OUT?b.getCssNamedBorder("thinOutset"):b.getCssBorder("CLabel","border");c.backgroundImage=b.getCssImage("CLabel","background-image");c.backgroundRepeat=b.getCssIdentifier("CLabel","background-repeat");c.backgroundPosition=b.getCssIdentifier("CLabel","background-position");c.backgroundGradient=b.getCssGradient("CLabel","background-image");c.cursor=b.getCssCursor("CLabel","cursor");c.padding=b.getCssBoxDimensions("CLabel","padding");c.spacing=b.getCssDimension("CLabel","spacing");c.opacity=b.getCssFloat("CLabel","opacity");c.textShadow=b.getCssShadow("CLabel","text-shadow");return c}},browser:{style:function(a){return{border:(new rwt.theme.ThemeValues(a)).getCssBorder("Browser","border"),backgroundColor:"white"}}},scrolledcomposite:{style:function(a){var b=new rwt.theme.ThemeValues(a),c={};c.border=a.rwt_BORDER?b.getCssNamedBorder("shadow"):b.getCssBorder("*","border");return c}},scrollbar:{style:function(a){var b=new rwt.theme.ThemeValues(a),c={border:b.getCssBorder("ScrollBar","border"),backgroundColor:b.getCssColor("ScrollBar","background-color"),backgroundImage:b.getCssImage("ScrollBar","background-image"),backgroundGradient:b.getCssGradient("ScrollBar","background-image"),opacity:b.getCssFloat("ScrollBar","opacity")},b=b.getCssDimension("ScrollBar","width");a.rwt_HORIZONTAL?c.height=b:c.width=b;return c}},"scrollbar-thumb":{include:"atom",style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.backgroundColor=a.getCssColor("ScrollBar-Thumb","background-color");b.border=a.getCssBorder("ScrollBar-Thumb","border");b.backgroundImage=a.getCssImage("ScrollBar-Thumb","background-image");b.backgroundGradient=a.getCssGradient("ScrollBar-Thumb","background-image");b.icon=a.getCssSizedImage("ScrollBar-Thumb-Icon","background-image");return b}},"scrollbar-min-button":{include:"atom",style:function(a){var b=new rwt.theme.ThemeValues(a),c={};c.backgroundColor=b.getCssColor("ScrollBar-DownButton","background-color");c.icon=b.getCssSizedImage("ScrollBar-DownButton-Icon","background-image");c.icon===rwt.theme.ThemeValues.NONE_IMAGE_SIZED?c.icon=b.getCssSizedImage("ScrollBar-DownButton","background-image"):c.backgroundImage=b.getCssImage("ScrollBar-DownButton","background-image");c.backgroundGradient=b.getCssGradient("ScrollBar-DownButton","background-image");c.border=b.getCssBorder("ScrollBar-DownButton","border");var d=b.getCssDimension("ScrollBar","width");a.rwt_HORIZONTAL?c.width=d:c.height=d;c.cursor=b.getCssCursor("ScrollBar-DownButton","cursor");return c}},"scrollbar-max-button":{include:"atom",style:function(a){var b=new rwt.theme.ThemeValues(a),c={};c.backgroundColor=b.getCssColor("ScrollBar-UpButton","background-color");c.icon=b.getCssSizedImage("ScrollBar-UpButton-Icon","background-image");c.icon===rwt.theme.ThemeValues.NONE_IMAGE_SIZED?c.icon=b.getCssSizedImage("ScrollBar-UpButton","background-image"):c.backgroundImage=b.getCssImage("ScrollBar-UpButton","background-image");c.backgroundGradient=b.getCssGradient("ScrollBar-UpButton","background-image");c.border=b.getCssBorder("ScrollBar-UpButton","border");var d=b.getCssDimension("ScrollBar","width");a.rwt_HORIZONTAL?c.width=d:c.height=d;c.cursor=b.getCssCursor("ScrollBar-UpButton","cursor");return c}},"file-upload":{include:"atom",style:function(a){var b={};a=new rwt.theme.ThemeValues(a);b.font=a.getCssFont("FileUpload","font");b.textColor=a.getCssColor("FileUpload","color");b.backgroundColor=a.getCssColor("FileUpload","background-color");b.backgroundImage=a.getCssImage("FileUpload","background-image");b.backgroundRepeat=a.getCssIdentifier("FileUpload","background-repeat");b.backgroundPosition=a.getCssIdentifier("FileUpload","background-position");b.backgroundGradient=a.getCssGradient("FileUpload","background-image");b.border=a.getCssBorder("FileUpload","border");b.spacing=a.getCssDimension("FileUpload","spacing");b.padding=a.getCssBoxDimensions("FileUpload","padding");b.cursor=a.getCssCursor("FileUpload","cursor");b.opacity=a.getCssFloat("FileUpload","opacity");b.textShadow=a.getCssShadow("FileUpload","text-shadow");b.animation=a.getCssAnimation("FileUpload","animation");return b}},dropdown:{style:function(){return{}}},"dropdown-popup":{style:function(a){a=new rwt.theme.ThemeValues(a);return{border:a.getCssBorder("DropDown","border"),shadow:a.getCssShadow("DropDown","box-shadow")}}},"dropdown-row":{style:function(a){a=new rwt.theme.ThemeValues(a);return{foreground:a.getCssColor("DropDown-Item","color"),background:a.getCssColor("DropDown-Item","background-color"),backgroundImage:a.getCssImage("DropDown-Item","background-image"),backgroundGradient:a.getCssGradient("DropDown-Item","background-image"),textDecoration:a.getCssIdentifier("DropDown-Item","text-decoration"),textShadow:a.getCssShadow("DropDown-Item","text-shadow")}}},"dropdown-row-overlay":{style:function(){return{foreground:"undefined",background:"undefined",backgroundImage:null,backgroundGradient:null}}},"dropdown-cell":{style:function(a){return{padding:(new rwt.theme.ThemeValues(a)).getCssBoxDimensions("DropDown-Item","padding")}}},grid:{style:function(a){a=new rwt.theme.ThemeValues(a);return{backgroundColor:a.getCssColor("Grid","background-color"),textColor:a.getCssColor("Grid","color"),font:a.getCssFont("Grid","font"),border:a.getCssBorder("Grid","border")}}},"grid-row":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.background=a.getCssColor("GridItem","background-color");b.backgroundImage=a.getCssImage("GridItem","background-image");b.backgroundGradient=a.getCssGradient("GridItem","background-image");b.foreground=a.getCssColor("GridItem","color");b.textDecoration=a.getCssIdentifier("GridItem","text-decoration");b.textShadow=a.getCssShadow("GridItem","text-shadow");b.textOverflow=a.getCssIdentifier("GridItem","text-overflow");return b}},"grid-row-overlay":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.background=a.getCssColor("Grid-RowOverlay","background-color");b.backgroundAlpha=a.getCssAlpha("Grid-RowOverlay","background-color");b.backgroundImage=a.getCssImage("Grid-RowOverlay","background-image");b.backgroundGradient=a.getCssGradient("Grid-RowOverlay","background-image");b.foreground=a.getCssColor("Grid-RowOverlay","color");return b}},"grid-row-check-box":{style:function(a){return{backgroundImage:(new rwt.theme.ThemeValues(a)).getCssImage("Grid-Checkbox","background-image")}}},"grid-row-indent":{style:function(a){return{backgroundImage:(new rwt.theme.ThemeValues(a)).getCssImage("Grid-Indent","background-image")}}},"grid-column":{style:function(a){var b=new rwt.theme.ThemeValues(a),c={cursor:"default",spacing:2};c.textColor=b.getCssColor("GridColumn","color");c.font=b.getCssFont("GridColumn","font");c.backgroundColor=b.getCssColor("GridColumn","background-color");c.backgroundImage=b.getCssImage("GridColumn","background-image");c.backgroundGradient=b.getCssGradient("GridColumn","background-image");c.opacity=a.moving?.85:1;c.padding=b.getCssBoxDimensions("GridColumn","padding");var d=[null,null,null,null],e=[0,0,0,0],f=["solid","solid","solid","solid"];if(!a.dummy&&!a.footer){var g=(new rwt.theme.ThemeValues({vertical:!0,header:!0})).getCssColor("Grid-GridLine","color"),g="undefined"==g?"transparent":g;d[a.rwt_RIGHT_TO_LEFT?3:1]=g;e[a.rwt_RIGHT_TO_LEFT?3:1]=1;a.moving&&(d[a.rwt_RIGHT_TO_LEFT?1:3]=g,e[a.rwt_RIGHT_TO_LEFT?1:3]=1)}g=b.getCssBorder("GridColumn","border-bottom");a.footer?(e[0]=g.getWidthBottom(),f[0]=g.getStyleBottom(),d[0]=g.getColorBottom()):(e[2]=g.getWidthBottom(),f[2]=g.getStyleBottom(),d[2]=g.getColorBottom());c.border=new rwt.html.Border(e,f,d);c.textShadow=b.getCssShadow("GridColumn","text-shadow");c.textOverflow=b.getCssIdentifier("GridColumn","text-overflow");return c}},"grid-column-sort-indicator":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.backgroundImage=a.getCssSizedImage("GridColumn-SortIndicator","background-image");return b}},"grid-column-chevron":{style:function(a){var b={},c=rwt.remote.Connection.RESOURCE_PATH+"widget/rap/";a.loading?b.backgroundImage=[c+"tree/loading.gif",32,32]:(c=c+"arrows/chevron-"+(a.expanded?"left":"right"),c+=a.mouseover?"-hover":"",b.backgroundImage=[c+".png",32,32]);return b}},"grid-cell":{style:function(a){a=new rwt.theme.ThemeValues(a);var b={};b.spacing=a.getCssDimension("Grid-Cell","spacing");b.padding=a.getCssBoxDimensions("Grid-Cell","padding");return b}}}});